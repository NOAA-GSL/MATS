{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr/packages/ostrio:flow-router-extra/client/renderer.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/ostrio:flow-router-extra/client/renderer.js","filename":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr/packages/ostrio:flow-router-extra/client/renderer.js","passPerPreset":false,"envName":"development","cwd":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr","root":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr","plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr/packages/ostrio:flow-router-extra/client/renderer.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/ostrio:flow-router-extra/client/renderer.js"}},"code":"var Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\n\nvar _helpers;\n\nmodule.link(\"./../lib/_helpers.js\", {\n  _helpers: function (v) {\n    _helpers = v;\n  }\n}, 1);\nvar requestAnimFrame;\nmodule.link(\"./modules.js\", {\n  requestAnimFrame: function (v) {\n    requestAnimFrame = v;\n  }\n}, 2);\nvar Blaze;\nvar Template;\n\nif (Package.templating && Package.blaze) {\n  Blaze = Package.blaze.Blaze;\n  Template = Package.templating.Template;\n}\n\nvar _BlazeRemove = function (view) {\n  try {\n    Blaze.remove(view);\n  } catch (_e) {\n    try {\n      Blaze._destroyView(view);\n\n      view._domrange.destroy();\n    } catch (__e) {\n      view._domrange.destroy();\n    }\n  }\n};\n\nvar BlazeRenderer =\n/*#__PURE__*/\nfunction () {\n  function BlazeRenderer() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (!Blaze || !Template) {\n      return;\n    }\n\n    this.rootElement = opts.rootElement || function () {\n      return document.body;\n    };\n\n    var self = this;\n    this.isRendering = false;\n    this.queue = [];\n    this.yield = null;\n    this.cache = {};\n    this.old = this.newState();\n    this.old.materialized = true;\n    this.inMemoryRendering = opts.inMemoryRendering || false;\n\n    this.getMemoryElement = opts.getMemoryElement || function () {\n      return document.createElement('div');\n    };\n\n    if (!this.getMemoryElement || !_helpers.isFunction(this.getMemoryElement)) {\n      throw new Meteor.Error(400, '{getMemoryElement} must be a function, which returns new DOM element');\n    }\n\n    if (!this.rootElement || !_helpers.isFunction(this.rootElement)) {\n      throw new Meteor.Error(400, 'You must pass function into BlazeRenderer constructor, which returns DOM element');\n    }\n\n    Template.yield = new Template('yield', function () {});\n    Template.yield.onCreated(function () {\n      self.yield = this;\n    });\n    Template.yield.onRendered(function () {\n      self.yield = this;\n      self.materialize(self.old);\n    });\n    Template.yield.onDestroyed(function () {\n      if (self.old.template.view) {\n        _BlazeRemove(self.old.template.view);\n\n        self.old.template.view = null;\n        self.old.materialized = false;\n      }\n\n      self.yield = null;\n    });\n  }\n\n  var _proto = BlazeRenderer.prototype;\n\n  _proto.render = function () {\n    function render(__layout) {\n      var __template = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var __data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      var __callback = arguments.length > 3 ? arguments[3] : undefined;\n\n      if (!Blaze || !Template) {\n        throw new Meteor.Error(400, '`.render()` - Requires `blaze` and `templating`, or `blaze-html-templates` packages to be installed');\n      }\n\n      if (!__layout) {\n        throw new Meteor.Error(400, '`.render()` - Requires at least one argument');\n      } else if (!_helpers.isString(__layout) && !(__layout instanceof Blaze.Template)) {\n        throw new Meteor.Error(400, '`.render()` - First argument must be a String or instance of Blaze.Template');\n      }\n\n      this.queue.push([__layout, __template, __data, __callback]);\n      this.startQueue();\n    }\n\n    return render;\n  }();\n\n  _proto.startQueue = function () {\n    function startQueue() {\n      if (this.queue.length) {\n        if (!this.isRendering) {\n          this.isRendering = true;\n          var task = this.queue.shift();\n          this.proceed.apply(this, task);\n\n          if (this.queue.length) {\n            requestAnimFrame(this.startQueue.bind(this));\n          }\n        } else {\n          requestAnimFrame(this.startQueue.bind(this));\n        }\n      }\n    }\n\n    return startQueue;\n  }();\n\n  _proto.proceed = function () {\n    function proceed(__layout) {\n      var __template = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var __data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      var __callback = arguments.length > 3 ? arguments[3] : undefined;\n\n      if (!Blaze || !Template) {\n        return;\n      }\n\n      var data = __data;\n      var layout = __layout;\n      var _layout = false;\n      var template = __template;\n      var _template = false;\n\n      var callback = __callback || function () {};\n\n      if (_helpers.isString(layout)) {\n        _layout = typeof Template !== 'undefined' && Template !== null ? Template[layout] : void 0;\n      } else if (layout instanceof Blaze.Template) {\n        _layout = layout;\n        layout = layout.viewName.replace('Template.', '');\n      } else {\n        layout = false;\n      }\n\n      if (_helpers.isString(template)) {\n        _template = typeof Template !== 'undefined' && Template !== null ? Template[template] : void 0;\n      } else if (template instanceof Blaze.Template) {\n        _template = template;\n        template = template.viewName.replace('Template.', '');\n      } else if (_helpers.isObject(template)) {\n        data = template;\n        template = false;\n      } else if (_helpers.isFunction(template)) {\n        callback = template;\n        template = false;\n      } else {\n        template = false;\n      }\n\n      if (_helpers.isFunction(data)) {\n        callback = data;\n        data = {};\n      } else if (!_helpers.isObject(data)) {\n        data = {};\n      }\n\n      if (!_helpers.isFunction(callback)) {\n        callback = function () {};\n      }\n\n      if (!_layout) {\n        this.old.materialized = true;\n        this.isRendering = false;\n        throw new Meteor.Error(404, 'No such layout: ' + layout);\n      }\n\n      var current = this.newState(layout, template);\n      current.data = data;\n      current.callback = callback;\n      var updateTemplate = true;\n\n      if (this.old.template.name !== template) {\n        current.template.name = template;\n        current.template.blaze = _template;\n        this.newElement('template', current);\n\n        if (this.old.template.view) {\n          _BlazeRemove(this.old.template.view);\n\n          this.old.template.view = null;\n          this.old.materialized = false;\n        }\n\n        updateTemplate = false;\n      } else {\n        current.template = this.old.template;\n      }\n\n      if (this.old.layout.name !== layout) {\n        current.layout.name = layout;\n        current.layout.blaze = _layout;\n        current.template.name = template;\n        current.template.blaze = _template;\n        this.newElement('layout', current);\n\n        if (this.old.layout.view) {\n          _BlazeRemove(this.old.layout.view);\n\n          this.old.layout.view = null;\n        }\n\n        this._render(current);\n      } else if (template) {\n        current.layout = this.old.layout;\n        current.template.name = template;\n        current.template.blaze = _template;\n\n        this._load(updateTemplate, true, current);\n      } else {\n        current.layout = this.old.layout;\n        this.isRendering = false;\n        current.materialized = true;\n        current.callback();\n\n        current.callback = function () {};\n      }\n\n      this.old = current;\n    }\n\n    return proceed;\n  }();\n\n  _proto._render = function () {\n    function _render(current) {\n      var _this = this;\n\n      if (!Blaze || !Template) {\n        return;\n      }\n\n      var getData = function () {\n        return current.data;\n      };\n\n      var rootElement = this.rootElement();\n\n      if (!rootElement) {\n        throw new Meteor.Error(400, 'BlazeRenderer can\\'t find root element!');\n      }\n\n      if (this.inMemoryRendering) {\n        current.layout.view = Blaze.renderWithData(current.layout.blaze, getData, current.layout.element);\n        requestAnimFrame(function () {\n          rootElement.appendChild(current.layout.element);\n\n          _this._load(false, false, current);\n        });\n      } else {\n        current.layout.view = Blaze.renderWithData(current.layout.blaze, getData, rootElement);\n\n        this._load(false, false, current);\n      }\n    }\n\n    return _render;\n  }();\n\n  _proto._load = function () {\n    function _load(updateTemplate, updateLayout, current) {\n      if (updateLayout && current.layout.view) {\n        current.layout.view.dataVar.set(current.data);\n      }\n\n      if (current.template.view && updateTemplate) {\n        current.template.view.dataVar.set(current.data);\n        this.isRendering = false;\n        current.materialized = true;\n        current.callback();\n\n        current.callback = function () {};\n      } else if (!current.template.name) {\n        this.isRendering = false;\n        current.materialized = true;\n        current.callback();\n\n        current.callback = function () {};\n      } else if (current.template.name && !this.yield) {\n        this.isRendering = false;\n        current.materialized = false;\n        current.callback();\n\n        current.callback = function () {};\n      } else if (current.template.name && this.yield) {\n        this.materialize(current);\n      }\n    }\n\n    return _load;\n  }();\n\n  _proto.newElement = function () {\n    function newElement(type, current) {\n      if (!this.inMemoryRendering) {\n        return;\n      }\n\n      current[type].parent = current[type].parent ? current[type].parent : document.createElement('div');\n\n      if (!current[type].element) {\n        current[type].element = this.getMemoryElement();\n        current[type].parent.appendChild(current[type].element);\n        current[type].element._parentElement = current[type].parent;\n      }\n    }\n\n    return newElement;\n  }();\n\n  _proto.newState = function () {\n    function newState() {\n      var layout = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var template = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var base = {\n        materialized: false,\n        data: null,\n        callback: function () {},\n        layout: {\n          view: null,\n          name: '',\n          blaze: null,\n          parent: null,\n          element: null\n        },\n        template: {\n          view: null,\n          name: '',\n          blaze: null,\n          parent: null,\n          element: null\n        }\n      };\n\n      if (!this.inMemoryRendering || !layout && !template) {\n        return base;\n      }\n\n      if (layout && this.cache[layout]) {\n        base.layout = this.cache[layout];\n      }\n\n      if (template && this.cache[template]) {\n        base.template = this.cache[template];\n      }\n\n      this.cache[template] = base;\n      return base;\n    }\n\n    return newState;\n  }();\n\n  _proto.materialize = function () {\n    function materialize(current) {\n      if (!Blaze || !Template) {\n        return;\n      }\n\n      if (current.template.name && !current.materialized) {\n        var getData = function () {\n          return current.data;\n        };\n\n        if (!this.yield) {\n          current.materialized = false;\n          return;\n        }\n\n        current.materialized = true;\n\n        if (this.inMemoryRendering) {\n          current.template.view = Blaze.renderWithData(current.template.blaze, getData, current.template.element, this.yield.view);\n\n          if (this.yield) {\n            this.yield.view._domrange.parentElement.appendChild(current.template.element);\n\n            this.isRendering = false;\n            current.materialized = true;\n            current.callback();\n\n            current.callback = function () {};\n          } else {\n            current.materialized = false;\n          }\n        } else {\n          if (this.yield) {\n            current.template.view = Blaze.renderWithData(current.template.blaze, getData, this.yield.view._domrange.parentElement, this.yield.view);\n            this.isRendering = false;\n            current.materialized = true;\n            current.callback();\n\n            current.callback = function () {};\n          } else {\n            current.materialized = false;\n          }\n        }\n      }\n    }\n\n    return materialize;\n  }();\n\n  return BlazeRenderer;\n}();\n\nmodule.exportDefault(BlazeRenderer);","map":{"version":3,"sources":["packages/ostrio:flow-router-extra/client/renderer.js"],"names":["Meteor","module","link","v","_helpers","requestAnimFrame","Blaze","Template","Package","templating","blaze","_BlazeRemove","view","remove","_e","_destroyView","_domrange","destroy","__e","BlazeRenderer","opts","rootElement","document","body","self","isRendering","queue","yield","cache","old","newState","materialized","inMemoryRendering","getMemoryElement","createElement","isFunction","Error","onCreated","onRendered","materialize","onDestroyed","template","render","__layout","__template","__data","__callback","isString","push","startQueue","length","task","shift","proceed","apply","bind","data","layout","_layout","_template","callback","viewName","replace","isObject","current","updateTemplate","name","newElement","_render","_load","getData","renderWithData","element","appendChild","updateLayout","dataVar","set","type","parent","_parentElement","base","parentElement","exportDefault"],"mappings":"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","sourcesContent":["import { Meteor }           from 'meteor/meteor';\nimport { _helpers }         from './../lib/_helpers.js';\nimport { requestAnimFrame } from './modules.js';\n\nlet Blaze;\nlet Template;\n\nif (Package.templating && Package.blaze) {\n  Blaze    = Package.blaze.Blaze;\n  Template = Package.templating.Template;\n}\n\nconst _BlazeRemove = function (view) {\n  try {\n    Blaze.remove(view);\n  } catch (_e) {\n    try {\n      Blaze._destroyView(view);\n      view._domrange.destroy();\n    } catch (__e) {\n      view._domrange.destroy();\n    }\n  }\n};\n\nclass BlazeRenderer {\n  constructor(opts = {}) {\n    if (!Blaze || !Template) {\n      return;\n    }\n\n    this.rootElement  = opts.rootElement || function () {\n      return document.body;\n    };\n\n    const self        = this;\n    this.isRendering  = false;\n    this.queue        = [];\n    this.yield        = null;\n    this.cache        = {};\n    this.old          = this.newState();\n    this.old.materialized = true;\n\n    this.inMemoryRendering = opts.inMemoryRendering || false;\n    this.getMemoryElement  = opts.getMemoryElement || function () {\n      return document.createElement('div');\n    };\n\n    if (!this.getMemoryElement || !_helpers.isFunction(this.getMemoryElement)) {\n      throw new Meteor.Error(400, '{getMemoryElement} must be a function, which returns new DOM element');\n    }\n\n    if (!this.rootElement || !_helpers.isFunction(this.rootElement)) {\n      throw new Meteor.Error(400, 'You must pass function into BlazeRenderer constructor, which returns DOM element');\n    }\n\n    Template.yield = new Template('yield', function () {});\n\n    Template.yield.onCreated(function () {\n      self.yield = this;\n    });\n\n    Template.yield.onRendered(function () {\n      self.yield = this;\n      self.materialize(self.old);\n    });\n\n    Template.yield.onDestroyed(function () {\n      if (self.old.template.view) {\n        _BlazeRemove(self.old.template.view);\n        self.old.template.view = null;\n        self.old.materialized = false;\n      }\n      self.yield = null;\n    });\n  }\n\n  render(__layout, __template = false, __data = {}, __callback) {\n    if (!Blaze || !Template) {\n      throw new Meteor.Error(400, '`.render()` - Requires `blaze` and `templating`, or `blaze-html-templates` packages to be installed');\n    }\n\n    if (!__layout) {\n      throw new Meteor.Error(400, '`.render()` - Requires at least one argument');\n    } else if (!_helpers.isString(__layout) && !(__layout instanceof Blaze.Template)) {\n      throw new Meteor.Error(400, '`.render()` - First argument must be a String or instance of Blaze.Template');\n    }\n\n    this.queue.push([__layout, __template, __data, __callback]);\n    this.startQueue();\n  }\n\n  startQueue() {\n    if (this.queue.length) {\n      if (!this.isRendering) {\n        this.isRendering = true;\n        const task = this.queue.shift();\n        this.proceed.apply(this, task);\n        if (this.queue.length) {\n          requestAnimFrame(this.startQueue.bind(this));\n        }\n      } else {\n        requestAnimFrame(this.startQueue.bind(this));\n      }\n    }\n  }\n\n  proceed(__layout, __template = false, __data = {}, __callback) {\n    if (!Blaze || !Template) {\n      return;\n    }\n\n    let data      = __data;\n    let layout    = __layout;\n    let _layout   = false;\n    let template  = __template;\n    let _template = false;\n    let callback  = __callback || (() => {});\n\n    if (_helpers.isString(layout)) {\n      _layout = typeof Template !== 'undefined' && Template !== null ? Template[layout] : void 0;\n    } else if (layout instanceof Blaze.Template) {\n      _layout = layout;\n      layout  = layout.viewName.replace('Template.', '');\n    } else {\n      layout = false;\n    }\n\n    if (_helpers.isString(template)) {\n      _template = typeof Template !== 'undefined' && Template !== null ? Template[template] : void 0;\n    } else if (template instanceof Blaze.Template) {\n      _template = template;\n      template  = template.viewName.replace('Template.', '');\n    } else if (_helpers.isObject(template)) {\n      data     = template;\n      template = false;\n    } else if (_helpers.isFunction(template)) {\n      callback = template;\n      template = false;\n    } else {\n      template = false;\n    }\n\n    if (_helpers.isFunction(data)) {\n      callback = data;\n      data = {};\n    } else if (!_helpers.isObject(data)) {\n      data = {};\n    }\n\n    if (!_helpers.isFunction(callback)) {\n      callback = () => {};\n    }\n\n    if (!_layout) {\n      this.old.materialized = true;\n      this.isRendering = false;\n      throw new Meteor.Error(404, 'No such layout: ' + layout);\n    }\n\n    const current      = this.newState(layout, template);\n    current.data       = data;\n    current.callback   = callback;\n    let updateTemplate = true;\n\n    if (this.old.template.name !== template) {\n      current.template.name  = template;\n      current.template.blaze = _template;\n      this.newElement('template', current);\n      if (this.old.template.view) {\n        _BlazeRemove(this.old.template.view);\n        this.old.template.view = null;\n        this.old.materialized = false;\n      }\n\n      updateTemplate = false;\n    } else {\n      current.template = this.old.template;\n    }\n\n    if (this.old.layout.name !== layout) {\n      current.layout.name    = layout;\n      current.layout.blaze   = _layout;\n      current.template.name  = template;\n      current.template.blaze = _template;\n      this.newElement('layout', current);\n\n      if (this.old.layout.view) {\n        _BlazeRemove(this.old.layout.view);\n        this.old.layout.view = null;\n      }\n\n      this._render(current);\n    } else if (template) {\n      current.layout         = this.old.layout;\n      current.template.name  = template;\n      current.template.blaze = _template;\n      this._load(updateTemplate, true, current);\n    } else {\n      current.layout = this.old.layout;\n      this.isRendering = false;\n      current.materialized = true;\n      current.callback();\n      current.callback = () => {};\n    }\n\n    this.old = current;\n  }\n\n  _render(current) {\n    if (!Blaze || !Template) {\n      return;\n    }\n\n    const getData = () => {\n      return current.data;\n    };\n\n    const rootElement = this.rootElement();\n    if (!rootElement) {\n      throw new Meteor.Error(400, 'BlazeRenderer can\\'t find root element!');\n    }\n\n    if (this.inMemoryRendering) {\n      current.layout.view = Blaze.renderWithData(current.layout.blaze, getData, current.layout.element);\n      requestAnimFrame(() => {\n        rootElement.appendChild(current.layout.element);\n        this._load(false, false, current);\n      });\n    } else {\n      current.layout.view = Blaze.renderWithData(current.layout.blaze, getData, rootElement);\n      this._load(false, false, current);\n    }\n  }\n\n  _load(updateTemplate, updateLayout, current) {\n    if (updateLayout && current.layout.view) {\n      current.layout.view.dataVar.set(current.data);\n    }\n\n    if (current.template.view && updateTemplate) {\n      current.template.view.dataVar.set(current.data);\n      this.isRendering = false;\n      current.materialized = true;\n      current.callback();\n      current.callback = () => {};\n    } else if (!current.template.name) {\n      this.isRendering = false;\n      current.materialized = true;\n      current.callback();\n      current.callback = () => {};\n    } else if (current.template.name && !this.yield) {\n      this.isRendering = false;\n      current.materialized = false;\n      current.callback();\n      current.callback = () => {};\n    } else if (current.template.name && this.yield) {\n      this.materialize(current);\n    }\n  }\n\n  newElement(type, current) {\n    if (!this.inMemoryRendering) {\n      return;\n    }\n\n    current[type].parent  = current[type].parent ? current[type].parent : document.createElement('div');\n    if (!current[type].element) {\n      current[type].element = this.getMemoryElement();\n      current[type].parent.appendChild(current[type].element);\n      current[type].element._parentElement = current[type].parent;\n    }\n  }\n\n  newState(layout = false, template = false) {\n    const base = {\n      materialized: false,\n      data: null,\n      callback: function () {},\n      layout: {\n        view: null,\n        name: '',\n        blaze: null,\n        parent: null,\n        element: null\n      },\n      template: {\n        view: null,\n        name: '',\n        blaze: null,\n        parent: null,\n        element: null\n      }\n    };\n\n    if (!this.inMemoryRendering || (!layout && !template)) {\n      return base;\n    }\n\n    if (layout && this.cache[layout]) {\n      base.layout = this.cache[layout];\n    }\n\n    if (template && this.cache[template]) {\n      base.template = this.cache[template];\n    }\n\n    this.cache[template] = base;\n    return base;\n  }\n\n  materialize(current) {\n    if (!Blaze || !Template) {\n      return;\n    }\n\n    if (current.template.name && !current.materialized) {\n      const getData = () => {\n        return current.data;\n      };\n\n      if (!this.yield) {\n        current.materialized = false;\n        return;\n      }\n\n      current.materialized = true;\n      if (this.inMemoryRendering) {\n        current.template.view = Blaze.renderWithData(current.template.blaze, getData, current.template.element, this.yield.view);\n        if (this.yield) {\n          this.yield.view._domrange.parentElement.appendChild(current.template.element);\n          this.isRendering = false;\n          current.materialized = true;\n          current.callback();\n          current.callback = () => {};\n        } else {\n          current.materialized = false;\n        }\n      } else {\n        if (this.yield) {\n          current.template.view = Blaze.renderWithData(current.template.blaze, getData, this.yield.view._domrange.parentElement, this.yield.view);\n          this.isRendering = false;\n          current.materialized = true;\n          current.callback();\n          current.callback = () => {};\n        } else {\n          current.materialized = false;\n        }\n      }\n    }\n  }\n}\n\nexport default BlazeRenderer;\n"]},"sourceType":"script","hash":"6a100bf3e0c903982eb29d48de9542c2b56e4ee5"}
