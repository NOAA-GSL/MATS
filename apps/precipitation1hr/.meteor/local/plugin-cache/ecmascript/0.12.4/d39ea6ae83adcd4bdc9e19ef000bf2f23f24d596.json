{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr/packages/accounts-ui-unstyled/login_buttons_single.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/accounts-ui-unstyled/login_buttons_single.js","filename":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr/packages/accounts-ui-unstyled/login_buttons_single.js","passPerPreset":false,"envName":"development","cwd":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr","root":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr","plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr/packages/accounts-ui-unstyled/login_buttons_single.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/accounts-ui-unstyled/login_buttons_single.js"}},"code":"var getLoginServices;\nmodule.link(\"./login_buttons.js\", {\n  getLoginServices: function (v) {\n    getLoginServices = v;\n  }\n}, 0);\n// for convenience\nvar loginButtonsSession = Accounts._loginButtonsSession;\n\nvar loginResultCallback = function (serviceName, err) {\n  if (!err) {\n    loginButtonsSession.closeDropdown();\n  } else if (err instanceof Accounts.LoginCancelledError) {// do nothing\n  } else if (err instanceof ServiceConfiguration.ConfigError) {\n    if (Template._configureLoginServiceDialog.templateForService(serviceName)) {\n      loginButtonsSession.configureService(serviceName);\n    } else {\n      loginButtonsSession.errorMessage(\"No configuration for \" + capitalize(serviceName) + \".\\n\" + \"Use `ServiceConfiguration` to configure it or \" + (\"install the `\" + serviceName + \"-config-ui` package.\"));\n    }\n  } else {\n    loginButtonsSession.errorMessage(err.reason || \"Unknown error\");\n  }\n}; // In the login redirect flow, we'll have the result of the login\n// attempt at page load time when we're redirected back to the\n// application.  Register a callback to update the UI (i.e. to close\n// the dialog on a successful login or display the error on a failed\n// login).\n//\n\n\nAccounts.onPageLoadLogin(function (attemptInfo) {\n  // Ignore if we have a left over login attempt for a service that is no longer registered.\n  if (getLoginServices().map(function (service) {\n    return service.name;\n  }).includes(attemptInfo.type)) loginResultCallback(attemptInfo.type, attemptInfo.error);\n});\n\nTemplate._loginButtonsLoggedOutSingleLoginButton.events({\n  'click .login-button': function () {\n    var serviceName = this.name;\n    loginButtonsSession.resetMessages(); // XXX Service providers should be able to specify their\n    // `Meteor.loginWithX` method name.\n\n    var loginWithService = Meteor[\"loginWith\" + (serviceName === 'meteor-developer' ? 'MeteorDeveloperAccount' : capitalize(serviceName))];\n    var options = {}; // use default scope unless specified\n\n    if (Accounts.ui._options.requestPermissions[serviceName]) options.requestPermissions = Accounts.ui._options.requestPermissions[serviceName];\n    if (Accounts.ui._options.requestOfflineToken[serviceName]) options.requestOfflineToken = Accounts.ui._options.requestOfflineToken[serviceName];\n    if (Accounts.ui._options.forceApprovalPrompt[serviceName]) options.forceApprovalPrompt = Accounts.ui._options.forceApprovalPrompt[serviceName];\n    loginWithService(options, function (err) {\n      loginResultCallback(serviceName, err);\n    });\n  }\n});\n\nTemplate._loginButtonsLoggedOutSingleLoginButton.helpers({\n  // not configured and has no config UI\n  cannotConfigure: function () {\n    return !ServiceConfiguration.configurations.findOne({\n      service: this.name\n    }) && !Template._configureLoginServiceDialog.templateForService(this.name);\n  },\n  configured: function () {\n    return !!ServiceConfiguration.configurations.findOne({\n      service: this.name\n    });\n  },\n  capitalizedName: function () {\n    if (this.name === 'github') // XXX we should allow service packages to set their capitalized name\n      return 'GitHub';else if (this.name === 'meteor-developer') return 'Meteor';else return capitalize(this.name);\n  }\n}); // XXX from http://epeli.github.com/underscore.string/lib/underscore.string.js\n\n\nvar capitalize = function (input) {\n  str = input == null ? '' : String(input);\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};","map":{"version":3,"sources":["packages/accounts-ui-unstyled/login_buttons_single.js"],"names":["getLoginServices","module","link","v","loginButtonsSession","Accounts","_loginButtonsSession","loginResultCallback","serviceName","err","closeDropdown","LoginCancelledError","ServiceConfiguration","ConfigError","Template","_configureLoginServiceDialog","templateForService","configureService","errorMessage","capitalize","reason","onPageLoadLogin","attemptInfo","map","service","name","includes","type","error","_loginButtonsLoggedOutSingleLoginButton","events","resetMessages","loginWithService","Meteor","options","ui","_options","requestPermissions","requestOfflineToken","forceApprovalPrompt","helpers","cannotConfigure","configurations","findOne","configured","capitalizedName","input","str","String","charAt","toUpperCase","slice"],"mappings":"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","sourcesContent":["import { getLoginServices } from './login_buttons.js';\n\n// for convenience\nconst loginButtonsSession = Accounts._loginButtonsSession;\n\n\nconst loginResultCallback = (serviceName, err) => {\n  if (!err) {\n    loginButtonsSession.closeDropdown();\n  } else if (err instanceof Accounts.LoginCancelledError) {\n    // do nothing\n  } else if (err instanceof ServiceConfiguration.ConfigError) {\n    if (Template._configureLoginServiceDialog.templateForService(serviceName)) {\n      loginButtonsSession.configureService(serviceName);\n    } else {\n      loginButtonsSession.errorMessage(\n        `No configuration for ${capitalize(serviceName)}.\\n` +\n        \"Use `ServiceConfiguration` to configure it or \" +\n        `install the \\`${serviceName}-config-ui\\` package.`\n      );\n    }\n  } else {\n    loginButtonsSession.errorMessage(err.reason || \"Unknown error\");\n  }\n};\n\n\n// In the login redirect flow, we'll have the result of the login\n// attempt at page load time when we're redirected back to the\n// application.  Register a callback to update the UI (i.e. to close\n// the dialog on a successful login or display the error on a failed\n// login).\n//\nAccounts.onPageLoadLogin(attemptInfo => {\n  // Ignore if we have a left over login attempt for a service that is no longer registered.\n  if (\n    getLoginServices()\n      .map(service => service.name)\n      .includes(attemptInfo.type)\n  )\n    loginResultCallback(attemptInfo.type, attemptInfo.error);\n});\n\n\nTemplate._loginButtonsLoggedOutSingleLoginButton.events({\n  'click .login-button': function () {\n    const serviceName = this.name;\n    loginButtonsSession.resetMessages();\n\n    // XXX Service providers should be able to specify their\n    // `Meteor.loginWithX` method name.\n    const loginWithService = Meteor[`loginWith${\n                                  (serviceName === 'meteor-developer' ?\n                                   'MeteorDeveloperAccount' :\n                                   capitalize(serviceName))}`];\n\n    const options = {}; // use default scope unless specified\n    if (Accounts.ui._options.requestPermissions[serviceName])\n      options.requestPermissions = Accounts.ui._options.requestPermissions[serviceName];\n    if (Accounts.ui._options.requestOfflineToken[serviceName])\n      options.requestOfflineToken = Accounts.ui._options.requestOfflineToken[serviceName];\n    if (Accounts.ui._options.forceApprovalPrompt[serviceName])\n      options.forceApprovalPrompt = Accounts.ui._options.forceApprovalPrompt[serviceName];\n\n    loginWithService(options, err => {\n      loginResultCallback(serviceName, err);\n    });\n  }\n});\n\nTemplate._loginButtonsLoggedOutSingleLoginButton.helpers({\n  // not configured and has no config UI\n  cannotConfigure: function () { \n    return !ServiceConfiguration.configurations.findOne({service: this.name}) && \n      !Template._configureLoginServiceDialog.templateForService(this.name);\n  },\n  configured: function () {\n    return !!ServiceConfiguration.configurations.findOne({service: this.name});\n  },\n  capitalizedName: function () {\n    if (this.name === 'github')\n      // XXX we should allow service packages to set their capitalized name\n      return 'GitHub';\n    else if (this.name === 'meteor-developer')\n      return 'Meteor';\n    else\n      return capitalize(this.name);\n  }\n});\n\n// XXX from http://epeli.github.com/underscore.string/lib/underscore.string.js\nconst capitalize = input => {\n  str = input == null ? '' : String(input);\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n"]},"sourceType":"script","hash":"d39ea6ae83adcd4bdc9e19ef000bf2f23f24d596"}
