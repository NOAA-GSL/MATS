{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr/packages/randyp:mats-common/templates/administration/administration.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/randyp:mats-common/templates/administration/administration.js","filename":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr/packages/randyp:mats-common/templates/administration/administration.js","passPerPreset":false,"envName":"development","cwd":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr","root":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr","plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/jeffrey.a.hamilton/WebstormProjects/MATS_for_EMB/apps/precipitation1hr/packages/randyp:mats-common/templates/administration/administration.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/randyp:mats-common/templates/administration/administration.js"}},"code":"var Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar Hooks;\nmodule.link(\"meteor/differential:event-hooks\", {\n  Hooks: function (v) {\n    Hooks = v;\n  }\n}, 1);\nvar matsTypes;\nmodule.link(\"meteor/randyp:mats-common\", {\n  matsTypes: function (v) {\n    matsTypes = v;\n  }\n}, 2);\nvar matsCollections;\nmodule.link(\"meteor/randyp:mats-common\", {\n  matsCollections: function (v) {\n    matsCollections = v;\n  }\n}, 3);\nvar matsMethods;\nmodule.link(\"meteor/randyp:mats-common\", {\n  matsMethods: function (v) {\n    matsMethods = v;\n  }\n}, 4);\nAccounts.onLogin(function () {\n  matsMethods.getAuthorizations.call(function (error, result) {\n    if (error !== undefined) {\n      Session.set('roles', []);\n      setError(new Error(error.toLocaleString()));\n      return false;\n    }\n\n    authList = result;\n\n    for (var ai = 0; ai < authList.length; ai++) {\n      var roles = authList[ai];\n      Session.set('roles', roles);\n      Session.set('signedIn', new Date().getTime()); // force re-render after sign in success\n    }\n  });\n});\n\nHooks.onLoggedOut = function (userid) {\n  Session.set('roles', []);\n  var adminContainerDiv = document.getElementById('adminContainer');\n  var adminDiv = document.getElementById(\"administration\");\n  var userDiv = document.getElementById(\"administration\");\n  adminContainerDiv.style.display = \"none\";\n  adminDiv.style.display = \"none\";\n  userDiv.style.display = \"none\";\n};\n\nTemplate.administration.helpers({\n  adminChanged: function () {\n    return Session.get('adminChanged');\n  },\n  signedIn: function () {\n    var d = new Date(Session.get('signedIn'));\n    return (d.toDateString() + \" \" + d.toTimeString()).split(\"+\")[0];\n  },\n  showAdministratorDiv: function () {\n    var roles = Session.get('roles');\n\n    if (roles !== undefined && roles.indexOf('administrator') > -1) {\n      return \"block\";\n    } else {\n      return \"none\";\n    }\n  },\n  showAuthenticatedDiv: function () {\n    var roles = Session.get('roles');\n\n    if (roles !== undefined && roles.indexOf('user') > -1 || roles !== undefined && roles.indexOf('administrator') > -1) {\n      return \"block\";\n    } else {\n      return \"none\";\n    }\n  },\n  showResetNow: function () {\n    var adminChanged = Session.get('adminChanged');\n    var settings = matsCollections.Settings.findOne({});\n\n    if (document.getElementById(\"ResetFromCode\") == null) {\n      return \"none\";\n    }\n\n    var resetEnabled = settings === undefined ? false : document.getElementById(\"ResetFromCode\").checked;\n    var roles = Session.get('roles');\n\n    if (roles !== undefined && roles.indexOf('administrator') > -1 && resetEnabled) {\n      return \"block\";\n    } else {\n      return \"none\";\n    }\n  }\n});\nTemplate.administration.events({\n  'click .authorization': function () {\n    $(\"#authorizationModal\").modal('show');\n  },\n  'click .credentials': function () {\n    $(\"#mailCredentialsModal\").modal('show');\n  },\n  'click .database': function () {\n    $(\"#databasesModal\").modal('show');\n  },\n  'click .colors': function () {\n    $(\"#colorSchemeModal\").modal('show');\n  },\n  'click .settings': function () {\n    $(\"#settingsModal\").modal('show');\n  },\n  'click .curveParams': function () {\n    var params = matsCollections.CurveParams.find({}, {\n      sort: {\n        displayOrder: 1\n      }\n    }).fetch();\n    Session.set('params', params);\n    $(\"#curveParamsModal\").modal('show');\n  },\n  'click .plotGraphFunctions': function () {\n    $(\"#plotGraphFunctionsModal\").modal('show');\n  },\n  'click .export': function () {\n    $(\"#exportModal\").modal('show');\n  },\n  'click .import': function () {\n    $(\"#importModal\").modal('show');\n  },\n  'click .adminControl': function () {\n    var adminContainerDiv = document.getElementById('adminContainer');\n    var adminDiv = document.getElementById(\"administration\");\n    var userDiv = document.getElementById(\"administration\");\n\n    if (adminContainerDiv.style.display == \"none\") {\n      adminContainerDiv.style.display = \"block\";\n      var roles = Session.get('roles');\n\n      if (roles !== undefined && Session.get('roles').indexOf('administrator') > -1) {\n        adminDiv.style.display = \"block\";\n        userDiv.style.display = \"block\";\n      } else if (roles !== undefined && Session.get('roles').indexOf('user') > -1) {\n        userDiv.style.display = \"block\";\n      } else {\n        adminContainerDiv.style.display = \"none\";\n        adminDiv.style.display = \"none\";\n        userDiv.style.display = \"none\";\n      }\n    } else {\n      adminContainerDiv.style.display = \"none\";\n      adminDiv.style.display = \"none\";\n      userDiv.style.display = \"none\";\n    }\n  },\n  'click .resetNow': function () {\n    $(\"#resetModal\").modal('show');\n    document.getElementById(\"ResetFromCode\").checked = false;\n    var settings = matsCollections.Settings.findOne({});\n    settings.resetFromCode = false;\n  }\n});","map":{"version":3,"sources":["packages/randyp:mats-common/templates/administration/administration.js"],"names":["Meteor","module","link","v","Hooks","matsTypes","matsCollections","matsMethods","Accounts","onLogin","getAuthorizations","call","error","result","undefined","Session","set","setError","Error","toLocaleString","authList","ai","length","roles","Date","getTime","onLoggedOut","userid","adminContainerDiv","document","getElementById","adminDiv","userDiv","style","display","Template","administration","helpers","adminChanged","get","signedIn","d","toDateString","toTimeString","split","showAdministratorDiv","indexOf","showAuthenticatedDiv","showResetNow","settings","Settings","findOne","resetEnabled","checked","events","$","modal","params","CurveParams","find","sort","displayOrder","fetch","resetFromCode"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { Meteor } from 'meteor/meteor';\nimport { Hooks } from 'meteor/differential:event-hooks';\nimport {matsTypes } from 'meteor/randyp:mats-common';\nimport {matsCollections } from 'meteor/randyp:mats-common';\nimport {matsMethods } from 'meteor/randyp:mats-common';\n\nAccounts.onLogin(function() {\n        matsMethods.getAuthorizations.call(function(error, result) {\n            if (error !== undefined) {\n                Session.set('roles', []);\n                setError(new Error(error.toLocaleString()));\n                return false;\n            }\n            authList = result;\n            for (var ai = 0; ai < authList.length; ai++){\n                var roles = authList[ai];\n                Session.set('roles', roles);\n                Session.set('signedIn', new Date().getTime());// force re-render after sign in success\n            }\n        });\n});\n\nHooks.onLoggedOut = function (userid){\n    Session.set('roles',[]);\n    var adminContainerDiv = document.getElementById('adminContainer');\n    var adminDiv = document.getElementById(\"administration\");\n    var userDiv = document.getElementById(\"administration\");\n    adminContainerDiv.style.display = \"none\";\n    adminDiv.style.display = \"none\";\n    userDiv.style.display = \"none\";\n};\n\nTemplate.administration.helpers({\n    adminChanged: function() {\n      return Session.get('adminChanged');\n    },\n    signedIn: function(){\n        var d = new Date(Session.get('signedIn'));\n        return (d.toDateString() + \" \" +d.toTimeString()).split(\"+\")[0];\n    },\n    showAdministratorDiv: function(){\n        var roles = Session.get('roles');\n        if ( roles !== undefined && roles.indexOf('administrator') > -1) {\n            return  \"block\";\n        } else {\n            return \"none\"\n        }\n    },\n    showAuthenticatedDiv: function(){\n        var roles = Session.get('roles');\n        if ( roles !== undefined && (roles.indexOf('user') > -1) || roles !== undefined && (roles.indexOf('administrator') > -1)) {\n            return  \"block\";\n        } else {\n            return \"none\"\n        }\n    },\n    showResetNow: function() {\n        var adminChanged = Session.get('adminChanged');\n        var settings = matsCollections.Settings.findOne({});\n        if (document.getElementById(\"ResetFromCode\") == null) {\n            return \"none\";\n        }\n        var resetEnabled =  settings === undefined ? false : document.getElementById(\"ResetFromCode\").checked;\n        var roles = Session.get('roles');\n        if (roles !== undefined && (roles.indexOf('administrator') > -1) && resetEnabled) {\n            return  \"block\";\n        } else {\n            return \"none\"\n        }\n    }\n\n});\n\nTemplate.administration.events({\n    'click .authorization': function () {\n        $(\"#authorizationModal\").modal('show');\n    },\n    'click .credentials': function () {\n        $(\"#mailCredentialsModal\").modal('show');\n    },\n    'click .database': function () {\n        $(\"#databasesModal\").modal('show');\n    },\n    'click .colors': function () {\n        $(\"#colorSchemeModal\").modal('show');\n    },\n    'click .settings': function () {\n        $(\"#settingsModal\").modal('show');\n    },\n    'click .curveParams': function () {\n        var params = matsCollections.CurveParams.find({}, {sort: {displayOrder:1}}).fetch();\n        Session.set('params',params);\n        $(\"#curveParamsModal\").modal('show');\n    },\n    'click .plotGraphFunctions': function () {\n        $(\"#plotGraphFunctionsModal\").modal('show');\n    },\n    'click .export': function () {\n        $(\"#exportModal\").modal('show');\n    },\n    'click .import': function () {\n        $(\"#importModal\").modal('show');\n    },\n    'click .adminControl': function() {\n        var adminContainerDiv = document.getElementById('adminContainer');\n        var adminDiv = document.getElementById(\"administration\");\n        var userDiv = document.getElementById(\"administration\");\n\n        if (adminContainerDiv.style.display == \"none\") {\n            adminContainerDiv.style.display = \"block\";\n            var roles = Session.get('roles');\n            if (roles !== undefined && Session.get('roles').indexOf('administrator') > -1) {\n                adminDiv.style.display = \"block\";\n                userDiv.style.display = \"block\";\n            } else if(roles !== undefined && Session.get('roles').indexOf('user') > -1) {\n                userDiv.style.display = \"block\";\n            } else {\n                adminContainerDiv.style.display = \"none\";\n                adminDiv.style.display = \"none\";\n                userDiv.style.display = \"none\";\n            }\n        } else {\n            adminContainerDiv.style.display = \"none\";\n            adminDiv.style.display = \"none\";\n            userDiv.style.display = \"none\";\n        }\n    },\n    'click .resetNow': function() {\n        $(\"#resetModal\").modal('show');\n        document.getElementById(\"ResetFromCode\").checked = false;\n\n        var settings = matsCollections.Settings.findOne({});\n        settings.resetFromCode = false;\n    }\n});"]},"sourceType":"script","hash":"87c342b78684e2c82af72fd1ac53fad01cb16145"}
