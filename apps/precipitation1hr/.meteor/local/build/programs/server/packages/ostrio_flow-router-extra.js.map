{"version":3,"sources":["meteor://ðŸ’»app/packages/ostrio:flow-router-extra/server/_init.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/server/group.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/server/route.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/server/router.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/server/plugins/fast-render.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/lib/_helpers.js"],"names":["module","export","FlowRouter","Router","Route","Group","Triggers","BlazeRenderer","Meteor","link","v","default","Package","_debug","_helpers","makeTrigger","trigger","isFunction","isArray","makeTriggers","_base","_triggers","concat","constructor","router","options","parent","prefix","test","Error","_router","name","_triggersEnter","triggersEnter","_triggersExit","triggersExit","_subscriptions","subscriptions","Function","prototype","route","_pathDef","_group","group","pathDef","extend","omit","exportDefault","path","action","_subsMap","register","sub","subscription","middleware","page","qs","require","pathRegExp","_routes","_routesMap","_current","_specialChars","_encodeParam","param","paramArr","split","_param","i","length","includes","encodeURIComponent","e","_onRouteCallbacks","triggers","enter","exit","matchPath","params","find","r","pageRoute","match","clone","setCurrent","current","push","_triggerRouteRegister","fields","queryParams","replace","_key","firstRegexpChar","indexOf","key","substring","undefined","strQueryParams","stringify","onRouteRegister","cb","currentRoute","routePublicApi","pick","forEach","go","getState","getAllStates","getRouteName","getQueryParam","query","setState","setParams","removeState","clearStates","ready","initialize","wait","url","absoluteUrl","apply","arguments","RegExp","_basePath","FastRender","setupFastRender","routeParams","meteorSubscribe","subscribe","Array","from","call","Object","keys","startup","isEmpty","obj","isString","isArguments","isObject","type","copy","picked","objs","assign","slice","toString"],"mappings":"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","file":"/packages/ostrio_flow-router-extra.js","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport Router     from './router.js';\nimport Route      from './route.js';\nimport Group      from './group.js';\nimport './plugins/fast-render.js';\n\nif (Package['meteorhacks:inject-data']) {\n  Meteor._debug('`meteorhacks:inject-data` is deprecated, please remove it and install its successor - `staringatlights:inject-data`');\n  Meteor._debug('meteor remove meteorhacks:inject-data');\n  Meteor._debug('meteor add staringatlights:inject-data');\n}\n\nif (Package['meteorhacks:fast-render']) {\n  Meteor._debug('`meteorhacks:fast-render` is deprecated, please remove it and install its successor - `staringatlights:fast-render`');\n  Meteor._debug('meteor remove meteorhacks:fast-render');\n  Meteor._debug('meteor add staringatlights:fast-render');\n}\n\nconst Triggers = {};\nconst BlazeRenderer = {};\n\nconst FlowRouter = new Router();\nFlowRouter.Router = Router;\nFlowRouter.Route = Route;\n\nexport { FlowRouter, Router, Route, Group, Triggers, BlazeRenderer };\n","import { _helpers } from './../lib/_helpers.js';\n\nconst makeTrigger = (trigger) => {\n  if (_helpers.isFunction(trigger)) {\n    return [trigger];\n  } else if (!_helpers.isArray(trigger)) {\n    return [];\n  }\n\n  return trigger;\n};\n\nconst makeTriggers = (_base, _triggers) => {\n  if ((!_base && !_triggers)) {\n    return [];\n  }\n  return makeTrigger(_base).concat(makeTrigger(_triggers));\n};\n\nclass Group {\n  constructor(router, options = {}, parent) {\n    if (options.prefix && !/^\\//.test(options.prefix)) {\n      throw new Error('group\\'s prefix must start with \"/\"');\n    }\n\n    this._router = router;\n    this.prefix = options.prefix || '';\n    this.name = options.name;\n    this.options = options;\n\n    this._triggersEnter = makeTriggers(options.triggersEnter, this._triggersEnter);\n    this._triggersExit  = makeTriggers(this._triggersExit, options.triggersExit);\n\n    this._subscriptions = options.subscriptions || Function.prototype;\n\n    this.parent = parent;\n    if (this.parent) {\n      this.prefix = parent.prefix + this.prefix;\n      this._triggersEnter = makeTriggers(parent._triggersEnter, this._triggersEnter);\n      this._triggersExit  = makeTriggers(this._triggersExit, parent._triggersExit);\n    }\n  }\n\n  route(_pathDef, options = {}, _group) {\n    if (!/^\\//.test(_pathDef)) {\n      throw new Error('route\\'s path must start with \"/\"');\n    }\n\n    const group   = _group || this;\n    const pathDef = this.prefix + _pathDef;\n\n    options.triggersEnter = makeTriggers(this._triggersEnter, options.triggersEnter);\n    options.triggersExit  = makeTriggers(options.triggersExit, this._triggersExit);\n\n    return this._router.route(pathDef, _helpers.extend(_helpers.omit(this.options, ['triggersEnter', 'triggersExit', 'subscriptions', 'prefix', 'waitOn', 'name', 'title', 'titlePrefix', 'link', 'script', 'meta']), options), group);\n  }\n\n  group(options) {\n    return new Group(this._router, options, this);\n  }\n}\n\nexport default Group;\n","class Route {\n  constructor(router, pathDef, options = {}) {\n    this.options = options;\n    this.name = options.name;\n    this.pathDef = pathDef;\n\n    // Route.path is deprecated and will be removed in 3.0\n    this.path = pathDef;\n\n    this.action = options.action || Function.prototype;\n    this.subscriptions = options.subscriptions || Function.prototype;\n    this._subsMap = {};\n  }\n\n\n  register(name, sub) {\n    this._subsMap[name] = sub;\n  }\n\n\n  subscription(name) {\n    return this._subsMap[name];\n  }\n\n\n  middleware() {\n    // ?\n  }\n}\n\nexport default Route;\n","import page         from 'page';\nimport Route        from './route.js';\nimport Group        from './group.js';\nimport { Meteor }   from 'meteor/meteor';\nimport { _helpers } from '../lib/_helpers.js';\n\nconst qs = require('qs');\n\nclass Router {\n  constructor() {\n    this.pathRegExp = /(:[\\w\\(\\)\\\\\\+\\*\\.\\?\\[\\]\\-]+)+/g;\n    this._routes = [];\n    this._routesMap = {};\n    this._current = {};\n    this._specialChars = ['/', '%', '+'];\n    this._encodeParam = param => {\n      const paramArr = param.split('');\n      let _param = '';\n      for (let i = 0; i < paramArr.length; i++) {\n        if (this._specialChars.includes(paramArr[i])) {\n          _param += encodeURIComponent(encodeURIComponent(paramArr[i]));\n        } else {\n          try {\n            _param += encodeURIComponent(paramArr[i]);\n          } catch (e) {\n            _param += paramArr[i];\n          }\n        }\n      }\n      return _param;\n    };\n    this.subscriptions = Function.prototype;\n\n    // holds onRoute callbacks\n    this._onRouteCallbacks = [];\n\n    this.triggers = {\n      enter() {\n        // client only\n      },\n      exit() {\n        // client only\n      }\n    };\n  }\n\n  matchPath(path) {\n    const params = {};\n    const route = this._routes.find(r => {\n      const pageRoute = new page.Route(r.pathDef);\n      return pageRoute.match(path, params);\n    });\n    if (!route) {\n      return null;\n    }\n\n    return {\n      params: _helpers.clone(params),\n      route: _helpers.clone(route),\n    };\n  }\n\n  setCurrent(current) {\n    this._current = current;\n  }\n\n  route(pathDef, options = {}) {\n    if (!/^\\/.*/.test(pathDef) && pathDef !== '*') {\n      throw new Error('route\\'s path must start with \"/\"');\n    }\n\n    const route = new Route(this, pathDef, options);\n    this._routes.push(route);\n\n    if (options.name) {\n      this._routesMap[options.name] = route;\n    }\n\n    this._triggerRouteRegister(route);\n    return route;\n  }\n\n  group(options) {\n    return new Group(this, options);\n  }\n\n  path(_pathDef, fields = {}, queryParams) {\n    let pathDef = _pathDef;\n    if (this._routesMap[pathDef]) {\n      pathDef = this._routesMap[pathDef].path;\n    }\n\n    let path = pathDef.replace(this.pathRegExp, (_key) => {\n      const firstRegexpChar = _key.indexOf('(');\n      // get the content behind : and (\\\\d+/)\n      let key = _key.substring(1, firstRegexpChar > 0 ? firstRegexpChar : undefined);\n      // remove +?*\n      key = key.replace(/[\\+\\*\\?]+/g, '');\n\n      if (fields[key]) {\n        return this._encodeParam(`${fields[key]}`);\n      }\n\n      return '';\n    });\n\n    path = path.replace(/\\/\\/+/g, '/'); // Replace multiple slashes with single slash\n\n    // remove trailing slash\n    // but keep the root slash if it's the only one\n    path = path.match(/^\\/{1}$/) ? path : path.replace(/\\/$/, '');\n\n    const strQueryParams = qs.stringify(queryParams || {});\n    if (strQueryParams) {\n      path += `?${strQueryParams}`;\n    }\n\n    return path;\n  }\n\n  onRouteRegister(cb) {\n    this._onRouteCallbacks.push(cb);\n  }\n\n  _triggerRouteRegister(currentRoute) {\n    // We should only need to send a safe set of fields on the route\n    // object.\n    // This is not to hide what's inside the route object, but to show\n    // these are the public APIs\n    const routePublicApi = _helpers.pick(currentRoute, [\n      'name',\n      'pathDef',\n      'path',\n    ]);\n    routePublicApi.options = _helpers.omit(currentRoute.options, [\n      'triggersEnter',\n      'triggersExit',\n      'action',\n      'subscriptions',\n      'name',\n    ]);\n\n    this._onRouteCallbacks.forEach(cb => {\n      cb(routePublicApi);\n    });\n  }\n\n  go() {\n    // client only\n  }\n\n  current() {\n    // client only\n    return this._current;\n  }\n\n  middleware() {\n    // client only\n  }\n\n  getState() {\n    // client only\n  }\n\n  getAllStates() {\n    // client only\n  }\n\n  getRouteName() {\n    return this._current.route ? this._current.route.name : undefined;\n  }\n\n  getQueryParam(key) {\n    return this._current.query ? this._current.queryParams[key] : undefined;\n  }\n\n  setState() {\n    // client only\n  }\n\n  setParams() {}\n\n  removeState() {\n    // client only\n  }\n\n  clearStates() {\n    // client only\n  }\n\n  ready() {\n    // client only\n  }\n\n  initialize() {\n    // client only\n  }\n\n  wait() {\n    // client only\n  }\n\n  url() {\n    // We need to remove the leading base path, or \"/\", as it will be inserted\n    // automatically by `Meteor.absoluteUrl` as documented in:\n    // http://docs.meteor.com/#/full/meteor_absoluteurl\n    return Meteor.absoluteUrl(this.path.apply(this, arguments).replace(new RegExp('^' + ('/' + (this._basePath || '') + '/').replace(/\\/\\/+/g, '/')), ''));\n  }\n}\n\nexport default Router;\n","import { Meteor }     from 'meteor/meteor';\nimport { _helpers }   from './../../lib/_helpers.js';\nimport { FlowRouter } from '../_init.js';\n\nif(!Package['staringatlights:fast-render']) {\n  return;\n}\n\nconst FastRender = Package['staringatlights:fast-render'].FastRender;\n\nconst setupFastRender = () => {\n  FlowRouter._routes.forEach((route) => {\n    if (route.pathDef === '*') {\n      return;\n    }\n\n    FastRender.route(route.pathDef, function (routeParams, path) {\n      // anyone using Meteor.subscribe for something else?\n      const meteorSubscribe = Meteor.subscribe;\n      Meteor.subscribe = function () {\n        return Array.from(arguments);\n      };\n\n      route._subsMap = {};\n      FlowRouter.subscriptions.call(route, path);\n      if (route.subscriptions) {\n        route.subscriptions(_helpers.omit(routeParams, ['query']), routeParams.query);\n      }\n\n      Object.keys(route._subsMap).forEach((key) => {\n        this.subscribe.apply(this, route._subsMap[key]);\n      });\n\n      // restore Meteor.subscribe, ... on server side\n      Meteor.subscribe = meteorSubscribe;\n    });\n  });\n};\n\n// hack to run after everything else on startup\nMeteor.startup(() => {\n  Meteor.startup(() => {\n    setupFastRender();\n  });\n});\n","import { Meteor } from 'meteor/meteor';\n\nconst _helpers = {\n  isEmpty(obj) { // 1\n    if (obj == null) {\n      return true;\n    }\n\n    if (this.isArray(obj) || this.isString(obj) || this.isArguments(obj)) {\n      return obj.length === 0;\n    }\n\n    return Object.keys(obj).length === 0;\n  },\n  isObject(obj) {\n    const type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  },\n  omit(obj, keys) { // 10\n    if (!this.isObject(obj)) {\n      Meteor._debug('[ostrio:flow-router-extra] [_helpers.omit] First argument must be an Object');\n      return obj;\n    }\n\n    if (!this.isArray(keys)) {\n      Meteor._debug('[ostrio:flow-router-extra] [_helpers.omit] Second argument must be an Array');\n      return obj;\n    }\n\n    const copy = this.clone(obj);\n    keys.forEach((key) => {\n      delete copy[key];\n    });\n\n    return copy;\n  },\n  pick(obj, keys) { // 2\n    if (!this.isObject(obj)) {\n      Meteor._debug('[ostrio:flow-router-extra] [_helpers.omit] First argument must be an Object');\n      return obj;\n    }\n\n    if (!this.isArray(keys)) {\n      Meteor._debug('[ostrio:flow-router-extra] [_helpers.omit] Second argument must be an Array');\n      return obj;\n    }\n\n    const picked = {};\n    keys.forEach((key) => {\n      picked[key] = obj[key];\n    });\n\n    return picked;\n  },\n  isArray(obj) {\n    return Array.isArray(obj);\n  },\n  extend(...objs) { // 4\n    return Object.assign({}, ...objs);\n  },\n  clone(obj) {\n    if (!this.isObject(obj)) return obj;\n    return this.isArray(obj) ? obj.slice() : this.extend(obj);\n  }\n};\n\n['Arguments', 'Function', 'String', 'RegExp'].forEach((name) => {\n  _helpers['is' + name] = function (obj) {\n    return Object.prototype.toString.call(obj) === '[object ' + name + ']';\n  };\n});\n\nexport { _helpers };\n"]}