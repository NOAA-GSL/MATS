{"version":3,"sources":["meteor://ðŸ’»app/packages/ostrio:flow-router-extra/client/_init.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/client/active.route.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/client/group.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/client/modules.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/client/renderer.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/client/route.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/client/router.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/client/triggers.js","meteor://ðŸ’»app/packages/ostrio:flow-router-extra/lib/_helpers.js"],"names":["module","export","FlowRouter","Router","Route","Group","Triggers","BlazeRenderer","RouterHelpers","Meteor","link","v","helpersInit","_helpers","requestAnimFrame","Package","_debug","startup","_askedToWait","_initialized","initialize","route","name","action","params","queryParams","render","layout","template","oldRoute","history","length","window","go","oldParams","JSON","parse","e","refresh","isString","Error","_current","stringify","check","Match","ReactiveDict","Template","templating","init","errorMessages","noSupportedRouter","invalidRouteNameArgument","invalidRouteParamsArgument","checkRouteOrPath","arg","OneOf","RegExp","String","checkParams","Object","config","setDefault","activeClass","caseSensitive","disabledClass","test","_value","_pattern","value","pattern","search","equals","toLowerCase","ActiveRoute","configure","apply","arguments","options","isServer","set","routeName","routeParams","currentPath","currentRouteName","path","isEmpty","watchPathChange","current","getRouteName","isActive","type","inverse","helperName","_options","_attributes","isObject","hash","attributes","regex","extend","ObjectIncluding","Optional","className","class","t","isRegExp","get","isPath","result","data","omit","arHelpers","isActiveRoute","isActivePath","isNotActiveRoute","isNotActivePath","entries","helper","registerHelper","subsReady","_subs","subs","slice","filter","memo","sub","pathFor","_path","_view","view","query","_qs","hashBang","urlFor","absoluteUrl","substr","param","getParam","queryParam","key","getQueryParam","currentRouteOption","optionName","isSubReady","frHelpers","FlowRouterHelpers","assign","exportDefault","makeTrigger","trigger","isFunction","isArray","makeWaitFor","func","makeTriggers","_base","_triggers","concat","router","parent","prefix","_waitFor","waitOn","_router","_triggersEnter","triggersEnter","_triggersExit","triggersExit","_subscriptions","subscriptions","Function","prototype","_pathDef","_group","group","pathDef","waitFor","callSubscriptions","call","page","qs","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setTimeout","Blaze","blaze","_BlazeRemove","remove","_e","_destroyView","_domrange","destroy","__e","opts","rootElement","document","body","self","isRendering","queue","yield","cache","old","newState","materialized","inMemoryRendering","getMemoryElement","createElement","onCreated","onRendered","materialize","onDestroyed","__layout","__template","__data","__callback","push","startQueue","task","shift","proceed","bind","_layout","_template","viewName","replace","updateTemplate","newElement","_render","_load","getData","renderWithData","element","appendChild","updateLayout","dataVar","_parentElement","base","parentElement","Promise","Tracker","triggers","Renderer","globals","conf","_data","_action","_waitOn","_subsMap","_onNoData","onNoData","_endWaiting","endWaiting","_currentData","_whileWaiting","whileWaiting","_waitOnResources","waitOnResources","_params","_queryParams","_routeCloseDep","Dependency","_pathChangeDep","clearSubscriptions","register","getSubscription","getAllSubscriptions","checkSubscriptions","results","i","ready","includes","next","_isWaiting","_preloaded","_resources","promises","timer","trackers","placeIn","d","toString","then","flush","whileWaitingAction","subWait","delay","clearTimeout","getResources","wait","all","catch","error","processSubData","subData","Array","stopSubs","stop","done","subscription","unshift","preload","len","items","images","other","XMLHttpRequest","elem","index","indexOf","prefetch","k","onload","onerror","open","send","imgs","j","Image","src","forEach","wo","triggerExitIndex","splice","callAction","depend","registerRouteClose","changed","registerRouteChange","currentContext","routeChanging","_updateReactiveDict","dict","newValues","currentKeys","keys","oldKeys","keyDeps","undefined","EJSON","pathRegExp","_tracker","_buildTracker","_specialChars","_encodeParam","paramArr","split","_param","encodeURIComponent","_onEveryPath","_globalRoute","_onRouteCallbacks","_routes","_routesMap","_updateCallbacks","_notFound","notfound","notFound","safeToRun","_basePath","__meteor_runtime_config__","ROOT_URL_PATH_PREFIX","_oldRouteChain","env","replaceState","EnvironmentVariable","reload","trailingSlash","reactiveApis","api","arg1","currentRoute","_redirectFn","fields","withReplaceState","_page","redirect","_initTriggersAPI","_actionHandle","context","querystring","afterAllTriggersRan","_invalidateTracker","runTriggers","_exitHandle","_triggerRouteRegister","_key","firstRegexpChar","substring","match","strQueryParams","withValue","setParams","newParams","existingParams","setQueryParams","clone","track","reactiveMapper","props","onData","trackerCleanup","handler","nonreactive","autorun","mapper","trackMapper","args","from","pop","globalRoute","values","map","subName","isReady","every","c","fn","withTrailingSlash","fnName","original","state","dispatch","pageOptions","hashbang","decodeURLComponents","tracker","isRouteChange","oldestRoute","afterFlush","invalidate","currentComputation","ex","message","defer","_nextPath","callbacks","exits","catchAll","exit","enter","applyFilters","onRouteRegister","cb","routePublicApi","pick","url","only","except","createRouteBoundTriggers","names","negate","namesMap","filteredTriggers","originalTrigger","modifiedTrigger","matched","redirectFn","after","abort","inCurrentLoop","alreadyRedirected","doRedirect","doStop","lc","obj","isArguments","copy","picked","objs"],"mappings":"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","file":"/packages/ostrio_flow-router-extra.js","sourcesContent":["import { Meteor }    from 'meteor/meteor';\nimport Router        from './router.js';\nimport Route         from './route.js';\nimport Group         from './group.js';\nimport Triggers      from './triggers.js';\nimport BlazeRenderer from './renderer.js';\nimport helpersInit   from './active.route.js';\nimport { _helpers }  from './../lib/_helpers.js';\nimport { requestAnimFrame } from './modules.js';\n\nif (Package['zimme:active-route']) {\n  Meteor._debug('Please remove `zimme:active-route` package, as its features is build into flow-router-extra, and will interfere.');\n  Meteor._debug('meteor remove zimme:active-route');\n}\n\nif (Package['arillo:flow-router-helpers']) {\n  Meteor._debug('Please remove `arillo:flow-router-helpers` package, as its features is build into flow-router-extra, and will interfere.');\n  Meteor._debug('meteor remove arillo:flow-router-helpers');\n}\n\nif (Package['meteorhacks:inject-data']) {\n  Meteor._debug('`meteorhacks:inject-data` is deprecated, please remove it and install its successor - `staringatlights:inject-data`');\n  Meteor._debug('meteor remove meteorhacks:inject-data');\n  Meteor._debug('meteor add staringatlights:inject-data');\n}\n\nif (Package['meteorhacks:fast-render']) {\n  Meteor._debug('`meteorhacks:fast-render` is deprecated, please remove it and install its successor - `staringatlights:fast-render`');\n  Meteor._debug('meteor remove meteorhacks:fast-render');\n  Meteor._debug('meteor add staringatlights:fast-render');\n}\n\nconst FlowRouter = new Router();\nFlowRouter.Router = Router;\nFlowRouter.Route = Route;\n\n// Initialize FlowRouter\nMeteor.startup(() => {\n  if(!FlowRouter._askedToWait && !FlowRouter._initialized) {\n    FlowRouter.initialize();\n\n    FlowRouter.route('/___refresh/:layout/:template/:oldRoute?', {\n      name: '___refresh',\n      action(params, queryParams) {\n        this.render(params.layout, params.template, () => {\n          requestAnimFrame(() => {\n            if (params.oldRoute) {\n              try {\n                if (history.length) {\n                  window.history.go(-1);\n                } else {\n                  FlowRouter.go(params.oldRoute, (queryParams.oldParams ? JSON.parse(queryParams.oldParams) : {}));\n                }\n              } catch (e) {\n                FlowRouter.go('/');\n              }\n            } else {\n              if (history.length) {\n                window.history.go(-1);\n              } else {\n                FlowRouter.go('/');\n              }\n            }\n          });\n        });\n      }\n    });\n\n    FlowRouter.refresh = (layout, template) => {\n      if (!layout || !_helpers.isString(layout)) {\n        throw new Meteor.Error(400, '[FlowRouter.refresh(layout, template)] -> \"layout\" must be a String!');\n      }\n\n      if (!template || !_helpers.isString(template)) {\n        throw new Meteor.Error(400, '[FlowRouter.refresh(layout, template)] -> \"template\" must be a String!');\n      }\n\n      FlowRouter.go('___refresh', {\n        oldRoute: FlowRouter._current.route.name,\n        layout,\n        template\n      }, {\n        oldParams: JSON.stringify(FlowRouter._current.params || {})\n      });\n    };\n  }\n});\n\nconst RouterHelpers = helpersInit(FlowRouter);\n\nexport { FlowRouter, Router, Route, Group, Triggers, BlazeRenderer, RouterHelpers };\n","import { Meteor }       from 'meteor/meteor';\nimport { _helpers }     from './../lib/_helpers.js';\nimport { check, Match } from 'meteor/check';\nimport { ReactiveDict } from 'meteor/reactive-dict';\n\nlet Template;\nif (Package.templating) {\n  Template = Package.templating.Template;\n}\n\nconst init = (FlowRouter) => {\n  // Active Route\n  // https://github.com/meteor-activeroute/legacy\n  // zimme:active-route\n  // License (MIT License): https://github.com/meteor-activeroute/legacy/blob/master/LICENSE.md\n  // Lib\n  const errorMessages = {\n    noSupportedRouter: 'No supported router installed. Please install flow-router.',\n    invalidRouteNameArgument: 'Invalid argument, must be String or RegExp.',\n    invalidRouteParamsArgument: 'Invalid argument, must be Object.'\n  };\n\n  const checkRouteOrPath = (arg) => {\n    try {\n      return check(arg, Match.OneOf(RegExp, String));\n    } catch (e) {\n      throw new Error(errorMessages.invalidRouteNameArgument);\n    }\n  };\n\n  const checkParams = (arg) => {\n    try {\n      return check(arg, Object);\n    } catch (e) {\n      throw new Error(errorMessages.invalidRouteParamsArgument);\n    }\n  };\n\n  const config = new ReactiveDict('activeRouteConfig');\n  config.setDefault({\n    activeClass: 'active',\n    caseSensitive: true,\n    disabledClass: 'disabled'\n  });\n\n  const test = (_value, _pattern) => {\n    let value = _value;\n    let pattern = _pattern;\n    if (!value) {\n      return false;\n    }\n\n    if (Match.test(pattern, RegExp)) {\n      return value.search(pattern) > -1;\n    }\n\n    if (Match.test(pattern, String)) {\n      if (config.equals('caseSensitive', false)) {\n        value = value.toLowerCase();\n        pattern = pattern.toLowerCase();\n      }\n      return (value === pattern);\n    }\n\n    return false;\n  };\n\n  const ActiveRoute = {\n    config() {\n      return this.configure.apply(this, arguments);\n    },\n    configure(options) {\n      if (!Meteor.isServer) {\n        config.set(options);\n      }\n    },\n    name(routeName, routeParams = {}) {\n      if (Meteor.isServer) {\n        return void 0;\n      }\n      checkRouteOrPath(routeName);\n      checkParams(routeParams);\n\n      let currentPath;\n      let currentRouteName;\n      let path;\n      if (!_helpers.isEmpty(routeParams) && Match.test(routeName, String)) {\n        FlowRouter.watchPathChange();\n        currentPath = FlowRouter.current().path;\n        path = FlowRouter.path(routeName, routeParams);\n      } else {\n        currentRouteName = FlowRouter.getRouteName();\n      }\n      return test(currentPath || currentRouteName, path || routeName);\n    },\n    path(path) {\n      if (Meteor.isServer) {\n        return void 0;\n      }\n      checkRouteOrPath(path);\n\n      FlowRouter.watchPathChange();\n      return test(FlowRouter.current().path, path);\n    }\n  };\n\n  // Client\n  const isActive = (type, inverse = false) => {\n    let helperName;\n\n    helperName = 'is';\n    if (inverse) {\n      helperName += 'Not';\n    }\n    helperName += 'Active' + type;\n\n    return (_options = {}, _attributes = {}) => {\n      let options    = (_helpers.isObject(_options)) ? (_options.hash || _options) : _options;\n      let attributes = (_helpers.isObject(_attributes)) ? (_attributes.hash || _attributes) : _attributes;\n\n      if (Match.test(options, String)) {\n        if (config.equals('regex', true)) {\n          options = {\n            regex: options\n          };\n        } else if (type === 'Path') {\n          options = {\n            path: options\n          };\n        } else {\n          options = {\n            name: options\n          };\n        }\n      }\n      options = _helpers.extend(options, attributes);\n      const pattern = Match.ObjectIncluding({\n        class: Match.Optional(String),\n        className: Match.Optional(String),\n        regex: Match.Optional(Match.OneOf(RegExp, String)),\n        name: Match.Optional(String),\n        path: Match.Optional(String)\n      });\n      check(options, pattern);\n\n      let regex     = options.regex;\n      let name      = options.name;\n      let path      = options.path;\n      let className = options.class ? options.class : options.className;\n      if (type === 'Path') {\n        name = null;\n      } else {\n        path = null;\n      }\n\n      if (!(regex || name || path)) {\n        const t = (type === 'Route' ? 'name' : type).toLowerCase();\n        Meteor._debug(('Invalid argument, ' + helperName + ' takes \"' + t + '\", ') + (t + '=\"' + t + '\" or regex=\"regex\"'));\n        return false;\n      }\n\n      if (Match.test(regex, String)) {\n        if (config.equals('caseSensitive', false)) {\n          regex = new RegExp(regex, 'i');\n        } else {\n          regex = new RegExp(regex);\n        }\n      }\n\n      if (!_helpers.isRegExp(regex)) {\n        regex = name || path;\n      }\n\n      if (inverse) {\n        if (!_helpers.isString(className)) {\n          className = config.get('disabledClass');\n        }\n      } else {\n        if (!_helpers.isString(className)) {\n          className = config.get('activeClass');\n        }\n      }\n\n      let isPath;\n      let result;\n      if (type === 'Path') {\n        isPath = true;\n      }\n\n      if (isPath) {\n        result = ActiveRoute.path(regex);\n      } else {\n        options = _helpers.extend(attributes.data, attributes);\n        result = ActiveRoute.name(regex, _helpers.omit(options, ['class', 'className', 'data', 'regex', 'name', 'path']));\n      }\n\n      if (inverse) {\n        result = !result;\n      }\n\n      if (result) {\n        return className;\n      }\n      return false;\n    };\n  };\n\n  const arHelpers = {\n    isActiveRoute: isActive('Route'),\n    isActivePath: isActive('Path'),\n    isNotActiveRoute: isActive('Route', true),\n    isNotActivePath: isActive('Path', true)\n  };\n\n  // If blaze is in use, register global helpers\n  if (Template) {\n    for (const [name, helper] of Object.entries(arHelpers)) {\n      Template.registerHelper(name, helper);\n    }\n  }\n\n  // FlowRouter Helpers\n  // arillo:flow-router-helpers\n  // https://github.com/arillo/meteor-flow-router-helpers\n  // License (MIT License): https://github.com/arillo/meteor-flow-router-helpers/blob/master/LICENCE\n  const subsReady = (..._subs) => {\n    let subs = _subs.slice(0, -1);\n    if (subs.length === 1) {\n      return FlowRouter.subsReady();\n    }\n\n    return subs.filter((memo, sub) => {\n      if (_helpers.isString(sub)) {\n        return memo && FlowRouter.subsReady(sub);\n      }\n    }, true);\n  };\n\n  const pathFor = (_path, _view = {hash: {}}) => {\n    let path = _path;\n    let view = _view;\n    if (!path) {\n      throw new Error('no path defined');\n    }\n\n    if (!view.hash) {\n      view = {\n        hash: view\n      };\n    }\n\n    if (path.hash && path.hash.route) {\n      view = path;\n      path = view.hash.route;\n      delete view.hash.route;\n    }\n    const query    = view.hash.query ? FlowRouter._qs.parse(view.hash.query) : {};\n    const hashBang = view.hash.hash ? view.hash.hash : '';\n    return FlowRouter.path(path, view.hash, query) + (hashBang ? '#' + hashBang : '');\n  };\n\n  const urlFor = (path, view) => {\n    return Meteor.absoluteUrl(pathFor(path, view).substr(1));\n  };\n\n  const param = (name) => {\n    return FlowRouter.getParam(name);\n  };\n\n  const queryParam = (key) => {\n    return FlowRouter.getQueryParam(key);\n  };\n\n  const currentRouteName = () => {\n    return FlowRouter.getRouteName();\n  };\n\n  const currentRouteOption = (optionName) => {\n    return FlowRouter.current().route.options[optionName];\n  };\n\n  const isSubReady = (sub) => {\n    if (sub) {\n      return FlowRouter.subsReady(sub);\n    }\n    return FlowRouter.subsReady();\n  };\n\n  const frHelpers = {\n    subsReady: subsReady,\n    pathFor: pathFor,\n    urlFor: urlFor,\n    param: param,\n    queryParam: queryParam,\n    currentRouteName: currentRouteName,\n    isSubReady: isSubReady,\n    currentRouteOption: currentRouteOption\n  };\n\n  let FlowRouterHelpers;\n\n  if (Meteor.isServer) {\n    FlowRouterHelpers = {\n      pathFor: pathFor,\n      urlFor: urlFor\n    };\n  } else {\n    FlowRouterHelpers = frHelpers;\n    // If blaze is in use, register global helpers\n    if (Template) {\n      for (const [name, helper] of Object.entries(frHelpers)) {\n        Template.registerHelper(name, helper);\n      }\n    }\n  }\n\n  return Object.assign({}, ActiveRoute, FlowRouterHelpers);\n};\n\nexport default init;\n","import { _helpers } from './../lib/_helpers.js';\n\nconst makeTrigger = (trigger) => {\n  if (_helpers.isFunction(trigger)) {\n    return [trigger];\n  } else if (!_helpers.isArray(trigger)) {\n    return [];\n  }\n\n  return trigger;\n};\n\nconst makeWaitFor = (func) => {\n  if (_helpers.isFunction(func)) {\n    return [func];\n  }\n\n  return [];\n};\n\nconst makeTriggers = (_base, _triggers) => {\n  if (!_base && !_triggers) {\n    return [];\n  }\n  return makeTrigger(_base).concat(makeTrigger(_triggers));\n};\n\nclass Group {\n  constructor(router, options = {}, parent) {\n    if (options.prefix && !/^\\//.test(options.prefix)) {\n      throw new Error('group\\'s prefix must start with \"/\"');\n    }\n\n    this._waitFor = makeWaitFor(options.waitOn);\n    this._router  = router;\n    this.prefix   = options.prefix || '';\n    this.name     = options.name;\n    this.options  = options;\n\n    this._triggersEnter = makeTriggers(options.triggersEnter, this._triggersEnter);\n    this._triggersExit  = makeTriggers(this._triggersExit, options.triggersExit);\n\n    this._subscriptions = options.subscriptions || Function.prototype;\n\n    this.parent = parent;\n    if (this.parent) {\n      this.prefix = parent.prefix + this.prefix;\n      this._triggersEnter = makeTriggers(parent._triggersEnter, this._triggersEnter);\n      this._triggersExit  = makeTriggers(this._triggersExit, parent._triggersExit);\n      this._waitFor       = this.parent._waitFor.concat(this._waitFor);\n    }\n  }\n\n  route(_pathDef, options = {}, _group) {\n    if (!/^\\//.test(_pathDef)) {\n      throw new Error('route\\'s path must start with \"/\"');\n    }\n\n    const group   = _group || this;\n    const pathDef = this.prefix + _pathDef;\n\n    options.triggersEnter = makeTriggers(this._triggersEnter, options.triggersEnter);\n    options.triggersExit  = makeTriggers(options.triggersExit, this._triggersExit);\n    options.waitFor       = this._waitFor.concat([]);\n    return this._router.route(pathDef, _helpers.extend(_helpers.omit(this.options, ['triggersEnter', 'triggersExit', 'subscriptions', 'prefix', 'waitOn', 'name', 'title', 'titlePrefix', 'link', 'script', 'meta']), options), group);\n  }\n\n  group(options) {\n    return new Group(this._router, options, this);\n  }\n\n  callSubscriptions(current) {\n    if (this.parent) {\n      this.parent.callSubscriptions(current);\n    }\n\n    this._subscriptions.call(current.route, current.params, current.queryParams);\n  }\n}\n\nexport default Group;\n","import page from 'page';\nimport qs   from 'qs';\nconst requestAnimFrame = (() => {\n  return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (callback) {\n    setTimeout(callback, 1000 / 60);\n  };\n})();\n\nexport { page, qs, requestAnimFrame };\n","import { Meteor }           from 'meteor/meteor';\nimport { _helpers }         from './../lib/_helpers.js';\nimport { requestAnimFrame } from './modules.js';\n\nlet Blaze;\nlet Template;\n\nif (Package.templating && Package.blaze) {\n  Blaze    = Package.blaze.Blaze;\n  Template = Package.templating.Template;\n}\n\nconst _BlazeRemove = function (view) {\n  try {\n    Blaze.remove(view);\n  } catch (_e) {\n    try {\n      Blaze._destroyView(view);\n      view._domrange.destroy();\n    } catch (__e) {\n      view._domrange.destroy();\n    }\n  }\n};\n\nclass BlazeRenderer {\n  constructor(opts = {}) {\n    if (!Blaze || !Template) {\n      return;\n    }\n\n    this.rootElement  = opts.rootElement || function () {\n      return document.body;\n    };\n\n    const self        = this;\n    this.isRendering  = false;\n    this.queue        = [];\n    this.yield        = null;\n    this.cache        = {};\n    this.old          = this.newState();\n    this.old.materialized = true;\n\n    this.inMemoryRendering = opts.inMemoryRendering || false;\n    this.getMemoryElement  = opts.getMemoryElement || function () {\n      return document.createElement('div');\n    };\n\n    if (!this.getMemoryElement || !_helpers.isFunction(this.getMemoryElement)) {\n      throw new Meteor.Error(400, '{getMemoryElement} must be a function, which returns new DOM element');\n    }\n\n    if (!this.rootElement || !_helpers.isFunction(this.rootElement)) {\n      throw new Meteor.Error(400, 'You must pass function into BlazeRenderer constructor, which returns DOM element');\n    }\n\n    Template.yield = new Template('yield', function () {});\n\n    Template.yield.onCreated(function () {\n      self.yield = this;\n    });\n\n    Template.yield.onRendered(function () {\n      self.yield = this;\n      self.materialize(self.old);\n    });\n\n    Template.yield.onDestroyed(function () {\n      if (self.old.template.view) {\n        _BlazeRemove(self.old.template.view);\n        self.old.template.view = null;\n        self.old.materialized = false;\n      }\n      self.yield = null;\n    });\n  }\n\n  render(__layout, __template = false, __data = {}, __callback) {\n    if (!Blaze || !Template) {\n      throw new Meteor.Error(400, '`.render()` - Requires `blaze` and `templating`, or `blaze-html-templates` packages to be installed');\n    }\n\n    if (!__layout) {\n      throw new Meteor.Error(400, '`.render()` - Requires at least one argument');\n    } else if (!_helpers.isString(__layout) && !(__layout instanceof Blaze.Template)) {\n      throw new Meteor.Error(400, '`.render()` - First argument must be a String or instance of Blaze.Template');\n    }\n\n    this.queue.push([__layout, __template, __data, __callback]);\n    this.startQueue();\n  }\n\n  startQueue() {\n    if (this.queue.length) {\n      if (!this.isRendering) {\n        this.isRendering = true;\n        const task = this.queue.shift();\n        this.proceed.apply(this, task);\n        if (this.queue.length) {\n          requestAnimFrame(this.startQueue.bind(this));\n        }\n      } else {\n        requestAnimFrame(this.startQueue.bind(this));\n      }\n    }\n  }\n\n  proceed(__layout, __template = false, __data = {}, __callback) {\n    if (!Blaze || !Template) {\n      return;\n    }\n\n    let data      = __data;\n    let layout    = __layout;\n    let _layout   = false;\n    let template  = __template;\n    let _template = false;\n    let callback  = __callback || (() => {});\n\n    if (_helpers.isString(layout)) {\n      _layout = typeof Template !== 'undefined' && Template !== null ? Template[layout] : void 0;\n    } else if (layout instanceof Blaze.Template) {\n      _layout = layout;\n      layout  = layout.viewName.replace('Template.', '');\n    } else {\n      layout = false;\n    }\n\n    if (_helpers.isString(template)) {\n      _template = typeof Template !== 'undefined' && Template !== null ? Template[template] : void 0;\n    } else if (template instanceof Blaze.Template) {\n      _template = template;\n      template  = template.viewName.replace('Template.', '');\n    } else if (_helpers.isObject(template)) {\n      data     = template;\n      template = false;\n    } else if (_helpers.isFunction(template)) {\n      callback = template;\n      template = false;\n    } else {\n      template = false;\n    }\n\n    if (_helpers.isFunction(data)) {\n      callback = data;\n      data = {};\n    } else if (!_helpers.isObject(data)) {\n      data = {};\n    }\n\n    if (!_helpers.isFunction(callback)) {\n      callback = () => {};\n    }\n\n    if (!_layout) {\n      this.old.materialized = true;\n      this.isRendering = false;\n      throw new Meteor.Error(404, 'No such layout: ' + layout);\n    }\n\n    const current      = this.newState(layout, template);\n    current.data       = data;\n    current.callback   = callback;\n    let updateTemplate = true;\n\n    if (this.old.template.name !== template) {\n      current.template.name  = template;\n      current.template.blaze = _template;\n      this.newElement('template', current);\n      if (this.old.template.view) {\n        _BlazeRemove(this.old.template.view);\n        this.old.template.view = null;\n        this.old.materialized = false;\n      }\n\n      updateTemplate = false;\n    } else {\n      current.template = this.old.template;\n    }\n\n    if (this.old.layout.name !== layout) {\n      current.layout.name    = layout;\n      current.layout.blaze   = _layout;\n      current.template.name  = template;\n      current.template.blaze = _template;\n      this.newElement('layout', current);\n\n      if (this.old.layout.view) {\n        _BlazeRemove(this.old.layout.view);\n        this.old.layout.view = null;\n      }\n\n      this._render(current);\n    } else if (template) {\n      current.layout         = this.old.layout;\n      current.template.name  = template;\n      current.template.blaze = _template;\n      this._load(updateTemplate, true, current);\n    } else {\n      current.layout = this.old.layout;\n      this.isRendering = false;\n      current.materialized = true;\n      current.callback();\n      current.callback = () => {};\n    }\n\n    this.old = current;\n  }\n\n  _render(current) {\n    if (!Blaze || !Template) {\n      return;\n    }\n\n    const getData = () => {\n      return current.data;\n    };\n\n    const rootElement = this.rootElement();\n    if (!rootElement) {\n      throw new Meteor.Error(400, 'BlazeRenderer can\\'t find root element!');\n    }\n\n    if (this.inMemoryRendering) {\n      current.layout.view = Blaze.renderWithData(current.layout.blaze, getData, current.layout.element);\n      requestAnimFrame(() => {\n        rootElement.appendChild(current.layout.element);\n        this._load(false, false, current);\n      });\n    } else {\n      current.layout.view = Blaze.renderWithData(current.layout.blaze, getData, rootElement);\n      this._load(false, false, current);\n    }\n  }\n\n  _load(updateTemplate, updateLayout, current) {\n    if (updateLayout && current.layout.view) {\n      current.layout.view.dataVar.set(current.data);\n    }\n\n    if (current.template.view && updateTemplate) {\n      current.template.view.dataVar.set(current.data);\n      this.isRendering = false;\n      current.materialized = true;\n      current.callback();\n      current.callback = () => {};\n    } else if (!current.template.name) {\n      this.isRendering = false;\n      current.materialized = true;\n      current.callback();\n      current.callback = () => {};\n    } else if (current.template.name && !this.yield) {\n      this.isRendering = false;\n      current.materialized = false;\n      current.callback();\n      current.callback = () => {};\n    } else if (current.template.name && this.yield) {\n      this.materialize(current);\n    }\n  }\n\n  newElement(type, current) {\n    if (!this.inMemoryRendering) {\n      return;\n    }\n\n    current[type].parent  = current[type].parent ? current[type].parent : document.createElement('div');\n    if (!current[type].element) {\n      current[type].element = this.getMemoryElement();\n      current[type].parent.appendChild(current[type].element);\n      current[type].element._parentElement = current[type].parent;\n    }\n  }\n\n  newState(layout = false, template = false) {\n    const base = {\n      materialized: false,\n      data: null,\n      callback: function () {},\n      layout: {\n        view: null,\n        name: '',\n        blaze: null,\n        parent: null,\n        element: null\n      },\n      template: {\n        view: null,\n        name: '',\n        blaze: null,\n        parent: null,\n        element: null\n      }\n    };\n\n    if (!this.inMemoryRendering || (!layout && !template)) {\n      return base;\n    }\n\n    if (layout && this.cache[layout]) {\n      base.layout = this.cache[layout];\n    }\n\n    if (template && this.cache[template]) {\n      base.template = this.cache[template];\n    }\n\n    this.cache[template] = base;\n    return base;\n  }\n\n  materialize(current) {\n    if (!Blaze || !Template) {\n      return;\n    }\n\n    if (current.template.name && !current.materialized) {\n      const getData = () => {\n        return current.data;\n      };\n\n      if (!this.yield) {\n        current.materialized = false;\n        return;\n      }\n\n      current.materialized = true;\n      if (this.inMemoryRendering) {\n        current.template.view = Blaze.renderWithData(current.template.blaze, getData, current.template.element, this.yield.view);\n        if (this.yield) {\n          this.yield.view._domrange.parentElement.appendChild(current.template.element);\n          this.isRendering = false;\n          current.materialized = true;\n          current.callback();\n          current.callback = () => {};\n        } else {\n          current.materialized = false;\n        }\n      } else {\n        if (this.yield) {\n          current.template.view = Blaze.renderWithData(current.template.blaze, getData, this.yield.view._domrange.parentElement, this.yield.view);\n          this.isRendering = false;\n          current.materialized = true;\n          current.callback();\n          current.callback = () => {};\n        } else {\n          current.materialized = false;\n        }\n      }\n    }\n  }\n}\n\nexport default BlazeRenderer;\n","import { Router }       from './_init.js';\nimport { Meteor }       from 'meteor/meteor';\nimport { Promise }      from 'meteor/promise';\nimport { Tracker }      from 'meteor/tracker';\nimport { _helpers }     from './../lib/_helpers.js';\nimport { ReactiveDict } from 'meteor/reactive-dict';\n\nconst makeTriggers = (triggers) => {\n  if (_helpers.isFunction(triggers)) {\n    return [triggers];\n  } else if (!_helpers.isArray(triggers)) {\n    return [];\n  }\n\n  return triggers;\n};\n\nclass Route {\n  constructor(router = new Router(), pathDef, options = {}, group) {\n    this.render           = router.Renderer.render.bind(router.Renderer);\n    this.options          = options;\n    this.globals          = router.globals;\n    this.pathDef          = pathDef;\n\n    // Route.path is deprecated and will be removed in 3.0\n    this.path             = pathDef;\n    this.conf             = options.conf || {};\n    this.group            = group;\n    this._data            = options.data || null;\n    this._router          = router;\n    this._action          = options.action || Function.prototype;\n    this._waitOn          = options.waitOn || null;\n    this._waitFor         = _helpers.isArray(options.waitFor) ? options.waitFor : [];\n    this._subsMap         = {};\n    this._onNoData        = options.onNoData || null;\n    this._endWaiting      = options.endWaiting || null;\n    this._currentData     = null;\n    this._triggersExit    = options.triggersExit ? makeTriggers(options.triggersExit) : [];\n    this._whileWaiting    = options.whileWaiting || null;\n    this._triggersEnter   = options.triggersEnter ? makeTriggers(options.triggersEnter) : [];\n    this._subscriptions   = options.subscriptions || Function.prototype;\n    this._waitOnResources = options.waitOnResources || null;\n\n    this._params          = new ReactiveDict();\n    this._queryParams     = new ReactiveDict();\n    this._routeCloseDep   = new Tracker.Dependency();\n    this._pathChangeDep   = new Tracker.Dependency();\n\n    if (options.name) {\n      this.name = options.name;\n    }\n  }\n\n  clearSubscriptions() {\n    this._subsMap = {};\n  }\n\n  register(name, sub) {\n    this._subsMap[name] = sub;\n  }\n\n  getSubscription(name) {\n    return this._subsMap[name];\n  }\n\n  getAllSubscriptions() {\n    return this._subsMap;\n  }\n\n  checkSubscriptions(subscriptions) {\n    const results = [];\n    for (let i = 0; i < subscriptions.length; i++) {\n      results.push((subscriptions[i] && subscriptions[i].ready) ? subscriptions[i].ready() : false);\n    }\n\n    return !results.includes(false);\n  }\n\n  waitOn(current = {}, next) {\n    let _data         = null;\n    let _isWaiting    = false;\n    let _preloaded    = 0;\n    let _resources    = false;\n    let waitFor       = [];\n    let promises      = [];\n    let subscriptions = [];\n    let timer;\n    let trackers      = [];\n\n    const placeIn = (d) => {\n      if (Object.prototype.toString.call(d) === '[object Promise]' || d.then && Object.prototype.toString.call(d.then) === '[object Function]') {\n        promises.push(d);\n      } else if (d.flush) {\n        trackers.push(d);\n      } else if (d.ready) {\n        subscriptions.push(d);\n      }\n    };\n\n    const whileWaitingAction = () => {\n      if (!_isWaiting) {\n        this._whileWaiting && this._whileWaiting(current.params, current.queryParams);\n        _isWaiting = true;\n      }\n    };\n\n    const subWait = (delay) => {\n      timer = Meteor.setTimeout(() => {\n        if (this.checkSubscriptions(subscriptions)) {\n          Meteor.clearTimeout(timer);\n          _data = getData();\n          if (_resources) {\n            whileWaitingAction();\n            getResources();\n          } else {\n            next(current, _data);\n          }\n        } else {\n          wait(25);\n        }\n      }, delay);\n    };\n\n    const wait = (delay) => {\n      if (promises.length) {\n        Promise.all(promises).then(() => {\n          subWait(delay);\n          promises = [];\n        }).catch((error) => {\n          Meteor._debug('[ostrio:flow-router-extra] [route.wait] Promise not resolved', error);\n        });\n      } else {\n        subWait(delay);\n      }\n    };\n\n    const processSubData = (subData) => {\n      if (subData instanceof Array) {\n        for (let i = subData.length - 1; i >= 0; i--) {\n          if (subData[i] !== null && typeof subData[i] === 'object') {\n            placeIn(subData[i]);\n          }\n        }\n      } else if (subData !== null && typeof subData === 'object') {\n        placeIn(subData);\n      }\n    };\n\n    const stopSubs = () => {\n      for (let i = subscriptions.length - 1; i >= 0; i--) {\n        if (subscriptions[i].stop) {\n          subscriptions[i].stop();\n        }\n        delete subscriptions[i];\n      }\n      subscriptions = [];\n    };\n\n    const done = (subscription) => {\n      processSubData(_helpers.isFunction(subscription) ? subscription() : subscription);\n    };\n\n    if (current.route.globals.length) {\n      for (let i = 0; i < current.route.globals.length; i++) {\n        if (typeof current.route.globals[i] === 'object') {\n          if (current.route.globals[i].waitOnResources) {\n            if (!_resources) { _resources = []; }\n            _resources.push(current.route.globals[i].waitOnResources);\n          }\n\n          if (current.route.globals[i].waitOn && _helpers.isFunction(current.route.globals[i].waitOn)) {\n            waitFor.unshift(current.route.globals[i].waitOn);\n          }\n        }\n      }\n    }\n\n    if (this._waitOnResources) {\n      if (!_resources) { _resources = []; }\n      _resources.push(this._waitOnResources);\n    }\n\n    const preload = (len, __data) => {\n      _preloaded++;\n      if (_preloaded >= len) {\n        next(current, __data);\n      }\n    };\n\n    const getData = () => {\n      if (this._data) {\n        if (!_data) {\n          _data = this._currentData = this._data(current.params, current.queryParams);\n        } else {\n          _data = this._currentData;\n        }\n      }\n      return _data;\n    };\n\n    const getResources = () => {\n      _data      = getData();\n      let len    = 0;\n      let items;\n      let images = [];\n      let other  = [];\n      for (let i = _resources.length - 1; i >= 0; i--) {\n        items = _resources[i].call(this, current.params, current.queryParams, _data);\n        if (items) {\n          if (items.images && items.images.length) {\n            images = images.concat(items.images);\n          }\n          if (items.other && items.other.length) {\n            other = other.concat(items.other);\n          }\n        }\n      }\n\n      if ((other && other.length) || (images && images.length)) {\n        if (other && other.length && typeof XMLHttpRequest !== 'undefined') {\n          other = other.filter((elem, index, self) => {\n            return index === self.indexOf(elem);\n          });\n          len += other.length;\n          const prefetch = {};\n          for (let k = other.length - 1; k >= 0; k--) {\n            prefetch[k] = new XMLHttpRequest();\n            prefetch[k].onload  = () => { preload(len, _data); };\n            prefetch[k].onerror = () => { preload(len, _data); };\n            prefetch[k].open('GET', other[k]);\n            prefetch[k].send(null);\n          }\n        }\n\n        if (images && images.length){\n          images = images.filter((elem, index, self) => {\n            return index === self.indexOf(elem);\n          });\n          len += images.length;\n          const imgs = {};\n          for (let j = images.length - 1; j >= 0; j--) {\n            imgs[j]         = new Image();\n            imgs[j].onload  = () => { preload(len, _data); };\n            imgs[j].onerror = () => { preload(len, _data); };\n            imgs[j].src     = images[j];\n          }\n        }\n      } else {\n        next(current, _data);\n      }\n    };\n\n    if (this._waitFor.length) {\n      waitFor = waitFor.concat(this._waitFor);\n    }\n\n    if (_helpers.isFunction(this._waitOn)) {\n      waitFor.push(this._waitOn);\n    }\n\n    if (waitFor.length) {\n      waitFor.forEach((wo) => {\n        processSubData(wo.call(this, current.params, current.queryParams, done));\n      });\n\n      let triggerExitIndex = this._triggersExit.push(() => {\n        stopSubs();\n        for (let i = trackers.length - 1; i >= 0; i--) {\n          if (trackers[i].stop) {\n            trackers[i].stop();\n          }\n          delete trackers[i];\n        }\n        trackers = [];\n        promises = [];\n        subscriptions = [];\n        _data = this._currentData = null;\n        this._triggersExit.splice(triggerExitIndex - 1, 1);\n      });\n\n      whileWaitingAction();\n      wait(0);\n    } else if (_resources) {\n      whileWaitingAction();\n      getResources();\n    } else if (this._data) {\n      next(current, getData());\n    } else {\n      next(current);\n    }\n  }\n\n  callAction(current) {\n    if (this._data) {\n      if (this._onNoData && !this._currentData) {\n        this._endWaiting && this._endWaiting();\n        this._onNoData(current.params, current.queryParams);\n      } else {\n        this._endWaiting && this._endWaiting();\n        this._action(current.params, current.queryParams, this._currentData);\n      }\n    } else {\n      this._endWaiting && this._endWaiting();\n      this._action(current.params, current.queryParams, this._currentData);\n    }\n  }\n\n  callSubscriptions(current) {\n    this.clearSubscriptions();\n    if (this.group) {\n      this.group.callSubscriptions(current);\n    }\n\n    this._subscriptions(current.params, current.queryParams);\n  }\n\n  getRouteName() {\n    this._routeCloseDep.depend();\n    return this.name;\n  }\n\n  getParam(key) {\n    this._routeCloseDep.depend();\n    return this._params.get(key);\n  }\n\n  getQueryParam(key) {\n    this._routeCloseDep.depend();\n    return this._queryParams.get(key);\n  }\n\n  watchPathChange() {\n    this._pathChangeDep.depend();\n  }\n\n  registerRouteClose() {\n    this._params = new ReactiveDict();\n    this._queryParams = new ReactiveDict();\n    this._routeCloseDep.changed();\n    this._pathChangeDep.changed();\n  }\n\n  registerRouteChange(currentContext, routeChanging) {\n    // register params\n    this._updateReactiveDict(this._params, currentContext.params);\n\n    // register query params\n    this._updateReactiveDict(this._queryParams, currentContext.queryParams);\n\n    // if the route is changing, we need to defer triggering path changing\n    // if we did this, old route's path watchers will detect this\n    // Real issue is, above watcher will get removed with the new route\n    // So, we don't need to trigger it now\n    // We are doing it on the route close event. So, if they exists they'll\n    // get notify that\n    if(!routeChanging) {\n      this._pathChangeDep.changed();\n    }\n  }\n\n  _updateReactiveDict(dict, newValues) {\n    const currentKeys = Object.keys(newValues);\n    const oldKeys = Object.keys(dict.keyDeps);\n\n    // set new values\n    //  params is an array. So, currentKeys.forEach() does not works\n    //  to iterate params\n    currentKeys.forEach((key) => {\n      dict.set(key, newValues[key]);\n    });\n\n    // remove keys which does not exisits here\n    oldKeys.filter((i) => {\n      return currentKeys.indexOf(i) < 0;\n    }).forEach((key) => {\n      dict.set(key, undefined);\n    });\n  }\n}\n\nexport default Route;\n","import { FlowRouter, Route, Group, Triggers, BlazeRenderer } from './_init.js';\nimport { EJSON }    from 'meteor/ejson';\nimport { Meteor }   from 'meteor/meteor';\nimport { Tracker }  from 'meteor/tracker';\nimport { _helpers } from './../lib/_helpers.js';\nimport { page, qs } from './modules.js';\n\nclass Router {\n  constructor() {\n    this.pathRegExp = /(:[\\w\\(\\)\\\\\\+\\*\\.\\?\\[\\]\\-]+)+/g;\n    this.globals = [];\n    this.subscriptions = Function.prototype;\n    this.Renderer = new BlazeRenderer();\n\n    this._tracker = this._buildTracker();\n    this._current = {};\n    this._specialChars = ['/', '%', '+'];\n    this._encodeParam = (param) => {\n      const paramArr = param.split('');\n      let _param   = '';\n      for (let i = 0; i < paramArr.length; i++) {\n        if (this._specialChars.includes(paramArr[i])){\n          _param += encodeURIComponent(encodeURIComponent(paramArr[i]));\n        } else {\n          try {\n            _param += encodeURIComponent(paramArr[i]);\n          } catch (e) {\n            _param += paramArr[i];\n          }\n        }\n      }\n      return _param;\n    };\n\n    // tracks the current path change\n    this._onEveryPath = new Tracker.Dependency();\n\n    this._globalRoute = new Route(this);\n\n    // holds onRoute callbacks\n    this._onRouteCallbacks = [];\n\n    // if _askedToWait is true. We don't automatically start the router\n    // in Meteor.startup callback. (see client/_init.js)\n    // Instead user need to call `.initialize()\n    this._askedToWait = false;\n    this._initialized = false;\n    this._triggersEnter = [];\n    this._triggersExit = [];\n    this._routes = [];\n    this._routesMap = {};\n    this._updateCallbacks();\n    this._notFound = null;\n    this.notfound = this.notFound;\n    // indicate it's okay (or not okay) to run the tracker\n    // when doing subscriptions\n    // using a number and increment it help us to support FlowRouter.go()\n    // and legitimate reruns inside tracker on the same event loop.\n    // this is a solution for #145\n    this.safeToRun = 0;\n\n    // Meteor exposes to the client the path prefix that was defined using the\n    // ROOT_URL environement variable on the server using the global runtime\n    // configuration. See #315.\n    this._basePath = window.__meteor_runtime_config__.ROOT_URL_PATH_PREFIX || '';\n\n    // this is a chain contains a list of old routes\n    // most of the time, there is only one old route\n    // but when it's the time for a trigger redirect we've a chain\n    this._oldRouteChain = [];\n\n    this.env = {\n      replaceState: new Meteor.EnvironmentVariable(),\n      reload: new Meteor.EnvironmentVariable(),\n      trailingSlash: new Meteor.EnvironmentVariable()\n    };\n\n    // Implementing Reactive APIs\n    const reactiveApis = [\n      'getParam', 'getQueryParam',\n      'getRouteName', 'watchPathChange'\n    ];\n\n    reactiveApis.forEach((api) => {\n      this[api] = function (arg1) {\n        // when this is calling, there may not be any route initiated\n        // so we need to handle it\n        const currentRoute = this._current.route;\n        if (!currentRoute) {\n          this._onEveryPath.depend();\n          return void 0;\n        }\n\n        // currently, there is only one argument. If we've more let's add more args\n        // this is not clean code, but better in performance\n        return currentRoute[api].call(currentRoute, arg1);\n      };\n    });\n\n    // redirect function used inside triggers\n    this._redirectFn = (pathDef, fields, queryParams) => {\n      if (/^http(s)?:\\/\\//.test(pathDef)) {\n        throw new Error(\"Redirects to URLs outside of the app are not supported in this version of Flow Router. Use 'window.location = yourUrl' instead\");\n      }\n\n      this.withReplaceState(() => {\n        this._page.redirect(FlowRouter.path(pathDef, fields, queryParams));\n      });\n    };\n    this._initTriggersAPI();\n  }\n\n  set notFound(opts) {\n    Meteor._debug('FlowRouter.notFound is deprecated, use FlowRouter.route(\\'*\\', { /*...*/ }) instead!');\n    opts.name = opts.name || '__notFound';\n    this._notFound = this.route('*', opts);\n  }\n\n  get notFound() {\n    return this._notFound;\n  }\n\n  get _page() {\n    return page;\n  }\n\n  get _qs() {\n    return qs;\n  }\n\n  route(pathDef, options = {}, group) {\n    if (!/^\\//.test(pathDef) && pathDef !== '*') {\n      throw new Error(\"route's path must start with '/'\");\n    }\n\n    const route = new Route(this, pathDef, options, group);\n\n    // calls when the page route being activates\n    route._actionHandle = (context) => {\n      const oldRoute = this._current.route;\n      this._oldRouteChain.push(oldRoute);\n\n      // _qs.parse() gives us a object without prototypes,\n      // created with Object.create(null)\n      // Meteor's check doesn't play nice with it.\n      // So, we need to fix it by cloning it.\n      // see more: https://github.com/meteorhacks/flow-router/issues/164\n      const queryParams = this._qs.parse(context.querystring);\n      this._current = {\n        path: context.path,\n        params: context.params,\n        route,\n        context,\n        oldRoute,\n        queryParams\n      };\n\n      // we need to invalidate if all the triggers have been completed\n      // if not that means, we've been redirected to another path\n      // then we don't need to invalidate\n      const afterAllTriggersRan = () => {\n        this._invalidateTracker();\n      };\n\n      route.waitOn(this._current, (current, data) => {\n        Triggers.runTriggers(\n          this._triggersEnter.concat(route._triggersEnter),\n          this._current,\n          this._redirectFn,\n          afterAllTriggersRan,\n          data\n        );\n      });\n    };\n\n    // calls when you exit from the page js route\n    route._exitHandle = (context, next) => {\n      Triggers.runTriggers(\n        this._triggersExit.concat(route._triggersExit),\n        this._current,\n        this._redirectFn,\n        next\n      );\n    };\n\n    this._routes.push(route);\n    if (options.name) {\n      this._routesMap[options.name] = route;\n    }\n\n    this._updateCallbacks();\n    this._triggerRouteRegister(route);\n\n    return route;\n  }\n\n  group(options) {\n    return new Group(this, options);\n  }\n\n  path(_pathDef, fields = {}, queryParams) {\n    let pathDef = _pathDef;\n    if (this._routesMap[pathDef]) {\n      pathDef = this._routesMap[pathDef].pathDef;\n    }\n\n    let path = '';\n\n    // Prefix the path with the router global prefix\n    if (this._basePath) {\n      path += `/${this._basePath}/`;\n    }\n\n    path += pathDef.replace(this.pathRegExp, (_key) => {\n      const firstRegexpChar = _key.indexOf('(');\n      // get the content behind : and (\\\\d+/)\n      let key = _key.substring(1, (firstRegexpChar > 0) ? firstRegexpChar : undefined);\n      // remove +?*\n      key = key.replace(/[\\+\\*\\?]+/g, '');\n\n      // this is to allow page js to keep the custom characters as it is\n      // we need to encode 2 times otherwise \"/\" char does not work properly\n      // So, in that case, when I includes \"/\" it will think it's a part of the\n      // route. encoding 2times fixes it\n      if (fields[key]) {\n        return this._encodeParam(`${fields[key]}`);\n      }\n\n      return '';\n    });\n\n    // Replace multiple slashes with single slash\n    path = path.replace(/\\/\\/+/g, '/');\n\n    // remove trailing slash\n    // but keep the root slash if it's the only one\n    path = path.match(/^\\/{1}$/) ? path : path.replace(/\\/$/, '');\n\n    // explictly asked to add a trailing slash\n    if (this.env.trailingSlash.get() && path[path.length - 1] !== '/') {\n      path += '/';\n    }\n\n    const strQueryParams = this._qs.stringify(queryParams || {});\n    if (strQueryParams) {\n      path += `?${strQueryParams}`;\n    }\n\n    path = path.replace(/\\/\\/+/g, '/');\n    return path;\n  }\n\n  go(pathDef, fields, queryParams) {\n    const path = this.path(pathDef, fields, queryParams);\n    if (!this.env.reload.get() && path === this._current.path) {\n      return;\n    }\n\n    try {\n      if (this.env.replaceState.get()) {\n        this._page.replace(path);\n      } else {\n        this._page(path);\n      }\n    } catch (e) {\n      Meteor._debug('Malformed URI!', path, e);\n    }\n  }\n\n  reload() {\n    this.env.reload.withValue(true, () => {\n      this._page.replace(this._current.path);\n    });\n  }\n\n  redirect(path) {\n    this._page.redirect(path);\n  }\n\n  setParams(newParams) {\n    if (!this._current.route) {return false;}\n\n    const pathDef = this._current.route.pathDef;\n    const existingParams = this._current.params;\n    let params = {};\n    Object.keys(existingParams).forEach((key) => {\n      params[key] = existingParams[key];\n    });\n\n    params = _helpers.extend(params, newParams);\n    const queryParams = this._current.queryParams;\n\n    this.go(pathDef, params, queryParams);\n    return true;\n  }\n\n  setQueryParams(newParams) {\n    if (!this._current.route) {return false;}\n\n    const queryParams = _helpers.extend(_helpers.clone(this._current.queryParams), newParams);\n\n    for (const k in queryParams) {\n      if (queryParams[k] === null || queryParams[k] === undefined) {\n        delete queryParams[k];\n      }\n    }\n\n    const pathDef = this._current.route.pathDef;\n    const params = this._current.params;\n    this.go(pathDef, params, queryParams);\n    return true;\n  }\n\n  // .current is not reactive\n  // This is by design. use .getParam() instead\n  // If you really need to watch the path change, use .watchPathChange()\n  current() {\n    // We can't trust outside, that's why we clone this\n    // Anyway, we can't clone the whole object since it has non-jsonable values\n    // That's why we clone what's really needed.\n    const current = _helpers.clone(this._current);\n    current.queryParams = EJSON.clone(current.queryParams);\n    current.params = EJSON.clone(current.params);\n    return current;\n  }\n\n  track(reactiveMapper) {\n    return (props, onData, env) => {\n      let trackerCleanup = null;\n      const handler = Tracker.nonreactive(() => {\n        return Tracker.autorun(() => {\n          trackerCleanup = reactiveMapper(props, onData, env);\n        });\n      });\n\n      return () => {\n        if (typeof trackerCleanup === 'function') {\n          trackerCleanup();\n        }\n        return handler.stop();\n      };\n    };\n  }\n\n  mapper(props, onData, env) {\n    if (typeof onData === 'function') {\n      onData(null, { route: this.current(), props, env });\n    }\n  }\n\n  trackMapper() {\n    return this.track(this.mapper);\n  }\n\n  subsReady() {\n    let callback = null;\n    const args = Array.from(arguments);\n\n    if (typeof args[args.length - 1] === 'function') {\n      callback = args.pop();\n    }\n\n    const currentRoute = this.current().route;\n    const globalRoute = this._globalRoute;\n\n    // we need to depend for every route change and\n    // rerun subscriptions to check the ready state\n    this._onEveryPath.depend();\n\n    if (!currentRoute) {\n      return false;\n    }\n\n    let subscriptions;\n    if (args.length === 0) {\n      subscriptions = Object.values(globalRoute.getAllSubscriptions());\n      subscriptions = subscriptions.concat(Object.values(currentRoute.getAllSubscriptions()));\n    } else {\n      subscriptions = args.map((subName) => {\n        return globalRoute.getSubscription(subName) || currentRoute.getSubscription(subName);\n      });\n    }\n\n    const isReady = () => {\n      const ready =  subscriptions.every((sub) => {\n        return sub && sub.ready();\n      });\n\n      return ready;\n    };\n\n    if (callback) {\n      Tracker.autorun((c) => {\n        if (isReady()) {\n          callback();\n          c.stop();\n        }\n      });\n      return true;\n    }\n    return isReady();\n  }\n\n  withReplaceState(fn) {\n    return this.env.replaceState.withValue(true, fn);\n  }\n\n  withTrailingSlash(fn) {\n    return this.env.trailingSlash.withValue(true, fn);\n  }\n\n  initialize(options = {}) {\n    if (this._initialized) {\n      throw new Error('FlowRouter is already initialized');\n    }\n\n    const self = this;\n    this._updateCallbacks();\n\n    // Implementing idempotent routing\n    // by overriding page.js`s \"show\" method.\n    // Why?\n    // It is impossible to bypass exit triggers,\n    // because they execute before the handler and\n    // can not know what the next path is, inside exit trigger.\n    //\n    // we need override both show, replace to make this work\n    // since we use redirect when we are talking about withReplaceState\n    ['show', 'replace'].forEach((fnName) => {\n      const original = self._page[fnName];\n      self._page[fnName] = function (path, state, dispatch, push) {\n        if (!path || (!self.env.reload.get() && self._current.path === path)) {\n          return;\n        }\n        original.call(this, path.replace(/\\/\\/+/g, '/'), state, dispatch, push);\n      };\n    });\n\n    // this is very ugly part of pagejs and it does decoding few times\n    // in unpredicatable manner. See #168\n    // this is the default behaviour and we need keep it like that\n    // we are doing a hack. see .path()\n    this._page.base(this._basePath);\n    const pageOptions = Object.assign({\n      hashbang: !!options.hashbang,\n      decodeURLComponents: true\n    }, options.page || {});\n\n    this._page(pageOptions);\n\n    this._initialized = true;\n  }\n\n  _buildTracker() {\n    // main autorun function\n    const tracker = Tracker.autorun(() => {\n      if (!this._current || !this._current.route) {\n        return;\n      }\n\n      // see the definition of `this._processingContexts`\n      const currentContext = this._current;\n      const route = currentContext.route;\n      const path = currentContext.path;\n\n      if (this.safeToRun === 0) {\n        throw new Error(\"You can't use reactive data sources like Session inside the `.subscriptions` method!\");\n      }\n\n      // We need to run subscriptions inside a Tracker\n      // to stop subs when switching between routes\n      // But we don't need to run this tracker with\n      // other reactive changes inside the .subscription method\n      // We tackle this with the `safeToRun` variable\n      this._globalRoute.clearSubscriptions();\n      this.subscriptions.call(this._globalRoute, path);\n      route.callSubscriptions(currentContext);\n\n      // otherwise, computations inside action will trigger to re-run\n      // this computation. which we do not need.\n      Tracker.nonreactive(() => {\n        let isRouteChange = currentContext.oldRoute !== currentContext.route;\n        // first route is not a route change\n        if (!currentContext.oldRoute) {\n          isRouteChange = false;\n        }\n\n        // Clear oldRouteChain just before calling the action\n        // We still need to get a copy of the oldestRoute first\n        // It's very important to get the oldest route and registerRouteClose() it\n        // See: https://github.com/kadirahq/flow-router/issues/314\n        const oldestRoute = this._oldRouteChain[0];\n        this._oldRouteChain = [];\n\n        currentContext.route.registerRouteChange(currentContext, isRouteChange);\n        route.callAction(currentContext);\n\n        Tracker.afterFlush(() => {\n          this._onEveryPath.changed();\n          if (isRouteChange) {\n            // We need to trigger that route (definition itself) has changed.\n            // So, we need to re-run all the register callbacks to current route\n            // This is pretty important, otherwise tracker\n            // can't identify new route's items\n\n            // We also need to afterFlush, otherwise this will re-run\n            // helpers on templates which are marked for destroying\n            if (oldestRoute && oldestRoute.registerRouteClose) {\n              oldestRoute.registerRouteClose();\n            }\n          }\n        });\n      });\n\n      this.safeToRun--;\n    });\n\n    return tracker;\n  }\n\n  _invalidateTracker() {\n    this.safeToRun++;\n    this._tracker.invalidate();\n    // After the invalidation we need to flush to make changes immediately\n    // otherwise, we have face some issues context mix-matches and so on.\n    // But there are some cases we can't flush. So we need to ready for that.\n\n    // we clearly know, we can't flush inside an autorun\n    // this may leads some issues on flow-routing\n    // we may need to do some warning\n    if (!Tracker.currentComputation) {\n      // Still there are some cases where we can't flush\n      //  eg:- when there is a flush currently\n      // But we've no public API or hacks to get that state\n      // So, this is the only solution\n      try {\n        Tracker.flush();\n      } catch(ex) {\n        // only handling \"while flushing\" errors\n        if (!/Tracker\\.flush while flushing/.test(ex.message)) {\n          return;\n        }\n\n        // XXX: fix this with a proper solution by removing subscription mgt.\n        // from the router. Then we don't need to run invalidate using a tracker\n\n        // this happens when we are trying to invoke a route change\n        // with inside a route change. (eg:- Template.onCreated)\n        // Since we use page.js and tracker, we don't have much control\n        // over this process.\n        // only solution is to defer route execution.\n\n        // It's possible to have more than one path want to defer\n        // But, we only need to pick the last one.\n        // self._nextPath = self._current.path;\n        Meteor.defer(() => {\n          const path = this._nextPath;\n          if (!path) {\n            return;\n          }\n\n          delete this._nextPath;\n          this.env.reload.withValue(true, () => {\n            this.go(path);\n          });\n        });\n      }\n    }\n  }\n\n  _updateCallbacks() {\n    this._page.callbacks = [];\n    this._page.exits = [];\n    let catchAll = null;\n\n    this._routes.forEach((route) => {\n      if (route.pathDef === '*') {\n        catchAll = route;\n      } else {\n        this._page(route.pathDef, route._actionHandle);\n        this._page.exit(route.pathDef, route._exitHandle);\n      }\n    });\n\n    // Setting exit triggers on catch all routes leads to weird behavior.\n    // We recommend to avoid enter and exit triggers on catch all (`*`) routes.\n    // Use FlowRouter.triggers.exit([func]) and FlowRouter.triggers.enter([func]) instead\n    if (catchAll) {\n      this._page(catchAll.pathDef, catchAll._actionHandle);\n      // this._page.exit(catchAll.pathDef, catchAll._exitHandle);\n    }\n  }\n\n  _initTriggersAPI() {\n    const self = this;\n    this.triggers = {\n      enter(_triggers, filter) {\n        let triggers = Triggers.applyFilters(_triggers, filter);\n        if (triggers.length) {\n          self._triggersEnter = self._triggersEnter.concat(triggers);\n        }\n      },\n      exit(_triggers, filter) {\n        let triggers = Triggers.applyFilters(_triggers, filter);\n        if (triggers.length) {\n          self._triggersExit = self._triggersExit.concat(triggers);\n        }\n      }\n    };\n  }\n\n  wait() {\n    if (this._initialized) {\n      throw new Error(\"can't wait after FlowRouter has been initialized\");\n    }\n\n    this._askedToWait = true;\n  }\n\n  onRouteRegister(cb) {\n    this._onRouteCallbacks.push(cb);\n  }\n\n  _triggerRouteRegister(currentRoute) {\n    // We should only need to send a safe set of fields on the route\n    // object.\n    // This is not to hide what's inside the route object, but to show\n    // these are the public APIs\n    const routePublicApi = _helpers.pick(currentRoute, ['name', 'pathDef', 'path']);\n    routePublicApi.options = _helpers.omit(currentRoute.options, ['triggersEnter', 'triggersExit', 'action', 'subscriptions', 'name']);\n\n    this._onRouteCallbacks.forEach((cb) => {\n      cb(routePublicApi);\n    });\n  }\n\n  url() {\n    // We need to remove the leading base path, or \"/\", as it will be inserted\n    // automatically by `Meteor.absoluteUrl` as documented in:\n    // http://docs.meteor.com/#/full/meteor_absoluteurl\n    return Meteor.absoluteUrl(this.path.apply(this, arguments).replace(new RegExp('^' + (`/${this._basePath || ''}/`).replace(/\\/\\/+/g, '/')), ''));\n  }\n}\n\nexport default Router;\n","// a set of utility functions for triggers\n\nconst Triggers = {};\n\n// Apply filters for a set of triggers\n// @triggers - a set of triggers\n// @filter - filter with array fields with `only` and `except`\n//           support only either `only` or `except`, but not both\nTriggers.applyFilters = (_triggers, filter) => {\n  let triggers = _triggers;\n  if(!(triggers instanceof Array)) {\n    triggers = [triggers];\n  }\n\n  if(!filter) {\n    return triggers;\n  }\n\n  if(filter.only && filter.except) {\n    throw new Error('Triggers don\\'t support only and except filters at once');\n  }\n\n  if(filter.only && !(filter.only instanceof Array)) {\n    throw new Error('only filters needs to be an array');\n  }\n\n  if(filter.except && !(filter.except instanceof Array)) {\n    throw new Error('except filters needs to be an array');\n  }\n\n  if(filter.only) {\n    return Triggers.createRouteBoundTriggers(triggers, filter.only);\n  }\n\n  if(filter.except) {\n    return Triggers.createRouteBoundTriggers(triggers, filter.except, true);\n  }\n\n  throw new Error('Provided a filter but not supported');\n};\n\n//  create triggers by bounding them to a set of route names\n//  @triggers - a set of triggers\n//  @names - list of route names to be bound (trigger runs only for these names)\n//  @negate - negate the result (triggers won't run for above names)\nTriggers.createRouteBoundTriggers = (triggers, names, negate) => {\n  const namesMap = {};\n  names.forEach((name) => {\n    namesMap[name] = true;\n  });\n\n  const filteredTriggers = triggers.map((originalTrigger) => {\n    const modifiedTrigger = (context, next) => {\n      let matched = (namesMap[context.route.name]) ? 1 : -1;\n      matched = (negate) ? matched * -1 : matched;\n\n      if(matched === 1) {\n        originalTrigger(context, next);\n      }\n    };\n    return modifiedTrigger;\n  });\n\n  return filteredTriggers;\n};\n\n//  run triggers and abort if redirected or callback stopped\n//  @triggers - a set of triggers\n//  @context - context we need to pass (it must have the route)\n//  @redirectFn - function which used to redirect\n//  @after - called after if only all the triggers runs\nTriggers.runTriggers = (triggers, context, redirectFn, after, data) => {\n  let abort = false;\n  let inCurrentLoop = true;\n  let alreadyRedirected = false;\n\n  const doRedirect = (url, params, queryParams) => {\n    if(alreadyRedirected) {\n      throw new Error('already redirected');\n    }\n\n    if(!inCurrentLoop) {\n      throw new Error('redirect needs to be done in sync');\n    }\n\n    if(!url) {\n      throw new Error('trigger redirect requires an URL');\n    }\n\n    abort = true;\n    alreadyRedirected = true;\n    redirectFn(url, params, queryParams);\n  };\n\n  const doStop = () => {\n    abort = true;\n  };\n\n  for (let lc = 0; lc < triggers.length; lc++) {\n    triggers[lc](context, doRedirect, doStop, data);\n\n    if (abort) {\n      return;\n    }\n  }\n\n  // mark that, we've exceeds the currentEventloop for\n  // this set of triggers.\n  inCurrentLoop = false;\n  after();\n};\n\nexport default Triggers;\n","import { Meteor } from 'meteor/meteor';\n\nconst _helpers = {\n  isEmpty(obj) { // 1\n    if (obj == null) {\n      return true;\n    }\n\n    if (this.isArray(obj) || this.isString(obj) || this.isArguments(obj)) {\n      return obj.length === 0;\n    }\n\n    return Object.keys(obj).length === 0;\n  },\n  isObject(obj) {\n    const type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  },\n  omit(obj, keys) { // 10\n    if (!this.isObject(obj)) {\n      Meteor._debug('[ostrio:flow-router-extra] [_helpers.omit] First argument must be an Object');\n      return obj;\n    }\n\n    if (!this.isArray(keys)) {\n      Meteor._debug('[ostrio:flow-router-extra] [_helpers.omit] Second argument must be an Array');\n      return obj;\n    }\n\n    const copy = this.clone(obj);\n    keys.forEach((key) => {\n      delete copy[key];\n    });\n\n    return copy;\n  },\n  pick(obj, keys) { // 2\n    if (!this.isObject(obj)) {\n      Meteor._debug('[ostrio:flow-router-extra] [_helpers.omit] First argument must be an Object');\n      return obj;\n    }\n\n    if (!this.isArray(keys)) {\n      Meteor._debug('[ostrio:flow-router-extra] [_helpers.omit] Second argument must be an Array');\n      return obj;\n    }\n\n    const picked = {};\n    keys.forEach((key) => {\n      picked[key] = obj[key];\n    });\n\n    return picked;\n  },\n  isArray(obj) {\n    return Array.isArray(obj);\n  },\n  extend(...objs) { // 4\n    return Object.assign({}, ...objs);\n  },\n  clone(obj) {\n    if (!this.isObject(obj)) return obj;\n    return this.isArray(obj) ? obj.slice() : this.extend(obj);\n  }\n};\n\n['Arguments', 'Function', 'String', 'RegExp'].forEach((name) => {\n  _helpers['is' + name] = function (obj) {\n    return Object.prototype.toString.call(obj) === '[object ' + name + ']';\n  };\n});\n\nexport { _helpers };\n"]}