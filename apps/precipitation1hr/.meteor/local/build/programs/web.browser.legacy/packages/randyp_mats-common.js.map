{"version":3,"sources":["meteor://ðŸ’»app/packages/randyp:mats-common/client/main.js","meteor://ðŸ’»app/packages/randyp:mats-common/client/error.js","meteor://ðŸ’»app/packages/randyp:mats-common/client/info.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/both/index.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/both/mats-types.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/both/mats-collections.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/api/matsMethods.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/ui/layouts/appBody.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/client/curve_util.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/client/graph_util.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/client/select_util.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/client/index.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/client/init.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/client/routes.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/server/data_util.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/server/data_query_util.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/server/data_diff_util.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/server/data_match_util.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/server/data_curve_ops_util.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/server/data_plot_ops_util.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/server/data_process_util.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/server/plot_spec_util.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/server/index.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/server/publications.js","meteor://ðŸ’»app/packages/randyp:mats-common/imports/startup/server/cache.js","meteor://ðŸ’»app/packages/randyp:mats-common/lib/regression.js","meteor://ðŸ’»app/packages/randyp:mats-common/lib/param_util.js","meteor://ðŸ’»app/packages/randyp:mats-common/lib/plot_util.js","meteor://ðŸ’»app/packages/randyp:mats-common/lib/math_util.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/topnav/top_nav.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/spinner/spinner.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/Home.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/underConstruction/underConstruction.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/about.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/version/version.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/plot/plot_list.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/plot/plot_param_group.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/plot/QC_param_group.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/error/error.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/info/info.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/changePlotType/changePlotType.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/graph/graph.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/graph/displayFunctions/graph_plotly.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/graph/text_output.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/graphStandAlone/graphStandAlone.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/common/text_input.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/common/select.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/common/map.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/common/date_range.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/common/checkbox_group.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/common/number_spinner.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/common/radio_group_option.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/common/item.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/curves/curve_item.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/curves/curve_param_item_group.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/curves/curve_list.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/params/param_list.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/params/curve_param_group.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/params/scatter_axis.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/plotType/plot_type.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/administration/reset.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/administration/export.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/administration/import.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/administration/settings.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/administration/databases.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/administration/plotParams.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/administration/colorScheme.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/administration/curveParams.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/administration/authorization.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/administration/mail_credentials.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/administration/PlotGraphFunctions.js","meteor://ðŸ’»app/packages/randyp:mats-common/templates/administration/administration.js"],"names":["module","link","setError","error","myError","myStackTrace","String","Error","toLocaleString","indexOf","strinfo","replace","setInfo","Session","set","message","stack","$","modal","clearError","getError","get","getStack","info","clearInfo","getInfo","DatabaseRoles","MODEL_DATA","META_DATA","SUMS_DATA","SITE_DATA","AppTypes","mats","metexpress","mats4met","InputTypes","textInput","select","selectOrderEnforced","numberSpinner","dateRange","radioGroup","checkBoxGroup","resetButton","controlButton","element","selectMap","custom","unused","forecastSingleCycle","forecastMultiCycle","PlotTypes","timeSeries","profile","dieoff","threshold","validtime","dailyModelCycle","reliability","map","histogram","contour","contourDiff","scatter2d","ForecastTypes","utcCycle","singleCycle","PlotFormats","none","matching","pairwise","absolute","PlotActions","matched","unmatched","BestFits","linear","linearThroughOrigin","exponential","logarithmic","power","MatchFormats","time","level","site","PlotAxisFilters","PlotView","graph","textSeries","ReservedWords","Zero","zero","ideal0","ideal1","ideal2","ideal3","ideal4","ideal5","ideal6","ideal7","ideal8","ideal9","perfectReliability","noSkill","blueCurveText","blackCurveText","redCurveText","Messages","NO_DATA_FOUND","selectorsToHide","MetaDataDBRecord","poolName","dbName","tables","Array","_records","record","push","addRecord","getRecords","exportDefault","matsTypes","Mongo","v","CurveParams","Collection","Scatter2dParams","CurveTextPatterns","ScatterAxisTextPattern","SavedCurveParams","PlotParams","SavedPlotParams","PlotGraphFunctions","SavedPlotGraphFunctions","RegionsPerModel","SitesPerModel","RegionDescriptions","Models","Instruments","FcstLensPerModel","CurveSettings","Settings","ColorScheme","SentAddresses","Authorization","Roles","SavedRoles","Databases","SavedDatabases","Credentials","SavedCredentials","SiteMap","StationMap","appName","matsCollections","Meteor","ValidatedMethod","SimpleSchema","matsCache","matsDataQueryUtils","matsDataUtils","mysql","url","metaDataTableUpdates","LayoutStoreCollection","DownSampleResults","MV_DIRS","isServer","settings","private","undefined","_MV_OUT","MV_OUTPUT","_MV_HOME","MV_HOME","_MV_LOGDIR","_MV_ERRDIR","_MV_DATADIR","_MV_SQLDIR","_MV_XMLDIR","_MV_SCRIPTSDIR","_MV_PLOTSSDIR","process","env","JAVA_HOME","LOGDIR","ERRDIR","DATADIR","SQLDIR","XMLDIR","SCRIPTSDIR","PLOTSDIR","HOME","rawCollection","createIndex","expireAfterSeconds","public","proxy_prefix_path","Picker","route","params","req","res","next","middleware","_getCSV","_getJSON","_clearCache","_refreshMetadataMWltData","_mvGetData","_mvGetPoints1","_mvGetPoints2","_mvGetXml","_mvGetPlot","_mvGetScript","_mvGetSql","_mvGetLog","_mvGetErr","_checkMetaDataRefresh","refresh","tableUpdates","find","fetch","tui","length","id","_id","pool","name","tableNames","lastRefreshed","updatedEpoch","Number","MAX_VALUE","ti","tName","rows","simplePoolQueryWrapSynchronous","global","i","e","lastRefreshedEpoch","moment","valueOf","console","log","utc","format","asrKeys","appSpecificResetRoutines","ai","update","$set","clear","end","stringify","require","csv","result","_getFlattenedResultData","key","statArray","Object","values","stats","dataArray","data","statResultArray","dataResultArray","si","keys","label","di","dataSubArray","dataHeader","filter","dsi","fileName","setHeader","header","err","output","write","flatJSON","_getPagenatedData","JSON","dsiRealPageIndex","dsiTextDirection","rk","p","np","resp","r","plotTypes","basis","plotParams","plotType","_","invert","returnData","ci","reservedWords","glob_stats","d_mean","sd","n_good","stde_betsy","lag1","minVal","maxVal","curveData","cdi","x","curveDataElement","raw_stat","y","cdata","labelSuffix","sample_climo","prob_bin","hit_rate","obs_y","obs_n","reduce","prev","curr","N_times","average","queryVal","stdev","min_time","max_time","siteName","glob_mean","glob_sd","glob_n","glob_min","glob_max","bin_stats","bin_n","bin_rf","binLowBound","binUpBound","bin_mean","bin_sd","n","mean","minDate","maxDate","xTextOutput","yTextOutput","zTextOutput","nTextOutput","minDateTextOutput","maxDateTextOutput","firstBestFitIndex","bestFitIndexes","bestFitIndex","cbi","curveTextData","rky","myPageIndex","newPageIndex","ret","rawReturn","getResult","parse","start","direction","dsiStart","dsiEnd","csi","Math","floor","slice","fse","filePath","baseName","readFile","_saveResultData","sizeof","hash","dSize","TimeSeries","DailyModelCycle","downsampler","totalPoints","x_epoch","allowedNumberOfPoints","downSampleResult","dsData","xyDataset","d","index","ratioTotalPoints","myAllowedPoints","round","downsampledSeries","processData","originalIndex","arrayKeys","nonArrayKeys","ki","isArray","array","annotation","insert","Date","storeResult","addSentAddress","validate","toAddress","type","validator","run","userId","upsert","address","applyAuthorization","blackbox","roles","roleName","authorization","userRoleName","userRoleDescription","authorizationRole","newUserEmail","existingUserEmail","role","findOne","description","email","applyDatabaseSettings","status","host","database","user","password","deleteSettings","remove","emailImage","imageStr","subject","fromAddress","services","google","credentials","clientId","clientSecret","refresh_token","smtpTransporter","Nodemailer","createTransport","service","auth","XOAuth2","refreshToken","mailOptions","sender","replyTo","from","to","attachments","filename","contents","Buffer","split","sendMail","response","close","getAuthorizations","userEmail","toLowerCase","getDataFunctionFileList","getGraphData","expireKey","Boolean","plotGraphFunction","dataFunction","NODE_ENV","results","Future","future","wait","dsResults","disableOplog","dataFunctionError","getGraphDataByKey","resultKey","getGraphFunctionFileList","getLayout","getMvArtifactsByKey","getPlotResult","pageIndex","rKey","pi","npi","getReleaseNotes","dFuture","fData","PWD","file","getUserAddress","insertColor","newColor","insertAfterIndex","colorScheme","colors","splice","mvBatch","mvbatch","plotSpecFunction","app","artifacts","png","xml","sql","R","points1","points2","plotSpecFilePath","pngFilePath","sqlFilePath","logFilePath","errFilePath","scriptFilePath","dataFilePath","points1Path","points2Path","mvPlot","unlinkSync","ignore","artifactPaths","filesExist","xmlSpecExists","existsSync","plotExists","scriptExists","dataExists","sqlExists","logExists","plotSpec","mvBatchCmd","cp","outputFileSync","execSync","stdout","stderr","match","sqlout","readFunctionFile","path","toString","refreshMetaData","removeAuthorization","$pull","multi","removeColor","removeIndex","removeDatabase","resetApp","appRef","metaDataTableRecords","appMdr","appType","dep_env","PYTHON_PATH","RUN_ENV","deployment","deploymentText","Assets","getText","dep","deployment_environment","apps","appVersion","version","appTitle","title","buildDate","metaDataTables","mdti","metaDataRef","count","doRoles","doAuthorization","doCredentials","doColorScheme","doSettings","restoreFromFile","ype","writeFile","restoreFromParameterFile","o","omit","forEach","saveLayout","layout","curveOpsUpdate","saveSettings","saveAs","permission","created","owner","savedAt","savedBy","setCredentials","clientRefreshToken","setSettings","labelPrefix","lineWidth","nullFillString","resetFromCode","LabelPrefix","Title","LineWidth","NullFillString","testGetMetaDataTableUpdates","testGetTables","queryWrap","wrap","callback","connection","createConnection","query","a","Tables_in_ruc_ua_sums2","testSetMetaDataTableUpdatesLastRefreshedBack","mtu","matsMethods","Template","FlowRouter","AppBody","onCreated","matsPlotUtils","matsParamUtils","Info","graphResult","plot","_1","_2","_3","_4","prototype","call","_5","_6","_7","getPlotResultData","plotResultData","setPlotResultData","showSpinner","hideSpinner","resetPlotResultData","getGraphResult","setGraphResult","resetGraphResult","getUsedLabels","getNextCurveLabel","setNextCurveLabel","usedLabels","fields","prefixLabels","l","lastIndexOf","RegExp","lastUsedLabel","last","lastLabelNumber","minusPrefix","tryNum","parseInt","isNaN","newLabelNumber","nextCurveLabel","setNextCurveColor","usedColors","lastUsedIndex","nextCurveColor","newIndex","rint","random","getNextCurveColor","clearUsedLabel","newUsedLabels","reject","clearUsedColor","color","newUsedColors","c","clearAllUsed","setUsedColors","curves","setUsedLabels","setUsedColorsAndLabels","resetScatterApply","getPlotType","document","getElementById","checked","addDiffs","newCurves","curvesLength","getPlotFormat","baseIndex","newCurve","extend","diffFrom","findWhere","base_index","removeDiffs","curve","checkDiffs","plotFormat","showTimeseriesFace","faceOptions","faceSelectors","elem","fidx","style","display","now","showProfileFace","showDieOffFace","param","getParameterForName","setValueTextForParamName","default","showThresholdFace","showValidTimeFace","showDailyModelCycleFace","showReliabilityFace","showMapFace","showHistogramFace","showContourFace","isContour","isContourDiff","showScatterFace","get_err","sVals","sSecs","subVals","subSecs","sum_d","sum2_d","sd2","sqrt","sd_limit","last_secs","MIN_VALUE","minDelta","minSecs","max_secs","secs","delta","abs","data_wg","n_gaps","sum","sum2","loopTime","lastSecond","sec","lag","n_in_lag","t","betsy","min","max","matsCurveUtils","setNoDataLabels","dataset","curveId","value","disabled","marker","setNoDataLabelsMap","lat","width","squareWidthHeight","rectangleWidth","height","rectangleHeight","standAloneWidth","vpw","documentElement","clientWidth","window","innerWidth","standAloneHeight","vph","clientHeight","innerHeight","resizeGraph","setTextView","setGraphView","standAloneSetGraphView","setDefaultView","downloadFile","fileURL","ActiveXObject","save","createElement","href","target","substring","download","navigator","userAgent","search","location","evt","MouseEvent","dispatchEvent","URL","webkitURL","revokeObjectURL","execCommand","_window","open","matsGraphUtils","refreshPeer","event","peerName","targetParam","targetId","targetElem","refreshMapEvent","CustomEvent","detail","refElement","refreshDependents","dependentNames","selectAllbool","re","elements","options","multiple","i1","selected","previously_selected","i2","text","checkDisableOther","firstRender","disableOtherFor","controlledSelectors","getInputElementForParamName","selectedOptions","selectedText","hideOtherFor","inArray","checkHideOther","otherInputElement","selectorControlElem","selectedIndex","scrollIntoView","matsSelectUtils","paramName","disabledOptions","getDisabledOptionsForParamName","optionsGroups","optionsMap","superiorNames","superiorDimensionality","superiors","sNames","sn","superiorElement","selectedSuperiorValue","sNameIndex","elems","getElementsByClassName","val","brothers","myOptions","selectedSuperiorValues","firstSuperiorOptions","theseSuperiors","theseSuperiorsIndex","superior","nextSuperiorOptions","intersection","optionsGroupsKeys","k","concat","sort","optionsAsString","firstGroup","dIndex","empty","append","selectedOptionIndex","sviText","svi","getControlElementForParamName","offsetParent","belem","belemSelectedOptions","Option","isClient","subscribe","Accounts","ui","config","requestOfflineToken","ref","pathArray","protocol","hostport","hostName","matsRef","helpRef","endsWith","matsref","appref","helpref","collections","action","render","areObjectsEqual","arrayContainsArray","superArray","subArray","b","j","arrayContainsSubArray","current","arraysEqual","arrayUnique","arr","includes","findArrayInSubArray","objectContainsObject","superObject","subObject","superObjectKeys","currentObject","avg","squareDiffs","diff","avgSquareDiff","stdDev","dateConvert","dStr","date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","yr","day","month","hour","minute","dateParts","dateArray","timeArray","getDateRange","dates","fromDateStr","fromDate","toDateStr","toDate","fromSecs","secsConvert","toSecs","fromSeconds","toSeconds","getTime","my_date","UTC","date_in_secs","deploymentRoles","settingsId","os","Npm","hostname","getPlotParamsFromStack","captureStackTrace","arguments","callee","stackElems","sElem","trim","startsWith","dataFunctionName","noJoy","sLevs","autocorr_limit","hasLevels","outlierQCParam","subLevs","qaCorrected","lastPressure","n_pressures","lag1_t","lag1_p","r1_t","r1_p","n_deltas","lev","lag_by_r","lag1_max","r_sum","n_r","setHistogramParameters","yAxisFormat","binType","binNum","binStart","binStride","pivotVal","binBounds","item","calculateHistogramBins","curveSubStats","curveSubSecs","binParams","binStats","binUpBounds","binLowBounds","binMeans","globalStats","fullLowBound","fullUpBound","fullRange","binInterval","b_idx","closestBoundToPivot","binLabels","lowSdFromMean","upSdFromMean","toFixed","prescribeHistogramBins","binIntervalSum","binIntervalAverage","sortHistogramBins","curveSubLevs","masterBinStats","binSubStats","binSubSecs","binSubLevs","d_idx","ymin","ymax","xmin","xmax","getDiffContourCurveParams","curveKeys","currKey","ckidx","sortFunction","getModelCadence","dataSource","startDate","endDate","cycles","cycles_raw","cycle_seconds","cycles_keys","newTime","chosenStartTime","chosenEndTime","chosenStartIdx","chosenEndIdx","foundStart","foundEnd","startCycles","endCycles","union","middleCycles","currCycles","getTimeInterval","avTime","time_interval","foreCastOffset","dayInMilliSeconds","minCycleTime","thisCadence","thisCadenceIdx","nextCadenceIdx","statement","queryDBTimeSeries","forecastOffset","averageStr","validTimes","forceRegularCadence","completenessQCParam","vtCycles","regular","error_x","error_y","N0","parsedData","parseQueryDataTimeSeries","queryDBSpecialtyCurve","parseQueryDataSpecialtyCurve","parseQueryDataHistogram","queryMapDB","variable","varUnits","siteMap","lon","dBlue","dBlack","dRed","pFuture","rowIndex","sta_name","model_ob_diff","tooltips","thisSite","obj","point","textMarker","dataBlue","dataBlack","dataRed","queryDBContour","z","zmin","zmax","parseQueryDataContour","curveTime","curveStats","avtime","avSeconds","stat","time_diff","sub_values","sub_secs","sub_levs","sub_data","curr_sub_data","sd_idx","NaN","N0_max","N_times_max","this_N0","this_N_times","filteredx","filteredy","curveIndependentVars","independentVar","hr_of_day","avVal","sub_stats","cycles_missing","missingIdx","dSorted","didx","curveSubStatsRaw","curveSubSecsRaw","curveSubLevsRaw","apply","curveStatLookup","curveNLookup","rowXVal","xVal","rowYVal","yVal","statKey","min_secs","currX","currY","currStat","currN","currStatKey","currYStatArray","currYNArray","nPoints","filteredz","filteredMinDate","filteredMaxDate","getLargeIntervalCurveData","independentVarName","dataMaxInterval","largeIntervalCurveData","getDataForDiffCurve","statVarName","minuendData","subtrahendData","subtrahendIndex","minuendIndex","largeIntervalCurveIndex","subtrahendIndependentVar","minuendIndependentVar","largeIntervalIndependentVar","minuendChanged","subtrahendChanged","diffValue","tempSubValsArray","tempSubSecsArray","tempSubLevsArray","minuendDataSubValues","minuendDataSubSeconds","minuendDataSubLevels","subtrahendDataSubValues","subtrahendDataSubSeconds","subtrahendDataSubLevels","mvalIdx","svalIdx","binLabel","getDataForDiffContour","diffDataset","xAxisKey","yAxisKey","visible","minuendYIndex","subtrahendYIndex","diffDataYIndex","diffDataY","minuendY","subtrahendY","minuendXIndex","subtrahendXIndex","diffDataXIndex","diffDataX","minuendX","subtrahendX","diffNumber","diffMinDate","diffMaxDate","toPrecision","colorbar","reversescale","contours","maxZ","matsDataDiffUtils","getMatchedDataSet","subValues","newSubSecs","newSubValues","independentVarGroups","independentVarHasPoint","currIndependentVar","curveIndex","fi","matchingIndependentVars","matchingIndependentHasPoint","subSecIntersection","currSubSecIntersection","dataLength","newVal","newSec","getMatchedDataSetWithLevels","newSubLevs","subIntersections","currSubIntersections","tempSubIntersections","tempPair","newLev","getMatchedDataSetHistogram","subStatsRaw","subSecsRaw","subStats","newSubStats","newCurveData","newStat","newCurveDataKeys","getMatchedDataSetHistogramWithLevels","subLevsRaw","matsDataMatchUtils","getHorizontalValueLine","yValue","cLabel","valueLine","getVerticalValueLine","xValue","getLinearValueLine","generateSeriesCurveOptions","axisMap","dataSeries","axisKey","axisLabel","axisNumber","error_y_temp","thickness","curveOptions","xaxis","yaxis","annotateColor","mode","symbol","size","line","dash","generateProfileCurveOptions","dataProfile","error_x_temp","generateReliabilityCurveOptions","generateBarChartCurveOptions","dataBars","generateMapCurveOptions","markerSizes","ceil","opacity","generateMapColorTextOptions","textfont","family","hoverinfo","generateContourCurveOptions","unitKey","autocontour","ncontours","showlabels","colorscale","titleside","titlefont","matsDataCurveOpsUtils","generateSeriesPlotOptions","errorMax","margin","pad","zeroline","hovermode","hoverlabel","showlegend","tickfont","axisAnchor","axisSide","axisPosition","yAxisNumber","axisIdx","yPad","axisObjectKey","range","anchor","overlaying","side","position","xPad","generateProfilePlotOptions","xAxisNumber","tickVals","tickText","tickvals","ticktext","autorange","generateDieoffPlotOptions","generateThresholdPlotOptions","generateValidTimePlotOptions","generateReliabilityPlotOptions","perfectLine","generateMapPlotOptions","autosize","mapbox","bearing","center","pitch","zoom","accesstoken","generateHistogramPlotOptions","plotBins","bargap","barmode","generateContourPlotOptions","matsDataPlotOpsUtils","processDataXYCurve","appParams","curveInfoParams","bookkeepingParams","axisLimitReprocessed","statisticSelect","indVars","means","rawStat","errorResult","errorBar","fhr","utcCycleStarts","filteredMeans","miny","maxy","minx","maxx","zeroLine","idealValueLine","idealLabel","ivIdx","idealValues","resultOptions","totalProcessingFinish","dataRequests","begin","totalProcessingStart","finish","duration","asSeconds","queries","processDataProfile","levels","reverse","processDataReliability","skillmin","skillmax","noSkillLine","xClimoLine","yClimoLine","processDataHistogram","allReturnedSubStats","allReturnedSubSecs","allReturnedSubLevs","curvesLengthSoFar","sortedData","postQueryStartMoment","dataFoundForCurve","alreadyMatched","diffResult","cOptions","postQueryFinishMoment","processDataContour","currText","currYTextArray","matsDataProcessUtils","statMvTranslation","xmlBuilder","_pad","num","s","_title","someError","_plotText","_componentToHex","hex","_rgbToHex","cParts","g","_getUniqDates","model","region","forecastLength","regionsClause","regions","join","forecastLengthsClause","forecastValueMap","valuesMap","forecastLengths","fl","metadataPool","dstrMoment","dstr","valid","momentSdiHour","vti","thisvt","_getSortedDatesForIndepRange","sortedDates","_getSortedHoursForIndepRange","hours","Set","add","_getSortedDatesForDepRange","addIndepUngroupedDateElementsBetween","sdi","ele","addDatabaseElement","databases","databasesStr","addFolders","MV_RSCRIPT","folders","startPlotSpec","create","encoding","standalone","sumPool","connectionConfig","port","management_system","MV_DB_MANAGEMENT_SYSTEM","addPlotCi","cList","cListStr","addShowSignif","addPlotDisp","addColors","ch","addPch","addType","addLty","addLwd","addConSeries","addOrderSeries","addLegend","addSeries","dependentAxes","hiddenCurves","sVars","seriesAxisMap","series","models","vx_masks","fcst_leads","fcst_levls","seriesElem","axis","initHours","seriesElements","seriesElementValues","daci","sVar","sValues","paddedV","sValuesStr","thisVar","has","sElementKeys","sei","seVar","svars","getDependentAxis","yaxesDefault","dependentAxesVariables","yaxes","addDeps","deps","depKey","depAxis","subDep","variableStatisticPairs","vars","depElem","addAnomalycorrDeps","variables","_addSeriesLabels","y1vars","y1i","y2vars","y2i","addTemplate","templateStr","addIndepDates","indep","addIndepLevels","lvlSet","levelVals","lvls","li","att","addIndepValidHours","hi","addIndepForecastHours","leadSet","leads","addTmpl","tmpl","plotAction","addPlotFix","addPlotCond","addCalcStat","statType","addPlotStat","addPlotCmd","addY1Lim","addY1Bufr","addY2Lim","addMiscellaneous","endPlotSpec","pretty","matsPlotSpecUtils","publish","ready","Results","life","expire","gaussianElimination","maxrow","tmp","methods","gradient","intercept","len","coordinate","string","equation","points","denominator","A","pow","E","B","polynomial","order","lhs","rhs","answer","w","lastvalue","regression","method","getControlButtonIdForParamName","pname","getValueElementForParamName","getValueIdForParamName","getValueForParamName","textContent","selection","getInputIdForParamName","setInputForParamName","idSelectorStr","idSelector","prop","getElementValues","curveParams","scatterParams","selector","el","idSelect","axisStr","expandParams","dataElem","collapseParams","collapseParam","typeSort","setDefaultForParamName","defaultValue","getDefaultDateRange","dateParam","startInit","stopInit","stopDate","getMinMaxDates","minMoment","maxMoment","subtract","setAllParamsToDefault","nonDependents","resetMapEvent","isInputElementVisible","inputElement","is","isParamVisible","paramRef","isControlButtonVisible","setInputValueForParamAndtriggerChange","trigger","getOptionsMapForParam","getOptionsForParam","getAppName","getCurveItemValueForParamName","curveNumber","visibilityControllerForParam","found","some","pKeys","getAxisText","scatterAxisTextPattern","textPattern","pName","delimiter","getCurveText","curveTextPattern","buttons","getElementsByName","plotFormatParam","getBestFit","containsPoint","pointArray","pLat","pLon","disableActionButtons","enableActionButtons","isNum","args","parseFloat","variance","median","matsMathUtils","topNav","events","preventDefault","homeref","referrer","rparts","pop","spinner","helpers","image","img","Home","isUnderConstruction","resetDefaults","underConstruction","jqueryui","notes","About","versionStr","releaseNotes","plotList","PlotParamGroups","groupNums","displayGroup","uniq","privateDisabled","privateRestoreNames","names","publicRestoreNames","savedSettings","isOwner","deleteThis","formats","template","currentTarget","plotTypeElems","ptei","ptElem","plotParam","paramData","restoreFrom","plotTypeSaved","dateArr","idref","setStartDate","setEndDate","pt","pgf","graphFunction","oldCurves","mvs","onRendered","sidx","plotParamHandler","plotParamGroup","QCParamGroup","completenessNumber","noQC","errorMessage","stackTrace","infoMessage","changePlotType","plotChangeType","Hooks","openWindows","xAxes","yAxes","resize","Plotly","newPlot","showLink","eval","lineTypeResetOpts","lidx","barTypeResetOpts","bidx","mapResetOpts","midx","plotName","toUpperCase","curveText","pfuncs","confidenceDisplay","mvSpanDisplay","updated","plotText","isProfile","isLinePlot","isNotMap","sentAddresses","addresses","hideButtonText","sval","pointsButtonText","errorBarButtonText","barChartButtonText","annotateButtonText","heatMapButtonText","curveShowHideDisplay","pointsShowHideDisplay","errorbarsShowHideDisplay","isMatched","barsShowHideDisplay","annotateShowHideDisplay","heatMapShowHideDisplay","xAxisControlsNumberVisibility","xAxisControlsTextVisibility","yAxisControlsNumberVisibility","yAxisControlsTextVisibility","displayReplotZoom","metApp","mvFiles","mvDisabled","mvLoading","mvWindow","setTimeout","reload","ctbgElems","h","wind","resizeTo","widx","graphView","click","newOpts","yAxis","relayout","pageTextDirection","newDateRange","innerHTML","actionId","plotMatched","myDataIdx","findIndex","restyle","updatedKeys","kidx","updatedKey","jsonHappyKey","hidden","changeYScaleBack","updates","uidx","isStartDefined","isEndDefined","startVal","endVal","graphPlotly","resultSet","fillStr","times","getDataForTime","getDataForCurve","textOutput","notScatter","statHeaders","elementHeaders","curveLabel","elementHtml","labelKey","parentData","elementLabel","cindex","jsPDF","html2canvas","resizeOptions","GraphStandAlone","getRouteName","getParam","backgroundColor","ptypes","mapLoadPause","graphFunctionDispay","matsplotFilemname","each","querySelector","scale","then","canvas","pdf","addImage","toDataURL","uri","body","appendChild","removeChild","defaultTextInput","input","select2","minimumResultsForSearch","closeOnSelect","addEventListener","optionMaxLength","sOptions","longest","isSelectedByDefault","foreach","Soptions","isMultiple","selectionIsOptional","selectionOptional","setValue","firstOption","lastOption","curveItem","controlElem","editMode","defaultOption","priorSelected","curveOption","unusedOption","oi","option","setCustomValidity","checkValidity","defaultAttrs","getScript","markers","thisMarkers","peerOptions","selectedValues","divElement","divId","initializeSelectorMap","defaultPoint","defaultMapView","defaultZoomLevel","zoomLevel","targetElement","highLightColor","on","eventdata","currPoint","pointNumber","tidx","selectedpoints","refreshOptionsForPeer","peerElement","peerId","redraw","resetMap","defaultDateRange","daterangepicker","locale","ranges","startOf","endOf","ev","picker","valStr","curVals","startDsr","endDsr","isValid","isAfter","superiorVals","datesMap","si2","thisSuperior","superiorMinimumDateStr","superiorMinimumMoment","superiorMaximumDateStr","superiorMaximumMoment","dataStart","dataEnd","tStart","tEnd","isBefore","endDsrLess30","jqIdRef","newDateStr","checkboxGroup","checkedByDefault","def","labelValue","refValueDisplay","dispElem","dispDefault","step","setAttribute","cbname","controlButtonText","textValue","hasHelp","help","isSelect","isSelectMap","isInput","isSpinner","isDateRange","isCheckBoxGroup","isRadioGroup","displayPriority","controlButtonVisibility","controlButtonCovered","elementHidden","Event","load","default_value","errMsg","colorpicker","align","removeCurve","confirmRemoveCurve","displayEditXaxis","displayEditYaxis","displayEdit","colorpick","regionName","defaultColor","DBcurve","editingThis","editCurve","editTarget","setParamsToAxis","newAxis","currentParams","currentParamName","curveListEditNode","css","border","confirm","Curves","confirmCurve","jQuery","srcEditButton","editingCurve","parentNode","eventTargetCurve","srcDisplayButton","inputElem","focus","intendedName","activeDisplayButton","allGroups","curveParamItemGroup","curveParamGroups","lastUpdate","elmementValues","pValues","pattern","groupSize","displayParams","pGroups","groupParams","pvi","paramGroup","pNameArr","prefix","buttonId","upperName","spanId","elementChanged","adb","isEditMode","inputElemIsVisible","displayParam","visibilityControllingParam","curveList","displayPlotUnMatched","displayPlotMatched","displaySaveSettings","displayCurves","averagesDisabled","disabledPlotsHidden","identicalContourDisabled","xAxis","identicalContourHidden","mismatchContourDiffDisabled","xAxis0","yAxis0","xAxis1","yAxis1","mismatchContourDiffHidden","matchedLabel","setMatchName","shadeRGBColor","percent","f","G","paramList","CurveParamGroups","isEdit","paramWellColor","curveBeingEdited","grep","lighterShadeOfColor","labelId","paramView","plotView","isScatter","isMap","isReliability","curveNames","pluck","cname","ctlElem","isHidden","isUnused","dateParams","dateParamNames","dindex","dElem","scatterCurveNames","paramElems","contains","changingCurveLabel","Element","axisParams","api","ap","pp","ptype","sitesParamHidden","hiddenForPlotTypes","duplicate","filterParams","xparams","yparams","newParams","xp","yp","curveParamGroup","restoreSettingsTime","isEditing","setAxisText","modeText","creating","editing","xaxisCurveText","yaxisCurveText","yApplyEnabled","xaxisCurveColor","yaxisCurveColor","curveIcon","scatter2dParams","scatter2dOptions","className","idOption","idParam","isDefault","displayScatter2d","parent","labelParam","isNumberSpinner","param_elems","pelem","elem_id","target_id","telem","$options","clone","axis_elems","aelem","aelem_id","oldDatesExist","curveDate","oldCurveDatesExist","tsDate","reset","export","dataFiles","graphFiles","parameterOut","json","blob","Blob","createObjectURL","import","File","FileReader","FileList","alert","files","reader","onload","exc","readAsText","ResetFromCodeChecked","dbs","unshift","errorTypeIs","resetError","db","verify","colorOptions","insertAfterColor","displayOrder","optionRows","paramSelectedName","optionKeys","optionList","oli","Exception","types","errType","restoreDates","scp","cl","changeList","utcSeconds","comment","userName","setUTCSeconds","mo","getMonth","getDate","getFullYear","hr","getHours","mn","getMinutes","getSeconds","second","commentStr","restoreDate","dispOrder","dispPri","dispGroup","seconds","unique","removeName","optionSelected","selectedKey","listIndex","indexStr","indexes","emailAddress","saveSecond","paramsCursor","clName","$push","doc","savedSecond","paramNames","curveParamNames","namesToRemoveFromCollection","rName","cParam","cid","curveParam","taId","getAttribute","rfd","restoreFromSeconds","savedParams","dataField","keyParts","defineProperty","getOwnPropertyDescriptor","field","roleOptions","emailOptions","mailCredentials","client_id","client_secret","plotGraphFunctions","plotTypeStr","sPlotGraphFunctions","sPlotTypes","toRemoveFromCollection","ip","spgf","ptid","onLogin","authList","onLoggedOut","userid","adminContainerDiv","adminDiv","userDiv","administration","adminChanged","signedIn","toDateString","toTimeString","showAdministratorDiv","showAuthenticatedDiv","showResetNow","resetEnabled"],"mappings":"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","file":"/packages/randyp_mats-common.js","sourcesContent":["/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\n/**\n * Created by pierce on 8/31/16.\n */\n\nimport '../imports/startup/client';\nimport '../imports/startup/both';\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nsetError = function(error){\n    var myError = \"\";\n    var myStackTrace = \"\";\n    if (typeof(error) === \"string\" || error instanceof String) {\n        myError = new Error(error);\n    } else {\n        myError = error;\n    }\n\n    if ( myError.toLocaleString().indexOf( \"INFO:\" ) !== -1) {\n        const strinfo = myError && myError.error && myError.error.replace( \"INFO:\", \"\" );\n        setInfo( strinfo );\n        return;\n    }\n\n    Session.set('errorMessage', myError.message);\n    if (myError.stack) {\n        myStackTrace = myError.stack;\n    } else {\n        myStackTrace = \"StackTrace unavailable\";\n    }\n    Session.set('stackTrace',myStackTrace);\n    $(\"#error\").modal('show');\n};\n\nclearError = function(message){\n    Session.set('errorMessage', '');\n    Session.set('stackTrace', '');\n    $(\"#error\").modal('hide');\n};\n\ngetError = function() {\n    return Session.get('errorMessage');\n};\n\ngetStack = function() {\n    return Session.get('stackTrace');\n};","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nsetInfo = function(info){\n    Session.set('infoMessage', info );\n    $(\"#info\").modal('show');\n};\n\nclearInfo = function(info){\n    Session.set('infoMessage', '');\n    $(\"#info\").modal('hide');\n};\n\ngetInfo = function() {\n    return Session.get('infoMessage');\n};","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\n/**\n * Created by pierce on 8/31/16.\n */\nimport './mats-collections.js';\nimport './mats-types.js';\nimport '../api/matsMethods.js';","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\n/**\n * Created by pierce on 8/31/16.\n */\nvar DatabaseRoles = {\n    MODEL_DATA: 'model_data',\n    META_DATA: 'meta_data',\n    SUMS_DATA: 'sums_data',\n    SITE_DATA: 'site_data'\n};\n\nvar AppTypes = {\n    mats: 'mats',\n    metexpress: 'metexpress',\n    mats4met: 'mats4met'\n};\n\nvar InputTypes = {\n    textInput: 'textInput',\n    select: 'select',\n    selectOrderEnforced: 'selectOrderEnforced',\n    numberSpinner: 'numberSpinner',\n    dateRange: 'dateRange',\n    radioGroup: 'radioGroup',\n    checkBoxGroup: 'checkBoxGroup',\n    resetButton: 'resetButton',\n    controlButton: 'controlButton',\n    element: 'element',\n    selectMap: 'selectMap',\n    custom: 'custom',\n    unused: \"unused\",\n    forecastSingleCycle: 'forecasts single cycle',\n    forecastMultiCycle: 'forecasts multi cycle'\n};\n\nvar PlotTypes = {\n    timeSeries: \"TimeSeries\",\n    profile: \"Profile\",\n    dieoff: \"DieOff\",\n    threshold: \"Threshold\",\n    validtime: \"ValidTime\",\n    dailyModelCycle: \"DailyModelCycle\",\n    reliability: \"Reliability\",\n    map: \"Map\",\n    histogram: \"Histogram\",\n    contour: \"Contour\",\n    contourDiff: \"ContourDiff\",\n    scatter2d: \"Scatter2d\"\n};\n\nvar ForecastTypes = {\n    dieoff: \"dieoff\",\n    utcCycle: \"utc cycle\",\n    singleCycle: \"single cycle\"\n};\n\nvar PlotFormats = {\n    none: \"none\",\n    matching: \"matching\",\n    pairwise: \"pairwise\",\n    absolute: \"absolute\"\n};\n\nvar PlotActions = {\n    matched: \"matched\",\n    unmatched: \"unmatched\"\n};\n\nvar BestFits = {\n    none: 'none',\n    linear: 'linear',\n    linearThroughOrigin: 'linearThroughOrigin',\n    exponential: 'exponential',\n    logarithmic: 'logarithmic',\n    power: 'power'\n};\n\nvar MatchFormats = {\n    none: \"none\",\n    time: \"time\",\n    level: \"level\",\n    site: \"site\"\n};\n\nvar PlotAxisFilters = {\n    none: \"none\",\n    level: \"level\",\n    site: \"site\"\n};\n\nvar PlotView = {\n    graph: \"graph\",\n    textSeries: \"text\",\n};\n\nvar ReservedWords = {\n    Zero: \"Zero\",\n    zero: \"zero\",\n    ideal0: \"ideal0\",\n    ideal1: \"ideal1\",\n    ideal2: \"ideal2\",\n    ideal3: \"ideal3\",\n    ideal4: \"ideal4\",\n    ideal5: \"ideal5\",\n    ideal6: \"ideal6\",\n    ideal7: \"ideal7\",\n    ideal8: \"ideal8\",\n    ideal9: \"ideal9\",\n    perfectReliability: \"Perfect Reliability\",\n    noSkill: \"No Skill\",\n    blueCurveText: \"blueCurveText\",\n    blackCurveText: \"blackCurveText\",\n    redCurveText: \"redCurveText\"\n};\n\nvar Messages = {\n    NO_DATA_FOUND: \"INFO:0 data records found\"\n};\n\n//hide non-timeseries selectors at startup\nvar selectorsToHide = ['dieoff-type', 'utc-cycle-start', 'histogram-bin-controls', 'histogram-yaxis-controls', 'bin-number', 'bin-pivot', 'bin-start', 'bin-stride', 'bin-bounds', 'x-axis-parameter', 'y-axis-parameter'];\n\n/*\nClass for holding metaData records. These are stored in an array. An app can have multiple metadata databases and each database has a pool for connections.\nThese pools are global (although for future reference the access might be from this collection.). They are refenced in this script via the pool name.\nThis class enforces the types of the poolName (in case someone accidentally tries to store the whole pool object), and the database name and a list\nof table names. The internal list can be appended. The getRecords returns the internal list.\n */\nclass MetaDataDBRecord {\n    constructor(poolName, dbName, tables) {\n        if (!typeof poolName === \"string\") {\n            throw new Error(\"MetaDataDBRecord.constructor : poolName is not a string\");\n        }\n        if (!typeof dbName === \"string\") {\n            throw new Error(\"MetaDataDBRecord.constructor : dbName is not a string\");\n        }\n        if (!tables instanceof Array) {\n            throw new Error(\"MetaDataDBRecord.constructor : tables is not an array\");\n        }\n        this._records = [];\n        var record = {'pool': poolName, 'name': dbName, 'tables': tables};\n        this._records.push(record);\n    }\n\n    addRecord(poolName, dbName, tables) {\n        if (!typeof poolName === \"string\") {\n            throw new Error(\"MetaDataDBRecord.constructor : poolName is not a string\");\n        }\n        if (!typeof dbName === \"string\") {\n            throw new Error(\"MetaDataDBRecord.constructor : dbName is not a string\");\n        }\n        if (!tables instanceof Array) {\n            throw new Error(\"MetaDataDBRecord.constructor : tables is not an array\");\n        }\n        var record = {'pool': poolName, 'name': dbName, 'tables': tables};\n        this._records.push(record);\n    }\n\n    getRecords() {\n        return this._records;\n    }\n}\n\nexport default matsTypes = {\n    InputTypes: InputTypes,\n    PlotTypes: PlotTypes,\n    PlotFormats: PlotFormats,\n    PlotActions: PlotActions,\n    BestFits: BestFits,\n    MatchFormats: MatchFormats,\n    PlotAxisFilters: PlotAxisFilters,\n    PlotView: PlotView,\n    Messages: Messages,\n    ForecastTypes: ForecastTypes,\n    ReservedWords: ReservedWords,\n    selectorsToHide: selectorsToHide,\n    MetaDataDBRecord: MetaDataDBRecord,\n    AppTypes: AppTypes,\n    DatabaseRoles: DatabaseRoles\n}\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\n/**\n * Created by pierce on 8/31/16.\n */\nimport { Mongo } from 'meteor/mongo';\nvar CurveParams = new Mongo.Collection(\"CurveParams\");\nvar Scatter2dParams = new Mongo.Collection(\"Scatter2dParams\");\nvar CurveTextPatterns = new Mongo.Collection(\"CurveTextPatterns\");\nvar ScatterAxisTextPattern = new Mongo.Collection(\"ScatterAxisTextPattern\");\nvar SavedCurveParams = new Mongo.Collection(\"SavedCurveParams\");\nvar PlotParams = new Mongo.Collection(\"PlotParams\");\nvar SavedPlotParams = new Mongo.Collection(\"SavedPlotParams\");\nvar PlotGraphFunctions = new Mongo.Collection(\"PlotGraphFunctions\");\nvar SavedPlotGraphFunctions = new Mongo.Collection(\"SavedPlotGraphFunctions\");\nvar RegionsPerModel = new Mongo.Collection(\"RegionsPerModel\");\nvar SitesPerModel = new Mongo.Collection(\"SitesPerModel\");\nvar RegionDescriptions = new Mongo.Collection(\"RegionDescriptions\");\nvar Models = new Mongo.Collection(\"Models\");\nvar Instruments = new Mongo.Collection(\"Instruments\");\nvar FcstLensPerModel = new Mongo.Collection(\"FcstLensPerModel\");\nvar CurveSettings = new Mongo.Collection(\"CurveSettings\");\nvar Settings = new Mongo.Collection(\"Settings\");\nvar ColorScheme = new Mongo.Collection(\"ColorScheme\");\nvar SentAddresses = new Mongo.Collection(\"SentAddresses\");\nvar Authorization = new Mongo.Collection(\"Authorization\");\nvar Roles = new Mongo.Collection(\"Roles\");\nvar SavedRoles = new Mongo.Collection(\"SavedRoles\");\nvar Databases = new Mongo.Collection(\"Databases\");\nvar SavedDatabases = new Mongo.Collection(\"SavedDatabases\");\nvar Credentials = new Mongo.Collection(\"Credentials\");\nvar SavedCredentials = new Mongo.Collection(\"SavedCredentials\");\nvar SiteMap = new Mongo.Collection(\"SiteMap\");\nvar StationMap = new Mongo.Collection(\"StationMap\");\nvar appName = new Mongo.Collection(\"appName\");\n\nexport default matsCollections = {\n    CurveParams:CurveParams,\n    Scatter2dParams:Scatter2dParams,\n    CurveTextPatterns:CurveTextPatterns,\n    ScatterAxisTextPattern:ScatterAxisTextPattern,\n    SavedCurveParams:SavedCurveParams,\n    PlotParams:PlotParams,\n    SavedPlotParams:SavedPlotParams,\n    PlotGraphFunctions:PlotGraphFunctions,\n    SavedPlotGraphFunctions:SavedPlotGraphFunctions,\n    RegionsPerModel:RegionsPerModel,\n    SitesPerModel:SitesPerModel,\n    RegionDescriptions:RegionDescriptions,\n    Models:Models,\n    Instruments:Instruments,\n    FcstLensPerModel:FcstLensPerModel,\n    CurveSettings:CurveSettings,\n    Settings:Settings,\n    ColorScheme:ColorScheme,\n    SentAddresses:SentAddresses,\n    Authorization:Authorization,\n    Roles:Roles,\n    SavedRoles:SavedRoles,\n    Databases:Databases,\n    SavedDatabases:SavedDatabases,\n    Credentials:Credentials,\n    SavedCredentials:SavedCredentials,\n    SiteMap:SiteMap,\n    StationMap:StationMap,\n    appName:appName\n};","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {Meteor} from \"meteor/meteor\";\nimport {ValidatedMethod} from 'meteor/mdg:validated-method';\nimport {SimpleSchema} from 'meteor/aldeed:simple-schema';\nimport {matsCache, matsCollections, matsDataQueryUtils, matsDataUtils, matsTypes} from 'meteor/randyp:mats-common';\nimport {mysql} from 'meteor/pcel:mysql';\nimport {url} from 'url';\nimport {Mongo} from 'meteor/mongo';\n\n// PRIVATE\n\n// local collection used to keep the table update times for refresh - won't ever be synchronized or persisted.\nconst metaDataTableUpdates = new Mongo.Collection(null);\nconst LayoutStoreCollection = new Mongo.Collection(\"LayoutStoreCollection\"); // initialize collection used for pop-out window functionality\nconst DownSampleResults = new Mongo.Collection(\"DownSampleResults\");\n\nvar MV_DIRS = {};\n// Define routes for server\nif (Meteor.isServer) {\n    if (Meteor.settings.private !== undefined && Meteor.settings.private !== null) {\n        const _MV_OUT = Meteor.settings.private.MV_OUTPUT;\n        const _MV_HOME = Meteor.settings.private.MV_HOME;\n        const _MV_LOGDIR = _MV_OUT + \"/xml/\";\n        const _MV_ERRDIR = _MV_OUT + \"/xml/\";\n        const _MV_DATADIR = _MV_OUT + \"/data/\";\n        const _MV_SQLDIR = _MV_OUT + \"/xml/\";  // sql output goes with the xml output\n        const _MV_XMLDIR = _MV_OUT + \"/xml/\";\n        const _MV_SCRIPTSDIR = _MV_OUT + \"/scripts/\";\n        const _MV_PLOTSSDIR = _MV_OUT + \"/plots/\";\n        process.env.JAVA_HOME = Meteor.settings.private.JAVA_HOME;\n        process.env.MV_HOME = Meteor.settings.private.MV_HOME;\n\n        MV_DIRS = {\n            LOGDIR: _MV_LOGDIR,\n            ERRDIR: _MV_ERRDIR,\n            DATADIR: _MV_DATADIR,\n            SQLDIR: _MV_SQLDIR,\n            XMLDIR: _MV_XMLDIR,\n            SCRIPTSDIR: _MV_SCRIPTSDIR,\n            PLOTSDIR: _MV_PLOTSSDIR,\n            HOME: _MV_HOME\n        };\n    }\n\n    // add indexes to result and axes collections\n    DownSampleResults.rawCollection().createIndex({\"createdAt\": 1}, {expireAfterSeconds: 3600 * 8}); // 8 hour expiration\n    LayoutStoreCollection.rawCollection().createIndex({\"createdAt\": 1}, {expireAfterSeconds: 900}); // 15 min expiration\n    // set the default proxy prefix path to \"\"\n    if (Meteor.settings.public != null && Meteor.settings.public.proxy_prefix_path  == null) {\n        Meteor.settings.public.proxy_prefix_path = \"\";\n    }\n\n    Picker.route('/_getCSV/:key', function (params, req, res, next) {\n        Picker.middleware(_getCSV(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/_getCSV/:key', function (params, req, res, next) {\n        Picker.middleware(_getCSV(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/app:/_getCSV/:key', function (params, req, res, next) {\n        Picker.middleware(_getCSV(params, req, res, next));\n    });\n\n    Picker.route('/CSV/:f/:key/:m/:a', function (params, req, res, next) {\n        Picker.middleware(_getCSV(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/CSV/:f/:key/:m/:a', function (params, req, res, next) {\n        Picker.middleware(_getCSV(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/:app/CSV/:f/:key/:m/:a', function (params, req, res, next) {\n        Picker.middleware(_getCSV(params, req, res, next));\n    });\n\n    Picker.route('/_getJSON/:key', function (params, req, res, next) {\n        Picker.middleware(_getJSON(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/_getJSON/:key', function (params, req, res, next) {\n        Picker.middleware(_getJSON(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/app:/_getJSON/:key', function (params, req, res, next) {\n        Picker.middleware(_getJSON(params, req, res, next));\n    });\n\n    Picker.route('/JSON/:f/:key/:m/:a', function (params, req, res, next) {\n        Picker.middleware(_getJSON(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/JSON/:f/:key/:m/:a', function (params, req, res, next) {\n        Picker.middleware(_getJSON(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/:app/JSON/:f/:key/:m/:a', function (params, req, res, next) {\n        Picker.middleware(_getJSON(params, req, res, next));\n    });\n\n    Picker.route('/clearCache', function (params, req, res, next) {\n        Picker.middleware(_clearCache(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/clearCache', function (params, req, res, next) {\n        Picker.middleware(_clearCache(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/:app/clearCache', function (params, req, res, next) {\n        Picker.middleware(_clearCache(params, req, res, next));\n    });\n\n    Picker.route('/refreshMetadata', function (params, req, res, next) {\n        Picker.middleware(_refreshMetadataMWltData(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/refreshMetadata', function (params, req, res, next) {\n        Picker.middleware(_refreshMetadataMWltData(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/:app/refreshMetadata', function (params, req, res, next) {\n        Picker.middleware(_refreshMetadataMWltData(params, req, res, next));\n    });\n\n// create picker routes for metviewer middleware static files\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/:app/mvdata/:key', function (params, req, res, next) {\n        Picker.middleware(_mvGetData(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/:app/mvpoints1/:key', function (params, req, res, next) {\n        Picker.middleware(_mvGetPoints1(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/:app/mvpoints2/:key', function (params, req, res, next) {\n        Picker.middleware(_mvGetPoints2(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/:app/mvxml/:key', function (params, req, res, next) {\n        Picker.middleware(_mvGetXml(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/:app/mvplot/:key', function (params, req, res, next) {\n        Picker.middleware(_mvGetPlot(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/:app/mvscript/:key', function (params, req, res, next) {\n        Picker.middleware(_mvGetScript(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/:app/mvsql/:key', function (params, req, res, next) {\n        Picker.middleware(_mvGetSql(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/:app/mvlog/:key', function (params, req, res, next) {\n        Picker.middleware(_mvGetLog(params, req, res, next));\n    });\n\n    Picker.route(Meteor.settings.public.proxy_prefix_path + '/:app/mverr/:key', function (params, req, res, next) {\n        Picker.middleware(_mvGetErr(params, req, res, next));\n    });\n}\n\n// private - used to see if the main page needs to update its selectors\nconst _checkMetaDataRefresh = function () {\n    // This routine compares the current last modified time of the tables used for curveParameter metadata\n    // with the last update time to determine if an update is necessary. We really only do this for Curveparams\n    /*\n        metaDataTableUpdates:\n        {\n            name: dataBaseName,\n            tables: [tableName1, tableName2 ..],\n            lastRefreshed : timestamp\n        }\n     */\n    var refresh = false;\n    const tableUpdates = metaDataTableUpdates.find({}).fetch();\n    for (var tui = 0; tui < tableUpdates.length; tui++) {\n        var id = tableUpdates[tui]._id;\n        var poolName = tableUpdates[tui].pool;\n        var dbName = tableUpdates[tui].name;\n        var tableNames = tableUpdates[tui].tables;\n        var lastRefreshed = tableUpdates[tui]['lastRefreshed'];\n        var updatedEpoch = Number.MAX_VALUE;\n        for (var ti = 0; ti < tableNames.length; ti++) {\n            var tName = tableNames[ti];\n            var rows = matsDataQueryUtils.simplePoolQueryWrapSynchronous(global[poolName], \"SELECT UNIX_TIMESTAMP(UPDATE_TIME)\" +\n                \"    FROM   information_schema.tables\" +\n                \"    WHERE  TABLE_SCHEMA = '\" + dbName + \"'\" +\n                \"    AND TABLE_NAME = '\" + tName + \"'\");\n            for (var i = 0; i < rows.length; i++) {\n                try {\n                    updatedEpoch = rows[i]['UNIX_TIMESTAMP(UPDATE_TIME)'];\n                    break;\n                } catch (e) {\n                    throw new Error(\"_checkMetaDataRefresh - cannot find last update time for database: \" + dbName + \" and table: \" + tName + \" ERROR:\" + e.message);\n                }\n                if (updatedEpoch === Number.MAX_VALUE) {\n                    throw new Error(\"_checkMetaDataRefresh - cannot find last update time for database: \" + dbName + \" and table: \" + tName);\n                }\n            }\n            const lastRefreshedEpoch = moment(lastRefreshed).valueOf() / 1000;\n            if (lastRefreshedEpoch < updatedEpoch) {\n                refresh = true;\n                console.log(\"Refreshing the metadata in the app selectors because table \" + dbName + \".\" + tName + \" was updated at \" + moment.utc(updatedEpoch * 1000).format(\"YYYY-MM-DD HH:mm:ss\") + \" while the metadata was last refreshed at \" + moment.utc(lastRefreshedEpoch * 1000).format(\"YYYY-MM-DD HH:mm:ss\"));\n                break;\n            }\n        }\n        if (refresh === true) {\n            // refresh the app metadata\n            // app specific routines\n            //const asrKeys = Object.keys(appSpecificResetRoutines);\n            const asrKeys = appSpecificResetRoutines;\n            for (var ai = 0; ai < asrKeys.length; ai++) {\n                global.appSpecificResetRoutines[ai]();\n            }\n            // remember that we updated ALL the metadata tables just now\n            metaDataTableUpdates.update({_id: id}, {$set: {lastRefreshed: moment().format()}});\n        }\n    }\n    return true;\n};\n\n// private middleware for clearing the cache\nconst _clearCache = function (params, req, res, next) {\n    if (Meteor.isServer) {\n        matsCache.clear();\n        res.end(\"<body><h1>clearCache Done!</h1></body>\");\n    }\n};\n\n// private middleware for _getCSV route\nconst _getCSV = function (params, req, res, next) {\n    if (Meteor.isServer) {\n        var stringify = require('csv-stringify');\n        var csv = \"\";\n        try {\n            var result = _getFlattenedResultData(params.key, 0, -1000);\n            var statArray = Object.values(result.stats);\n            var dataArray = Object.values(result.data);\n            var statResultArray = [];\n            var dataResultArray = [];\n            for (var si = 0; si < statArray.length; si++) {\n                statResultArray.push(Object.keys(statArray[si])); // push the stat header for this curve(keys)\n                statResultArray.push(statArray[si]['n'] === 0 ? [statArray[si].label] : Object.values(statArray[si])); // push the stats for this curve\n            }\n\n            for (var di = 0; di < dataArray.length; di++) {\n                var dataSubArray = Object.values(dataArray[di]);\n                var dataHeader = dataSubArray[0] === undefined ? statArray[di].label : Object.keys(dataSubArray[0]);\n                //dataHeader[0] = 'label';\n                dataHeader[0] = dataSubArray[0] === undefined ? \"NO DATA\" : Object.keys(dataSubArray[0]).filter(key => key.indexOf('Curve') != -1)[0];\n                dataResultArray.push(dataHeader); // push this curve data header (keys)\n                if (dataSubArray[0] === undefined) {\n                    continue;\n                }\n                for (var dsi = 0; dsi < dataSubArray.length; dsi++) {  // push this curves data\n                    dataResultArray.push(Object.values(dataSubArray[dsi]));\n                }\n            }\n            var fileName = \"matsplot-\" + moment.utc().format('YYYYMMDD-HH.mm.ss') + \".csv\";\n            res.setHeader('Content-disposition', 'attachment; filename=' + fileName);\n            res.setHeader('Content-Type', 'attachment.ContentType');\n            stringify(statResultArray, {header: true}, function (err, output) {\n                if (err) {\n                    console.log(\"error in _getCSV:\", err);\n                    res.write(\"error,\" + err.toLocaleString());\n                    res.end(\"<body><h1>_getCSV Error! \" + err.toLocaleString() + \"</h1></body>\");\n                    return;\n                }\n                res.write(output);\n                stringify(dataResultArray, {header: true}, function (err, output) {\n                    if (err) {\n                        console.log(\"error in _getCSV:\", err);\n                        res.write(\"error,\" + err.toLocaleString());\n                        res.end(\"<body><h1>_getCSV Error! \" + err.toLocaleString() + \"</h1></body>\");\n                        return;\n                    }\n                    res.write(output);\n                    res.end();\n                });\n                delete result;\n                delete statResultArray;\n                delete dataResultArray;\n            });\n        } catch (e) {\n            console.log('error retrieving data: ', e);\n            csv = \"error,\" + e.toLocaleString();\n            res.setHeader('Content-disposition', 'attachment; filename=matsplot.csv');\n            res.setHeader('Content-Type', 'attachment.ContentType');\n            res.end(\"<body><h1>_getCSV Error! \" + csv + \"</h1></body>\");\n        }\n    }\n};\n\n// private middleware for _getJSON route\nconst _getJSON = function (params, req, res, next) {\n    if (Meteor.isServer) {\n        var flatJSON = \"\";\n        try {\n            var result = _getPagenatedData(params.key, 0, -1000);\n            flatJSON = JSON.stringify(result);\n        } catch (e) {\n            console.log('error retrieving data: ', e);\n            flatJSON = JSON.stringify({error: e});\n            delete flatJSON.dsiRealPageIndex;\n            delete flatJSON.dsiTextDirection;\n        }\n        res.setHeader('Content-Type', 'application/json');\n        res.write(flatJSON);\n        res.end();\n        delete flatJSON;\n        delete result;\n    }\n};\n\n// private method for getting pagenated results and flattening them in order to be appropriate for text display.\nconst _getFlattenedResultData = function (rk, p, np) {\n    if (Meteor.isServer) {\n        var resp;\n        try {\n            var r = rk;\n            var p = p;\n            var np = np;\n            // get the pagenated data\n            var result = _getPagenatedData(r, p, np);\n            // find the type\n            var plotTypes = result.basis.plotParams.plotTypes;\n            var plotType = (_.invert(plotTypes))[true];\n            // extract data\n            var data = result.data;\n            var dsiRealPageIndex = result.dsiRealPageIndex;\n            var dsiTextDirection = result.dsiTextDirection;\n            switch (plotType) {\n                case matsTypes.PlotTypes.timeSeries:\n                case matsTypes.PlotTypes.dailyModelCycle:\n                    var returnData = {};\n                    returnData.stats = {};   // map of maps\n                    returnData.data = {};  // map of arrays of maps\n                    /*\n                    returnData is\n                    {\n                        stats: {\n                                    curve0: {label:someLabel, mean:someMean,sd:someSd....}\n                                    curve1: {label:someLabel, mean:someMean,sd:someSd....}\n                                    ...\n                                }\n                        data: {\n                                    curve0: [\n                                                {time:someTime, stat: someStat, sd: someSd,....},\n                                                {time:someTime, stat: someStat, sd: someSd,....},\n                                                ....\n                                            ],\n                                    curve1: [\n                                                {time:someTime, stat: someStat, sd: someSd,....},\n                                                {time:someTime, stat: someStat, sd: someSd,....},\n                                                ....\n                                            ],\n                                            ...\n                              }\n                    }\n                     */\n                    for (var ci = 0; ci < data.length; ci++) { // for each curve\n                        // if the curve label is a reserved word do not process the curve (its a zero or max curve)\n                        var reservedWords = Object.values(matsTypes.ReservedWords);\n                        if (reservedWords.indexOf(data[ci].label) >= 0) {\n                            continue; // don't process the zero or max curves\n                        }\n                        var stats = {};\n                        stats['label'] = data[ci].label;\n                        stats['mean'] = data[ci].glob_stats.d_mean;\n                        stats['standard deviation'] = data[ci].glob_stats.sd;\n                        stats['n'] = data[ci].glob_stats.n_good;\n                        stats['standard error'] = data[ci].glob_stats.stde_betsy;\n                        stats['lag1'] = data[ci].glob_stats.lag1;\n                        stats['minimum'] = data[ci].glob_stats.minVal;\n                        stats['maximum'] = data[ci].glob_stats.maxVal;\n                        returnData.stats[data[ci].label] = stats;\n\n                        var curveData = [];  // map of maps\n                        for (var cdi = 0; cdi < data[ci].x.length; cdi++) { //for each datapoint\n                            var curveDataElement = {};\n                            curveDataElement[data[ci].label + ' time'] = data[ci].x[cdi];\n                            curveDataElement['raw stat from query'] = data[ci].stats[cdi].raw_stat;\n                            curveDataElement['plotted stat'] = data[ci].y[cdi];\n                            curveDataElement['std dev'] = data[ci].stats[cdi].sd;\n                            curveDataElement['std error'] = data[ci].stats[cdi].stde_betsy;\n                            curveDataElement['lag1'] = data[ci].stats[cdi].lag1;\n                            curveDataElement['n'] = data[ci].stats[cdi].n_good;\n                            curveData.push(curveDataElement);\n                        }\n                        returnData.data[data[ci].label] = curveData;\n                    }\n                    break;\n                case matsTypes.PlotTypes.profile:\n                    var returnData = {};\n                    returnData.stats = {};   // map of maps\n                    returnData.data = {};  // map of arrays of map\n                    for (var ci = 0; ci < data.length; ci++) {  // for each curve\n                        var reservedWords = Object.values(matsTypes.ReservedWords);\n                        if (reservedWords.indexOf(data[ci].label) >= 0) {\n                            continue; // don't process the zero or max curves\n                        }\n                        var stats = {};\n                        stats['label'] = data[ci].label;\n                        stats['mean'] = data[ci].glob_stats.d_mean;\n                        stats['standard deviation'] = data[ci].glob_stats.sd;\n                        stats['n'] = data[ci].glob_stats.n_good;\n                        stats['standard error'] = data[ci].glob_stats.stde_betsy;\n                        stats['lag1'] = data[ci].glob_stats.lag1;\n                        stats['minimum'] = data[ci].glob_stats.minVal;\n                        stats['maximum'] = data[ci].glob_stats.maxVal;\n                        returnData.stats[data[ci].label] = stats;\n\n                        var cdata = data[ci].data;\n                        var curveData = [];  // array of maps\n                        for (var cdi = 0; cdi < data[ci].x.length; cdi++) {  // for each datapoint\n                            var curveDataElement = {};\n                            curveDataElement[data[ci].label + ' level'] = data[ci].y[cdi];\n                            curveDataElement['raw stat from query'] = data[ci].stats[cdi].raw_stat;\n                            curveDataElement['plotted stat'] = data[ci].x[cdi];\n                            curveDataElement['std dev'] = data[ci].stats[cdi].sd;\n                            curveDataElement['std error'] = data[ci].stats[cdi].stde_betsy;\n                            curveDataElement['lag1'] = data[ci].stats[cdi].lag1;\n                            curveDataElement['n'] = data[ci].stats[cdi].n_good;\n                            curveData.push(curveDataElement);\n                        }\n                        returnData.data[data[ci].label] = curveData;\n                    }\n                    break;\n                case matsTypes.PlotTypes.dieoff:\n                case matsTypes.PlotTypes.threshold:\n                case matsTypes.PlotTypes.validtime:\n                    var labelSuffix;\n                    switch (plotType) {\n                        case matsTypes.PlotTypes.dieoff:\n                            labelSuffix = \" forecast lead time\";\n                            break;\n                        case matsTypes.PlotTypes.validtime:\n                            labelSuffix = \" hour of day\";\n                            break;\n                        case matsTypes.PlotTypes.threshold:\n                            labelSuffix = \" threshold (in)\";\n                            break;\n                    }\n                    var returnData = {};\n                    returnData.stats = {};   // map of maps\n                    returnData.data = {};  // map of arrays of maps\n\n                    for (var ci = 0; ci < data.length; ci++) {  // for each curve\n                        var reservedWords = Object.values(matsTypes.ReservedWords);\n                        if (reservedWords.indexOf(data[ci].label) >= 0) {\n                            continue; // don't process the zero or max curves\n                        }\n                        var stats = {};\n                        stats['label'] = data[ci].label;\n                        stats['mean'] = data[ci].glob_stats.d_mean;\n                        stats['standard deviation'] = data[ci].glob_stats.sd;\n                        stats['n'] = data[ci].glob_stats.n_good;\n                        stats['minimum'] = data[ci].glob_stats.minVal;\n                        stats['maximum'] = data[ci].glob_stats.maxVal;\n                        returnData.stats[data[ci].label] = stats;\n\n                        var curveData = [];  // map of maps\n                        for (var cdi = 0; cdi < data[ci].x.length; cdi++) {  // for each datapoint\n                            var curveDataElement = {};\n                            curveDataElement[data[ci].label + labelSuffix] = data[ci].x[cdi];\n                            curveDataElement['raw stat from query'] = data[ci].stats[cdi].raw_stat;\n                            curveDataElement['plotted stat'] = data[ci].y[cdi];\n                            curveDataElement['std dev'] = data[ci].stats[cdi].sd;\n                            curveDataElement['n'] = data[ci].stats[cdi].n_good;\n                            curveData.push(curveDataElement);\n                        }\n                        returnData.data[data[ci].label] = curveData;\n                    }\n                    break;\n                case matsTypes.PlotTypes.reliability:\n                    var returnData = {};\n                    returnData.stats = {};   // map of maps\n                    returnData.data = {};  // map of arrays of map\n                    for (var ci = 0; ci < data.length; ci++) {  // for each curve\n                        var reservedWords = Object.values(matsTypes.ReservedWords);\n                        if (reservedWords.indexOf(data[ci].label) >= 0) {\n                            continue; // don't process the zero or max curves\n                        }\n                        var stats = {};\n                        stats['label'] = data[ci].label;\n                        stats['sample climo'] = data[ci].glob_stats.sample_climo;\n                        returnData.stats[data[ci].label] = stats;\n\n                        var cdata = data[ci].data;\n                        var curveData = [];  // array of maps\n                        for (var cdi = 0; cdi < data[ci].y.length; cdi++) {  // for each datapoint\n                            var curveDataElement = {};\n                            curveDataElement[data[ci].label + ' probability bin'] = data[ci].stats[cdi].prob_bin;\n                            curveDataElement['hit rate'] = data[ci].stats[cdi].hit_rate;\n                            curveDataElement['oy'] = data[ci].stats[cdi].obs_y;\n                            curveDataElement['on'] = data[ci].stats[cdi].obs_n;\n                            curveData.push(curveDataElement);\n                        }\n                        returnData.data[data[ci].label] = curveData;\n                    }\n                    break;\n                case matsTypes.PlotTypes.map:\n                    var returnData = {};\n                    returnData.stats = {};   // map of maps\n                    returnData.data = {};  // map of arrays of maps\n\n                    var stats = {};\n                    stats['label'] = data[0].label;\n                    stats['total number of obs'] = data[0].stats.reduce(function (prev, curr) {\n                        return prev + curr.N_times;\n                    }, 0);\n                    stats['mean difference'] = matsDataUtils.average(data[0].queryVal);\n                    stats['standard deviation'] = matsDataUtils.stdev(data[0].queryVal);\n                    stats['minimum time'] = data[0].stats.reduce(function (prev, curr) {\n                        return (prev < curr.min_time ? prev : curr.min_time);\n                    });\n                    stats['minimum time'] = moment.utc(stats['minimum time'] * 1000).format('YYYY-MM-DD HH:mm');\n                    stats['maximum time'] = data[0].stats.reduce(function (prev, curr) {\n                        return (prev > curr.max_time ? prev : curr.max_time);\n                    });\n                    stats['maximum time'] = moment.utc(stats['maximum time'] * 1000).format('YYYY-MM-DD HH:mm');\n\n                    returnData.stats[data[0].label] = stats;\n\n                    var curveData = [];  // map of maps\n                    for (var si = 0; si < data[0].siteName.length; si++) {\n                        var curveDataElement = {};\n                        curveDataElement['Site Name'] = data[0].siteName[si];\n                        curveDataElement['Number of Times'] = data[0].stats[si].N_times;\n                        curveDataElement['Start Date'] = moment.utc((data[0].stats[si].min_time) * 1000).format('YYYY-MM-DD HH:mm');\n                        curveDataElement['End Date'] = moment.utc((data[0].stats[si].max_time) * 1000).format('YYYY-MM-DD HH:mm');\n                        curveDataElement['Average Difference'] = data[0].queryVal[si];\n                        curveData.push(curveDataElement);\n                    }\n                    returnData.data[data[0].label] = curveData;\n                    break;\n                case matsTypes.PlotTypes.histogram:\n                    var returnData = {};\n                    returnData.stats = {};   // map of maps\n                    returnData.data = {};  // map of arrays of maps\n\n                    for (var ci = 0; ci < data.length; ci++) { // for each curve\n                        var reservedWords = Object.values(matsTypes.ReservedWords);\n                        if (reservedWords.indexOf(data[ci].label) >= 0) {\n                            continue; // don't process the zero or max curves\n                        }\n                        var stats = {};\n                        stats['label'] = data[ci].label;\n                        stats['mean'] = data[ci].glob_stats.glob_mean;\n                        stats['standard deviation'] = data[ci].glob_stats.glob_sd;\n                        stats['n'] = data[ci].glob_stats.glob_n;\n                        stats['minimum'] = data[ci].glob_stats.glob_min;\n                        stats['maximum'] = data[ci].glob_stats.glob_max;\n                        returnData.stats[data[ci].label] = stats;\n\n                        var curveData = [];  // map of maps\n                        for (var cdi = 0; cdi < data[ci].x.length; cdi++) {   // for each datapoint\n                            var curveDataElement = {};\n                            curveDataElement[data[ci].label + ' bin range'] = data[ci].bin_stats[cdi]['binLabel'];\n                            curveDataElement['n'] = data[ci].bin_stats[cdi].bin_n;\n                            curveDataElement['bin rel freq'] = data[ci].bin_stats[cdi].bin_rf;\n                            curveDataElement['bin lower bound'] = data[ci].bin_stats[cdi].binLowBound;\n                            curveDataElement['bin upper bound'] = data[ci].bin_stats[cdi].binUpBound;\n                            curveDataElement['bin mean'] = data[ci].bin_stats[cdi].bin_mean;\n                            curveDataElement['bin std dev'] = data[ci].bin_stats[cdi].bin_sd;\n                            curveData.push(curveDataElement);\n                        }\n                        returnData.data[data[ci].label] = curveData;\n                    }\n                    break;\n                case matsTypes.PlotTypes.contour:\n                case matsTypes.PlotTypes.contourDiff:\n                    var returnData = {};\n                    returnData.stats = {};   // map of maps\n                    returnData.data = {};  // map of arrays of maps\n                    var stats = {};\n                    stats['label'] = data[0].label;\n                    stats['total number of points'] = data[0].glob_stats.n;\n                    stats['mean stat'] = data[0].glob_stats.mean;\n                    stats['minimum time'] = data[0].glob_stats.minDate;\n                    stats['minimum time'] = moment.utc(stats['minimum time'] * 1000).format('YYYY-MM-DD HH:mm');\n                    stats['maximum time'] = data[0].glob_stats.maxDate;\n                    stats['maximum time'] = moment.utc(stats['maximum time'] * 1000).format('YYYY-MM-DD HH:mm');\n\n                    returnData.stats[data[0].label] = stats;\n\n                    var curveData = [];  // map of maps\n                    for (var si = 0; si < data[0].xTextOutput.length; si++) {\n                        var curveDataElement = {};\n                        curveDataElement['xVal'] = data[0].xTextOutput[si];\n                        curveDataElement['yVal'] = data[0].yTextOutput[si];\n                        curveDataElement['stat'] = data[0].zTextOutput[si];\n                        curveDataElement['N'] = data[0].nTextOutput[si];\n                        curveDataElement['Start Date'] = moment.utc((data[0].minDateTextOutput[si]) * 1000).format('YYYY-MM-DD HH:mm');\n                        curveDataElement['End Date'] = moment.utc((data[0].maxDateTextOutput[si]) * 1000).format('YYYY-MM-DD HH:mm');\n                        curveData.push(curveDataElement);\n                    }\n                    returnData.data[data[0].label] = curveData;\n                    break;\n                case matsTypes.PlotTypes.scatter2d:\n                    var returnData = {}; // returns a map of arrays of maps\n                    /*\n                    returnData = {\n                                    curve0: [\n                                                {\n                                                xval: number,\n                                                yval: number,\n                                                bestfit: number || none\n                                                },\n                                                {\n                                                xval: number,\n                                                yval: number,\n                                                bestfit: number || none\n                                                },\n                                               .....\n                                            ],\n                                     curve1: [\n                                                {\n                                                xval: number,\n                                                yval: number,\n                                                bestfit: number || none\n                                                },\n                                                {\n                                                xval: number,\n                                                yval: number,\n                                                bestfit: number || none\n                                                },\n                                               .....\n                                            ],\n                                            ....\n                                }\n                     */\n                    var firstBestFitIndex = -1;\n                    var bestFitIndexes = {};\n                    for (var ci = 0; ci < data.length; ci++) {\n                        if (ci == firstBestFitIndex) {\n                            break; // best fit curves are at the end so do not do further processing\n                        }\n                        var curveData = data[ci];\n                        // look for a best fit curve - only have to look at curves with higher index than this one\n                        var bestFitIndex = -1;\n                        for (var cbi = ci + 1; cbi < data.length; cbi++) {\n                            if (((data[cbi].label).indexOf(curveData.label) !== -1) && ((data[cbi].label).indexOf(\"-best fit\") != -1)) {\n                                bestFitIndexes[ci] = cbi;\n                                if (firstBestFitIndex == -1) {\n                                    firstBestFitIndex = cbi;\n                                }\n                                break;\n                            }\n                        }\n                        var curveTextData = [];\n                        for (var cdi = 0; cdi < curveData.data.length; cdi++) {\n                            var element = {};\n                            element['xAxis'] = curveData.data[cdi][0];\n                            element['yAxis'] = curveData.data[cdi][1];\n                            if (bestFitIndexes[ci] === undefined) {\n                                element['best fit'] = \"none;\"\n                            } else {\n                                element['best fit'] = data[bestFitIndexes[ci]].data[cdi][1];\n                            }\n                            curveTextData.push(element);\n                        }\n                        returnData[curveData.label] = curveTextData;\n                    }\n                    break;\n                default:\n                    return undefined;\n            }\n            returnData.dsiRealPageIndex = dsiRealPageIndex;\n            returnData.dsiTextDirection = dsiTextDirection;\n            return returnData;\n        } catch (error) {\n           throw new Meteor.Error(\"Error in _getFlattenedResultData function: \" + error.message);\n        }\n    }\n};\n\n// private method for getting pagenated data\n// a newPageIndex of -1000 means get all the data (used for export)\n// a newPageIndex of -2000 means get just the last page\nconst _getPagenatedData = function (rky, p, np) {\n    if (Meteor.isServer) {\n        var key = rky;\n        var myPageIndex = p;\n        var newPageIndex = np;\n        var ret;\n        var rawReturn;\n\n        try {\n            var result = matsCache.getResult(key);\n            rawReturn = result === undefined ? undefined : result.result; // getResult structure is {key:something, result:resultObject}\n        } catch (e) {\n            console.log(\"_getPagenatedData: Error - \", e);\n            return undefined;\n        }\n        ret = rawReturn === undefined ? undefined : JSON.parse(JSON.stringify(rawReturn));\n        var start;\n        var end;\n        var direction = 1;\n        if (newPageIndex === -1000) {\n            // all the data\n            start = 0;\n            end = Number.MAX_VALUE;\n        } else if (newPageIndex === -2000) {\n            // just the last page\n            start = -2000;\n            direction = -1;\n        } else if (myPageIndex <= newPageIndex) {\n            // proceed forward\n            start = (newPageIndex - 1) * 100;\n            end = newPageIndex * 100;\n        } else {\n            // move back\n            direction = -1;\n            start = newPageIndex * 100;\n            end = (newPageIndex + 1) * 100;\n        }\n\n        var dsiStart;\n        var dsiEnd;\n        for (var csi = 0; csi < ret.data.length; csi++) {\n            if (ret.data[csi].x == null || ret.data[csi].x.length <= 100) {\n                continue; // don't bother pagenating datasets less than or equal to a page - ret is rawReturn\n            }\n            dsiStart = start;\n            dsiEnd = end;\n            if (dsiStart > ret.data[csi].x.length || dsiStart === -2000) {\n                // show the last page if we either requested it specifically or are trying to navigate past it\n                dsiStart = Math.floor(rawReturn.data[csi].x.length / 100) * 100;\n                dsiEnd = rawReturn.data[csi].x.length;\n                if (dsiEnd === dsiStart) {\n                    // make sure the last page isn't empty--if rawReturn.data[csi].data.length/100 produces a whole number,\n                    // dsiStart and dsiEnd would be the same. This makes sure that the last full page is indeed the last page, without a phantom empty page afterwards\n                    dsiStart = dsiEnd - 100;\n                }\n            }\n            if (dsiStart < 0) {\n                // show the first page if we are trying to navigate before it\n                dsiStart = 0;\n                dsiEnd = 100;\n            }\n            if (dsiEnd < dsiStart) {\n                // make sure that the end is after the start\n                dsiEnd = dsiStart + 100;\n            }\n            if (dsiEnd > ret.data[csi].x.length) {\n                // make sure we don't request past the end -- if results are one page, this should convert the\n                // start and end from 0 and 100 to 0 and whatever the end is.\n                dsiEnd = ret.data[csi].x.length;\n            }\n            ret.data[csi].x = rawReturn.data[csi].x.slice(dsiStart, dsiEnd);\n            ret.data[csi].y = rawReturn.data[csi].y.slice(dsiStart, dsiEnd);\n            ret.data[csi].stats = rawReturn.data[csi].stats.slice(dsiStart, dsiEnd);\n            ret.data[csi].glob_stats = rawReturn.data[csi].glob_stats;\n        }\n\n        delete rawReturn;\n        if (direction === 1) {\n            ret.dsiRealPageIndex = Math.floor(dsiEnd / 100);\n        } else {\n            ret.dsiRealPageIndex = Math.floor(dsiStart / 100);\n        }\n        ret.dsiTextDirection = direction;\n        return ret;\n    }\n};\n\n//private middleware for getting metviewer data file\nconst _mvGetData = function(params, req, res, next) {\n    const fse = require(\"fs-extra\");\n    const filePath = MV_DIRS.DATADIR;\n    const baseName = params.key + \".data\";\n    const fileName = filePath + '/' + baseName;\n    try {\n        fse.readFile(fileName, function(err, data) {\n            res.setHeader('Content-Type', 'text/plain')\n            if (err) {console.log(err);} // Fail if the file can't be read.\n            res.end(data); // Send the file data to the browser.\n        });\n    }\n    catch (error) {\n        res.setHeader('Content-Type', 'text/plain');\n        res.write(\"Error Error getting data file :\" + baseName);\n        res.end();\n    }\n}\n\n//private middleware for getting metviewer points1 file\nconst _mvGetPoints1 = function(params, req, res, next) {\n    const fse = require(\"fs-extra\");\n    const filePath = MV_DIRS.DATADIR;\n    const baseName = params.key + \".points1\";\n    const fileName = filePath + '/' + baseName;\n    try {\n        fse.readFile(fileName, function(err, data) {\n            res.setHeader('Content-Type', 'text/plain')\n            if (err) {console.log(err);} // Fail if the file can't be read.\n            res.end(data); // Send the file data to the browser.\n        });\n    }\n    catch (error) {\n        res.setHeader('Content-Type', 'text/plain');\n        res.write(\"Error Error getting data file :\" + baseName);\n        res.end();\n    }\n}\n\n\n//private middleware for getting metviewer points1 file\nconst _mvGetPoints2 = function(params, req, res, next) {\n    const fse = require(\"fs-extra\");\n    const filePath = MV_DIRS.DATADIR;\n    const baseName = params.key + \".points2\";\n    const fileName = filePath + '/' + baseName;\n    try {\n        fse.readFile(fileName, function(err, data) {\n            res.setHeader('Content-Type', 'text/plain')\n            if (err) {console.log(err);} // Fail if the file can't be read.\n            res.end(data); // Send the file data to the browser.\n        });\n    }\n    catch (error) {\n        res.setHeader('Content-Type', 'text/plain');\n        res.write(\"Error Error getting data file :\" + baseName);\n        res.end();\n    }\n}\n\n//private middleware for getting metviewer xml file\nconst _mvGetXml = function(params, req, res, next) {\n    const fse = require(\"fs-extra\");\n    const filePath = MV_DIRS.XMLDIR;\n    const baseName = params.key + \".xml\";\n    const fileName = filePath + '/' + baseName;\n    try {\n        fse.readFile(fileName, function(err, data) {\n            res.setHeader('Content-Type', 'text/plain');\n            if (err) {console.log(err);} // Fail if the file can't be read.\n            res.end(data); // Send the file data to the browser.\n        });\n    }\n    catch (error) {\n        res.setHeader('Content-Type', 'text/plain');\n        res.write(\"Error Error getting xml file :\" + baseName);\n        res.end();\n    }\n}\n//private middleware for getting metviewer plot file\nconst _mvGetPlot = function(params, req, res, next) {\n    const fse = require(\"fs-extra\");\n    const filePath = MV_DIRS.PLOTSDIR;\n    const baseName = params.key + \".png\";\n    const fileName = filePath + '/' + baseName;\n    try {\n        fse.readFile(fileName, function(err, data) {\n            res.setHeader('Content-Type', 'image/png');\n            if (err) {console.log(err);} // Fail if the file can't be read.\n            res.end(data); // Send the file data to the browser.\n        });\n    }\n    catch (error) {\n        res.setHeader('Content-Type', 'application/txt');\n        res.write(\"Error Error getting plot file :\" + baseName);\n        res.end();\n    }\n}\n//private middleware for getting metviewer script file\nconst _mvGetScript = function(params, req, res, next) {\n    const fse = require(\"fs-extra\");\n    const filePath = MV_DIRS.SCRIPTSDIR;\n    const baseName = params.key + \".R\";\n    const fileName = filePath + '/' + baseName;\n    try {\n        fse.readFile(fileName, function(err, data) {\n            res.setHeader('Content-Type', 'text/plain');\n            if (err) {console.log(err);} // Fail if the file can't be read.\n            res.end(data); // Send the file data to the browser.\n        });\n    }\n    catch (error) {\n        res.setHeader('Content-Type', 'text/plain');\n        res.write(\"Error Error getting script file :\" + baseName);\n        res.end();\n    }}\n//private middleware for getting metviewer sql file\nconst _mvGetSql = function(params, req, res, next) {\n    const fse = require(\"fs-extra\");\n    const filePath = MV_DIRS.SQLDIR;\n    const baseName = params.key + \".sql\";\n    const fileName = filePath + '/' + baseName;\n    try {\n        fse.readFile(fileName, function(err, data) {\n            res.setHeader('Content-Type', 'text/sql');\n            if (err) {console.log(err);} // Fail if the file can't be read.\n            res.end(data); // Send the file data to the browser.\n        });\n    }\n    catch (error) {\n        res.setHeader('Content-Type', 'text/plain');\n        res.write(\"Error Error getting sql file :\" + baseName);\n        res.end();\n    }\n}\n//private middleware for getting metviewer log file\nconst _mvGetLog = function(params, req, res, next) {\n    const fse = require(\"fs-extra\");\n    const filePath = MV_DIRS.LOGDIR;\n    const baseName = params.key + \".log\";\n    const fileName = filePath + '/' + baseName;\n    try {\n        fse.readFile(fileName, function(err, data) {\n            res.setHeader('Content-Type', 'text/plain');\n            if (err) {console.log(err);} // Fail if the file can't be read.\n            res.end(data); // Send the file data to the browser.\n        });\n    }\n    catch (error) {\n        res.setHeader('Content-Type', 'text/plain');\n        res.write(\"Error Error getting log file :\" + baseName);\n        res.end();\n    }\n}\n//private middleware for getting metviewer err file\nconst _mvGetErr = function(params, req, res, next) {\n    const fse = require(\"fs-extra\");\n    const filePath = MV_DIRS.ERRDIR;\n    const baseName = params.key + \".err\";\n    const fileName = filePath + '/' + baseName;\n    try {\n        fse.readFile(fileName, function(err, data) {\n            res.setHeader('Content-Type', 'text/plain');\n            if (err) {\n                res.setHeader('Content-Type', 'text/plain');\n                res.write(\"Error Error getting err file :\" + baseName);\n                res.end();\n            } else {\n                res.end(data); // Send the file data to the browser.\n            }\n        });\n    }\n    catch (error) {\n        res.setHeader('Content-Type', 'text/plain');\n        res.write(\"Error Error getting plot file :\" + baseName);\n        res.end();\n    }\n}\n\n\n// private define a middleware for refreshing the metadata\nconst _refreshMetadataMWltData = function (params, req, res, next) {\n    if (Meteor.isServer) {\n        _checkMetaDataRefresh();\n        res.end(\"<body><h1>refreshMetadata Done!</h1></body>\");\n    }\n};\n\n// private save the result from the query into mongo and downsample if that result's size is greater than 1Mb\nconst _saveResultData = function (result) {\n    if (Meteor.isServer) {\n        var sizeof = require('object-sizeof');\n        var hash = require('object-hash');\n        var key = hash(result.basis.plotParams);\n        var threshold = 1000000;\n        var ret = {};\n        try {\n            var dSize = sizeof(result.data);\n            //console.log(\"result.basis.data size is \", dSize);\n            // TimeSeries and DailyModelCycle are the only plot types that require downSampling\n            if (dSize > threshold && (result.basis.plotParams.plotTypes.TimeSeries || result.basis.plotParams.plotTypes.DailyModelCycle)) {\n                // greater than threshold need to downsample\n                // downsample and save it in DownSampleResult\n                console.log(\"DownSampling\");\n                var downsampler = require(\"downsample-lttb\");\n                var totalPoints = 0;\n                for (var di = 0; di < result.data.length; di++) {\n                    totalPoints += result.data[di].x_epoch.length;\n                }\n                var allowedNumberOfPoints = (threshold / dSize) * totalPoints;\n                var downSampleResult = result === undefined ? undefined : JSON.parse(JSON.stringify(result));\n                for (var ci = 0; ci < result.data.length; ci++) {\n                    var dsData = {};\n                    var xyDataset = result.data[ci].x_epoch.map(function (d, index) {\n                        return [result.data[ci].x_epoch[index], result.data[ci].y[index]];\n                    });\n                    var ratioTotalPoints = xyDataset.length / totalPoints;\n                    var myAllowedPoints = Math.round(ratioTotalPoints * allowedNumberOfPoints);\n                    // downsample the array\n                    var downsampledSeries;\n                    if (myAllowedPoints < xyDataset.length && xyDataset.length > 2) {\n                        downsampledSeries = downsampler.processData(xyDataset, myAllowedPoints);\n                        // replace the y attributes (tooltips etc.) with the y attributes from the nearest x\n                        var originalIndex = 0;\n                        // skip through the original dataset capturing each downSampled data point\n                        var arrayKeys = [];\n                        var nonArrayKeys = [];\n                        var keys = Object.keys(result.data[ci]);\n                        for (var ki = 0; ki < keys.length; ki++) {\n                            if (keys[ki] !== 'x_epoch') {\n                                if (Array.isArray(result.data[ci][keys[ki]])) {\n                                    arrayKeys.push(keys[ki]);\n                                    dsData[keys[ki]] = [];\n                                } else {\n                                    nonArrayKeys.push(keys[ki]);\n                                }\n                            }\n                        }\n                        // We only ever downsample series plots - never profiles and series plots only ever have error_y arrays.\n                        // This is a little hacky but what is happening is we putting error_y.array on the arrayKeys list so that it gets its\n                        // downsampled equivalent values.\n                        for (ki = 0; ki < nonArrayKeys.length; ki++) {\n                            dsData[nonArrayKeys[ki]] = result.data[ci][nonArrayKeys[ki]];\n                        }\n                        // remove the original error_y array data.\n                        dsData['error_y'].array = [];\n                        for (var dsi = 0; dsi < downsampledSeries.length; dsi++) {\n                            while (originalIndex < result.data[ci].x_epoch.length && (result.data[ci].x_epoch[originalIndex] < downsampledSeries[dsi][0])) {\n                                originalIndex++;\n                            }\n                            // capture the stuff related to this downSampled data point (downSampled data points are always a subset of original data points)\n                            for (ki = 0; ki < arrayKeys.length; ki++) {\n                                dsData[arrayKeys[ki]][dsi] = result.data[ci][arrayKeys[ki]][originalIndex];\n                            }\n                            dsData['error_y']['array'][dsi] = result.data[ci]['error_y']['array'][originalIndex];\n                        }\n                        // add downsampled annotation to curve options\n                        downSampleResult[ci] = dsData;\n                        downSampleResult[ci].annotation += \"   **DOWNSAMPLED**\";\n                    } else {\n                        downSampleResult[ci] = result.data[ci];\n                    }\n                    downSampleResult.data[ci] = downSampleResult[ci];\n                }\n                DownSampleResults.rawCollection().insert({\"createdAt\": new Date(), key: key, result: downSampleResult});// createdAt ensures expiration set in mats-collections\n                ret = {key: key, result: downSampleResult};\n            } else {\n                ret = {key: key, result: result};\n            }\n            // save original dataset in the matsCache\n            if (result.basis.plotParams.plotTypes.TimeSeries || result.basis.plotParams.plotTypes.DailyModelCycle) {\n                for (var ci = 0; ci < result.data.length; ci++) {\n                    delete (result.data[ci]['x_epoch']);     // we only needed this as an index for downsampling\n                }\n            }\n            matsCache.storeResult(key, {key: key, result: result}); // lifespan is handled by lowDb (internally) in matscache\n        } catch (error) {\n            if (error.toLocaleString().indexOf(\"larger than the maximum size\") != -1) {\n                throw new Meteor.Error(+\": Requesting too much data... try averaging\");\n            }\n        }\n        return ret;\n    }\n};\n\n// PUBLIC METHODS\n//administration tools\nconst addSentAddress = new ValidatedMethod({\n    name: 'matsMethods.addSentAddress',\n    validate: new SimpleSchema({\n        toAddress: {type: String}\n    }).validator(),\n    run(toAddress) {\n        if (!Meteor.userId()) {\n            throw new Meteor.Error(401, \"not-logged-in\");\n        }\n        matsCollections.SentAddresses.upsert({address: toAddress}, {address: toAddress, userId: Meteor.userId()});\n        return false;\n    }\n});\n\n\n//  administation tool\nconst applyAuthorization = new ValidatedMethod({\n    name: 'matsMethods.applyAuthorization',\n    validate: new SimpleSchema({\n        settings: {type: Object, blackbox: true}\n    }).validator(),\n    run(settings) {\n        if (Meteor.isServer) {\n            var roles;\n            var roleName;\n            var authorization;\n\n            var userRoleName = settings.userRoleName;\n            var userRoleDescription = settings.userRoleDescription;\n            var authorizationRole = settings.authorizationRole;\n            var newUserEmail = settings.newUserEmail;\n            var existingUserEmail = settings.existingUserEmail;\n\n            if (authorizationRole) {\n                // existing role - the role roleName - no need to verify as the selection list came from the database\n                roleName = authorizationRole;\n            } else if (userRoleName && userRoleDescription) {\n                // possible new role - see if it happens to already exist\n                var role = matsCollections.Roles.findOne({name: userRoleName});\n                if (role === undefined) {\n                    // need to add new role using description\n                    matsCollections.Roles.upsert({name: userRoleName}, {$set: {description: userRoleDescription}});\n                    roleName = userRoleName;\n                } else {\n                    // see if the description matches...\n                    roleName = role.name;\n                    var description = role.description;\n                    if (description != userRoleDescription) {\n                        // have to update the description\n                        matsCollections.Roles.upsert({name: userRoleName}, {$set: {description: userRoleDescription}});\n                    }\n                }\n            }\n            // now we have a role roleName - now we need an email\n            if (existingUserEmail) {\n                // existing user -  no need to verify as the selection list came from the database\n                // see if it already has the role\n                authorization = matsCollections.Authorization.findOne({email: existingUserEmail});\n                roles = authorization.roles;\n                if (roles.indexOf(roleName) == -1) {\n                    // have to add the role\n                    if (roleName) {\n                        roles.push(roleName);\n                    }\n                    matsCollections.Authorization.upsert({email: existingUserEmail}, {$set: {roles: roles}});\n                }\n            } else if (newUserEmail) {\n                // possible new authorization - see if it happens to exist\n                authorization = matsCollections.Authorization.findOne({email: newUserEmail});\n                if (authorization !== undefined) {\n                    // authorization exists - add role to roles if necessary\n                    roles = authorization.roles;\n                    if (roles.indexOf(roleName) == -1) {\n                        // have to add the role\n                        if (roleName) {\n                            roles.push(roleName);\n                        }\n                        matsCollections.Authorization.upsert({email: existingUserEmail}, {$set: {roles: roles}});\n                    }\n                } else {\n                    // need a new authorization\n                    roles = [];\n                    if (roleName) {\n                        roles.push(roleName);\n                    }\n                    if (newUserEmail) {\n                        matsCollections.Authorization.upsert({email: newUserEmail}, {$set: {roles: roles}});\n                    }\n                }\n            }\n            return false;\n        }\n    }\n});\n\n// database controls\nconst applyDatabaseSettings = new ValidatedMethod({\n    name: 'matsMethods.applyDatabaseSettings',\n    validate: new SimpleSchema({\n        settings: {type: Object, blackbox: true}\n    }).validator(),\n\n    run(settings) {\n        if (Meteor.isServer) {\n            if (settings.name) {\n                matsCollections.Databases.upsert({name: settings.name}, {\n                    $set: {\n                        name: settings.name,\n                        role: settings.role,\n                        status: settings.status,\n                        host: settings.host,\n                        database: settings.database,\n                        user: settings.user,\n                        password: settings.password\n                    }\n                });\n            }\n            return false;\n        }\n    }\n});\n\n\n//administration tools\nconst deleteSettings = new ValidatedMethod({\n    name: 'matsMethods.deleteSettings',\n    validate: new SimpleSchema({\n        name: {\n            type: String\n        }\n    }).validator(),\n    run(params) {\n        if (!Meteor.userId()) {\n            throw new Meteor.Error(\"not-logged-in\");\n        }\n        if (Meteor.isServer) {\n            matsCollections.CurveSettings.remove({name: params.name});\n        }\n    }\n});\n\n//administration tools\nconst emailImage = new ValidatedMethod({\n    name: 'matsMethods.emailImage',\n    validate: new SimpleSchema({\n        imageStr: {type: String},\n        toAddress: {type: String},\n        subject: {type: String}\n    }).validator(),\n    run(params) {\n        var imageStr = params.imageStr;\n        var toAddress = params.toAddress;\n        var subject = params.subject;\n        if (!Meteor.userId()) {\n            throw new Meteor.Error(401, \"not-logged-in\");\n        }\n        var fromAddress = Meteor.user().services.google.email;\n        // these come from google - see\n        // http://masashi-k.blogspot.fr/2013/06/sending-mail-with-gmail-using-xoauth2.html\n        //http://stackoverflow.com/questions/24098461/nodemailer-gmail-what-exactly-is-a-refresh-token-and-how-do-i-get-one/24123550\n\n        // the gmail account for the credentials is mats.mail.daemon@gmail.com - pwd mats2015!\n        //var clientId = \"339389735380-382sf11aicmgdgn7e72p4end5gnm9sad.apps.googleusercontent.com\";\n        //var clientSecret = \"7CfNN-tRl5QAL595JTW2TkRl\";\n        //var refresh_token = \"1/PDql7FR01N2gmq5NiTfnrT-OlCYC3U67KJYYDNPeGnA\";\n        var credentials = matsCollections.Credentials.findOne({name: \"oauth_google\"}, {\n            clientId: 1,\n            clientSecret: 1,\n            refresh_token: 1\n        });\n        var clientId = credentials.clientId;\n        var clientSecret = credentials.clientSecret;\n        var refresh_token = credentials.refresh_token;\n\n        var smtpTransporter;\n        try {\n            smtpTransporter = Nodemailer.createTransport(\"SMTP\", {\n                service: \"Gmail\",\n                auth: {\n                    XOAuth2: {\n                        user: \"mats.gsd@noaa.gov\",\n                        clientId: clientId,\n                        clientSecret: clientSecret,\n                        refreshToken: refresh_token\n                    }\n                }\n            });\n\n        } catch (e) {\n            throw new Meteor.Error(401, \"Transport error \" + e.message());\n        }\n        try {\n            var mailOptions = {\n                sender: fromAddress,\n                replyTo: fromAddress,\n                from: fromAddress,\n                to: toAddress,\n                subject: subject,\n                attachments: [\n                    {\n                        filename: \"graph.png\",\n                        contents: new Buffer(imageStr.split(\"base64,\")[1], \"base64\")\n                    }\n                ]\n            };\n\n            smtpTransporter.sendMail(mailOptions, function (error, response) {\n                if (error) {\n                    console.log(\"smtpTransporter error \" + error + \" from:\" + fromAddress + \" to:\" + toAddress);\n                } else {\n                    console.log(response + \" from:\" + fromAddress + \" to:\" + toAddress);\n                }\n                smtpTransporter.close();\n            });\n        } catch (e) {\n            throw new Meteor.Error(401, \"Send error \" + e.message());\n        }\n        return false;\n    }\n});\n\n// administation tool\nconst getAuthorizations = new ValidatedMethod({\n    name: 'matsMethods.getAuthorizations',\n    validate: new SimpleSchema({}).validator(),\n    run() {\n        var roles = [];\n        if (Meteor.isServer) {\n            var userEmail = Meteor.user().services.google.email.toLowerCase();\n            roles = matsCollections.Authorization.findOne({email: userEmail}).roles;\n        }\n        return roles;\n    }\n});\n\n// administration tool\nconst getDataFunctionFileList = new ValidatedMethod({\n    name: 'matsMethods.getDataFunctionFileList',\n    validate: new SimpleSchema({}).validator(),\n    run() {\n        if (Meteor.isServer) {\n        }\n    }\n});\n\n\n// retrieves the saved query results (or downsampled results)\nconst getGraphData = new ValidatedMethod({\n    name: 'matsMethods.getGraphData',\n    validate: new SimpleSchema({\n        plotParams: {\n            type: Object,\n            blackbox: true\n        },\n        plotType: {\n            type: String\n        },\n        expireKey: {\n            type: Boolean\n        }\n    }).validator(),\n    run(params) {\n        if (Meteor.isServer) {\n            var plotGraphFunction = matsCollections.PlotGraphFunctions.findOne({plotType: params.plotType});\n            var dataFunction = plotGraphFunction.dataFunction;\n            var ret;\n            try {\n                var hash = require('object-hash');\n                var key = hash(params.plotParams);\n                if (process.env.NODE_ENV === \"development\" || params.expireKey) {\n                    matsCache.expireKey(key);\n                }\n                var results = matsCache.getResult(key);\n                if (results === undefined) {\n                    // results aren't in the cache - need to process data routine\n                    const Future = require('fibers/future');\n                    var future = new Future();\n                    global[dataFunction](params.plotParams, function (results) {\n                        ret = _saveResultData(results);\n                        future[\"return\"](ret);\n                    });\n                    return future.wait();\n                } else { // results were already in the matsCache (same params and not yet expired)\n                    // are results in the downsampled collection?\n                    var dsResults = DownSampleResults.findOne({key: key}, {}, {disableOplog: true});\n                    if (dsResults !== undefined) {\n                        // results are in the mongo cache downsampled collection - returned the downsampled graph data\n                        ret = dsResults;\n                        // update the expire time in the downsampled collection - this requires a new Date\n                        DownSampleResults.rawCollection().update({key: key}, {$set: {\"createdAt\": new Date()}});\n                    } else {\n                        ret = results;  // {key:someKey, result:resultObject}\n                        // refresh expire time. The only way to perform a refresh on matsCache is to re-save the result.\n                        matsCache.storeResult(results.key, results);\n                    }\n                    var sizeof = require('object-sizeof');\n                    console.log(\"result.data size is \", sizeof(results));\n                    return ret;\n                }\n            } catch (dataFunctionError) {\n                if (dataFunctionError.toLocaleString().indexOf(\"INFO:\") !== -1) {\n                    throw new Meteor.Error(dataFunctionError.message);\n                } else {\n                    throw new Meteor.Error(\"Error in getGraphData function:\" + dataFunction + \" : \" + dataFunctionError.message);\n                }\n            }\n            return undefined; // probably won't get here\n        }\n    }\n});\n\n// retrieves the saved query results (or downsampled results) for a specific key\nconst getGraphDataByKey = new ValidatedMethod({\n    name: 'matsMethods.getGraphDataByKey',\n    validate: new SimpleSchema({\n        resultKey: {\n            type: String\n        }\n    }).validator(),\n    run(params) {\n        if (Meteor.isServer) {\n            var ret;\n            var key = params.resultKey;\n            try {\n                var dsResults = DownSampleResults.findOne({key: key}, {}, {disableOplog: true});\n                if (dsResults !== undefined) {\n                    ret = dsResults;\n                } else {\n                    ret = matsCache.getResult(key); // {key:someKey, result:resultObject}\n                }\n                var sizeof = require('object-sizeof');\n                console.log(\"getGraphDataByKey results size is \", sizeof(dsResults));\n                return ret;\n            } catch (error) {\n                throw new Meteor.Error(\"Error in getGraphDataByKey function:\" + key + \" : \" + error.message);\n            }\n            return undefined;\n        }\n    }\n});\n\n// administration tool\nconst getGraphFunctionFileList = new ValidatedMethod({\n    name: 'matsMethods.getGraphFunctionFileList',\n    validate: new SimpleSchema({}).validator(),\n    run() {\n        if (Meteor.isServer) {\n        }\n    }\n});\n\nconst getLayout = new ValidatedMethod({\n    name: 'matsMethods.getLayout',\n    validate: new SimpleSchema({\n        resultKey: {\n            type: String\n        }\n    }).validator(),\n    run(params) {\n        if (Meteor.isServer) {\n            var ret;\n            var key = params.resultKey;\n            try {\n                ret = LayoutStoreCollection.rawCollection().findOne({key: key});\n                return ret;\n            } catch (error) {\n                throw new Meteor.Error(\"Error in getLayout function:\" + key + \" : \" + error.message);\n            }\n            return undefined;\n        }\n    }\n});\n\n// retrieves the saved artifacts (file urls) that were generated by nvBatch for a specific key\nconst getMvArtifactsByKey = new ValidatedMethod({\n    name: 'matsMethods.getMvArtifactsByKey',\n    validate: new SimpleSchema({\n        key: {\n            type: String\n        }\n    }).validator(),\n    run(params) {\n        if (Meteor.isServer) {\n            var ret;\n            var key = params.key;\n            try {\n                ret = matsCache.getResult(key); // {key:someKey, result:resultObject}\n                return ret;\n            } catch (error) {\n                throw new Meteor.Error(\"Error in getMvArtifactsByKey function:\" + key + \" : \" + error.message);\n            }\n            return undefined;\n        }\n    }\n});\n\n/*\ngetPlotResult is used by the graph/text_*_output templates which are used to display textual results.\nBecause the data isn't being rendered graphically this data is always full size, i.e. NOT downsampled.\nThat is why it only finds it in the Result file cache, never the DownSampleResult collection.\n\nBecause the dataset can be so large ... e.g. megabytes the data retrieval is pagenated. The index is\napplied to the underlying datasets.The data gets stripped down and flattened to only contain the data neccesary for text presentation.\nA new page index of -1000 means get all the data i.e. no pagenation.\n */\nconst getPlotResult = new ValidatedMethod({\n    name: 'matsMethods.getPlotResult',\n    validate: new SimpleSchema({\n        resultKey: {type: String},\n        pageIndex: {type: Number},\n        newPageIndex: {type: Number}\n    }).validator(),\n    run(params) {\n        if (Meteor.isServer) {\n            var rKey = params.resultKey;\n            var pi = params.pageIndex;\n            var npi = params.newPageIndex;\n            var ret = {};\n            try {\n                ret = _getFlattenedResultData(rKey, pi, npi);\n            } catch (e) {\n                console.log(e);\n            }\n            return ret;\n        }\n    }\n});\n\n\nconst getReleaseNotes = new ValidatedMethod({\n    name: 'matsMethods.getReleaseNotes',\n    validate: new SimpleSchema({}).validator(),\n    run() {\n        //     return Assets.getText('public/MATSReleaseNotes.html');\n        // }\n        if (Meteor.isServer) {\n            var future = require('fibers/future');\n            var fse = require('fs-extra');\n            var dFuture = new future();\n            var fData;\n            console.log(process.env.PWD);\n            var file;\n            if (process.env.NODE_ENV === \"development\") {\n                file = process.env.PWD + \"/../../meteor_packages/mats-common/public/MATSReleaseNotes.html\";\n            } else {\n                file = process.env.PWD + \"/programs/server/assets/packages/randyp_mats-common/public/MATSReleaseNotes.html\";\n            }\n            try {\n                fse.readFile(file, 'utf8', function (err, data) {\n                    if (err) {\n                        fData = err.message;\n                        dFuture[\"return\"]();\n                    } else {\n                        fData = data;\n                        dFuture[\"return\"]();\n                    }\n                });\n            } catch (e) {\n                fData = e.message;\n                dFuture[\"return\"]();\n            }\n            dFuture.wait();\n            return fData;\n        }\n    }\n});\n\n\n// administration tool\nconst getUserAddress = new ValidatedMethod({\n    name: 'matsMethods.getUserAddress',\n    validate: new SimpleSchema({}).validator(),\n    run() {\n        if (Meteor.isServer) {\n            return Meteor.user().services.google.email.toLowerCase();\n        }\n    }\n});\n\n// app utility\nconst insertColor = new ValidatedMethod({\n    name: 'matsMethods.insertColor',\n    validate: new SimpleSchema({\n        newColor: {type: String},\n        insertAfterIndex: {type: Number}\n    }).validator(),\n    run(params) {\n        if (params.newColor == \"rgb(255,255,255)\") {\n            return false;\n        }\n        var colorScheme = matsCollections.ColorScheme.findOne({});\n        colorScheme.colors.splice(params.insertAfterIndex, 0, newColor);\n        matsCollections.update({}, colorScheme);\n        return false;\n    }\n});\n\n\n// checks to see if the mv artifacts are cached (based on plotspec hash) if not execs an mvbatch and caches the results\nconst mvBatch = new ValidatedMethod({\n    name: 'matsMethods.mvBatch',\n    validate: new SimpleSchema({\n        plotParams: {\n            type: Object,\n            blackbox: true\n        },\n        plotType: {\n            type: String\n        }\n    }).validator(),\n    run(params) {\n        if (Meteor.isServer) {\n            var mvbatch = MV_DIRS.HOME + \"/bin/mv_batch.sh\";\n            var plotGraphFunction = matsCollections.PlotGraphFunctions.findOne({plotType: params.plotType});\n            var plotSpecFunction = plotGraphFunction.plotSpecFunction;\n            var ret;\n            const appName = matsCollections.appName.findOne({}).app;\n            const fse = require('fs-extra');\n            // generate the key from the params\n            const hash = require('object-hash');\n            const key = hash(params.plotParams);\n            // generate the server router (Picker) urls according to the hash key.\n            var artifacts = {};\n            if (process.env.NODE_ENV === \"development\") {\n                artifacts = {\n                    png: appName + \"/mvplot/\" + key,\n                    xml: appName + \"/mvxml/\" + key,\n                    sql: appName + \"/mvsql/\" + key,\n                    log: appName + \"/mvlog/\" + key,\n                    err: appName + \"/mverr/\" + key,\n                    R: appName + \"/mvscript/\" + key,\n                    data: appName + \"/mvdata/\" + key,\n                    points1: appName + \"/mvpoints1/\" + key,\n                    points2: appName + \"/mvpoints2/\" + key,\n                };\n            } else {\n                // in production the appName is already at the end of the location.href\n                // - which is used to form a url for retrieving the artifact\n                artifacts = {\n                    png: \"/mvplot/\" + key,\n                    xml: \"/mvxml/\" + key,\n                    sql: \"/mvsql/\" + key,\n                    log: \"/mvlog/\" + key,\n                    err: \"/mverr/\" + key,\n                    R: \"/mvscript/\" + key,\n                    data: \"/mvdata/\" + key,\n                    points1: \"/mvpoints1/\" + key,\n                    points2: \"/mvpoints2/\" + key,\n                };\n            }\n            // generate the real file paths (these are not exposed to clients)\n            const plotSpecFilePath = MV_DIRS.XMLDIR + key + \".xml\";\n            const pngFilePath = MV_DIRS.PLOTSDIR + key + \".png\";\n            const sqlFilePath = MV_DIRS.SQLDIR + key + \".sql\";\n            const logFilePath = MV_DIRS.LOGDIR + key + \".log\";\n            const errFilePath = MV_DIRS.ERRDIR + key + \".err\";\n            const scriptFilePath = MV_DIRS.SCRIPTSDIR + key + \".R\";\n            const dataFilePath = MV_DIRS.DATADIR + key + \".data\";\n            const points1Path = MV_DIRS.DATADIR + key + \".points1\";\n            const points2Path = MV_DIRS.DATADIR + key + \".points2\";\n            // NOTE: the plotParams should include an mvPlot:true parameter.\n            // This should have been set in the caller. This makes the mv plotSpec cache entry unique from a MATS plot\n            if (params.plotParams.mvPlot !== true) {\n                throw new Meteor.Error(\"Error in mvBatch: Not an mv plot request: no plotParams.mvPlot:true\");\n            }\n            if (process.env.NODE_ENV === \"development\" || params.expireKey) {\n                matsCache.expireKey(key);\n                // in development just blow away the files too\n                try {\n                    fse.unlinkSync(plotSpecFilePath);\n                } catch (ignore){}\n                try {\n                    fse.unlinkSync(pngFilePath);\n                } catch (ignore){}\n                try {\n                    fse.unlinkSync(sqlFilePath);\n                } catch (ignore){}\n                try {\n                    fse.unlinkSync(logFilePath);\n                } catch (ignore){}\n                try {\n                    fse.unlinkSync(errFilePath);\n                } catch (ignore){}\n                try {\n                    fse.unlinkSync(scriptFilePath);\n                } catch (ignore){}\n                try {\n                    fse.unlinkSync(dataFilePath);\n                } catch (ignore){}\n                try {\n                    fse.unlinkSync(points1Path);\n                } catch (ignore){}\n                try {\n                    fse.unlinkSync(points2Path);\n                } catch (ignore){}\n            }\n            // try to get the key from the cache\n            var artifactPaths = matsCache.getResult(key);\n            var filesExist = false;\n            if (artifactPaths != null) {\n                // artifact paths were already cached\n                // do the files exist?\n                // check for file existence\n                var xmlSpecExists = fse.existsSync(plotSpecFilePath);\n                var plotExists = fse.existsSync(pngFilePath);\n                var scriptExists = fse.existsSync(scriptFilePath);\n                var dataExists = fse.existsSync(dataFilePath);\n                var sqlExists = fse.existsSync(sqlFilePath);\n                var logExists = fse.existsSync(logFilePath);\n                filesExist = xmlSpecExists && plotExists && scriptExists && dataExists && sqlExists && logExists;\n            }\n            // either the artifacts were cached but the files don't exist or the artifacts were not cached\n            if (artifactPaths == null || filesExist === false) {\n                // artifactPaths are not in the cache - or the files are not there - need to process plotSpecFunction routine\n                // translate the plotparams to a plotSpec and use the key in the plotSpec reference\n                global[plotSpecFunction](params.plotParams, key, function (err, plotSpec) {\n                    // callback\n                    if (err) {\n                        console.log(err, \"plotspecFunction:\", plotSpecFunction);\n                        throw new Meteor.Error(err + \"plotspecFunction: \" + plotSpecFunction);\n                    } else {\n\n                        // no error and we have a plot spec\n                        // see if the artifacts exist as files. They might have been run before and are still hanging around.\n                        // NOTE: the MV_OUTPUT aren't cached at all (i.e. no expiration) -\n                        // therefore the expiration of the MATS cache plotSpec and the actual artifacts is sloppy.\n\n                        // check for file existence\n                        var xmlSpecExists = fse.existsSync(plotSpecFilePath);\n                        var plotExists = fse.existsSync(pngFilePath);\n                        var scriptExists = fse.existsSync(scriptFilePath);\n                        var dataExists = fse.existsSync(dataFilePath);\n                        var sqlExists = fse.existsSync(sqlFilePath);\n                        var logExists = fse.existsSync(logFilePath);\n                        var filesExist = xmlSpecExists && plotExists && scriptExists && dataExists && sqlExists && logExists;\n                        if (!filesExist) {\n                            const mvBatchCmd = MV_DIRS.HOME + \"/bin/mv_batch.sh \" + ' ' + plotSpecFilePath;\n                            const cp = require('child_process');\n                            // save the plotSpec\n                            fse.outputFileSync(plotSpecFilePath, plotSpec);\n                            // exec mv batch with this plotSpec - this should be synchronous\n                            cp.execSync(mvBatchCmd, (error, stdout, stderr) => {\n                                if (stderr) {\n                                    fse.outputFileSync(errFilePath, stderr, function (err) {\n                                        if (err) {\n                                            console.log(\"Error:couldn't write error file\" + err); //null\n                                        }\n                                    });\n                                } else {\n                                    fse.outputFileSync(errFilePath, \"no stderr for key: \" + key, function (err) {\n                                        if (err) {\n                                            console.log(\"Error:couldn't write error file\" + err); //null\n                                        }\n                                    });\n                                }\n                                if (stdout) {\n                                    if (stdout.match(/ERROR/)) {\n                                        fse.outputFileSync(errFilePath, stdout, function (err) {\n                                            if (err) {\n                                                console.log(\"Error:couldn't write log/err file\" + err);\n                                            }\n                                        });\n                                    }\n                                    fse.outputFileSync(logFilePath, stdout, function (err) {\n                                        if (err) {\n                                            console.log(\"Error:couldn't write log file\" + err);\n                                        }\n                                    });\n                                    var sqlout = stdout.match(/[\\s\\S]*#*(SELECT[\\s\\S]*)Database/) == null ? null : stdout.match(/[\\s\\S]*#*(SELECT[\\s\\S]*)Database/)[1];\n                                    if (sqlout == null) {\n                                        fse.outputFileSync(sqlFilePath, \"no sql statement found in output for key: \" + key, function (err) {\n                                            if (err) {\n                                                console.log(\"Error:couldn't write sql file\" + err);\n                                            }\n                                        });\n                                    } else {\n                                        fse.outputFileSync(sqlFilePath, sqlout, function (err) {\n                                            if (err) {\n                                                console.log(\"Error:couldn't write sql file\" + err);\n                                            }\n                                        });\n                                    }\n                                } else {\n                                    fse.outputFileSync(logFilePath, \"No stdout captured for: \" + key, function (err) {\n                                        if (err) {\n                                            console.log(\"Error:couldn't write log file\" + err);\n                                        }\n                                    });\n                                }\n\n                                // no error - check for the files and cache the spec and filePaths\n                                var xmlSpecExists = fse.existsSync(plotSpecFilePath);\n                                var plotExists = fse.existsSync(pngFilePath);\n                                var scriptExists = fse.existsSync(scriptFilePath);\n                                var dataExists = fse.existsSync(dataFilePath);\n                                var sqlExists = fse.existsSync(sqlFilePath);\n                                var logExists = fse.existsSync(logFilePath);\n                                var filesExist = xmlSpecExists && plotExists && scriptExists && dataExists && sqlExists && logExists;\n                                if (!filesExist) {\n                                    console.error('exec error: expected files do not exist');\n                                }\n                                matsCache.storeResult(key, artifacts);\n                                /*\n                                    The mvbatch should have saved the plot artifacts according to the following plotSpec elements\n                                        <data_file>key.data</data_file>\n                                        <plot_file>key.png</plot_file>\n                                        <r_file>key.R</r_file>\n                                    where key is the same as the key for the matsCache\n                                    The stored artifacts shoulkd be like ...\n                                        MV_OUTPUT/plots/key.png\n                                        MV_OUTPUT/xml/key.xml\n                                        MV_OUTPUT/xml/key.sql\n                                        MV_OUTPUT/xml/key.log\n                                        MV_OUTPUT/scripts/key.R\n                                        MV_OUTPUT/data/key.data\n                                        MV_OUTPUT/data/key.sum_stat.info\n                                        MV_OUTPUT/data/key.data.sum_stat\n\n                                        MV_OUTPUT/xml/key.xml is the plotSpec\n                                */\n                                return {'key': key, 'artifacts':artifacts};\n                            }); //ret = {key:key, result:{artifacts:artifacts}}\n                            // return the key and the artifacts\n                        }  // plotspec did not exist\n                        else {\n                            // the files actually already existed but we needed the plotspec\n                            // so just refresh the cache and return the key right away\n                            matsCache.storeResult(key, artifacts);\n                            return {'key': key, 'artifacts':artifacts};\n                        }\n                    }\n                });\n            } // either artifactPaths == null || filesExist === false\n            else {\n                // artifacts existed and plotspec existed - refresh the cache\n                matsCache.storeResult(key, artifacts);\n                return {'key': key, 'artifacts':artifacts};\n            }\n            return {'key': key, 'artifacts':artifacts};\n        } // if Meteor is Server\n    } // run\n});\n\n// administration tool\nconst readFunctionFile = new ValidatedMethod({\n    name: 'matsMethods.readFunctionFile',\n    validate: new SimpleSchema({}).validator(),\n    run() {\n        if (Meteor.isServer) {\n            var future = require('fibers/future');\n            var fse = require('fs-extra');\n            var path = \"\";\n            var fData;\n            if (type == \"data\") {\n                path = \"/web/static/dataFunctions/\" + file;\n                console.log('exporting data file: ' + path);\n            } else if (type == \"graph\") {\n                path = \"/web/static/displayFunctions/\" + file;\n                console.log('exporting graph file: ' + path);\n            } else {\n                return (\"error - wrong type\");\n            }\n            fse.readFile(path, function (err, data) {\n                if (err) throw err;\n                fData = data.toString();\n                future[\"return\"](fData);\n            });\n            return future.wait();\n        }\n    }\n});\n\n// refreshes the metadata for the app that's running\nconst refreshMetaData = new ValidatedMethod({\n    name: 'matsMethods.refreshMetaData',\n    validate: new SimpleSchema({}).validator(),\n    run() {\n        if (Meteor.isServer) {\n            try {\n                //console.log(\"Asked to refresh metadata\");\n                _checkMetaDataRefresh();\n            } catch (e) {\n                console.log(e);\n                throw new Meteor.Error(\"Server error: \", e.message);\n            }\n        }\n        return metaDataTableUpdates.find({}).fetch();\n    }\n});\n\n// administation tool\nconst removeAuthorization = new ValidatedMethod({\n    name: 'matsMethods.removeAuthorization',\n    validate: new SimpleSchema({\n        settings: {type: Object, blackbox: true}\n    }).validator(),\n    run(settings) {\n        if (Meteor.isServer) {\n            var email;\n            var roleName;\n            var userRoleName = settings.userRoleName;\n            var authorizationRole = settings.authorizationRole;\n            var newUserEmail = settings.newUserEmail;\n            var existingUserEmail = settings.existingUserEmail;\n            if (authorizationRole) {\n                // existing role - the role roleName - no need to verify as the selection list came from the database\n                roleName = authorizationRole;\n            } else if (userRoleName) {\n                roleName = userRoleName;\n            }\n            if (existingUserEmail) {\n                email = existingUserEmail;\n            } else {\n                email = newUserEmail;\n            }\n\n            // if user and role remove the role from the user\n            if (email && roleName) {\n                matsCollections.Authorization.update({email: email}, {$pull: {roles: roleName}});\n            }\n            // if user and no role remove the user\n            if (email && !roleName) {\n                matsCollections.Authorization.remove({email: email});\n            }\n            // if role and no user remove role and remove role from all users\n            if (roleName && !email) {\n                // remove the role\n                matsCollections.Roles.remove({name: roleName});\n                // remove the roleName role from all the authorizations\n                matsCollections.Authorization.update({roles: roleName}, {$pull: {roles: roleName}}, {multi: true});\n            }\n            return false;\n        }\n    }\n});\n\n// app utility\nconst removeColor = new ValidatedMethod({\n    name: 'matsMethods.removeColor',\n    validate: new SimpleSchema({\n        removeColor: {type: String}\n    }).validator(),\n    run(removeColor) {\n        var colorScheme = matsCollections.ColorScheme.findOne({});\n        var removeIndex = colorScheme.colors.indexOf(removeColor);\n        colorScheme.colors.splice(removeIndex, 1);\n        matsCollections.ColorScheme.update({}, colorScheme);\n        return false;\n    }\n});\n\n// database controls\nconst removeDatabase = new ValidatedMethod({\n    name: 'matsMethods.removeDatabase',\n    validate: new SimpleSchema({\n        dbName: {type: String}\n    }).validator(),\n    run(dbName) {\n        if (Meteor.isServer) {\n            matsCollections.Databases.remove({name: dbName});\n        }\n    }\n});\n\n// makes sure all of the parameters display appropriate selections in relation to one another\nconst resetApp = function (appRef) {\n    var fse = require('fs-extra');\n    const metaDataTableRecords = appRef.appMdr;\n    const type = appRef.appType;\n    const appName = appRef.app;\n    var dep_env = process.env.NODE_ENV;\n    // set some defaults for python processing - these can be overridden\n    if (Meteor.settings.private != null && Meteor.settings.private.PYTHON_PATH == null) {\n        Meteor.settings.private.PYTHON_PATH = \"/usr/bin/python\";\n    }\n\n    if (Meteor.settings.private != null && Meteor.settings.private.process != null && Meteor.settings.private.process.RUN_ENV != null) {\n        switch (Meteor.settings.private.process.RUN_ENV) {\n            case \"development\":\n            case \"integration\":\n            case \"production\":\n                dep_env = Meteor.settings.private.process.RUN_ENV;\n                break;\n            default:\n                dep_env = process.env.NODE_ENV;\n               break;\n        }\n    }\n    var deployment;\n    var deploymentText = Assets.getText('public/deployment/deployment.json');\n    if (deploymentText == null) {  // equivilent to deploymentText === null || deploymentText === undefined\n    }\n    deployment = JSON.parse(deploymentText);\n    var app = {};\n    for (var ai = 0; ai < deployment.length; ai++) {\n        var dep = deployment[ai];\n        if (dep.deployment_environment == dep_env) {\n            app = dep.apps.filter(function (app) {\n                return app.app === appName;\n            })[0];\n        }\n    }\n    const appVersion = app ? app.version : \"unknown\";\n    const appTitle = app ? app.title : \"unknown\";\n    const buildDate = app ? app.buildDate : \"unknown\";\n    const appType = type ? type : matsTypes.AppTypes.mats;\n    matsCollections.appName.upsert({app:appName},{$set:{app:appName}});\n\n    // remember that we updated the metadata tables just now - create metaDataTableUpdates\n    /*\n        metaDataTableUpdates:\n        {\n            name: dataBaseName,\n            tables: [tableName1, tableName2 ..],\n            lastRefreshed : timestamp\n        }\n     */\n    // only create metadata tables if the resetApp was called with a real metaDataTables object\n    if (metaDataTableRecords instanceof matsTypes.MetaDataDBRecord) {\n        var metaDataTables = metaDataTableRecords.getRecords();\n        for (var mdti = 0; mdti < metaDataTables.length; mdti++) {\n            const metaDataRef = metaDataTables[mdti];\n            metaDataRef.lastRefreshed = moment().format();\n            if (metaDataTableUpdates.find({name: metaDataRef.name}).count() == 0) {\n                metaDataTableUpdates.update({name: metaDataRef.name}, metaDataRef, {upsert: true});\n            }\n        }\n    } else {\n        throw new Meteor.Error(\"Server error: \", \"resetApp: bad pool-database entry\");\n    }\n\n    matsCollections.Roles.remove({});\n    matsDataUtils.doRoles();\n    matsCollections.Authorization.remove({});\n    matsDataUtils.doAuthorization();\n    matsCollections.Credentials.remove({});\n    matsDataUtils.doCredentials();\n    matsCollections.PlotGraphFunctions.remove({});\n    matsCollections.ColorScheme.remove({});\n    matsDataUtils.doColorScheme();\n    matsCollections.Settings.remove({});\n    matsDataUtils.doSettings(appTitle, appVersion, buildDate, appType);\n    matsCollections.CurveParams.remove({});\n    matsCollections.PlotParams.remove({});\n    matsCollections.CurveTextPatterns.remove({});\n// app specific routines\n    //const asrKeys = Object.keys(appSpecificResetRoutines);\n    const asrKeys = appSpecificResetRoutines;\n    for (var ai = 0; ai < asrKeys.length; ai++) {\n        global.appSpecificResetRoutines[ai]();\n    }\n    matsCache.clear();\n};\n\n// administration tool\nconst restoreFromFile = new ValidatedMethod({\n    name: 'matsMethods.restoreFromFile',\n    validate: new SimpleSchema({\n        type: {type: String},\n        name: {type: String},\n        data: {type: Object, blackbox: true}\n    }).validator(),\n\n    run(params) {\n        if (Meteor.isServer) {\n            console.log(\"restoring \" + params.type + \" file \" + params.name);\n            var path = \"\";\n            if (params.type == \"data\") {\n                path = \"/web/static/dataFunctions/\" + params.name;\n            } else if (params.ype == \"graph\") {\n                path = \"/web/static/displayFunctions/\" + params.name;\n            } else {\n                return (\"error - wrong tyoe\");\n            }\n            console.log('importing ' + params.type + ' file: ' + path);\n            var fse = require('fs-extra');\n            fse.writeFile(path, params.data.toString(), function (err) {\n                if (err) {\n                    return (err.toLocaleString());\n                }\n                console.log('imported ' + params.type + ' file: ' + path);\n            });\n        }\n    }\n});\n\n// administration tool\nconst restoreFromParameterFile = new ValidatedMethod({\n    name: 'matsMethods.restoreFromParameterFile',\n    validate: new SimpleSchema({\n        name: {type: String},\n        data: {type: Object, blackbox: true}\n    }).validator(),\n    run(params) {\n        var data = params.data;\n        if (Meteor.isServer) {\n            var d = [];\n            if (data.CurveParams) {\n                matsCollections.CurveParams.remove({});\n                d = _.map(data.CurveParams, function (o) {\n                    return _.omit(o, '_id');\n                });\n                d.forEach(function (o) {\n                    matsCollections.CurveParams.insert(o);\n                });\n            }\n            if (data.PlotParams) {\n                matsCollections.PlotParams.remove({});\n                d = _.map(data.PlotParams, function (o) {\n                    return _.omit(o, '_id');\n                });\n                d.forEach(function (o) {\n                    matsCollections.PlotParams.insert(o);\n                });\n            }\n            if (data.PlotGraphFunctions) {\n                matsCollections.PlotGraphFunctions.remove({});\n                d = _.map(data.PlotGraphFunctions, function (o) {\n                    return _.omit(o, '_id');\n                });\n                d.forEach(function (o) {\n                    matsCollections.PlotGraphFunctions.insert(o);\n                });\n            }\n            if (data.Settings) {\n                matsCollections.Settings.remove({});\n                d = _.map(data.Settings, function (o) {\n                    return _.omit(o, '_id');\n                });\n                d.forEach(function (o) {\n                    matsCollections.Settings.insert(o);\n                });\n            }\n            if (data.ColorScheme) {\n                matsCollections.ColorScheme.remove({});\n                d = _.map(data.ColorScheme, function (o) {\n                    return _.omit(o, '_id');\n                });\n                d.forEach(function (o) {\n                    matsCollections.ColorScheme.insert(o);\n                });\n            }\n            if (data.Authorization) {\n                matsCollections.Authorization.remove({});\n                d = _.map(data.Authorization, function (o) {\n                    return _.omit(o, '_id');\n                });\n                d.forEach(function (o) {\n                    matsCollections.Authorization.insert(o);\n                });\n            }\n            if (data.Roles) {\n                matsCollections.Roles.remove({});\n                d = _.map(data.Roles, function (o) {\n                    return _.omit(o, '_id');\n                });\n                d.forEach(function (o) {\n                    matsCollections.Roles.insert(o);\n                });\n            }\n            if (data.Databases) {\n                matsCollections.Databases.remove({});\n                d = _.map(data.Databases, function (o) {\n                    return _.omit(o, '_id');\n                });\n                d.forEach(function (o) {\n                    matsCollections.Databases.insert(o);\n                });\n            }\n            if (data.Credentials) {\n                matsCollections.Credentials.remove({});\n                d = _.map(data.Credentials, function (o) {\n                    return _.omit(o, '_id');\n                });\n                d.forEach(function (o) {\n                    matsCollections.Credentials.insert(o);\n                });\n            }\n        }\n    }\n});\n\nconst saveLayout = new ValidatedMethod({\n    name: 'matsMethods.saveLayout',\n    validate: new SimpleSchema({\n        resultKey: {\n            type: String\n        },\n        layout: {\n            type: Object, blackbox: true\n        },\n        curveOpsUpdate: {\n            type: Object, blackbox: true\n        }\n    }).validator(),\n    run(params) {\n        if (Meteor.isServer) {\n            var key = params.resultKey;\n            var layout = params.layout;\n            var curveOpsUpdate = params.curveOpsUpdate;\n            try {\n                LayoutStoreCollection.upsert({key: key}, {$set: {\"createdAt\": new Date(), layout: layout, curveOpsUpdate: curveOpsUpdate}});\n            } catch (error) {\n                throw new Meteor.Error(\"Error in saveLayout function:\" + key + \" : \" + error.message);\n            }\n        }\n    }\n});\n\n//administration tools\nconst saveSettings = new ValidatedMethod({\n    name: 'matsMethods.saveSettings',\n    validate: new SimpleSchema({\n        saveAs: {\n            type: String\n        },\n        p: {\n            type: Object,\n            blackbox: true\n        },\n        permission: {\n            type: String\n        }\n    }).validator(),\n    run(params) {\n        var user = \"anonymous\";\n        matsCollections.CurveSettings.upsert({name: params.saveAs}, {\n            created: moment().format(\"MM/DD/YYYY HH:mm:ss\"),\n            name: params.saveAs,\n            data: params.p,\n            owner: Meteor.userId() == null ? \"anonymous\" : Meteor.userId(),\n            permission: params.permission,\n            savedAt: new Date(),\n            savedBy: Meteor.user() == null ? \"anonymous\" : user\n        });\n    }\n});\n\n// administation tool\nconst setCredentials = new ValidatedMethod({\n    name: 'matsMethods.setCredentials',\n    validate: new SimpleSchema({\n        settings: {type: Object, blackbox: true}\n    }).validator(),\n    run(settings) {\n        if (Meteor.isServer) {\n            var name = settings.name;\n            var clientId = settings.clientId;\n            var clientSecret = settings.clientSecret;\n            var clientRefreshToken = settings.clientRefreshToken;\n            matsCollections.Credentials.update({}, {\n                $set: {\n                    name: name,\n                    clientId: clientId,\n                    clientSecret: clientSecret,\n                    refresh_token: clientRefreshToken\n                }\n            });\n            return false;\n        }\n    }\n});\n\nconst setSettings = new ValidatedMethod({\n    name: 'matsMethods.setSettings',\n    validate: new SimpleSchema({\n        settings: {type: Object, blackbox: true}\n    }).validator(),\n    run(params) {\n        if (Meteor.isServer) {\n            var settings = params.settings;\n            var labelPrefix = settings.labelPrefix;\n            var title = settings.title;\n            var lineWidth = settings.lineWidth;\n            var nullFillString = settings.nullFillString;\n            var resetFromCode = settings.resetFromCode;\n            matsCollections.Settings.update({}, {\n                $set: {\n                    LabelPrefix: labelPrefix,\n                    Title: title,\n                    LineWidth: lineWidth,\n                    NullFillString: nullFillString,\n                    resetFromCode: resetFromCode\n                }\n            });\n        }\n        return false;\n    }\n});\n\n\n/* test methods */\n\nconst testGetMetaDataTableUpdates = new ValidatedMethod({\n    name: 'matsMethods.testGetMetaDataTableUpdates',\n    validate: new SimpleSchema({}).validator(),\n    run() {\n        return metaDataTableUpdates.find({}).fetch();\n    }\n});\n\nconst testGetTables = new ValidatedMethod({\n    name: 'matsMethods.testGetTables',\n    validate: new SimpleSchema(\n        {\n            host: {type: String},\n            user: {type: String},\n            password: {type: String},\n            database: {type: String}\n        }).validator(),\n    run(params) {\n        if (Meteor.isServer) {\n            const Future = require('fibers/future');\n            const queryWrap = Future.wrap(function (callback) {\n                const connection = mysql.createConnection({\n                    host: params.host,\n                    user: params.user,\n                    password: params.password,\n                    database: params.database\n                });\n                connection.query(\"show tables;\", function (err, result) {\n                    const tables = result.map(function (a) {\n                        return a.Tables_in_ruc_ua_sums2;\n                    });\n                    return callback(err, tables);\n                });\n                connection.end(function (err) {\n                    if (err) {\n                        console.log(\"testGetTables cannot end connection\");\n                    }\n                });\n            });\n            return queryWrap().wait();\n        }\n    }\n});\n\nconst testSetMetaDataTableUpdatesLastRefreshedBack = new ValidatedMethod({\n    name: 'matsMethods.testSetMetaDataTableUpdatesLastRefreshedBack',\n    validate: new SimpleSchema({}).validator(),\n    run() {\n        var mtu = metaDataTableUpdates.find({}).fetch();\n        var id = mtu[0]._id;\n        metaDataTableUpdates.update({_id: id}, {$set: {lastRefreshed: 0}});\n        return metaDataTableUpdates.find({}).fetch();\n    }\n});\n\nexport default matsMethods = {\n    addSentAddress: addSentAddress,\n    applyAuthorization: applyAuthorization,\n    applyDatabaseSettings: applyDatabaseSettings,\n    deleteSettings: deleteSettings,\n    emailImage: emailImage,\n    getAuthorizations: getAuthorizations,\n    getDataFunctionFileList: getDataFunctionFileList,\n    getGraphData: getGraphData,\n    getGraphDataByKey: getGraphDataByKey,\n    getGraphFunctionFileList: getGraphFunctionFileList,\n    getLayout: getLayout,\n    getMvArtifactsByKey:getMvArtifactsByKey,\n    getPlotResult: getPlotResult,\n    getReleaseNotes: getReleaseNotes,\n    getUserAddress: getUserAddress,\n    insertColor: insertColor,\n    mvBatch: mvBatch,\n    readFunctionFile: readFunctionFile,\n    refreshMetaData: refreshMetaData,\n    removeAuthorization: removeAuthorization,\n    removeColor: removeColor,\n    removeDatabase: removeDatabase,\n    resetApp: resetApp,\n    restoreFromFile: restoreFromFile,\n    restoreFromParameterFile: restoreFromParameterFile,\n    saveLayout: saveLayout,\n    saveSettings: saveSettings,\n    setCredentials: setCredentials,\n    setSettings: setSettings,\n    testGetMetaDataTableUpdates: testGetMetaDataTableUpdates,\n    testGetTables: testGetTables,\n    testSetMetaDataTableUpdatesLastRefreshedBack: testSetMetaDataTableUpdatesLastRefreshedBack,\n    MV_DIRS: MV_DIRS\n};\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { Template } from \"meteor/templating\";\nimport { FlowRouter } from 'meteor/ostrio:flow-router-extra';\nimport \"./appBody.html\";\n\nTemplate.AppBody.onCreated(function () {\n    console.log(\"in AppBody onCreated\");\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsTypes} from 'meteor/randyp:mats-common';\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport {matsPlotUtils} from 'meteor/randyp:mats-common';\nimport {matsParamUtils} from 'meteor/randyp:mats-common';\nimport {Info} from 'meteor/randyp:mats-common';\nimport {matsMethods} from 'meteor/randyp:mats-common';\n\n\n/*\n global dataset variable - container for graph dataset.\n This (plotResult) is very important. It isn't \"var\" because it needs to be a meteor global scope.\n The page is rendered whe the graph page comes up, but the data from the data processing callback\n in plotList.js or curveList.js may not have set the global variable\n PlotResult.\n */\n\n//var plotResultData = null; -- this was the global variable for the text output data, but now it is set elsewhere\nvar graphResult = null;     // this is the global variable for the data on the graph\nvar plot;\n\nconst sizeof = function (_1) {\n    var _2 = [_1];\n    var _3 = 0;\n    for (var _4 = 0; _4 < _2.length; _4++) {\n        switch (typeof _2[_4]) {\n            case \"boolean\":\n                _3 += 4;\n                break;\n            case \"number\":\n                _3 += 8;\n                break;\n            case \"string\":\n                _3 += 2 * _2[_4].length;\n                break;\n            case \"object\":\n                if (Object.prototype.toString.call(_2[_4]) != \"[object Array]\") {\n                    for (var _5 in _2[_4]) {\n                        _3 += 2 * _5.length;\n                    }\n                }\n                for (var _5 in _2[_4]) {\n                    var _6 = false;\n                    for (var _7 = 0; _7 < _2.length; _7++) {\n                        if (_2[_7] === _2[_4][_5]) {\n                            _6 = true;\n                            break;\n                        }\n                    }\n                    if (!_6) {\n                        _2.push(_2[_4][_5]);\n                    }\n                }\n        }\n    }\n    return _3;\n};\n\n// Retrieves the globally stored plotResultData for the text output and other things.\n// Re-sets the plotResultData if the requested page range has changed, or if it has not been previously set.\nconst getPlotResultData = function () {\n    var pageIndex = Session.get(\"pageIndex\");\n    var newPageIndex = Session.get(\"newPageIndex\");\n    if (plotResultData === undefined || plotResultData === null || Session.get('textRefreshNeeded') === true) {\n        setPlotResultData();\n    }\n    return plotResultData;\n};\n\n// Sets the global plotResultData variable for the text output to the requested range from the Results data stored in mongo, via a MatsMethod.\nconst setPlotResultData = function () {\n    var pageIndex = Session.get(\"pageIndex\");\n    var newPageIndex = Session.get(\"newPageIndex\");\n\n    if (Session.get('textRefreshNeeded') === true) {\n        showSpinner();\n        matsMethods.getPlotResult.call({\n            resultKey: Session.get(\"plotResultKey\"),\n            pageIndex: pageIndex,\n            newPageIndex: newPageIndex\n        }, function (error, result) {\n            if (error !== undefined) {\n                setError(new Error(\"matsMethods.getPlotResult failed : error: \" + error));\n                Session.set('textRefreshNeeded', false);\n            }\n            if (result == undefined) {\n                plotResultData = undefined;\n                Session.set('textRefreshNeeded', false);\n                hideSpinner();\n                return;\n            }\n            plotResultData = result;\n            Session.set(\"pageIndex\", result.dsiRealPageIndex);\n            Session.set(\"pageTextDirection\", result.dsiTextDirection);\n            Session.set('textLoaded', new Date());\n            console.log(\"size of plotResultData is \", sizeof(plotResultData));\n            Session.set('textRefreshNeeded', false);\n            hideSpinner();\n        });\n    }\n};\n\n// resets the global plotResultData variable for the text output to null\nconst resetPlotResultData = function () {\n    plotResultData = null;\n    Session.set('textLoaded', new Date());\n};\n\n// gets the global graphResult variable, which is the data object for the (possibly downsampled) data on the graph\nconst getGraphResult = function () {\n    if (graphResult === undefined || graphResult === null) {\n        return [];\n    }\n    return graphResult;\n};\n\n// sets the global graphResult variable to the (possibly downsampled) data object returned from MatsMethods, in order to make the graph\nconst setGraphResult = function (result) {\n    graphResult = result;\n    Session.set('graphDataLoaded', new Date());\n    console.log(\"size of graphResultData is\", sizeof(graphResult));\n};\n\n// resets the global graphResult variable to null\nconst resetGraphResult = function () {\n    graphResult = null;\n    Session.set('graphDataLoaded', new Date());\n};\n\n/*\n Curve utilities - used to determine curve labels and colors etc.\n */\nconst getUsedLabels = function () {\n    if (Session.get('UsedLabels') === undefined) {\n        return [];\n    }\n    return Session.get('UsedLabels');\n};\n\nconst getNextCurveLabel = function () {\n    if (Session.get('NextCurveLabel') === undefined) {\n        setNextCurveLabel();\n    }\n    return Session.get('NextCurveLabel');\n};\n\n// determine the next curve Label and set it in the session\n// private, not exported\nconst setNextCurveLabel = function () {\n    const usedLabels = Session.get('UsedLabels');\n    const settings = matsCollections.Settings.findOne({}, {fields: {LabelPrefix: 1}});\n    if (settings === undefined) {\n        return false;\n    }\n    const labelPrefix = settings.LabelPrefix;\n    // find all the labels that start with our prefix (some could be custom)\n    const prefixLabels = _.filter(usedLabels, function (l) {\n        return (l && (l.lastIndexOf(labelPrefix, 0) === 0) && (l.match(new RegExp(labelPrefix, 'g')).length) == 1);\n    });\n    const lastUsedLabel = _.last(prefixLabels);\n    var lastLabelNumber = -1;\n\n    if (lastUsedLabel !== undefined) {\n        const minusPrefix = lastUsedLabel.replace(labelPrefix, '');\n        const tryNum = parseInt(minusPrefix, 10);\n        if (!isNaN(tryNum)) {\n            lastLabelNumber = tryNum;\n        }\n    }\n    var newLabelNumber = lastLabelNumber + 1;\n    var nextCurveLabel = labelPrefix + newLabelNumber;\n    // the label might be one from a removed curve so the next ones might be used\n    while (_.indexOf(usedLabels, nextCurveLabel) != -1) {\n        newLabelNumber++;\n        nextCurveLabel = labelPrefix + newLabelNumber;\n    }\n    Session.set('NextCurveLabel', nextCurveLabel);\n};\n\n// determine the next curve color and set it in the session\n// private - not exported\nconst setNextCurveColor = function () {\n    var usedColors = Session.get('UsedColors');\n    var colors = matsCollections.ColorScheme.findOne({}, {fields: {colors: 1}}).colors;\n    var lastUsedIndex = -1;\n    if (usedColors !== undefined) {\n        lastUsedIndex = _.indexOf(colors, _.last(usedColors));\n    }\n    var nextCurveColor;\n    if (lastUsedIndex !== undefined && lastUsedIndex != -1) {\n        if (lastUsedIndex < colors.length - 1) {\n            var newIndex = lastUsedIndex + 1;\n            nextCurveColor = colors[newIndex];\n            // the color might be one from a removed curve so the next ones might be used\n            while (_.indexOf(usedColors, nextCurveColor) != -1) {\n                newIndex++;\n                nextCurveColor = colors[newIndex];\n            }\n        } else {\n            // out of defaults\n            var rint = Math.round(0xffffff * Math.random());\n            nextCurveColor = 'rgb(' + (rint >> 16) + ',' + (rint >> 8 & 255) + ',' + (rint & 255) + ')';\n        }\n    } else {\n        nextCurveColor = colors[0];\n    }\n    Session.set('NextCurveColor', nextCurveColor);\n};\n\n// get the next curve color from the session\n// private - not exported\nconst getNextCurveColor = function () {\n    if (Session.get('NextCurveColor') === undefined) {\n        setNextCurveColor();\n    }\n    return Session.get('NextCurveColor');\n};\n\n// clear a used label and set the nextCurveLabel to the one just cleared\nconst clearUsedLabel = function (label) {\n    var usedLabels = Session.get('UsedLabels');\n    var newUsedLabels = _.reject(usedLabels, function (l) {\n        return l == label;\n    });\n    Session.set('UsedLabels', newUsedLabels);\n    Session.set('NextCurveLabel', label);\n};\n\n// clear a used color and set the nextCurveColor to the one just cleared\nconst clearUsedColor = function (color) {\n    var usedColors = Session.get('UsedColors');\n    var newUsedColors = _.reject(usedColors, function (c) {\n        return c == color;\n    });\n    Session.set('UsedColors', newUsedColors);\n    Session.set('NextCurveColor', color);\n};\n\n// clear all the used colors and labels and set the nextCurve values\n// to the first in the scheme and the first of the labelPrefix.\n// This is used by the removeAll\nconst clearAllUsed = function () {\n    Session.set('UsedColors', undefined);\n    var colors = matsCollections.ColorScheme.findOne({}, {fields: {colors: 1}}).colors;\n    Session.set('NextCurveColor', colors[0]);\n    Session.set('UsedLabels', undefined);\n    var labelPrefix = matsCollections.Settings.findOne({}, {fields: {LabelPrefix: 1}}).LabelPrefix;\n    Session.set('NextCurveLabel', labelPrefix + 0);\n    Session.set('Curves', []);\n};\n\n// use curves in session to determine which defaults are already used\n// and to set the usedColors in the session\n// this is used on restore settings to set up the usedColors\n// private - not exported\n//setUsedDefaults = function() {\nconst setUsedColors = function () {\n    var curves = Session.get('Curves');\n    var usedColors = [];\n    for (var i = 0; i < curves.length; i++) {\n        var color = curves[i].color;\n        usedColors.push(color);\n    }\n    Session.set('UsedColors', usedColors);\n    setNextCurveColor();\n};\n\n// private - not exported\nconst setUsedLabels = function () {\n    var curves = Session.get('Curves');\n    var usedLabels = [];\n    for (var i = 0; i < curves.length; i++) {\n        var label = curves[i].label;\n        usedLabels.push(label);\n    }\n    Session.set('UsedLabels', usedLabels);\n    setNextCurveLabel();\n};\n\nconst setUsedColorsAndLabels = function () {\n    setUsedColors();\n    setUsedLabels();\n};\n\nconst resetScatterApply = function () {\n    if (matsPlotUtils.getPlotType() == matsTypes.PlotTypes.scatter2d) {\n        Session.set('axisCurveIcon', 'fa-asterisk');\n        Session.set('xaxisCurveText', 'XAXIS NOT YET APPLIED');\n        Session.set('yaxisCurveText', 'YAXIS NOT YET APPLIED');\n        Session.set('xaxisCurveColor', 'red');\n        Session.set('yaxisCurveColor', 'red');\n        if (document.getElementById('Fit-Type-radioGroup-none') !== null) {\n            document.getElementById('Fit-Type-radioGroup-none').checked = true;\n        }\n    }\n};\n\n// add the difference curves\n// private - not exported\nconst addDiffs = function () {\n    var curves = Session.get('Curves');\n    var newCurves = Session.get('Curves');\n    // diffs is checked -- have to add diff curves\n    var curvesLength = curves.length;\n    if (curvesLength <= 1) {\n        setInfo(\"You cannot difference less than two curves!\");\n        return false;\n    }\n\n    switch (matsPlotUtils.getPlotFormat()) {\n        case matsTypes.PlotFormats.matching:\n            var baseIndex = 0; // This will probably not default to curve 0 in the future\n            for (var ci = 1; ci < curves.length; ci++) {\n                var newCurve = $.extend(true, {}, curves[ci]);\n                newCurve.label = curves[ci].label + \"-\" + curves[0].label;\n                newCurve.color = getNextCurveColor();\n                newCurve.diffFrom = [ci, baseIndex];\n                // do not create extra diff if it already exists\n                if (_.findWhere(curves, {label: newCurve.label}) === undefined) {\n                    newCurves.push(newCurve);\n                    Session.set('Curves', newCurves);\n                    setUsedColorsAndLabels();\n                }\n            }\n            break;\n        case matsTypes.PlotFormats.pairwise:\n            var baseIndex = 0; // This will probably not default to curve 0 in the future\n            for (var ci = 1; ci < curves.length; ci++) {\n                if (ci % 2 != 0) {  // only diff on odd curves against previous curve\n                    var base_index = ci - 1;\n\n                    var newCurve = $.extend(true, {}, curves[ci]);\n                    newCurve.label = curves[ci].label + \"-\" + curves[base_index].label;\n                    newCurve.color = getNextCurveColor();\n                    newCurve.diffFrom = [ci, baseIndex];\n                    // do not create extra diff if it already exists\n                    if (_.findWhere(curves, {label: newCurve.label}) === undefined) {\n                        newCurves.push(newCurve);\n                        Session.set('Curves', newCurves);\n                        setUsedColorsAndLabels();\n                    }\n                }\n            }\n            break;\n        case matsTypes.PlotFormats.absolute:\n            var baseIndex = 0; // This will probably not default to curve 0 in the future\n            for (var ci = 1; ci < curves.length; ci++) {\n                var newCurve = $.extend(true, {}, curves[ci]);\n                newCurve.label = curves[ci].label + \"-\" + curves[0].label;\n                newCurve.color = getNextCurveColor();\n                newCurve.diffFrom = [ci, baseIndex];\n                // do not create extra diff if it already exists\n                if (_.findWhere(curves, {label: newCurve.label}) === undefined) {\n                    newCurves.push(newCurve);\n                    Session.set('Curves', newCurves);\n                    setUsedColorsAndLabels();\n                }\n            }\n            break;\n    }\n};\n\n\n// remove difference curves\n// private - not exported\nconst removeDiffs = function () {\n    var curves = Session.get('Curves');\n    var newCurves = _.reject(curves, function (curve) {\n        return curve.diffFrom != null\n    });\n    Session.set('Curves', newCurves);\n    setUsedColorsAndLabels();\n};\n\n// resolve the difference curves\n// (used after adding or removing a curve while the show diffs box is checked)\nconst checkDiffs = function () {\n    var curves = Session.get('Curves');\n    if (matsPlotUtils.getPlotType() == matsTypes.PlotTypes.scatter2d) {\n        // scatter plots have no concept of difference curves.\n        return;\n    }\n    var plotFormat = matsPlotUtils.getPlotFormat();\n    if (curves.length > 1) {\n        if (plotFormat !== matsTypes.PlotFormats.none) {\n            removeDiffs();\n            addDiffs();\n        } else {\n            removeDiffs();\n        }\n    }\n};\n\n// method to display the appropriate selectors for a timeseries curve\nconst showTimeseriesFace = function () {\n    // move dates selector to plot parameters - one date range for all curves\n    if (document.getElementById('plot-type-' + matsTypes.PlotTypes.timeSeries).checked === true) {\n        var faceOptions = {\n            'curve-dates': 'none',\n            'dates': 'block',\n            'region': 'block',\n            'statistic': 'block',\n            'threshold': 'block',\n            'pres-level': 'block',\n            'forecast-length': 'block',\n            'dieoff-type': 'none',\n            'average': 'block',\n            'valid-time': 'block',\n            'utc-cycle-start': 'none',\n            'histogram-bin-controls': 'none',\n            'histogram-yaxis-controls': 'none',\n            'bin-number': 'none',\n            'bin-bounds': 'none',\n            'truth': 'block',\n            'sites' : 'none',\n            'sitesMap' : 'none',\n            'x-axis-parameter': 'none',\n            'y-axis-parameter': 'none'\n        };\n        const faceSelectors = Object.keys(faceOptions);\n        var elem;\n        for (var fidx = 0; fidx < faceSelectors.length; fidx++) {\n            elem = document.getElementById(faceSelectors[fidx] + '-item');\n            if (elem && elem.style) {\n                elem.style.display = faceOptions[faceSelectors[fidx]];\n            }\n        }\n        elem = document.getElementById(matsTypes.PlotTypes.scatter2d);\n        if (elem && elem.style) {\n            elem.style.display = \"none\";\n        }\n        Session.set('plotType', matsTypes.PlotTypes.timeSeries);\n        // matsParamUtils.setAllParamsToDefault();\n        Session.set('lastUpdate', Date.now());\n    }\n};\n\n// method to display the appropriate selectors for a profile curve\nconst showProfileFace = function () {\n    // move dates selector to curve parameters - one date range for each curve\n    if (document.getElementById('plot-type-' + matsTypes.PlotTypes.profile).checked === true) {\n        var faceOptions = {\n            'curve-dates': 'block',\n            'dates': 'none',\n            'region': 'block',\n            'statistic': 'block',\n            'threshold': 'block',\n            'pres-level': 'none',\n            'forecast-length': 'block',\n            'dieoff-type': 'none',\n            'average': 'none',\n            'valid-time': 'block',\n            'utc-cycle-start': 'none',\n            'histogram-bin-controls': 'none',\n            'histogram-yaxis-controls': 'none',\n            'bin-number': 'none',\n            'bin-bounds': 'none',\n            'truth': 'block',\n            'sites' : 'none',\n            'sitesMap' : 'none',\n            'x-axis-parameter': 'none',\n            'y-axis-parameter': 'none'\n        };\n        const faceSelectors = Object.keys(faceOptions);\n        var elem;\n        for (var fidx = 0; fidx < faceSelectors.length; fidx++) {\n            elem = document.getElementById(faceSelectors[fidx] + '-item');\n            if (elem && elem.style) {\n                elem.style.display = faceOptions[faceSelectors[fidx]];\n            }\n        }\n        elem = document.getElementById(matsTypes.PlotTypes.scatter2d);\n        if (elem && elem.style) {\n            elem.style.display = \"none\";\n        }\n        Session.set('plotType', matsTypes.PlotTypes.profile);\n        // matsParamUtils.setAllParamsToDefault();\n        Session.set('lastUpdate', Date.now());\n    }\n};\n\n// method to display the appropriate selectors for a dieoff curve\nconst showDieOffFace = function () {\n    // move dates selector to curve parameters - one date range for each curve\n    if (document.getElementById('plot-type-' + matsTypes.PlotTypes.dieoff).checked === true) {\n        var faceOptions = {\n            'curve-dates': 'block',\n            'dates': 'none',\n            'region': 'block',\n            'statistic': 'block',\n            'threshold': 'block',\n            'pres-level': 'block',\n            'forecast-length': 'none',\n            'dieoff-type': 'block',\n            'average': 'none',\n            'valid-time': 'block',\n            'utc-cycle-start': 'none',\n            'histogram-bin-controls': 'none',\n            'histogram-yaxis-controls': 'none',\n            'bin-number': 'none',\n            'bin-bounds': 'none',\n            'truth': 'block',\n            'sites' : 'none',\n            'sitesMap' : 'none',\n            'x-axis-parameter': 'none',\n            'y-axis-parameter': 'none'\n        };\n        const faceSelectors = Object.keys(faceOptions);\n        var elem;\n        for (var fidx = 0; fidx < faceSelectors.length; fidx++) {\n            elem = document.getElementById(faceSelectors[fidx] + '-item');\n            if (elem && elem.style) {\n                elem.style.display = faceOptions[faceSelectors[fidx]];\n            }\n        }\n        // reset the value for dieoff-type, so that the checkHideOther routine will work\n        const param = matsParamUtils.getParameterForName('dieoff-type');\n        matsParamUtils.setValueTextForParamName(param.name, param.default);\n\n        elem = document.getElementById(matsTypes.PlotTypes.scatter2d);\n        if (elem && elem.style) {\n            elem.style.display = \"none\";\n        }\n        Session.set('plotType', matsTypes.PlotTypes.dieoff);\n        // matsParamUtils.setAllParamsToDefault();\n        Session.set('lastUpdate', Date.now());\n    }\n};\n\n// method to display the appropriate selectors for a threshold curve\nconst showThresholdFace = function () {\n    // move dates selector to curve parameters - one date range for each curve\n    if (document.getElementById('plot-type-' + matsTypes.PlotTypes.threshold).checked === true) {\n        var faceOptions = {\n            'curve-dates': 'block',\n            'dates': 'none',\n            'region': 'block',\n            'statistic': 'block',\n            'threshold': 'none',\n            'pres-level': 'block',\n            'forecast-length': 'block',\n            'dieoff-type': 'none',\n            'average': 'none',\n            'valid-time': 'block',\n            'utc-cycle-start': 'none',\n            'histogram-bin-controls': 'none',\n            'histogram-yaxis-controls': 'none',\n            'bin-number': 'none',\n            'bin-bounds': 'none',\n            'truth': 'block',\n            'sites' : 'none',\n            'sitesMap' : 'none',\n            'x-axis-parameter': 'none',\n            'y-axis-parameter': 'none'\n        };\n        const faceSelectors = Object.keys(faceOptions);\n        var elem;\n        for (var fidx = 0; fidx < faceSelectors.length; fidx++) {\n            elem = document.getElementById(faceSelectors[fidx] + '-item');\n            if (elem && elem.style) {\n                elem.style.display = faceOptions[faceSelectors[fidx]];\n            }\n        }\n        elem = document.getElementById(matsTypes.PlotTypes.scatter2d);\n        if (elem && elem.style) {\n            elem.style.display = \"none\";\n        }\n        Session.set('plotType', matsTypes.PlotTypes.threshold);\n        // matsParamUtils.setAllParamsToDefault();\n        Session.set('lastUpdate', Date.now());\n    }\n};\n\n// method to display the appropriate selectors for a valid time curve\nconst showValidTimeFace = function () {\n    // move dates selector to curve parameters - one date range for each curve\n    if (document.getElementById('plot-type-' + matsTypes.PlotTypes.validtime).checked === true) {\n        var faceOptions = {\n            'curve-dates': 'block',\n            'dates': 'none',\n            'region': 'block',\n            'statistic': 'block',\n            'threshold': 'block',\n            'pres-level': 'block',\n            'forecast-length': 'block',\n            'dieoff-type': 'none',\n            'average': 'none',\n            'valid-time': 'none',\n            'utc-cycle-start': 'none',\n            'histogram-bin-controls': 'none',\n            'histogram-yaxis-controls': 'none',\n            'bin-number': 'none',\n            'bin-bounds': 'none',\n            'truth': 'block',\n            'sites' : 'none',\n            'sitesMap' : 'none',\n            'x-axis-parameter': 'none',\n            'y-axis-parameter': 'none'\n        };\n        const faceSelectors = Object.keys(faceOptions);\n        var elem;\n        for (var fidx = 0; fidx < faceSelectors.length; fidx++) {\n            elem = document.getElementById(faceSelectors[fidx] + '-item');\n            if (elem && elem.style) {\n                elem.style.display = faceOptions[faceSelectors[fidx]];\n            }\n        }\n        elem = document.getElementById(matsTypes.PlotTypes.scatter2d);\n        if (elem && elem.style) {\n            elem.style.display = \"none\";\n        }\n        Session.set('plotType', matsTypes.PlotTypes.validtime);\n        // matsParamUtils.setAllParamsToDefault();\n        Session.set('lastUpdate', Date.now());\n    }\n};\n\n// method to display the appropriate selectors for a daily model cycle curve\nconst showDailyModelCycleFace = function () {\n    // move dates selector to plot parameters - one date range for all curves\n    if (document.getElementById('plot-type-' + matsTypes.PlotTypes.dailyModelCycle).checked === true) {\n        var faceOptions = {\n            'curve-dates': 'none',\n            'dates': 'block',\n            'region': 'block',\n            'statistic': 'block',\n            'threshold': 'block',\n            'pres-level': 'block',\n            'forecast-length': 'none',\n            'dieoff-type': 'none',\n            'average': 'none',\n            'valid-time': 'none',\n            'utc-cycle-start': 'block',\n            'histogram-bin-controls': 'none',\n            'histogram-yaxis-controls': 'none',\n            'bin-number': 'none',\n            'bin-bounds': 'none',\n            'truth': 'block',\n            'sites' : 'none',\n            'sitesMap' : 'none',\n            'x-axis-parameter': 'none',\n            'y-axis-parameter': 'none'\n        };\n        const faceSelectors = Object.keys(faceOptions);\n        var elem;\n        for (var fidx = 0; fidx < faceSelectors.length; fidx++) {\n            elem = document.getElementById(faceSelectors[fidx] + '-item');\n            if (elem && elem.style) {\n                elem.style.display = faceOptions[faceSelectors[fidx]];\n            }\n        }\n        elem = document.getElementById(matsTypes.PlotTypes.scatter2d);\n        if (elem && elem.style) {\n            elem.style.display = \"none\";\n        }\n        Session.set('plotType', matsTypes.PlotTypes.dailyModelCycle);\n        // matsParamUtils.setAllParamsToDefault();\n        Session.set('lastUpdate', Date.now());\n    }\n};\n\n// method to display the appropriate selectors for a reliability curve\nconst showReliabilityFace = function () {\n    // move dates selector to curve parameters - one date range for each curve\n    if (document.getElementById('plot-type-' + matsTypes.PlotTypes.reliability).checked === true) {\n        var faceOptions = {\n            'curve-dates': 'none',\n            'dates': 'block',\n            'region': 'block',\n            'statistic': 'block',\n            'threshold': 'block',\n            'pres-level': 'block',\n            'forecast-length': 'block',\n            'dieoff-type': 'none',\n            'average': 'block',\n            'valid-time': 'block',\n            'utc-cycle-start': 'none',\n            'histogram-bin-controls': 'none',\n            'histogram-yaxis-controls': 'none',\n            'bin-number': 'none',\n            'bin-bounds': 'none',\n            'truth': 'none',\n            'sites' : 'none',\n            'sitesMap' : 'none',\n            'x-axis-parameter': 'none',\n            'y-axis-parameter': 'none'\n        };\n        const faceSelectors = Object.keys(faceOptions);\n        var elem;\n        for (var fidx = 0; fidx < faceSelectors.length; fidx++) {\n            elem = document.getElementById(faceSelectors[fidx] + '-item');\n            if (elem && elem.style) {\n                elem.style.display = faceOptions[faceSelectors[fidx]];\n            }\n        }\n        elem = document.getElementById(matsTypes.PlotTypes.scatter2d);\n        if (elem && elem.style) {\n            elem.style.display = \"none\";\n        }\n        Session.set('plotType', matsTypes.PlotTypes.reliability);\n        // matsParamUtils.setAllParamsToDefault();\n        Session.set('lastUpdate', Date.now());\n    }\n};\n\n// method to display the appropriate selectors for a map\nconst showMapFace = function () {\n    // move dates selector to plot parameters - one date range for all curves\n    if (document.getElementById('plot-type-' + matsTypes.PlotTypes.map).checked === true) {\n        var faceOptions;\n        faceOptions = {\n            'curve-dates': 'none',\n            'dates': 'block',\n            'region': 'none',\n            'statistic': 'none',\n            'threshold': 'none',\n            'pres-level': 'block',\n            'forecast-length': 'block',\n            'dieoff-type': 'none',\n            'average': 'none',\n            'valid-time': 'block',\n            'utc-cycle-start': 'none',\n            'histogram-bin-controls': 'none',\n            'histogram-yaxis-controls': 'none',\n            'bin-number': 'none',\n            'bin-bounds': 'none',\n            'truth': 'none',\n            'sites': 'block',\n            'sitesMap': 'block',\n            'x-axis-parameter': 'none',\n            'y-axis-parameter': 'none'\n        };\n        const faceSelectors = Object.keys(faceOptions);\n        var elem;\n        for (var fidx = 0; fidx < faceSelectors.length; fidx++) {\n            elem = document.getElementById(faceSelectors[fidx] + '-item');\n            if (elem && elem.style) {\n                elem.style.display = faceOptions[faceSelectors[fidx]];\n            }\n        }\n        elem = document.getElementById(matsTypes.PlotTypes.scatter2d);\n        if (elem && elem.style) {\n            elem.style.display = \"none\";\n        }\n        Session.set('plotType', matsTypes.PlotTypes.map);\n        // matsParamUtils.setAllParamsToDefault();\n        Session.set('lastUpdate', Date.now());\n    }\n};\n\n// method to display the appropriate selectors for a histogram\nconst showHistogramFace = function () {\n    // move dates selector to curve parameters - one date range for each curve\n    if (document.getElementById('plot-type-' + matsTypes.PlotTypes.histogram).checked === true) {\n        var faceOptions = {\n            'curve-dates': 'block',\n            'dates': 'none',\n            'region': 'block',\n            'statistic': 'block',\n            'threshold': 'block',\n            'pres-level': 'block',\n            'forecast-length': 'block',\n            'dieoff-type': 'none',\n            'average': 'none',\n            'valid-time': 'block',\n            'utc-cycle-start': 'none',\n            'histogram-bin-controls': 'block',\n            'histogram-yaxis-controls': 'block',\n            'bin-number': 'none',\n            'bin-bounds': 'none',\n            'truth': 'block',\n            'sites' : 'none',\n            'sitesMap' : 'none',\n            'x-axis-parameter': 'none',\n            'y-axis-parameter': 'none'\n        };\n        const faceSelectors = Object.keys(faceOptions);\n        var elem;\n        for (var fidx = 0; fidx < faceSelectors.length; fidx++) {\n            elem = document.getElementById(faceSelectors[fidx] + '-item');\n            if (elem && elem.style) {\n                elem.style.display = faceOptions[faceSelectors[fidx]];\n            }\n        }\n        elem = document.getElementById(matsTypes.PlotTypes.scatter2d);\n        if (elem && elem.style) {\n            elem.style.display = \"none\";\n        }\n        Session.set('plotType', matsTypes.PlotTypes.histogram);\n        // matsParamUtils.setAllParamsToDefault();\n        Session.set('lastUpdate', Date.now());\n    }\n};\n\n// method to display the appropriate selectors for a contour plot\nconst showContourFace = function () {\n    // move dates selector to plot parameters - one date range for all curves\n    const isContour = document.getElementById('plot-type-' + matsTypes.PlotTypes.contour) !== null && document.getElementById('plot-type-' + matsTypes.PlotTypes.contour).checked === true;\n    const isContourDiff = document.getElementById('plot-type-' + matsTypes.PlotTypes.contourDiff) !== null && document.getElementById('plot-type-' + matsTypes.PlotTypes.contourDiff).checked === true;\n    if (isContour || isContourDiff) {\n        var faceOptions = {\n            'curve-dates': 'none',\n            'dates': 'block',\n            'region': 'block',\n            'statistic': 'block',\n            'threshold': 'block',\n            'pres-level': 'block',\n            'forecast-length': 'block',\n            'dieoff-type': 'none',\n            'average': 'none',\n            'valid-time': 'block',\n            'utc-cycle-start': 'none',\n            'histogram-bin-controls': 'none',\n            'histogram-yaxis-controls': 'none',\n            'bin-number': 'none',\n            'bin-bounds': 'none',\n            'truth': 'block',\n            'sites' : 'none',\n            'sitesMap' : 'none',\n            'x-axis-parameter': 'block',\n            'y-axis-parameter': 'block'\n        };\n        const faceSelectors = Object.keys(faceOptions);\n        var elem;\n        for (var fidx = 0; fidx < faceSelectors.length; fidx++) {\n            elem = document.getElementById(faceSelectors[fidx] + '-item');\n            if (elem && elem.style) {\n                elem.style.display = faceOptions[faceSelectors[fidx]];\n            }\n        }\n        // //need to be consistent with the x and y axis 'hideOtherFor' settings\n        // const xAxisVal = matsParamUtils.getValueForParamName('x-axis-parameter');\n        // const yAxisVal = matsParamUtils.getValueForParamName('y-axis-parameter');\n        // if (xAxisVal === 'Fcst lead time' || yAxisVal === 'Fcst lead time') {\n        //     elem = document.getElementById('forecast-length-item');\n        //     if (elem && elem.style) {\n        //         elem.style.display = 'none';\n        //     }\n        // }\n        // if (xAxisVal === 'Valid UTC hour' || yAxisVal === 'Valid UTC hour') {\n        //     elem = document.getElementById('valid-time-item');\n        //     if (elem && elem.style) {\n        //         elem.style.display = 'none';\n        //     }\n        // }\n        // if (xAxisVal === 'Pressure level' || yAxisVal === 'Pressure level') {\n        //     elem = document.getElementById('pres-level-item');\n        //     if (elem && elem.style) {\n        //         elem.style.display = 'none';\n        //     }\n        // }\n        elem = document.getElementById(matsTypes.PlotTypes.scatter2d);\n        if (elem && elem.style) {\n            elem.style.display = \"none\";\n        }\n        if (isContour) {\n            Session.set('plotType', matsTypes.PlotTypes.contour);\n        } else {\n            Session.set('plotType', matsTypes.PlotTypes.contourDiff);\n        }\n        // matsParamUtils.setAllParamsToDefault();\n        Session.set('lastUpdate', Date.now());\n    }\n};\n\n// method to display the appropriate selectors for a scatter plot\nconst showScatterFace = function () {\n    if (document.getElementById('plot-type-' + matsTypes.PlotTypes.scatter2d).checked === true) {\n        var faceOptions = {\n            'curve-dates': 'none',\n            'dates': 'block',\n            'region': 'block',\n            'statistic': 'block',\n            'threshold': 'block',\n            'pres-level': 'block',\n            'forecast-length': 'block',\n            'dieoff-type': 'none',\n            'average': 'none',\n            'valid-time': 'block',\n            'utc-cycle-start': 'none',\n            'histogram-bin-controls': 'none',\n            'histogram-yaxis-controls': 'none',\n            'bin-number': 'none',\n            'bin-bounds': 'none',\n            'truth': 'block',\n            'sites' : 'none',\n            'sitesMap' : 'none',\n            'x-axis-parameter': 'none',\n            'y-axis-parameter': 'none'\n        };\n        const faceSelectors = Object.keys(faceOptions);\n        var elem;\n        for (var fidx = 0; fidx < faceSelectors.length; fidx++) {\n            elem = document.getElementById(faceSelectors[fidx] + '-item');\n            if (elem && elem.style) {\n                elem.style.display = faceOptions[faceSelectors[fidx]];\n            }\n        }\n        elem = document.getElementById(matsTypes.PlotTypes.scatter2d);\n        if (elem && elem.style) {\n            elem.style.display = \"block\";\n        }\n        Session.set('plotType', matsTypes.PlotTypes.scatter2d);\n        Session.set('lastUpdate', Date.now());   // force curveParams to re-render\n        // matsParamUtils.setAllParamsToDefault();\n        Session.set('lastUpdate', Date.now());\n    }\n};\n\n// this is no longer used, but it was once employed by the text output routines to calculate the stats for the entire curve\nconst get_err = function (sVals, sSecs) {\n    /* THIS IS DIFFERENT FROM THE ONE IN DATA_UTILS,\n       This one does not throw away outliers and it captures minVal and maxVal\n       refer to perl error_library.pl sub  get_stats\n        to see the perl implementation of these statics calculations.\n        These should match exactly those, except that they are processed in reverse order.\n     */\n    var subVals = [];\n    var subSecs = [];\n    var sVals = sVals;\n    var sSecs = sSecs;\n    var n = sVals.length;\n    var n_good = 0;\n    var sum_d = 0;\n    var sum2_d = 0;\n    var error = \"\";\n    var i;\n    for (i = 0; i < n; i++) {\n        if (sVals[i] !== null) {\n            n_good = n_good + 1;\n            sum_d = sum_d + sVals[i];\n            sum2_d = sum2_d + sVals[i] * sVals[i];\n            subVals.push(sVals[i]);\n            subSecs.push(sSecs[i]);\n        }\n    }\n    var d_mean = sum_d / n_good;\n    var sd2 = sum2_d / n_good - d_mean * d_mean;\n    var sd = sd2 > 0 ? Math.sqrt(sd2) : sd2;\n    var sd_limit = 3 * sd;\n    //console.log(\"see error_library.pl l208 These are processed in reverse order to the perl code -  \\nmean is \" + d_mean + \" sd_limit is +/- \" + sd_limit + \" n_good is \" + n_good + \" sum_d is\" + sum_d + \" sum2_d is \" + sum2_d);\n    // find minimum delta_time, if any value missing, set null\n    var last_secs = Number.MIN_VALUE;\n    var minDelta = Number.MAX_VALUE;\n    var minSecs = Number.MAX_VALUE;\n    var max_secs = Number.MIN_VALUE;\n    var minVal = Number.MAX_VALUE;\n    var maxVal = Number.MIN_VALUE;\n    for (i = 0; i < subSecs.length; i++) {\n        var secs = (subSecs[i]);\n        var delta = Math.abs(secs - last_secs);\n        if (delta < minDelta) {\n            minDelta = delta;\n        }\n        if (secs < minSecs) {\n            minSecs = secs;\n        }\n        if (secs > max_secs) {\n            max_secs = secs;\n        }\n        last_secs = secs;\n    }\n\n    var data_wg = [];\n    var n_gaps = 0;\n    n_good = 0;\n    var sum = 0;\n    var sum2 = 0;\n    var loopTime = minSecs;\n    if (minDelta < 0) {\n        error = (\"Invalid time interval - minDelta: \" + minDelta);\n    }\n    // remove data more than $sd_limit from mean\n    for (i = 0; i < subVals.length; i++) {\n        minVal = minVal < subVals[i] ? minVal : subVals[i];\n        maxVal = maxVal > subVals[i] ? maxVal : subVals[i];\n        n_good++;\n    }\n    //console.log(\"new mean after throwing away outliers is \" + sd + \" n_good is \" + n_good + \" sum is \" + sum  + \" sum2 is \" + sum2 + \" d_mean is \" + d_mean);\n    // look for gaps.... per Bill, we only need one gap per series of gaps...\n    var lastSecond = Number.MIN_VALUE;\n\n    for (i = 0; i < subSecs.length; i++) {\n        var sec = subSecs[i];\n        if (lastSecond >= 0) {\n            if (sec - lastSecond > minDelta) {\n                // insert a gap\n                data_wg.push(null);\n                n_gaps++;\n            }\n        }\n        lastSecond = sec;\n        data_wg.push(subVals[i]);\n    }\n    //console.log (\"n_gaps: \" + n_gaps +  \" time gaps in subseries\");\n\n    //from http://www.itl.nist.gov/div898/handbook/eda/section3/eda35c.htm\n    var r = [];\n    for (var lag = 0; lag <= 1; lag++) {\n        r[lag] = 0;\n        var n_in_lag = 0;\n        for (var t = 0; t < ((n + n_gaps) - lag); t++) {\n            if (data_wg[t] != null && data_wg[t + lag] != null) {\n                r[lag] += +(data_wg[t] - d_mean) * (data_wg[t + lag] - d_mean);\n                n_in_lag++;\n            }\n        }\n        if (n_in_lag > 0 && sd > 0) {\n            r[lag] /= (n_in_lag * sd * sd);\n        } else {\n            r[lag] = null;\n        }\n        //console.log('r for lag ' + lag + \" is \" + r[lag] + \" n_in_lag is \" + n_in_lag + \" n_good is \" + n_good);\n    }\n    // Betsy Weatherhead's correction, based on lag 1\n    if (r[1] >= 1) {\n        r[1] = .99999;\n    }\n    const betsy = Math.sqrt((n_good - 1) * (1 - r[1]));\n    var stde_betsy;\n    if (betsy != 0) {\n        stde_betsy = sd / betsy;\n    } else {\n        stde_betsy = null;\n    }\n    const stats = {\n        d_mean: d_mean,\n        stde_betsy: stde_betsy,\n        sd: sd,\n        n_good: n_good,\n        lag1: r[1],\n        min: minSecs,\n        max: max_secs,\n        minVal: minVal,\n        maxVal: maxVal,\n        sum: sum_d\n    };\n    //console.log(\"stats are \" + JSON.stringify(stats));\n    // stde_betsy is standard error with auto correlation\n    //console.log(\"---------\\n\\n\");\n    return stats;\n};\n\nconst showSpinner = function () {\n    if (document.getElementById(\"spinner\")) {\n        document.getElementById(\"spinner\").style.display = \"block\";\n    }\n};\nconst hideSpinner = function () {\n    if (document.getElementById(\"spinner\")) {\n        document.getElementById(\"spinner\").style.display = \"none\";\n    }\n};\n\nexport default matsCurveUtils = {\n    resetScatterApply: resetScatterApply,\n    getUsedLabels: getUsedLabels,\n    getNextCurveLabel: getNextCurveLabel,\n    getNextCurveColor: getNextCurveColor,\n    clearAllUsed: clearAllUsed,\n    clearUsedLabel: clearUsedLabel,\n    clearUsedColor: clearUsedColor,\n    setUsedLabels: setUsedLabels,\n    setUsedColorsAndLabels: setUsedColorsAndLabels,\n    addDiffs: addDiffs,\n    removeDiffs: removeDiffs,\n    checkDiffs: checkDiffs,\n    showScatterFace: showScatterFace,\n    showTimeseriesFace: showTimeseriesFace,\n    showProfileFace: showProfileFace,\n    showDieOffFace: showDieOffFace,\n    showThresholdFace: showThresholdFace,\n    showValidTimeFace: showValidTimeFace,\n    showDailyModelCycleFace: showDailyModelCycleFace,\n    showReliabilityFace: showReliabilityFace,\n    showMapFace: showMapFace,\n    showHistogramFace: showHistogramFace,\n    showContourFace: showContourFace,\n    get_err: get_err,\n    getPlotResultData: getPlotResultData,\n    //setPlotResultData: setPlotResultData,\n    resetPlotResultData: resetPlotResultData,\n    getGraphResult: getGraphResult,\n    setGraphResult: setGraphResult,\n    resetGraphResult: resetGraphResult,\n    showSpinner: showSpinner,\n    hideSpinner: hideSpinner,\n};\n\n            ","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsTypes} from 'meteor/randyp:mats-common';\n\n// set the label for the hide show buttons (NO DATA) for the initial time here\nconst setNoDataLabels = function (dataset) {\n    for (var c = 0; c < dataset.length; c++) {\n        if (dataset[c].x.length === 0) {\n            Session.set(dataset[c].curveId + \"hideButtonText\", 'NO DATA');\n            if (document.getElementById(dataset[c].curveId + '-curve-show-hide')) {\n                document.getElementById(dataset[c].curveId + '-curve-show-hide').value = 'NO DATA';\n                document.getElementById(dataset[c].curveId + '-curve-show-hide').disabled = true;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide').style[\"background-color\"] = \"red\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide').style[\"border-color\"] = \"black\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide').style[\"color\"] = \"white\";\n            }\n            Session.set(dataset[c].curveId + \"pointsButtonText\", 'NO DATA');\n            if (document.getElementById(dataset[c].curveId + '-curve-show-hide-points')) {\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-points').value = 'NO DATA';\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-points').disabled = true;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-points').style[\"background-color\"] = \"red\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-points').style[\"border-color\"] = \"black\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-points').style[\"color\"] = \"white\";\n            }\n            Session.set(dataset[c].curveId + \"errorBarButtonText\", 'NO DATA');\n            if (document.getElementById(dataset[c].curveId + '-curve-show-hide-errorbars')) {\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-errorbars').value = 'NO DATA';\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-errorbars').disabled = true;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-errorbars').style[\"background-color\"] = \"red\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-errorbars').style[\"border-color\"] = \"black\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-errorbars').style[\"color\"] = \"white\";\n            }\n            Session.set(dataset[c].curveId + \"barChartButtonText\", 'NO DATA');\n            if (document.getElementById(dataset[c].curveId + '-curve-show-hide-bars')) {\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-bars').value = 'NO DATA';\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-bars').disabled = true;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-bars').style[\"background-color\"] = \"red\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-bars').style[\"border-color\"] = \"black\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-bars').style[\"color\"] = \"white\";\n            }\n            Session.set(dataset[c].curveId + \"annotateButtonText\", 'NO DATA');\n            if (document.getElementById(dataset[c].curveId + '-curve-show-hide-annotate')) {\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-annotate').value = 'NO DATA';\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-annotate').disabled = true;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-annotate').style[\"background-color\"] = \"red\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-annotate').style[\"border-color\"] = \"black\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-annotate').style[\"color\"] = \"white\";\n            }\n        } else {\n            Session.set(dataset[c].curveId + \"hideButtonText\", 'hide curve');\n            if (document.getElementById(dataset[c].curveId + '-curve-show-hide')) {\n                document.getElementById(dataset[c].curveId + '-curve-show-hide').value = 'hide curve';\n                document.getElementById(dataset[c].curveId + '-curve-show-hide').disabled = false;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide').style[\"background-color\"] = \"white\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide').style[\"border-color\"] = dataset[c].marker.color;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide').style[\"color\"] = dataset[c].marker.color;\n            }\n            Session.set(dataset[c].curveId + \"pointsButtonText\", 'hide points');\n            if (document.getElementById(dataset[c].curveId + '-curve-show-hide-points')) {\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-points').value = 'hide points';\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-points').disabled = false;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-points').style[\"background-color\"] = \"white\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-points').style[\"border-color\"] = dataset[c].marker.color;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-points').style[\"color\"] = dataset[c].marker.color;\n            }\n            Session.set(dataset[c].curveId + \"errorBarButtonText\", 'hide error bars');\n            if (document.getElementById(dataset[c].curveId + '-curve-show-hide-errorbars')) {\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-errorbars').value = 'hide error bars';\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-errorbars').disabled = false;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-errorbars').style[\"background-color\"] = \"white\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-errorbars').style[\"border-color\"] = dataset[c].marker.color;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-errorbars').style[\"color\"] = dataset[c].marker.color;\n            }\n            Session.set(dataset[c].curveId + \"barChartButtonText\", 'hide bars');\n            if (document.getElementById(dataset[c].curveId + '-curve-show-hide-bars')) {\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-bars').value = 'hide bars';\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-bars').disabled = false;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-bars').style[\"background-color\"] = \"white\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-bars').style[\"border-color\"] = dataset[c].marker.color;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-bars').style[\"color\"] = dataset[c].marker.color;\n            }\n            Session.set(dataset[c].curveId + \"annotateButtonText\", 'hide annotation');\n            if (document.getElementById(dataset[c].curveId + '-curve-show-hide-annotate')) {\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-annotate').value = 'hide annotation';\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-annotate').disabled = false;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-annotate').style[\"background-color\"] = \"white\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-annotate').style[\"border-color\"] = dataset[c].marker.color;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-annotate').style[\"color\"] = dataset[c].marker.color;\n            }\n        }\n    }\n};\n\nconst setNoDataLabelsMap = function (dataset) {\n    for (var c = 0; c < dataset.length; c++) {\n        if (dataset[c].lat.length === 0) {\n            Session.set(dataset[c].curveId + \"heatMapButtonText\", 'NO DATA');\n            if (document.getElementById(dataset[c].curveId + '-curve-show-hide-heatmap')) {\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-heatmap').value = 'NO DATA';\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-heatmap').disabled = true;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-heatmap').style[\"background-color\"] = \"red\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-heatmap').style[\"border-color\"] = \"black\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-heatmap').style[\"color\"] = \"white\";\n            }\n        } else {\n            Session.set(dataset[c].curveId + \"heatMapButtonText\", 'show heat map');\n            if (document.getElementById(dataset[c].curveId + '-curve-show-hide-heatmap')) {\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-heatmap').value = 'show heat map';\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-heatmap').disabled = false;\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-heatmap').style[\"background-color\"] = \"white\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-heatmap').style[\"border-color\"] = \"red\";\n                document.getElementById(dataset[c].curveId + '-curve-show-hide-heatmap').style[\"color\"] = \"red\";\n            }\n        }\n    }\n};\n\n// plot width helper used in multiple places\nconst width = function (plotType) {\n    switch (plotType) {\n        case matsTypes.PlotTypes.profile:\n        case matsTypes.PlotTypes.scatter2d:\n            // set the width square\n            return squareWidthHeight();\n            break;\n        case matsTypes.PlotTypes.timeSeries:\n        case matsTypes.PlotTypes.dailyModelCycle:\n        case matsTypes.PlotTypes.dieoff:\n        case matsTypes.PlotTypes.threshold:\n        case matsTypes.PlotTypes.validtime:\n        case matsTypes.PlotTypes.reliability:\n        case matsTypes.PlotTypes.map:\n        case matsTypes.PlotTypes.histogram:\n        case matsTypes.PlotTypes.contour:\n        case matsTypes.PlotTypes.contourDiff:\n        default:\n            // set the width wide\n            return rectangleWidth();\n            break;\n    }\n};\n\n// plot height helper used in multiple places\nconst height = function (plotType) {\n    switch (plotType) {\n        case matsTypes.PlotTypes.profile:\n        case matsTypes.PlotTypes.scatter2d:\n            // set the height square\n            return squareWidthHeight();\n            break;\n        case matsTypes.PlotTypes.timeSeries:\n        case matsTypes.PlotTypes.dailyModelCycle:\n        case matsTypes.PlotTypes.dieoff:\n        case matsTypes.PlotTypes.threshold:\n        case matsTypes.PlotTypes.validtime:\n        case matsTypes.PlotTypes.reliability:\n        case matsTypes.PlotTypes.map:\n        case matsTypes.PlotTypes.histogram:\n        case matsTypes.PlotTypes.contour:\n        case matsTypes.PlotTypes.contourDiff:\n        default:\n            // set the height wide\n            return rectangleHeight();\n            break;\n    }\n};\n\nconst standAloneWidth = function () {\n    var vpw = Math.min(document.documentElement.clientWidth, window.innerWidth || 0);\n    return (.9 * vpw).toString() + \"px\";\n};\nconst standAloneHeight = function () {\n    var vph = Math.min(document.documentElement.clientHeight, window.innerHeight || 0);\n    return (.825 * vph).toString() + \"px\";\n};\n\nconst squareWidthHeight = function () {\n    var vpw = Math.min(document.documentElement.clientWidth, window.innerWidth || 0);\n    var vph = Math.min(document.documentElement.clientHeight, window.innerHeight || 0);\n    var min = Math.min(vpw, vph);\n    if (min < 400) {\n        return (.9 * min).toString() + \"px\";\n    } else {\n        return (.7 * min).toString() + \"px\";\n    }\n};\nconst rectangleWidth = function () {\n    var vpw = Math.min(document.documentElement.clientWidth, window.innerWidth || 0);\n    if (vpw < 400) {\n        return (.9 * vpw).toString() + \"px\";\n    } else {\n        return (.9 * vpw).toString() + \"px\";\n    }\n};\nconst rectangleHeight = function () {\n    var vph = Math.min(document.documentElement.clientHeight, window.innerHeight || 0);\n    if (vph < 400) {\n        return (.8 * vph).toString() + \"px\";\n    } else {\n        return (.7 * vph).toString() + \"px\";\n    }\n};\n\nconst resizeGraph = function (plotType) {\n    document.getElementById('placeholder').style.width = width(plotType);\n    document.getElementById('placeholder').style.height = height(plotType);\n};\n\n// helper to bring up the text page\nconst setTextView = function (plotType) {\n    //shows text page and proper text output, hides everything else\n    document.getElementById('placeholder').style.width = width(plotType);\n    document.getElementById('placeholder').style.height = height(plotType);\n    document.getElementById(\"text-page-button-group\").style.display = \"block\";\n    document.getElementById(\"plot-page-button-group\").style.display = \"none\";\n    document.getElementById(\"curves\").style.display = \"none\";\n    document.getElementById(\"graphView\").style.display = \"none\";\n    document.getElementById(\"textView\").style.display = \"block\";\n    document.getElementById('plot-control-button-group').style.display = \"none\";\n};\n\n// helper to bring up the graph page\nconst setGraphView = function (plotType) {\n    document.getElementById('placeholder').style.width = width(plotType);\n    document.getElementById('placeholder').style.height = height(plotType);\n    //shows graph page, hides everything else\n    document.getElementById('graph-container').style.display = 'block';\n    document.getElementById('plotType').style.display = 'none';\n    document.getElementById('paramList').style.display = 'none';\n    document.getElementById('plotList').style.display = 'none';\n    document.getElementById('curveList').style.display = 'none';\n    if (document.getElementById(\"plotTypeContainer\")) {\n        document.getElementById(\"plotTypeContainer\").style.display = \"none\";\n    }\n    if (document.getElementById(\"scatter2d\")) {\n        document.getElementById(\"scatter2d\").style.display = \"none\";\n    }\n    if (document.getElementById(\"scatterView\")) {\n        document.getElementById(\"scatterView\").style.display = \"none\";\n    }\n    document.getElementById(\"text-page-button-group\").style.display = \"none\";\n    document.getElementById(\"plot-page-button-group\").style.display = \"block\";\n    document.getElementById(\"curves\").style.display = \"block\";\n    document.getElementById(\"graphView\").style.display = \"block\";\n    document.getElementById(\"textView\").style.display = \"none\";\n    if (Session.get('plotType') !== matsTypes.PlotTypes.map) {\n        document.getElementById('plot-control-button-group').style.display = \"block\";\n    } else {\n        document.getElementById('plot-control-button-group').style.display = \"none\";\n    }\n};\n\n// helper to bring up the graph page in a pop-up window\nconst standAloneSetGraphView = function () {\n    //shows graph page, hides everything else\n    document.getElementById('placeholder').style.width = standAloneWidth();\n    document.getElementById('placeholder').style.height = standAloneHeight();\n    document.getElementById('graph-container').style.display = 'block';\n    document.getElementById(\"curves\").style.display = \"block\";\n    document.getElementById(\"graphView\").style.display = \"block\";\n};\n\n// helper to bring up the main selector page\nconst setDefaultView = function () {\n    // show elements of the main page\n    if (document.getElementById('paramList')) {\n        document.getElementById('paramList').style.display = 'block';\n    }\n    if (document.getElementById('plotList')) {\n        document.getElementById('plotList').style.display = 'block';\n    }\n    if (document.getElementById('curveList')) {\n        document.getElementById('curveList').style.display = 'block';\n    }\n    if (document.getElementById(\"plotTypeContainer\")) {\n        document.getElementById(\"plotTypeContainer\").style.display = \"block\";\n    }\n    if (document.getElementById(\"scatterView\")) {\n        document.getElementById(\"scatterView\").style.display = \"block\";\n    }\n    if (document.getElementById(\"scatter2d\")) {\n        document.getElementById(\"scatter2d\").style.display = \"block\";\n    }\n    // hide graph page\n    if (document.getElementById('graph-container')) {\n        document.getElementById('graph-container').style.display = 'none';\n    }\n    document.getElementById(\"plot-page-button-group\").style.display = \"block\";\n    document.getElementById('plot-control-button-group').style.display = \"block\";\n    // hide text page\n    document.getElementById(\"textView\").style.display = \"none\";\n};\n\n\nconst downloadFile = function (fileURL, fileName) {\n    // for non-IE\n    if (!window.ActiveXObject) {\n        var save = document.createElement('a');\n        save.href = fileURL;\n        save.target = '_blank';\n        var filename = fileURL.substring(fileURL.lastIndexOf('/') + 1);\n        save.download = fileName || filename;\n        if (navigator.userAgent.toLowerCase().match(/(ipad|iphone|safari)/) && navigator.userAgent.search(\"Chrome\") < 0) {\n            document.location = save.href;\n        // window event not working here\n        } else {\n            var evt = new MouseEvent('click', {\n                'view': window,\n                'bubbles': true,\n                'cancelable': false\n            });\n            save.dispatchEvent(evt);\n            (window.URL || window.webkitURL).revokeObjectURL(save.href);\n        }\n    }\n\n    // for IE < 11\n    else if (!!window.ActiveXObject && document.execCommand) {\n        var _window = window.open(fileURL, '_blank');\n        _window.document.close();\n        _window.document.execCommand('SaveAs', true, fileName || fileURL)\n        _window.close();\n    }\n};\n\nexport default matsGraphUtils = {\n    setNoDataLabels: setNoDataLabels,\n    setNoDataLabelsMap: setNoDataLabelsMap,\n    width: width,\n    height: height,\n    standAloneWidth: standAloneWidth,\n    standAloneHeight: standAloneHeight,\n    resizeGraph: resizeGraph,\n    setTextView: setTextView,\n    setGraphView: setGraphView,\n    standAloneSetGraphView: standAloneSetGraphView,\n    setDefaultView: setDefaultView,\n    downloadFile: downloadFile\n};","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsCollections, matsMethods, matsParamUtils, matsPlotUtils, matsTypes} from 'meteor/randyp:mats-common';\n\n// method to refresh the peers of the current selector\nconst refreshPeer = function (event, param) {\n    try {\n        const peerName = param.peerName;\n        if (peerName !== undefined) {\n            // refresh the peer\n            const targetParam = matsParamUtils.getParameterForName(peerName);\n            const targetId = targetParam.name + '-' + targetParam.type;\n            const targetElem = document.getElementById(targetId);\n            const refreshMapEvent = new CustomEvent(\"refresh\", {\n                detail: {\n                    refElement: null\n                }\n            });\n            targetElem.dispatchEvent(refreshMapEvent);\n        }\n        refreshDependents(event, param);\n    } catch (e) {\n        e.message = \"INFO: Error in select.js refreshPeer: \" + e.message;\n        setInfo(e.message);\n    }\n};\n\n// method to refresh the dependents of the current selector\nconst refreshDependents = function (event, param) {\n    try {\n        const dependentNames = param.dependentNames;\n        if (dependentNames && Object.prototype.toString.call(dependentNames) === '[object Array]' && dependentNames.length > 0) {\n            // refresh the dependents\n            var selectAllbool = false;\n            for (var i = 0; i < dependentNames.length; i++) {\n                const name = dependentNames[i];\n                const targetParam = matsParamUtils.getParameterForName(name);\n                var targetId;\n                if (targetParam.type === matsTypes.InputTypes.dateRange) {\n                    targetId = \"element-\" + targetParam.name;\n                } else {\n                    targetId = targetParam.name + '-' + targetParam.type;\n                }\n                const targetElem = document.getElementById(targetId);\n\n                if (document.getElementById('selectAll')) {\n                    selectAllbool = document.getElementById('selectAll').checked;\n                }\n                try {\n                    targetElem.dispatchEvent(new CustomEvent(\"refresh\"))\n                } catch (re) {\n                    re.message = \"INFO: refreshDependents of: \" + param.name + \" dependent: \" + targetParam.name + \" - error: \" + re.message;\n                    setInfo(re.message);\n                }\n                const elements = targetElem.options;\n                const select = true;\n                if (targetElem.multiple && elements !== undefined && elements.length > 0) {\n                    if (selectAllbool) {\n                        for (var i1 = 0; i1 < elements.length; i1++) {\n                            elements[i1].selected = select;\n                        }\n                        matsParamUtils.setValueTextForParamName(name, \"\");\n                    } else {\n                        const previously_selected = Session.get('selected');\n                        for (var i2 = 0; i2 < elements.length; i2++) {\n                            if (_.indexOf(previously_selected, elements[i2].text) != -1) {\n                                elements[i2].selected = select;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    } catch (e) {\n        e.message = \"INFO: Error in select.js refreshDependents: \" + e.message;\n        setInfo(e.message);\n    }\n};\n\n// check for enable controlled - This select might have control of another selector\nconst checkDisableOther = function (param, firstRender) {\n    try {\n        if (param.disableOtherFor !== undefined) {\n            // this param controls the enable/disable properties of at least one other param.\n            // Use the options to enable disable that param.\n            const controlledSelectors = Object.keys(param.disableOtherFor);\n            for (var i = 0; i < controlledSelectors.length; i++) {\n                const elem = matsParamUtils.getInputElementForParamName(param.name);\n                if (!elem) {\n                    return;\n                }\n                const selectedOptions = elem.selectedOptions;\n                const selectedText = selectedOptions && selectedOptions.length > 0 ? selectedOptions[0].text : \"\";\n                if ((firstRender == true && param.default == param.hideOtherFor[controlledSelectors[i]]) ||\n                    (param.disableOtherFor[controlledSelectors[i]] === matsTypes.InputTypes.unused && selectedText === \"\") ||\n                    $.inArray(selectedText, param.disableOtherFor[controlledSelectors[i]]) !== -1) {\n                    matsParamUtils.getInputElementForParamName(controlledSelectors[i]).disabled = true;\n                    matsParamUtils.setValueTextForParamName(controlledSelectors[i], matsTypes.InputTypes.unused);\n                } else {\n                    matsParamUtils.getInputElementForParamName(controlledSelectors[i]).disabled = false;\n                }\n            }\n        }\n    } catch (e) {\n        e.message = \"INFO: Error in select.js checkDisableOther: \" + e.message;\n        setInfo(e.message);\n    }\n};\n\n// check for hide controlled - This select might have control of another selector's visibility\nconst checkHideOther = function (param, firstRender) {\n    try {\n        if (param.hideOtherFor !== undefined) {\n            // this param controls the visibility of at least one other param.\n            const controlledSelectors = Object.keys(param.hideOtherFor);\n            for (var i = 0; i < controlledSelectors.length; i++) {\n                const elem = matsParamUtils.getInputElementForParamName(param.name);\n                if (!elem) {\n                    return;\n                }\n                const selectedOptions = elem.selectedOptions;\n                const selectedText = selectedOptions && selectedOptions.length > 0 ? selectedOptions[0].text : \"\";\n\n                var otherInputElement = matsParamUtils.getInputElementForParamName(controlledSelectors[i]);\n\n                var selectorControlElem;\n                if ((firstRender == true && param.default == param.hideOtherFor[controlledSelectors[i]]) ||\n                    (param.hideOtherFor[controlledSelectors[i]] === matsTypes.InputTypes.unused && selectedText === \"\") ||\n                    $.inArray(selectedText, param.hideOtherFor[controlledSelectors[i]]) !== -1) {\n                    selectorControlElem = document.getElementById(controlledSelectors[i] + '-item');\n                    if (selectorControlElem && selectorControlElem.style) {\n                        selectorControlElem.style.display = \"none\";\n                    }\n                    matsParamUtils.setValueTextForParamName(controlledSelectors[i], matsTypes.InputTypes.unused);\n                } else {\n                    selectorControlElem = document.getElementById(controlledSelectors[i] + '-item');\n                    if (selectorControlElem && selectorControlElem.style) {\n                        selectorControlElem.style.display = \"block\";\n                    }\n                    otherInputElement && otherInputElement.options && otherInputElement.selectedIndex >= 0 &&\n                    otherInputElement.options[otherInputElement.selectedIndex].scrollIntoView();\n                }\n            }\n            matsSelectUtils.checkDisableOther(param), firstRender;\n        }\n    } catch (e) {\n        e.message = \"INFO: Error in select.js checkHideOther: \" + e.message;\n        setInfo(e.message);\n    }\n};\n\n// refresh the selector in question to the appropriate options indicated by the values of any superior selectors\nconst refresh = function (event, paramName) {\n    if (paramName.search('axis') === 1) {\n        // this is a \"brother\" (hidden) scatterplot param. There is no need to refresh it or add event listeners etc.\n        return;\n    }\n    const param = matsParamUtils.getParameterForName(paramName);\n    const elem = matsParamUtils.getInputElementForParamName(paramName);\n\n    /*\n    OptionsGroups are a mechanism for displaying the select options in groups.\n    A disabled option is used for the group header. Disabled options simply show up\n    in the selector list in bold font and act as group titles. They are disabled so that\n    they cannot be clicked. DisabledOptions are the headers that the options are to be grouped under.\n    disabledOptions are optional so if there are disabledOptions they are the keys in the optionsGroups\n    and they are the sort order of those keys.\n    */\n    const disabledOptions = matsParamUtils.getDisabledOptionsForParamName(paramName);\n    const optionsGroups = param.optionsGroups;\n    const optionsMap = param.optionsMap;\n\n    const superiorNames = param.superiorNames;\n    const superiorDimensionality = superiorNames !== undefined && superiorNames !== null && superiorNames.length > 0 && Array.isArray(superiorNames[0]) ? superiorNames.length : 1;\n    var superiors = [];\n    // get a list of the current superior selected values - in order of superiority i.e. [databaseValue,dataSourceValue]\n    var sNames;\n    if (superiorNames !== undefined) {\n        if (superiorDimensionality === 1) {\n            sNames = superiorNames;\n        } else {\n            sNames = superiorNames[0];\n        }\n        for (var sn = 0; sn < sNames.length; sn++) {\n            var superiorElement = matsParamUtils.getInputElementForParamName(sNames[sn]);\n            var selectedSuperiorValue = superiorElement.options[superiorElement.selectedIndex] === undefined ? matsParamUtils.getParameterForName(sNames[sn]).default : superiorElement.options[superiorElement.selectedIndex].text;\n            superiors[0] = superiors[0] === undefined ? [] : superiors[0];\n            superiors[0].push({element: superiorElement, value: selectedSuperiorValue});\n        }\n        for (var sNameIndex = 1; sNameIndex < superiorDimensionality; sNameIndex++) {\n            sNames = superiorNames[sNameIndex];\n            for (var sn = 0; sn < sNames.length; sn++) {\n                var superiorElement = matsParamUtils.getInputElementForParamName(sNames[sn]);\n                var selectedSuperiorValue = superiorElement.options[superiorElement.selectedIndex] === undefined ? matsParamUtils.getParameterForName(sNames[sn]).default : superiorElement.options[superiorElement.selectedIndex].text;\n                superiors[sNameIndex] = superiors[sNameIndex] === undefined ? [] : superiors[sNameIndex];\n                superiors[sNameIndex].push({element: superiorElement, value: selectedSuperiorValue});\n            }\n        }\n    }\n    /*\n    So what are superiors now.....\n    superiors = [[{element:anElement,value:aValue},{element:anElement,value:aValue}...]]\n    or they might be [[{element:anElement,value:aValue},{element:anElement,value:aValue}...],[{element:anElement,value:aValue},{element:anElement,value:aValue}...],...]\n\n\n     Axis-brothers:\n     Axis-brothers are for scatter plots. They are a second hidden set of parameters that apply to a different axis.\n     Because there may be axis \"brothers\" This refresh must go and\n     see if there are any brother elements that are essentially hidden copies\n     of this one, and also refresh their options lists\n\n     Superior Heirarchy:\n     There can be a heirarchy of superiors and dependents. The superiorNames are a list of paramNames. The most superior has the 0th index and\n     the least superior has the highest index.\n     The Refresh uses the superiors to get the appropriate options for a given options map.\n     The way it works is that superiors are always refreshed first. The superior heirarchy selections are then used by a\n     dependent to retrieve its appropriate optionsMap from the superiorOptionsMap.\n     superiorsOptionsMap = {\n        mostSuperiorValue0: {  // optionsMap for the most superior first value\n            nextSuperiorValue0: [value0,value1,value2,value3,...],\n            nextSuperiorValue1: [value0,value1,value2,value3,...],\n            nextSuperiorValue2: [value0,value1,value2,value3,...],\n            ...\n        },\n        mostSuperiorValue1:{  // optionsMap for the most superior second value\n            nextSuperiorValue0: [value0,value1,value2,value3,...],\n            nextSuperiorValue1: [value0,value1,value2,value3,...],\n            nextSuperiorValue2: [value0,value1,value2,value3,...],\n            ...\n        },\n        ...,\n        mostSuperiorValue2:{  // optionsMap for the most superior third value\n            nextSuperiorValue0: [value0,value1,value2,value3,...],\n            nextSuperiorValue1: [value0,value1,value2,value3,...],\n            nextSuperiorValue2: [value0,value1,value2,value3,...],\n            ...\n        },\n     }\n     */\n\n    // find all the elements that have ids like .... \"x|y|z\" + \"axis-\" + this.name\n    const name = param.name;\n    const elems = document.getElementsByClassName(\"data-input\") === undefined ? [] : document.getElementsByClassName(\"data-input\");\n    Session.set('selected', $(elem).val());\n\n    if (elem && elem.options) {\n        if (elem.selectedIndex === undefined || elem.selectedIndex === -1) {\n            if (param.default !== matsTypes.InputTypes.unused) {\n                elem.selectedIndex = 0;\n            }\n        }\n        const selectedText = elem.selectedIndex >= 0 ? elem.options[elem.selectedIndex].text : matsTypes.InputTypes.unused;\n        var brothers = [];\n        for (var i = 0; i < elems.length; i++) {\n            if (elems[i].id.indexOf(name) >= 0 && elems[i].id !== elem.id)\n                brothers.push(elems[i]);\n        }\n\n        var myOptions = [];\n        var selectedSuperiorValues = [];\n\n        try {\n            // index down through the options for the list of superiors\n            // starting with the most superior down through the least superior\n            // and get the options list for the first set of superiors.\n            // These are the ancestral options.\n            if (param.optionsMap) {\n                var firstSuperiorOptions = optionsMap;\n                var theseSuperiors = superiors === undefined || superiors.length === 0 ? [] : superiors[0];\n                for (var theseSuperiorsIndex = 0; theseSuperiorsIndex < theseSuperiors.length; theseSuperiorsIndex++) {\n                    var superior = theseSuperiors[theseSuperiorsIndex];\n                    var selectedSuperiorValue = superior.value;\n                    firstSuperiorOptions = firstSuperiorOptions[selectedSuperiorValue];\n                }\n                myOptions = Array.isArray(firstSuperiorOptions) ? firstSuperiorOptions : Object.keys(firstSuperiorOptions);\n            } else {\n                myOptions = param.options;\n            }\n\n            // need to get the ancestral truth options because we may need to intersect the options\n\n\n            /* tricky little bit here:\n            SuperiorDimensionality:\n             It is possible to have two superior options maps.. i.e. datasource and truth.\n             In that case the superiorNames won't look like [\"something\",\"somethingelse\"],\n             instead it will look like [[\"something\",\"somethingelse\"],[\"someotherthing\",\"someotherthingelse\"]]\n             i.e. it will be a multidimensional array.\n\n             If the controlButton for one of these multi-dimensional superior elements is hidden ....\n             matsParamUtils.getControlElementForParamName(superior.element.name).offsetParent !== null\n             it has been hidden because it has a visibility dependency on another param\n             i.e. truth-data-source and truth-variable (for mean there would be no truth, but for bias\n             there must always be truth...).\n             In this case these are dependent upon statistic such that if the statistic is \"mean\" the truth-data-source and truth-variable\n             are hidden. See the wfip2 main.js statistic param as an example....\n             \"disableOtherFor:{'truth-data-source':[statisticOptionsMap.mean][0]},\"\n             and\n             \"hideOtherFor:{'truth-data-source':[statisticOptionsMap.mean][0]},\"\n             are the fields that cause the truth-data-source to be hidden when statistic is set to \"mean\".\n             In that condition (the controlButton is hidden) the superior should not be used as an intersection in the selected sites.\n             matsParamUtils.getControlElementForParamName(superior.element.name).offsetParent will be null if the controlButton\n             for this element (this superior) is hidden. That is the tricky part ... it will be null.\n\n             Also the unused superior is tested against the superior according to the truth table...\n             used && unused  -> use the used\n             unused and used -> use the used\n             used and used -> use the intersection\n             unused and unused - set the options to []\n\n             A select may have a list of disabledOptions. These are used as optionGroup markers.\n             */\n\n            // need to get the actual options here\n            for (var sNameIndex = 1; sNameIndex < superiorDimensionality; sNameIndex++) {\n                // index down through the options for the list of superiors\n                // starting with the most superior down through the least superior\n                // and get the options list for the first set of superiors.\n                // These are the ancestral options.\n                var nextSuperiorOptions = optionsMap;\n                var theseSuperiors = superiors === undefined || superiors.length === 0 ? [] : superiors[sNameIndex];\n                for (var theseSuperiorsIndex = 0; theseSuperiorsIndex < theseSuperiors.length; theseSuperiorsIndex++) {\n                    var superior = theseSuperiors[theseSuperiorsIndex];\n                    var selectedSuperiorValue = superior.value;\n                    nextSuperiorOptions = nextSuperiorOptions[selectedSuperiorValue];\n                }\n                // since we now have multiple options we have to intersect them\n                myOptions = _.intersection(myOptions, nextSuperiorOptions);\n            }\n            if (myOptions === []) {  // none used - set to []\n                matsParamUtils.setValueTextForParamName(name, matsTypes.InputTypes.unused);\n            }\n        } catch (e) {\n            e.message = \"INFO: Error in select.js refresh: determining options from superiors: \" + e.message;\n            setInfo(e.message);\n        }\n\n        try {\n            // reset the options of the select\n            // if the options are null it might be that this is the initial setup.\n            // so use the optionsmap and the default options for the map\n            // it might also mean that there are no superiors for this param\n            if (myOptions == null) {\n                // get the default options\n                if (optionsGroups) {\n                    // optionGroups are an ordered map. It probably has options that are in the disabledOption list\n                    // which are used as markers in the select options pulldown. This is typical for models\n                    const optionsGroupsKeys = Object.keys(optionsGroups);\n                    for (var k = 0; k < optionsGroupsKeys.length; k++) {\n                        if (myOptions === null) {\n                            myOptions = [];\n                            myOptions.push(optionsGroupsKeys[k]);\n                            myOptions = myOptions.concat(optionsGroups[optionsGroupsKeys[k]]); // the primary group does not get sorted\n                        } else {\n                            myOptions.push(optionsGroupsKeys[k]);\n                            myOptions = myOptions.concat(optionsGroups[optionsGroupsKeys[k]].sort()); // non primary  groups get sorted\n                        }\n                    }\n                } else {\n                    myOptions = param.options;\n                }\n            }\n            var optionsAsString = \"\";\n            if (myOptions === undefined || myOptions == null) {\n                return;\n            }\n            var firstGroup = true;\n            for (var i = 0; i < myOptions.length; i++) {\n                var dIndex = disabledOptions === undefined ? -1 : disabledOptions.indexOf(myOptions[i]);\n                if (dIndex >= 0) {   // the option was found in the disabled options so it needs to be an optgroup label\n                    // disabled option\n                    if (firstGroup === true) {\n                        // first in group\n                        optionsAsString += \"<optgroup label=\" + myOptions[i] + \">\";\n                        firstGroup = false;\n                    } else {\n                        optionsAsString += \"</optgroup>\";\n                        optionsAsString += \"<optgroup label=\" + myOptions[i] + \">\";\n                    }\n                } else {\n                    //regular option - the option was not found in the disabled options\n                    optionsAsString += \"<option value='\" + myOptions[i] + \"'>\" + myOptions[i] + \"</option>\";\n                }\n            }\n            if (disabledOptions !== undefined) {\n                optionsAsString += \"</optgroup>\";\n            }\n            $('select[name=\"' + name + '\"]').empty().append(optionsAsString);\n            //reset the selected index if it had been set prior (the list may have changed so the index may have changed)\n            var selectedOptionIndex;\n            if (selectedText === 'initial') {\n                selectedOptionIndex = myOptions.indexOf(param.default);\n            } else {\n                selectedOptionIndex = myOptions.indexOf(selectedText);\n            }\n            var sviText = \"\";\n            if (selectedOptionIndex == -1 && elem.selectedIndex >= 0) {\n                for (var svi = 0; svi < selectedSuperiorValues.length; svi++) {\n                    superior = superiors[svi];\n                    if (matsParamUtils.getControlElementForParamName(superior.element.name).offsetParent !== null) {\n                        if (svi > 0) {\n                            sviText += \" and \";\n                        }\n                        sviText += selectedSuperiorValues[svi]\n                    }\n                }\n                setInfo(\"I changed your selected \" + name + \": '\" + selectedText + \"' to '\" + myOptions[0] + \"' because '\" + selectedText + \"' is no longer an option for \" + sviText);\n            }\n            // if the selectedText existed in the new options list then the selectedOptionIndex won't be -1 and we have to choose the default option\n            if (selectedOptionIndex === -1) {\n                // if the param default is unused set it to unused\n                // else just choose the 0th element in the element options. default?\n                if (param.default === matsTypes.InputTypes.unused) {\n                    matsParamUtils.setValueTextForParamName(name, matsTypes.InputTypes.unused);\n                } else {\n                    elem.selectedIndex = 0;\n                    elem && elem.options && elem.selectedIndex >= 0 && elem.options[elem.selectedIndex].scrollIntoView();\n                    elem && elem.options && elem.selectedIndex >= 0 && matsParamUtils.setValueTextForParamName(name, elem.options[elem.selectedIndex].text);\n                }\n            } else {\n                elem.selectedIndex = selectedOptionIndex;\n                elem && elem.options && elem.selectedIndex >= 0 && elem.options[elem.selectedIndex].scrollIntoView();\n                elem && elem.options && elem.selectedIndex >= 0 && matsParamUtils.setValueTextForParamName(name, elem.options[elem.selectedIndex].text);\n            }\n            for (var i = 0; i < brothers.length; i++) {\n                const belem = brothers[i];\n                const belemSelectedOptions = $(belem.selectedOptions).map(function () {\n                    return (this.value)\n                }).get();\n                if (belemSelectedOptions === undefined || belemSelectedOptions.length === 0) {\n                    belem.options = [];\n                    for (var i1 = 0; i1 < myOptions.length; i1++) {\n                        belem.options[belem.options.length] = new Option(myOptions[i1], myOptions[i1], i1 == 0, i1 == 0);\n                    }\n                }\n            }\n        } catch (e) {\n            e.message = \"INFO: Error in select.js refresh: resetting selected options: \" + e.message;\n            setInfo(e.message);\n        }\n    }\n    refreshPeer(event, param);\n};  // refresh function\n\nexport default matsSelectUtils = {\n    refresh: refresh,\n    refreshPeer: refreshPeer,\n    refreshDependents: refreshDependents,\n    checkDisableOther: checkDisableOther,\n    checkHideOther: checkHideOther\n};\n\n            ","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\n/**\n * Created by pierce on 8/31/16.\n */\nimport './curve_util.js';\nimport './graph_util.js';\nimport './select_util.js';\nimport './init.js';\nimport '../both';\nimport './routes.js';\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { Meteor } from 'meteor/meteor';\nimport matsCollections from 'meteor/randyp:mats-common';\nif (Meteor.isClient) {\n    Meteor.subscribe(\"CurveParams\");\n    Meteor.subscribe(\"Scatter2dParams\");\n    Meteor.subscribe(\"SavedCurveParams\");\n    Meteor.subscribe(\"PlotParams\");\n    Meteor.subscribe(\"PlotGraphFunctions\");\n    Meteor.subscribe(\"RegionsPerModel\");\n    Meteor.subscribe(\"SitesPerModel\");\n    Meteor.subscribe(\"RegionDescriptions\");\n    Meteor.subscribe(\"Models\");\n    Meteor.subscribe(\"FcstLensPerModel\");\n    Meteor.subscribe(\"ColorScheme\");\n    Meteor.subscribe(\"Settings\");\n    Meteor.subscribe(\"CurveSettings\");\n    Meteor.subscribe(\"SentAddresses\");\n    Meteor.subscribe(\"Roles\");\n    Meteor.subscribe(\"Authorization\");\n    Meteor.subscribe(\"Credentials\");\n    Meteor.subscribe(\"Databases\");\n    Meteor.subscribe(\"CurveTextPatterns\");\n    Meteor.subscribe(\"ScatterAxisTextPattern\");\n    Meteor.subscribe(\"RangePerDescriptor\");\n    Meteor.subscribe(\"SiteMap\");\n    Meteor.subscribe(\"StationMap\");\n    Meteor.subscribe(\"appName\");\n    Meteor.subscribe(\"LayoutStoreCollection\");\n    Session.set('Curves', []);\n    Session.set('PlotParams', []);\n\n    Accounts.ui.config({\n        requestOfflineToken: {\n            google: true\n        }\n    });\n\n    const ref = location.href;\n    const pathArray = location.href.split('/');\n    const protocol = pathArray[0];\n    const hostport = pathArray[2];\n    const hostName = hostport.split(':')[0];\n    const app = pathArray[3] == \"\" ? \"/\" : pathArray[3];\n    const matsRef = protocol + \"//\" + hostport;\n    const helpRef = ref.endsWith('/') ? ref + \"help\" : ref + \"/help\";\n    Session.set(\"app\", {appName: app, matsref: matsRef, appref: ref, helpref: helpRef, hostName: hostName});\n    var collections = Object.keys(matsCollections).map(key => matsCollections[key]);\n    Session.set(\"Mongol\", {\n        'collections': collections,\n        'display': false,\n        'opacity_normal': \".7\",\n        'opacity_expand': \".9\",\n        'disable_warning': true\n    });\n}","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { Meteor } from 'meteor/meteor';\nimport { FlowRouter } from 'meteor/ostrio:flow-router-extra';\n\n//localhost routes\n\nFlowRouter.route('/', {\n    name: 'main',\n    action() {\n        this.render('Home')\n    }\n});\n\nFlowRouter.route('/CSV/:graphFunction/:key/:matching/:appName', {\n    name: 'csv',\n    action(params) {\n        console.log(\"in csv route\");\n        window.location.href=FlowRouter.path;\n    }\n});\n\nFlowRouter.route('/JSON/:graphFunction/:key/:matching/:appName', {\n    name: 'json',\n    action(params) {\n        console.log(\"in json route\");\n        window.location.href=FlowRouter.path;\n    }\n});\n\n\nFlowRouter.route('/preview/:graphFunction/:key/:matching/:appName', {\n    name: 'preview',\n    action(params) {\n        console.log(\"in preview route- setting params\", params);\n        this.render('GraphStandAlone', params);\n    }\n});\n\n//prefix routes\nFlowRouter.route(Meteor.settings.public.proxy_prefix_path + '/', {\n    name: 'main',\n    action() {\n        this.render('Home')\n    }\n});\n\nFlowRouter.route(Meteor.settings.public.proxy_prefix_path + '/CSV/:graphFunction/:key/:matching/:appName', {\n    name: 'csv',\n    action(params) {\n        console.log(\"in csv route\");\n        window.location.href=FlowRouter.path;\n    }\n});\n\nFlowRouter.route(Meteor.settings.public.proxy_prefix_path + '/JSON/:graphFunction/:key/:matching/:appName', {\n    name: 'json',\n    action(params) {\n        console.log(\"in json route\");\n        window.location.href=FlowRouter.path;\n    }\n});\n\n\nFlowRouter.route(Meteor.settings.public.proxy_prefix_path + '/preview/:graphFunction/:key/:matching/:appName', {\n    name: 'preview',\n    action(params) {\n        console.log(\"in preview route- setting params\", params);\n        this.render('GraphStandAlone', params);\n    }\n});\n\n\n// appname routes\nFlowRouter.route(Meteor.settings.public.proxy_prefix_path + '/:appName', {\n    name: 'main',\n    action() {\n        this.render('Home')\n    }\n});\n\nFlowRouter.route(Meteor.settings.public.proxy_prefix_path + '/*/CSV/:graphFunction/:key/:matching/:appName', {\n    name: 'csv',\n    action(params) {\n        console.log(\"in csv route\");\n        window.location.href=FlowRouter.path;\n    }\n});\n\nFlowRouter.route(Meteor.settings.public.proxy_prefix_path + '/*/JSON/:graphFunction/:key/:matching/:appName', {\n    name: 'json',\n    action(params) {\n        console.log(\"in json route\");\n        window.location.href=FlowRouter.path;\n    }\n});\n\nFlowRouter.route(Meteor.settings.public.proxy_prefix_path + '/*/preview/:graphFunction/:key/:matching/:appName', {\n    name: 'preview',\n    action(params) {\n        console.log(\"in preview route- setting params\", params);\n        this.render('GraphStandAlone', params);\n    }\n});\n\n// exception routes\nFlowRouter.route(Meteor.settings.public.proxy_prefix_path + '/*/', {\n    name: 'main',\n    action() {\n        this.render('notFound')\n    }\n});\n\nFlowRouter.route('*', {\n    action() {\n        console.log ('route: ' + ' not found' );\n        this.render('notFound');\n    }\n});\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsTypes} from 'meteor/randyp:mats-common';\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport {matsPlotUtils} from 'meteor/randyp:mats-common';\n\n//this function checks if two JSON objects are identical\nconst areObjectsEqual = function (o, p) {\n    if ((o && !p) || (p && !o)) {\n        return false;\n    }\n    if (JSON.stringify(o) === JSON.stringify(p)) {\n        return true;\n    } else {\n        return false;\n    }\n};\n\n//this function checks if values of subArray are also in superArray\nconst arrayContainsArray = function (superArray, subArray) {\n    superArray.sort(function (a, b) {\n        return Number(a) - Number(b);\n    });\n    subArray.sort(function (a, b) {\n        return Number(a) - Number(b);\n    });\n    var i, j;\n    for (i = 0, j = 0; i < superArray.length && j < subArray.length;) {\n        if (superArray[i] < subArray[j]) {\n            ++i;\n        } else if (superArray[i] === subArray[j]) {\n            ++i;\n            ++j;\n        } else {\n            // subArray[j] not in superArray, so superArray does not contain all elements of subArray\n            return false;\n        }\n    }\n    // make sure there are no elements left in sub\n    return j === subArray.length;\n};\n\n//this function checks if the entire array subArray is contained in superArray\nconst arrayContainsSubArray = function (superArray, subArray) {\n    var i, j, current;\n    for (i = 0; i < superArray.length; ++i) {\n        if (subArray.length === superArray[i].length) {\n            current = superArray[i];\n            for (j = 0; j < subArray.length && subArray[j] === current[j]; ++j) ;\n            if (j === subArray.length)\n                return true;\n        }\n    }\n    return false;\n};\n\n//this function checks if two arrays are identical\nconst arraysEqual = function (a, b) {\n    if (a === b) return true;\n    if (a == null || b == null) return false;\n    if (a.length !== b.length) return false;\n    for (var i = 0; i < a.length; ++i) {\n        if (a[i] !== b[i]) return false;\n    }\n    return true;\n};\n\nconst arrayUnique = function(a) {\n    var arr = [];\n    for(var i = 0; i < a.length; i++) {\n        if(!arr.includes(a[i])) {\n            arr.push(a[i]);\n        }\n    }\n    return arr;\n};\n\n//this function finds the position of the array subArray in superArray\nconst findArrayInSubArray = function (superArray, subArray) {\n    var i, j, current;\n    for (i = 0; i < superArray.length; ++i) {\n        if (subArray.length === superArray[i].length) {\n            current = superArray[i];\n            for (j = 0; j < subArray.length && subArray[j] === current[j]; ++j) ;\n            if (j === subArray.length)\n                return i;\n        }\n    }\n    return -1;\n};\n\n//this function checks if an object is a value in another object\nconst objectContainsObject = function (superObject, subObject) {\n    const superObjectKeys = Object.keys(superObject);\n    var currentObject;\n    for (var i = 0; i < superObjectKeys.length; i++) {\n        currentObject = superObject[superObjectKeys[i]];\n        if (areObjectsEqual(subObject,currentObject)) {\n            return true;\n        }\n    }\n    // if the loop completes, the subObject was not found\n    return false;\n};\n\n//utility for calculating the average of an array\nconst average = function (data) {\n    var sum = data.reduce(function (sum, value) {\n        return value == null ? sum : sum + value;\n    }, 0);\n    var avg = sum / data.length;\n    return avg;\n};\n\n//utility for calculating the stdev of an array\nconst stdev = function (data) {\n    var avg = average(data);\n    var squareDiffs = data.map(function(value){\n        var diff = value - avg;\n        return diff * diff;\n    });\n    var avgSquareDiff = average(squareDiffs);\n    var stdDev = Math.sqrt(avgSquareDiff);\n    return stdDev;\n};\n\n//this function makes sure date strings are in the correct format\nconst dateConvert = function (dStr) {\n    if (dStr === undefined || dStr === \" \") {\n        var now = new Date();\n        var date = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds());\n        var yr = date.getUTCFullYear();\n        var day = date.getUTCDate();\n        var month = date.getUTCMonth();\n        var hour = date.getUTCHours();\n        var minute = date.getUTCMinutes();\n        return month + \"/\" + day + '/' + yr + ' ' + hour + \":\" + minute;\n    }\n    var dateParts = dStr.split(' ');\n    var dateArray = dateParts[0].split(/[\\-\\/]/);  // split on - or /    01-01-2017 OR 01/01/2017\n    var month = dateArray[0];\n    var day = dateArray[1];\n    var yr = dateArray[2];\n    var hour = 0;\n    var minute = 0;\n    if (dateParts[1]) {\n        var timeArray = dateParts[1].split(\":\");\n        hour = timeArray[0];\n        minute = timeArray[1];\n    }\n    return month + \"/\" + day + '/' + yr + ' ' + hour + \":\" + minute;\n};\n\n//splits the date range string from the date selector into standardized fromDate/toDate strings,\n// plus the epochs for the fromDate and toDate\nconst getDateRange = function (dateRange) {\n    var dates = dateRange.split(' - ');\n    var fromDateStr = dates[0];\n    var fromDate = dateConvert(fromDateStr);\n    var toDateStr = dates[1];\n    var toDate = dateConvert(toDateStr);\n    var fromSecs = secsConvert(fromDateStr);\n    var toSecs = secsConvert(toDateStr);\n    return {\n        fromDate: fromDate,\n        toDate: toDate,\n        fromSeconds: fromSecs,\n        toSeconds: toSecs\n    }\n};\n\n//this function converts a date string into an epoch\nconst secsConvert = function (dStr) {\n    if (dStr === undefined || dStr === \" \") {\n        var now = new Date();\n        return now.getTime() / 1000;\n    }\n    else {\n        var dateParts = dStr.split(' ');\n        var dateArray = dateParts[0].split(/[\\-\\/]/);  // split on - or /    01-01-2017 OR 01/01/2017\n        var month = dateArray[0];\n        var day = dateArray[1];\n        var yr = dateArray[2];\n        var hour = 0;\n        var minute = 0;\n        if (dateParts[1]) {\n            var timeArray = dateParts[1].split(\":\");\n            hour = timeArray[0];\n            minute = timeArray[1];\n        }\n        var my_date = new Date(Date.UTC(yr, month - 1, day, hour, minute, 0));\n        // to UTC time, not local time\n        var date_in_secs = my_date.getTime();\n    }\n    // to UTC time, not local time\n    //return date_in_secs/1000 -3600*6;\n    return date_in_secs / 1000;\n};\n\n//function to manage authorized logins for MATS\nconst doAuthorization = function () {\n    if (matsCollections.Settings.findOne({}) === undefined || matsCollections.Settings.findOne({}).resetFromCode === undefined || matsCollections.Settings.findOne({}).resetFromCode == true) {\n        matsCollections.Authorization.remove({});\n    }\n    if (matsCollections.Authorization.find().count() == 0) {\n        matsCollections.Authorization.insert({email: \"randy.pierce@noaa.gov\", roles: [\"administrator\"]});\n        matsCollections.Authorization.insert({email: \"kirk.l.holub@noaa.gov\", roles: [\"administrator\"]});\n        matsCollections.Authorization.insert({email: \"jeffrey.a.hamilton@noaa.gov\", roles: [\"administrator\"]});\n        matsCollections.Authorization.insert({email: \"bonny.strong@noaa.gov\", roles: [\"administrator\"]});\n        matsCollections.Authorization.insert({email: \"molly.b.smith@noaa.gov\", roles: [\"administrator\"]});\n        matsCollections.Authorization.insert({email: \"mats.gsd@noaa.gov\", roles: [\"administrator\"]});\n    }\n};\n\n//master list of colors for MATS curves\nconst doColorScheme = function () {\n    if (matsCollections.Settings.findOne({}) === undefined || matsCollections.Settings.findOne({}).resetFromCode === undefined || matsCollections.Settings.findOne({}).resetFromCode == true) {\n        matsCollections.ColorScheme.remove({});\n    }\n    if (matsCollections.ColorScheme.find().count() == 0) {\n        matsCollections.ColorScheme.insert({\n            colors: [\n                \"rgb(255,0,0)\",\n                \"rgb(0,0,255)\",\n                \"rgb(255,165,0)\",\n                \"rgb(128,128,128)\",\n                \"rgb(238,130,238)\",\n\n                \"rgb(238,130,238)\",\n                \"rgb(0,0,139)\",\n                \"rgb(148,0,211)\",\n                \"rgb(105,105,105)\",\n                \"rgb(255,140,0)\",\n\n                \"rgb(235,92,92)\",\n                \"rgb(82,92,245)\",\n                \"rgb(133,143,143)\",\n                \"rgb(235,143,92)\",\n                \"rgb(190,120,120)\",\n\n                \"rgb(225,82,92)\",\n                \"rgb(72,82,245)\",\n                \"rgb(123,133,143)\",\n                \"rgb(225,133,92)\",\n                \"rgb(180,120,120)\"\n            ]\n        });\n    }\n};\n\n//utility for google login capabilities in MATS -- broken for esrl.noaa.gov/gsd/mats?\nconst doCredentials = function () {\n// the gmail account for the credentials is mats.mail.daemon@gmail.com - pwd mats2015!\n    if (matsCollections.Settings.findOne({}) === undefined || matsCollections.Settings.findOne({}).resetFromCode === undefined || matsCollections.Settings.findOne({}).resetFromCode == true) {\n        matsCollections.Credentials.remove({});\n    }\n    if (matsCollections.Credentials.find().count() == 0) {\n        matsCollections.Credentials.insert({\n            name: \"oauth_google\",\n            clientId: \"499180266722-aai2tddo8s9edv4km1pst88vebpf9hec.apps.googleusercontent.com\",\n            clientSecret: \"xdU0sc7SbdOOEzSyID_PTIRE\",\n            refresh_token: \"1/3bhWyvCMMfwwDdd4F3ftlJs3-vksgg7G8POtiOBwYnhIgOrJDtdun6zK6XiATCKT\"\n        });\n    }\n};\n\n//another utility to assist at logging into MATS\nconst doRoles = function () {\n    if (matsCollections.Settings.findOne({}) === undefined || matsCollections.Settings.findOne({}).resetFromCode === undefined || matsCollections.Settings.findOne({}).resetFromCode == true) {\n        matsCollections.Roles.remove({});\n    }\n    if (matsCollections.Roles.find().count() == 0) {\n        matsCollections.Roles.insert({name: \"administrator\", description: \"administrator privileges\"});\n    }\n};\n\n//for use in matsMethods.resetApp() to establish default settings\nconst doSettings = function (title, version, buildDate, appType) {\n    if (matsCollections.Settings.findOne({}) === undefined || matsCollections.Settings.findOne({}).resetFromCode === undefined || matsCollections.Settings.findOne({}).resetFromCode == true) {\n        matsCollections.Settings.remove({});\n    }\n    if (matsCollections.Settings.find().count() == 0) {\n        matsCollections.Settings.insert({\n            LabelPrefix: \"Curve\",\n            Title: title,\n            appVersion: version,\n            buildDate: buildDate,\n            appType: appType,\n            LineWidth: 3.5,\n            NullFillString: \"---\",\n            resetFromCode: false\n        });\n    }\n    // always update the version, roles, and the hostname, not just if it doesn't exist...\n    var settings = matsCollections.Settings.findOne({});\n    const deploymentRoles = {\n        \"mats-dev\": \"development\",\n        \"mats-int\": \"integration\",\n        \"mats\": \"production\"\n    };\n    var settingsId = settings._id;\n    var os = Npm.require('os');\n    var hostname = os.hostname().split('.')[0];\n    settings['appVersion'] = version;\n    settings['hostname'] = hostname;\n    settings['deploymentRoles'] = JSON.stringify(deploymentRoles);\n    matsCollections.Settings.update(settingsId, {$set: settings});\n};\n\n//Utility for transferring client-side parameters to the server-side methods via the \"PlotParams\" object in the stack.\n//Add values to this object in the 'click .submit-params' event handler in plot_list.js\nconst getPlotParamsFromStack = function () {\n    var params = {};\n    const err = new Error;\n    Error.captureStackTrace(err, arguments.callee.arguments.callee);\n    const stack = err.stack;\n    const stackElems = stack.split(\"\\n\");\n    for (si = 0; si < stackElems.length; si++) {\n        const sElem = stackElems[si].trim();\n        if (sElem.indexOf('dataFunctions') !== -1 && sElem.startsWith(\"at data\")) {\n            const dataFunctionName = sElem.split('at ')[1];\n            try {\n                params = global[sElem.split('at ')[1].split(' ')[0]].arguments[0]\n            } catch (noJoy) {\n            }\n            break;\n        }\n    }\n    return params;\n};\n\n//calculates mean, stdev, and other statistics for curve data points in all apps and plot types\nconst get_err = function (sVals, sSecs, sLevs) {\n    /* refer to perl error_library.pl sub  get_stats\n     to see the perl implementation of these statics calculations.\n     These should match exactly those, except that they are processed in reverse order.\n     */\n    const autocorr_limit = 0.95;\n    const hasLevels = sLevs.length > 0;\n    const plotParams = getPlotParamsFromStack();\n    var outlierQCParam;\n    if (plotParams[\"outliers\"] !== \"all\") {\n        outlierQCParam = Number(plotParams[\"outliers\"]);\n    } else {\n        outlierQCParam = 100;\n    }\n\n    var subVals = [];\n    var subSecs = [];\n    var subLevs = [];\n    var n = sVals.length;\n    var n_good = 0;\n    var sum_d = 0;\n    var sum2_d = 0;\n    var error = \"\";\n    var i;\n    for (i = 0; i < n; i++) {\n        if (sVals[i] !== null && !isNaN(sVals[i])) {\n            n_good = n_good + 1;\n            sum_d = sum_d + sVals[i];\n            sum2_d = sum2_d + sVals[i] * sVals[i];\n            subVals.push(sVals[i]);\n            subSecs.push(sSecs[i]);\n            if (hasLevels) {\n                subLevs.push(sLevs[i]);\n            }\n        }\n    }\n    var d_mean = sum_d / n_good;\n    var sd2 = sum2_d / n_good - d_mean * d_mean;\n    var sd = sd2 > 0 ? Math.sqrt(sd2) : sd2;\n    var sd_limit = outlierQCParam * sd;\n    //console.log(\"see error_library.pl l208 These are processed in reverse order to the perl code -  \\nmean is \" + d_mean + \" sd_limit is +/- \" + sd_limit + \" n_good is \" + n_good + \" sum_d is\" + sum_d + \" sum2_d is \" + sum2_d);\n\n    // find minimum delta_time, if any value missing, set null\n    var last_secs = 0;\n    var minDelta = Number.MAX_VALUE;\n    var minSecs = Number.MAX_VALUE;\n    var max_secs = Number.MIN_VALUE;\n    var minVal = Number.MAX_VALUE;\n    var maxVal = -1 * Number.MAX_VALUE;\n    var secs;\n    var delta;\n    for (i = 0; i < subSecs.length; i++) {\n        secs = (subSecs[i]);\n        delta = Math.abs(secs - last_secs);\n        if (delta > 0 && delta < minDelta) {\n            minDelta = delta;\n        }\n        if (secs < minSecs) {\n            minSecs = secs;\n        }\n        if (secs > max_secs) {\n            max_secs = secs;\n        }\n        last_secs = secs;\n    }\n\n    var data_wg = [];\n    var n_gaps = 0;\n    n_good = 0;\n    var sum = 0;\n    var sum2 = 0;\n    if (minDelta < 0) {\n        error = (\"Invalid time interval - minDelta: \" + minDelta);\n        console.log(\"matsDataUtil.getErr: Invalid time interval - minDelta: \" + minDelta)\n    }\n    // remove data more than $sd_limit from mean\n    var qaCorrected = [];\n    for (i = 0; i < subVals.length; i++) {\n        if (Math.abs(subVals[i] - d_mean) > sd_limit) {\n            qaCorrected.push(\"removing datum \" + i + \" with value \" + subVals[i] + \" because it exceeds \" + outlierQCParam + \" standard deviations from the mean - mean: \" + d_mean + \" \" + outlierQCParam + \" * sd: \" + sd_limit + \" delta: \" + (subVals[i] - d_mean));\n            // console.log(qaCorrected.join('\\n'));\n            subVals[i] = null;\n        } else {\n            minVal = minVal < subVals[i] ? minVal : subVals[i];\n            maxVal = maxVal > subVals[i] ? maxVal : subVals[i];\n            sum += subVals[i];\n            sum2 += subVals[i] * subVals[i];\n            n_good++;\n        }\n    }\n    if (n_good < 1) {\n        return {d_mean: null, stde_betsy: null, sd: null, n_good: n_good, lag1: null, min: null, max: null, sum: null};\n    }\n\n    // recalculate if we threw anything away.\n    d_mean = sum / n_good;\n    sd2 = sum2 / n_good - d_mean * d_mean;\n    sd = 0;\n    if (sd2 > 0) {\n        sd = Math.sqrt(sd2);\n    }\n    //console.log(\"new mean after throwing away outliers is \" + sd + \" n_good is \" + n_good + \" sum is \" + sum  + \" sum2 is \" + sum2 + \" d_mean is \" + d_mean);\n\n    // look for gaps\n    var lastSecond = -1 * Number.MAX_VALUE;\n    var lastPressure = -1 * Number.MAX_VALUE;\n    var n_pressures;\n    if (hasLevels) {\n        n_pressures = arrayUnique(subLevs).length;\n    } else {\n        n_pressures = 1;\n    }\n    // set lag1_t to the first time the time changes from its initial value + 1 (data zero based)\n    // set lag1_p to the first time the pressure changes from its initial value + 1 (data zero based)\n    var lag1_t = 0;\n    var lag1_p = 0;\n    var r1_t = 0;\t\t\t// autocorrelation for time\n    var r1_p = 0;\t\t\t// autocorrelation for pressure\n    var j = 0;              // i is loop index without gaps; j is loop index with gaps\n    var n_deltas = 0;\n\n    for (i = 0; i < subSecs.length; i++) {\n        var sec = subSecs[i];\n        var lev;\n        if (hasLevels) {\n            lev = subLevs[i];\n            // find first time the pressure changes\n            if (lag1_p === 0 && lastPressure > 0) {\n                if (lev !== lastPressure) {\n                    lag1_p = j;\n                }\n            }\n        }\n        if (lastSecond >= 0) {\n            if(lag1_t === 0 && sec !== lastSecond) {\n                lag1_t = j;\n            }\n            if (Math.abs(sec - lastSecond) > minDelta) {\n                n_deltas = (Math.abs(sec - lastSecond)/minDelta - 1) * n_pressures;\n                // for the Autocorrelation at lag 1, it doesn't matter how many missing\n                // data we put in within gaps! (But for the other AC's it does.)\n                // since we're using only the AC at lag 1 for calculating std err, let's\n                // save cpu time and only put in one missing datum per gap, no matter\n                // how long. WRM 2/22/2019\n                // but if we're using a different lag, which could happen, we'll need\n                // to insert all the missing data in each gap. WRM 2/22/2019\n                // $n_deltas=1;\n                for(var count = 0; count < n_deltas; count++) {\n                    data_wg.push(null);\n                    n_gaps++;\n                    j++;\n                }\n            }\n        }\n        lastSecond = sec;\n        if (hasLevels) {\n            lastPressure = lev;\n        }\n        data_wg.push(subVals[i]);\n        j++;\n    }\n\n    //from http://www.itl.nist.gov/div898/handbook/eda/section3/eda35c.htm\n    var r = [];\n    var lag_by_r = {};\n    var lag1_max = lag1_p > lag1_t ? lag1_p : lag1_t;\n    var r_sum = 0;\n    var n_r = 0;\n    var n_in_lag;\n    var lag;\n    var t;\n    for (lag = 0; lag <= lag1_max; lag++) {\n        r[lag] = 0;\n        n_in_lag = 0;\n        for (t = 0; t < ((n + n_gaps) - lag); t++) {\n            if (data_wg[t] != null && data_wg[t + lag] != null) {\n                r[lag] += +(data_wg[t] - d_mean) * (data_wg[t + lag] - d_mean);\n                n_in_lag++;\n            }\n        }\n        if (n_in_lag > 0 && sd > 0) {\n            r[lag] /= (n_in_lag * sd * sd);\n            r_sum += r[lag];\n            n_r++;\n        } else {\n            r[lag] = null;\n        }\n        if(lag >= 1 && lag < (n + n_gaps) / 2) {\n            lag_by_r[r[lag]] = lag;\n        }\n    }\n    if (lag1_t > 0) {\n        r1_t = r[lag1_t] !== undefined ? r[lag1_t] : 0;\n    }\n    if (lag1_p > 0) {\n        r1_p = r[lag1_p] !== undefined ? r[lag1_p] : 0;\n    }\n\n    // Betsy Weatherhead's correction, based on lag 1, augmented by the highest\n    // lag > 1 and < n/2\n    if (r1_p >= autocorr_limit) {\n        r1_p = autocorr_limit;\n    }\n    if(r1_t >= autocorr_limit) {\n        r1_t = autocorr_limit;\n    }\n\n    const betsy = Math.sqrt((n_good-1)*(1. - r1_p)*(1. - r1_t));\n    var stde_betsy;\n    if (betsy !== 0) {\n        stde_betsy = sd / betsy;\n    } else {\n        stde_betsy = null;\n    }\n    const stats = {\n        d_mean: d_mean,\n        stde_betsy: stde_betsy,\n        sd: sd,\n        n_good: n_good,\n        lag1: r[1],\n        min: minSecs,\n        max: max_secs,\n        minVal: minVal,\n        maxVal: maxVal,\n        sum: sum_d,\n        qaCorrected: qaCorrected\n    };\n    //console.log(\"stats are \" + JSON.stringify(stats));\n    // stde_betsy is standard error with auto correlation\n    //console.log(\"---------\\n\\n\");\n    return stats;\n};\n\n// utility to process the user-input histogram customization controls\nconst setHistogramParameters = function (plotParams) {\n    var yAxisFormat = plotParams['histogram-yaxis-controls'];\n    var binType = plotParams['histogram-bin-controls'];\n    var binNum = 12;    // default bin number\n    var binStart = undefined;    // default is no mandated bin start\n    var binStride = undefined;         // default is no mandated stride\n    var pivotVal = undefined;      // default is not to shift the bins over to a pivot\n    var binBounds = []; // default is no specified bin bounds -- our algorithm will figure them out if this array stays empty\n\n    switch (binType) {\n        case \"Set number of bins\":\n            // get the user's chosen number of bins\n            binNum = Number(plotParams['bin-number']);\n            if (isNaN(binNum)) {\n                throw new Error(\"Error parsing bin number: please enter the desired number of bins.\");\n            }\n            break;\n\n        case \"Make zero a bin bound\":\n            // let the histogram routine know that we want the bins shifted over to zero\n            pivotVal = 0;\n            break;\n\n        case \"Choose a bin bound\":\n            // let the histogram routine know that we want the bins shifted over to whatever was input\n            pivotVal = Number(plotParams['bin-pivot']);\n            if (isNaN(pivotVal)) {\n                throw new Error(\"Error parsing bin pivot: please enter the desired bin pivot.\");\n            }\n            break;\n\n        case \"Set number of bins and make zero a bin bound\":\n            // get the user's chosen number of bins and let the histogram routine know that we want the bins shifted over to zero\n            binNum = Number(plotParams['bin-number']);\n            if (isNaN(binNum)) {\n                throw new Error(\"Error parsing bin number: please enter the desired number of bins.\");\n            }\n            pivotVal = 0;\n            break;\n\n        case \"Set number of bins and choose a bin bound\":\n            // get the user's chosen number of bins and let the histogram routine know that we want the bins shifted over to whatever was input\n            binNum = Number(plotParams['bin-number']);\n            if (isNaN(binNum)) {\n                throw new Error(\"Error parsing bin number: please enter the desired number of bins.\");\n            }\n            pivotVal = Number(plotParams['bin-pivot']);\n            if (isNaN(pivotVal)) {\n                throw new Error(\"Error parsing bin pivot: please enter the desired bin pivot.\");\n            }\n            break;\n\n        case \"Manual bins\":\n            // try to parse whatever we've been given for bin bounds. Throw an error if they didn't follow directions to enter a comma-separated list of numbers.\n            try {\n                binBounds = plotParams['bin-bounds'].split(\",\").map(function (item) {\n                    item.trim();\n                    item = Number(item);\n                    if (!isNaN(item)) {\n                        return item\n                    } else {\n                        throw new Error(\"Error parsing bin bounds: please enter  at least two numbers delimited by commas.\");\n                    }\n                });\n                binNum = binBounds.length + 1; // add 1 because these are inner bin bounds\n            } catch (e) {\n                throw new Error(\"Error parsing bin bounds: please enter  at least two numbers delimited by commas.\");\n            }\n            // make sure that we've been given at least two good bin bounds (enough to make one bin).\n            if (binNum < 3) {\n                throw new Error(\"Error parsing bin bounds: please enter at least two numbers delimited by commas.\");\n            }\n            break;\n\n        case \"Manual bin start, number, and stride\":\n            // get the bin start, number, and stride.\n            binNum = Number(plotParams['bin-number']);\n            if (isNaN(binNum)) {\n                throw new Error(\"Error parsing bin number: please enter the desired number of bins.\");\n            }\n            binStart = Number(plotParams['bin-start']);\n            if (isNaN(binStart)) {\n                throw new Error(\"Error parsing bin start: please enter the desired bin start.\");\n            }\n            binStride = Number(plotParams['bin-stride']);\n            if (isNaN(binStride)) {\n                throw new Error(\"Error parsing bin stride: please enter the desired bin stride.\");\n            }\n            break;\n\n        case \"Default bins\":\n        default:\n            break;\n    }\n    return {\n        yAxisFormat: yAxisFormat,\n        binNum: binNum,\n        binStart: binStart,\n        binStride: binStride,\n        pivotVal: pivotVal,\n        binBounds: binBounds\n    };\n};\n\n// utility that takes arrays of seconds and values and produces a data structure containing bin information for histogram plotting\nconst calculateHistogramBins = function (curveSubStats, curveSubSecs, binParams) {\n\n    // binStart and binStride will only be defined if the user wants to specify the bin spacing.\n    // otherwise, we'll use the mean and standard deviation of the data to space the bins.\n\n    // pivotVal will only be defined if the user wants to shift the bin limits to align with a certain value.\n    // otherwise, we'll keep everything aligned with the data mean.\n\n    var binStats = {};\n    var binUpBounds = [];\n    var binLowBounds = [];\n    var binMeans = [];\n\n    // calculate the global stats across all of the data\n    const globalStats = get_err(curveSubStats, curveSubSecs, []);   // we don't need levels for the mean or sd calculations, so just pass in an empty array\n    const glob_mean = globalStats.d_mean;\n    const glob_sd = globalStats.sd;\n\n    var fullLowBound;\n    var fullUpBound;\n    var fullRange;\n    var binInterval;\n\n    if (binParams.binStart === undefined || binParams.binStride === undefined) {\n        // use the global stats to determine the bin bounds -- should be based on dividing up +/- 3*sd from the mean into requested number of bins\n        fullLowBound = glob_mean - 3 * glob_sd;\n        fullUpBound = glob_mean + 3 * glob_sd;\n        fullRange = 6 * glob_sd;\n        binInterval = fullRange / (binParams.binNum - 2);   // take off two bins from the total number of requested bins to represent values either less than - 3*sd from the mean or greater than 3*sd from the mean\n    } else {\n        // use the user-defined start, number, and stride to determine the bin bounds\n        fullLowBound = binParams.binStart;\n        fullUpBound = binParams.binStart + (binParams.binNum - 2) * binParams.binStride;  // take off two bins from the total number of requested bins to represent values that fall outside of the prescribed range\n        fullRange = (binParams.binNum - 2) * binParams.binStride;\n        binInterval = binParams.binStride;\n    }\n\n    // store an array of the upper and lower bounding values for each bin.\n    binUpBounds[0] = fullLowBound; // the first upper bound should be exactly - 3*sd from the mean, or the previously calculated fullLowBound\n    binLowBounds[0] = -1 * Number.MAX_VALUE;\n    binMeans[0] = fullLowBound - binInterval / 2;\n    for (var b_idx = 1; b_idx < binParams.binNum - 1; b_idx++) {\n        binUpBounds[b_idx] = binUpBounds[b_idx - 1] + binInterval; // increment from fullLowBound to get the rest of the bin upper limits\n        binLowBounds[b_idx] = binUpBounds[b_idx - 1];\n        binMeans[b_idx] = binUpBounds[b_idx - 1] + binInterval / 2;\n    }\n    binUpBounds[binParams.binNum - 1] = Number.MAX_VALUE; // the last bin should have everything too large to fit into the previous bins, so make its upper bound the max number value\n    binLowBounds[binParams.binNum - 1] = fullUpBound;\n    binMeans[binParams.binNum - 1] = fullUpBound + binInterval / 2;\n\n    if (binParams.pivotVal !== undefined && !isNaN(binParams.pivotVal)) {\n        // need to shift the bounds and means over so that one of the bounds is on the chosen pivot\n        var closestBoundToPivot = binLowBounds.reduce(function (prev, curr) {\n            return (Math.abs(curr - binParams.pivotVal) < Math.abs(prev - binParams.pivotVal) ? curr : prev);\n        });\n        binUpBounds = binUpBounds.map(function (val) {\n            return val - (closestBoundToPivot - binParams.pivotVal);\n        });\n        binLowBounds = binLowBounds.map(function (val) {\n            return val - (closestBoundToPivot - binParams.pivotVal);\n        });\n        binMeans = binMeans.map(function (val) {\n            return val - (closestBoundToPivot - binParams.pivotVal);\n        });\n    }\n\n    // calculate the labels for each bin, based on the data bounding range, for the graph x-axis later\n    var binLabels = [];\n    var lowSdFromMean;\n    var upSdFromMean;\n    for (b_idx = 0; b_idx < binParams.binNum; b_idx++) {\n        lowSdFromMean = (binLowBounds[b_idx]).toFixed(2);\n        upSdFromMean = (binUpBounds[b_idx]).toFixed(2);\n        if (b_idx === 0) {\n            binLabels[b_idx] = \"< \" + upSdFromMean;\n        } else if (b_idx === binParams.binNum - 1) {\n            binLabels[b_idx] = \"> \" + lowSdFromMean;\n        } else {\n            binLabels[b_idx] = lowSdFromMean + \"-\" + upSdFromMean;\n        }\n    }\n\n    binStats['glob_mean'] = glob_mean;\n    binStats['glob_sd'] = glob_sd;\n    binStats['binUpBounds'] = binUpBounds;\n    binStats['binLowBounds'] = binLowBounds;\n    binStats['binMeans'] = binMeans;\n    binStats['binLabels'] = binLabels;\n\n    return {'binStats': binStats};\n};\n\n// utility that takes an array of user-defined bin bounds and produces a data structure containing bin information for histogram plotting\nconst prescribeHistogramBins = function (curveSubStats, curveSubSecs, binParams) {\n\n    var binStats = {};\n\n    // calculate the global stats across all of the data\n    const globalStats = get_err(curveSubStats, curveSubSecs, []);   // we don't need levels for the mean or sd calculations, so just pass in an empty array\n    const glob_mean = globalStats.d_mean;\n    const glob_sd = globalStats.sd;\n\n    // make sure the user-defined bins are in order from least to greatest\n    binParams.binBounds = binParams.binBounds.sort(function (a, b) {\n        return Number(a) - Number(b);\n    });\n\n    // store an array of the upper and lower bounding values for each bin.\n    var binUpBounds = [];\n    var binLowBounds = [];\n    var binMeans = [];\n    var binIntervalSum = 0;\n    for (var b_idx = 1; b_idx < binParams.binNum - 1; b_idx++) {\n        binUpBounds[b_idx] = binParams.binBounds[b_idx];\n        binLowBounds[b_idx] = binParams.binBounds[b_idx - 1];\n        binMeans[b_idx] = (binUpBounds[b_idx] + binLowBounds[b_idx]) / 2;\n        binIntervalSum = binIntervalSum + (binUpBounds[b_idx] - binLowBounds[b_idx]);\n    }\n    const binIntervalAverage = binIntervalSum / (binParams.binNum - 2);\n    binUpBounds[0] = binLowBounds[1];\n    binLowBounds[0] = -1 * Number.MAX_VALUE; // the first bin should have everything too small to fit into the other bins, so make its lower bound -1 * the max number value\n    binMeans[0] = binLowBounds[1] - binIntervalAverage / 2; // the bin means for the edge bins is a little arbitrary, so base it on the average bin width\n    binUpBounds[binParams.binNum - 1] = Number.MAX_VALUE; // the last bin should have everything too large to fit into the previous bins, so make its upper bound the max number value\n    binLowBounds[binParams.binNum - 1] = binUpBounds[binParams.binNum - 2];\n    binMeans[binParams.binNum - 1] = binUpBounds[binParams.binNum - 2] + binIntervalAverage / 2; // the bin means for the edge bins is a little arbitrary, so base it on the average bin width\n\n    // calculate the labels for each bin, based on the data bounding range, for the graph x-axis later\n    var binLabels = [];\n    var lowSdFromMean;\n    var upSdFromMean;\n    for (b_idx = 0; b_idx < binParams.binNum; b_idx++) {\n        lowSdFromMean = (binLowBounds[b_idx]).toFixed(2);\n        upSdFromMean = (binUpBounds[b_idx]).toFixed(2);\n        if (b_idx === 0) {\n            binLabels[b_idx] = \"< \" + upSdFromMean;\n        } else if (b_idx === binParams.binNum - 1) {\n            binLabels[b_idx] = \"> \" + lowSdFromMean;\n        } else {\n            binLabels[b_idx] = lowSdFromMean + \"-\" + upSdFromMean;\n        }\n    }\n\n    binStats['glob_mean'] = glob_mean;\n    binStats['glob_sd'] = glob_sd;\n    binStats['binUpBounds'] = binUpBounds;\n    binStats['binLowBounds'] = binLowBounds;\n    binStats['binMeans'] = binMeans;\n    binStats['binLabels'] = binLabels;\n\n    return {'binStats': binStats};\n};\n\n// utility that takes arrays of seconds, values, and optionally levels, and produces a data structure for histogram data\n// processing. Used in the initial histogram DB query and in matching.\nconst sortHistogramBins = function (curveSubStats, curveSubSecs, curveSubLevs, binNum, masterBinStats, hasLevels, d) {\n\n    // need maps to hold the sub values and seconds (and levels) for each bin, after the bin bounds are calculated.\n    var binSubStats = {};\n    var binSubSecs = {};\n    var binSubLevs = {};\n\n    for (var b_idx = 0; b_idx < binNum; b_idx++) {\n        binSubStats[b_idx] = [];\n        binSubSecs[b_idx] = [];\n        binSubLevs[b_idx] = [];\n    }\n\n    // calculate the global stats across all of the data\n    var globalStats;\n    if (hasLevels) {\n        globalStats = get_err(curveSubStats, curveSubSecs, curveSubLevs);\n    } else {\n        globalStats = get_err(curveSubStats, curveSubSecs, []);\n    }\n    const glob_mean = globalStats.d_mean;\n    const glob_sd = globalStats.sd;\n    const glob_n = globalStats.n_good;\n    const glob_max = globalStats.maxVal;\n    const glob_min = globalStats.minVal;\n\n    // sort data into bins\n    const binUpBounds = masterBinStats.binUpBounds;\n    const binLowBounds = masterBinStats.binLowBounds;\n    const binMeans = masterBinStats.binMeans;\n    const binLabels = masterBinStats.binLabels;\n\n    for (var d_idx = 0; d_idx < curveSubStats.length; d_idx++) {\n        // iterate through all of the bins until we find one where the upper limit is greater than our datum.\n        for (b_idx = 0; b_idx < binNum; b_idx++) {\n            if (curveSubStats[d_idx] <= binUpBounds[b_idx]) {\n                binSubStats[b_idx].push(curveSubStats[d_idx]);\n                binSubSecs[b_idx].push(curveSubSecs[d_idx]);\n                if (hasLevels) {\n                    binSubLevs[b_idx].push(curveSubLevs[d_idx]);\n                }\n                break;\n            }\n        }\n    }\n\n    // calculate the statistics for each bin\n    // we are especially interested in the number of values in each bin, as that is the plotted stat in a histogram\n    var binStats;\n    var bin_mean;\n    var bin_sd;\n    var bin_n;\n    var bin_rf;\n\n    var sum = 0;\n    var count = 0;\n    for (b_idx = 0; b_idx < binNum; b_idx++) {\n        if (hasLevels) {\n            binStats = get_err(binSubStats[b_idx], binSubSecs[b_idx], binSubLevs[b_idx]);\n        } else {\n            binStats = get_err(binSubStats[b_idx], binSubSecs[b_idx], []);\n        }\n        bin_mean = binStats.d_mean;\n        bin_sd = binStats.sd;\n        bin_n = binStats.n_good;\n        bin_rf = bin_n / glob_n;\n\n        /*\n        var d = {// d will contain the curve data\n            x: [], //placeholder\n            y: [], //placeholder\n            error_x: [], // unused\n            error_y: [], // unused\n            subVals: [],\n            subSecs: [],\n            subLevs: [],\n            glob_stats: {}, // placeholder\n            bin_stats: [], // placeholder\n            text: [], //placeholder\n            xmax: Number.MIN_VALUE,\n            xmin: Number.MAX_VALUE,\n            ymax: Number.MIN_VALUE,\n            ymin: Number.MAX_VALUE\n        };\n        */\n\n        d.x.push(binMeans[b_idx]);\n        d.y.push(bin_n);\n        d.subVals.push(binSubStats[b_idx]);\n        d.subSecs.push(binSubSecs[b_idx]);\n        d.bin_stats.push({\n            'bin_mean': bin_mean,\n            'bin_sd': bin_sd,\n            'bin_n': bin_n,\n            'bin_rf': bin_rf,\n            'binLowBound': binLowBounds[b_idx],\n            'binUpBound': binUpBounds[b_idx],\n            'binLabel': binLabels[b_idx]\n        });\n        d.text.push(null);\n\n        if (hasLevels) {\n            d.subLevs.push(binSubLevs[b_idx]);\n        }\n\n        // set axis limits based on returned data\n        if (d.y[b_idx] !== null) {\n            sum = sum + d.y[b_idx];\n            count++;\n            d.ymin = d.ymin < d.y[b_idx] ? d.ymin : d.y[b_idx];\n            d.ymax = d.ymax > d.y[b_idx] ? d.ymax : d.y[b_idx];\n        }\n\n    }\n    d.glob_stats = {\n        'glob_mean': glob_mean,\n        'glob_sd': glob_sd,\n        'glob_n': glob_n,\n        'glob_max': glob_max,\n        'glob_min': glob_min\n    };\n    d.xmin = d.x[0];\n    d.xmax = d.x[binNum - 1];\n\n    return {d: d};\n};\n\n// utility that takes the curve params for two contour plots and collapses them into the curve params for one diff contour.\nconst getDiffContourCurveParams = function (curves) {\n\n    var newCurve = {};\n    const curveKeys = Object.keys(curves[0]);\n    var currKey;\n    for (var ckidx = 0; ckidx < curveKeys.length; ckidx++) {\n        currKey = curveKeys[ckidx];\n        if (currKey === 'color') {\n            newCurve['color'] = \"rgb(255,165,0)\";\n        } else if (curves[0][currKey] === curves[1][currKey]) {\n            newCurve[currKey] = curves[0][currKey];\n        } else {\n            newCurve[currKey] = curves[1][currKey] + \"-\" + curves[0][currKey];\n        }\n    }\n    return [newCurve];\n};\n\n//used for sorting arrays\nconst sortFunction = function (a, b) {\n    if (a[0] === b[0]) {\n        return 0;\n    }\n    else {\n        return (a[0] < b[0]) ? -1 : 1;\n    }\n};\n\nexport default matsDataUtils = {\n\n    areObjectsEqual: areObjectsEqual,\n    arrayContainsArray: arrayContainsArray,\n    arrayContainsSubArray: arrayContainsSubArray,\n    arraysEqual: arraysEqual,\n    arrayUnique: arrayUnique,\n    findArrayInSubArray: findArrayInSubArray,\n    objectContainsObject: objectContainsObject,\n    average: average,\n    stdev: stdev,\n    dateConvert: dateConvert,\n    getDateRange: getDateRange,\n    secsConvert: secsConvert,\n    doAuthorization: doAuthorization,\n    doColorScheme: doColorScheme,\n    doCredentials: doCredentials,\n    doRoles: doRoles,\n    doSettings: doSettings,\n    getPlotParamsFromStack: getPlotParamsFromStack,\n    get_err: get_err,\n    setHistogramParameters: setHistogramParameters,\n    calculateHistogramBins: calculateHistogramBins,\n    prescribeHistogramBins: prescribeHistogramBins,\n    sortHistogramBins: sortHistogramBins,\n    getDiffContourCurveParams: getDiffContourCurveParams,\n    sortFunction: sortFunction,\n\n}","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsDataUtils, matsTypes, matsCollections} from 'meteor/randyp:mats-common';\nimport {Meteor} from \"meteor/meteor\";\n\n//const Future = require('fibers/future');\n\n//utility to get the cadence for a particular model, so that the query function\n//knows where to include null points for missing data.\nconst getModelCadence = function (pool, dataSource, startDate, endDate) {\n    var rows = [];\n    var cycles;\n    try {\n        //this query should only return data if the model cadence is irregular.\n        //otherwise, the cadence will be calculated later by the query function.\n        rows = simplePoolQueryWrapSynchronous(pool, \"select cycle_seconds \" +\n            \"from mats_common.primary_model_orders \" +\n            \"where model = \" +\n            \"(select new_model as display_text from mats_common.standardized_model_list where old_model = '\" + dataSource + \"');\");\n        var cycles_raw = JSON.parse(rows[0].cycle_seconds);\n        var cycles_keys = Object.keys(cycles_raw).sort();\n        //there can be difference cadences for different time periods (each time period is a key in cycles_keys,\n        //with the cadences for that period represented as values in cycles_raw), so this section identifies all\n        //time periods relevant to the requested date range, and returns the union of their cadences.\n        if (cycles_keys.length !== 0) {\n            var newTime;\n            var chosenStartTime;\n            var chosenEndTime;\n            var chosenStartIdx;\n            var chosenEndIdx;\n            var foundStart = false;\n            var foundEnd = false;\n            for (var ti = cycles_keys.length - 1; ti >= 0; ti--) {\n                newTime = cycles_keys[ti];\n                if (startDate >= Number(newTime) && !foundStart) {\n                    chosenStartTime = newTime;\n                    chosenStartIdx = ti;\n                    foundStart = true;\n                }\n                if (endDate >= Number(newTime) && !foundEnd) {\n                    chosenEndTime = newTime;\n                    chosenEndIdx = ti;\n                    foundEnd = true;\n                }\n                if (foundStart && foundEnd) {\n                    break;\n                }\n            }\n            if (chosenStartTime !== undefined && chosenEndTime !== undefined) {\n                if (Number(chosenStartTime) === Number(chosenEndTime)) {\n                    cycles = cycles_raw[chosenStartTime];\n                } else if (chosenEndIdx - chosenStartIdx === 1) {\n                    const startCycles = cycles_raw[chosenStartTime];\n                    const endCycles = cycles_raw[chosenEndTime];\n                    cycles = _.union(startCycles, endCycles);\n                } else {\n                    var middleCycles = [];\n                    var currCycles;\n                    for (ti = chosenStartIdx + 1; ti < chosenEndIdx; ti++) {\n                        currCycles = cycles_raw[cycles_keys[ti]];\n                        middleCycles = _.union(middleCycles, currCycles);\n                    }\n                    const startCycles = cycles_raw[chosenStartTime];\n                    const endCycles = cycles_raw[chosenEndTime];\n                    cycles = _.union(startCycles, endCycles, middleCycles);\n                }\n            }\n        }\n    } catch (e) {\n        //ignore - just a safety check, don't want to exit if there isn't a cycles_per_model entry\n        //if there isn't a cycles_per_model entry, it just means that the model has a regular cadence\n    }\n    if (cycles !== null && cycles !== undefined && cycles.length > 0) {\n        for (var c = 0; c < cycles.length; c++) {\n            cycles[c] = cycles[c] * 1000;         // convert to milliseconds\n        }\n    } else {\n        cycles = []; //regular cadence model--cycles will be calculated later by the query function\n    }\n    return cycles;\n};\n\n//this function calculates the interval between the current time and the next time for irregular cadence models.\nconst getTimeInterval = function (avTime, time_interval, foreCastOffset, cycles) {\n    //have to calculate the time_interval\n    var ti;\n    var dayInMilliSeconds = 24 * 3600 * 1000;\n    var minCycleTime = Math.min(...cycles);\n\n    var thisCadence = (avTime % dayInMilliSeconds); //current hour of day (valid time)\n    if (Number(thisCadence) - (Number(foreCastOffset) * 3600 * 1000) < 0) { //check to see if cycle time was on previous day -- if so, need to wrap around 00Z to get current hour of day (cycle time)\n        thisCadence = (Number(thisCadence) - (Number(foreCastOffset) * 3600 * 1000) + dayInMilliSeconds); //current hour of day (cycle time)\n    } else {\n        thisCadence = (Number(thisCadence) - (Number(foreCastOffset) * 3600 * 1000)); //current hour of day (cycle time)\n    }\n\n    var thisCadenceIdx = cycles.indexOf(thisCadence); //fnd our where the current hour of day is in the cycles array\n    if (thisCadenceIdx !== -1) {\n        var nextCadenceIdx = thisCadenceIdx + 1; //choose the next hour of the day\n        if (nextCadenceIdx >= cycles.length) {\n            ti = (dayInMilliSeconds - thisCadence) + minCycleTime; //if we were at the last cycle cadence, wrap back around to the first cycle cadence\n        } else {\n            ti = cycles[nextCadenceIdx] - cycles[thisCadenceIdx]; //otherwise take the difference between the current and next hours of the day.\n        }\n    } else {\n        ti = time_interval; //if for some reason the current hour of the day isn't in the cycles array, default to the regular cadence interval\n    }\n\n    return ti;\n};\n\n//utility for querying the DB\nconst simplePoolQueryWrapSynchronous = function (pool, statement) {\n    /*\n     simple synchronous query of statement to the specified pool.\n     params :\n     pool - a predefined db pool (usually defined in main.js). i.e. wfip2Pool = mysql.createPool(wfip2Settings);\n     statement - String - a valid sql statement\n     actions - queries database and will wait until query returns.\n     return: rowset - an array of rows\n     throws: error\n     */\n    if (Meteor.isServer) {\n        const Future = require('fibers/future');\n        const queryWrap = Future.wrap(function (pool, statement, callback) {\n            pool.query(statement, function (err, rows) {\n                return callback(err, rows);\n            });\n        });\n        return queryWrap(pool, statement).wait();\n    }\n};\n\n//this method queries the database for timeseries plots\nconst queryDBTimeSeries = function (pool, statement, dataSource, forecastOffset, startDate, endDate, averageStr, validTimes, hasLevels, forceRegularCadence) {\n    //upper air is only verified at 00Z and 12Z, so you need to force irregular models to verify at that regular cadence\n    const Future = require('fibers/future');\n    if (Meteor.isServer) {\n        const plotParams = matsDataUtils.getPlotParamsFromStack();\n        const completenessQCParam = Number(plotParams[\"completeness\"]) / 100;\n\n        var cycles = getModelCadence(pool, dataSource, startDate, endDate); // if irregular model cadence, get cycle times. If regular, get empty array.\n        if (validTimes.length > 0 && validTimes !== matsTypes.InputTypes.unused) {\n            var vtCycles = validTimes.map(function (x) {\n                return (Number(x) - forecastOffset) * 3600 * 1000;\n            }); // selecting validTimes makes the cadence irregular\n            vtCycles = vtCycles.map(function (x) {\n                return x < 0 ? (x + 24 * 3600 * 1000) : x;\n            }); // make sure no cycles are negative\n            vtCycles = vtCycles.sort(function (a, b) {\n                return Number(a) - Number(b);\n            }); //sort 'em\n            cycles = cycles.length > 0 ? _.intersection(cycles, vtCycles) : vtCycles; // if we already had cycles get the ones that correspond to valid times\n        }\n        const regular = (forceRegularCadence || averageStr !== \"None\" || !(cycles !== null && cycles.length > 0)); // If curves have averaging, the cadence is always regular, i.e. it's the cadence of the average\n\n        var dFuture = new Future();\n        var d = {// d will contain the curve data\n            x: [],\n            y: [],\n            error_x: [],\n            error_y: [],\n            subVals: [],\n            subSecs: [],\n            subLevs: [],\n            stats: [],\n            text: [],\n            xmin: Number.MAX_VALUE,\n            xmax: Number.MIN_VALUE,\n            ymin: Number.MAX_VALUE,\n            ymax: Number.MIN_VALUE,\n            sum: 0\n        };\n        var error = \"\";\n        var N0 = [];\n        var N_times = [];\n\n        pool.query(statement, function (err, rows) {\n            // query callback - build the curve data from the results - or set an error\n            if (err !== undefined && err !== null) {\n                error = err.message;\n            } else if (rows === undefined || rows === null || rows.length === 0) {\n                error = matsTypes.Messages.NO_DATA_FOUND;\n            } else {\n                const parsedData = parseQueryDataTimeSeries(pool, rows, d, completenessQCParam, hasLevels, averageStr, forecastOffset, cycles, regular);\n                d = parsedData.d;\n                N0 = parsedData.N0;\n                N_times = parsedData.N_times;\n                cycles = parsedData.cycles;\n            }\n            // done waiting - have results\n            dFuture['return']();\n        });\n\n        // wait for future to finish\n        dFuture.wait();\n        return {\n            data: d,\n            error: error,\n            N0: N0,\n            N_times: N_times,\n            averageStr: averageStr,\n            cycles: cycles,\n        };\n    }\n};\n\n//this method queries the database for specialty curves such as profiles, dieoffs, threshold plots, valid time plots, and histograms\nconst queryDBSpecialtyCurve = function (pool, statement, plotType, hasLevels) {\n    if (Meteor.isServer) {\n        const Future = require('fibers/future');\n        const plotParams = matsDataUtils.getPlotParamsFromStack();\n        const completenessQCParam = Number(plotParams[\"completeness\"]) / 100;\n        const appType = matsCollections.Settings.findOne({}).appType;\n\n        var dFuture = new Future();\n        var d = {// d will contain the curve data\n            x: [],\n            y: [],\n            error_x: [],\n            error_y: [],\n            subVals: [],\n            subSecs: [],\n            subLevs: [],\n            stats: [],\n            text: [],\n            xmin: Number.MAX_VALUE,\n            xmax: Number.MIN_VALUE,\n            ymin: Number.MAX_VALUE,\n            ymax: Number.MIN_VALUE,\n            sum: 0\n        };\n\n        var error = \"\";\n        var N0 = [];\n        var N_times = [];\n\n        pool.query(statement, function (err, rows) {\n            // query callback - build the curve data from the results - or set an error\n            if (err !== undefined && err !== null) {\n                error = err.message;\n            } else if (rows === undefined || rows === null || rows.length === 0) {\n                error = matsTypes.Messages.NO_DATA_FOUND;\n            } else {\n                var parsedData;\n                if (plotType !== matsTypes.PlotTypes.histogram) {\n                    parsedData = parseQueryDataSpecialtyCurve(rows, d, completenessQCParam, plotType, appType, hasLevels);\n                } else {\n                    parsedData = parseQueryDataHistogram(d, rows, hasLevels);\n                }\n                d = parsedData.d;\n                N0 = parsedData.N0;\n                N_times = parsedData.N_times;\n            }\n            dFuture['return']();\n        });\n\n        // wait for future to finish\n        dFuture.wait();\n        return {\n            data: d,\n            error: error,\n            N0: N0,\n            N_times: N_times,\n        };\n    }\n};\n\n//this method queries the database for map plots\nconst queryMapDB = function (pool, statement, dataSource, variable, varUnits, siteMap) {\n    if (Meteor.isServer) {\n        // d will contain the curve data\n        var d = {\n            siteName: [],\n            queryVal: [],\n            lat: [],\n            lon: [],\n            color: [],\n            stats: [],\n            text: []\n        };\n        // for biases <= -1\n        var dBlue = {\n            siteName: [],\n            queryVal: [],\n            lat: [],\n            lon: [],\n            stats: [],\n            text: [],\n            color: \"rgb(0,0,255)\"\n        };\n        // for biases > -1 and < 1\n        var dBlack = {\n            siteName: [],\n            queryVal: [],\n            lat: [],\n            lon: [],\n            stats: [],\n            text: [],\n            color: \"rgb(0,0,0)\"\n        };\n        // for biases >= 1\n        var dRed = {\n            siteName: [],\n            queryVal: [],\n            lat: [],\n            lon: [],\n            stats: [],\n            text: [],\n            color: \"rgb(255,0,0)\"\n        };\n\n        var error = \"\";\n        const Future = require('fibers/future');\n        var pFuture = new Future();\n        pool.query(statement, function (err, rows) {\n            // query callback - build the curve data from the results - or set an error\n            if (err !== undefined && err !== null) {\n                error = err.message;\n            } else if (rows === undefined || rows === null || rows.length === 0) {\n                error = matsTypes.Messages.NO_DATA_FOUND;\n            } else {\n                var queryVal;\n                for (var rowIndex = 0; rowIndex < rows.length; rowIndex++) {\n                    const site = rows[rowIndex].sta_name;\n                    queryVal = rows[rowIndex].model_ob_diff;\n                    d.siteName.push(site);\n                    d.queryVal.push(queryVal);\n                    d.stats.push({\n                        N_times: rows[rowIndex].N_times,\n                        min_time: rows[rowIndex].min_time,\n                        max_time: rows[rowIndex].max_time\n                    });\n                    var tooltips = site +\n                        \"<br>\" + \"variable: \" + variable +\n                        \"<br>\" + \"model: \" + dataSource +\n                        \"<br>\" + \"model-obs: \" + queryVal + \" \" + varUnits +\n                        \"<br>\" + \"n: \" + rows[rowIndex].N_times;\n                    d.text.push(tooltips);\n\n                    var thisSite = siteMap.find(obj => {\n                        return obj.name === site;\n                    });\n                    d.lat.push(thisSite.point[0]);\n                    d.lon.push(thisSite.point[1]);\n\n                    var textMarker = queryVal === null ? \"\" : queryVal.toFixed(0);\n                    if (queryVal <= -1) {\n                        d.color.push(\"rgb(0,0,255)\");\n                        dBlue.siteName.push(site);\n                        dBlue.queryVal.push(queryVal);\n                        dBlue.text.push(textMarker);\n                        dBlue.lat.push(thisSite.point[0]);\n                        dBlue.lon.push(thisSite.point[1]);\n                    } else if (queryVal >= 1) {\n                        d.color.push(\"rgb(255,0,0)\");\n                        dRed.siteName.push(site);\n                        dRed.queryVal.push(queryVal);\n                        dRed.text.push(textMarker);\n                        dRed.lat.push(thisSite.point[0]);\n                        dRed.lon.push(thisSite.point[1]);\n                    } else {\n                        d.color.push(\"rgb(0,0,0)\");\n                        dBlack.siteName.push(site);\n                        dBlack.queryVal.push(queryVal);\n                        dBlack.text.push(textMarker);\n                        dBlack.lat.push(thisSite.point[0]);\n                        dBlack.lon.push(thisSite.point[1]);\n                    }\n                }// end of loop row\n            }\n            // done waiting - have results\n            pFuture['return']();\n        });\n\n        // wait for future to finish\n        pFuture.wait();\n        return {\n            data: d,    // [sub_values,sub_secs] as arrays\n            dataBlue: dBlue,    // [sub_values,sub_secs] as arrays\n            dataBlack: dBlack,    // [sub_values,sub_secs] as arrays\n            dataRed: dRed,    // [sub_values,sub_secs] as arrays\n            error: error,\n        };\n    }\n};\n\n//this method queries the database for contour plots\nconst queryDBContour = function (pool, statement) {\n    if (Meteor.isServer) {\n        const Future = require('fibers/future');\n\n        var dFuture = new Future();\n        var d = {// d will contain the curve data\n            x: [],\n            y: [],\n            z: [],\n            n: [],\n            text: [],\n            xTextOutput: [],\n            yTextOutput: [],\n            zTextOutput: [],\n            nTextOutput: [],\n            minDateTextOutput: [],\n            maxDateTextOutput: [],\n            stats: [],\n            glob_stats: {},\n            xmin: Number.MAX_VALUE,\n            xmax: Number.MIN_VALUE,\n            ymin: Number.MAX_VALUE,\n            ymax: Number.MIN_VALUE,\n            zmin: Number.MAX_VALUE,\n            zmax: Number.MIN_VALUE,\n            sum: 0\n        };\n\n        var error = \"\";\n        pool.query(statement, function (err, rows) {\n            // query callback - build the curve data from the results - or set an error\n            if (err !== undefined && err !== null) {\n                error = err.message;\n            } else if (rows === undefined || rows === null || rows.length === 0) {\n                error = matsTypes.Messages.NO_DATA_FOUND;\n            } else {\n                const parsedData = parseQueryDataContour(rows, d);\n                d = parsedData.d;\n            }\n            dFuture['return']();\n        });\n\n        // wait for future to finish\n        dFuture.wait();\n        return {\n            data: d,\n            error: error\n        };\n    }\n};\n\n//this method parses the returned query data for timeseries plots\nconst parseQueryDataTimeSeries = function (pool, rows, d, completenessQCParam, hasLevels, averageStr, foreCastOffset, cycles, regular) {\n    /*\n        var d = {// d will contain the curve data\n            x: [],\n            y: [],\n            error_x: [],   // curveTime\n            error_y: [],   // values\n            subVals: [],   //subVals\n            subSecs: [],   //subSecs\n            subLevs: [],   //subLevs\n            stats: [],     //pointStats\n            text: [],\n            glob_stats: {},     //curveStats\n            xmin: Number.MAX_VALUE,\n            xmax: Number.MIN_VALUE,\n            ymin: Number.MAX_VALUE,\n            ymax: Number.MIN_VALUE,\n            sum: 0\n        };\n    */\n    d.error_x = null;  // time series doesn't use x errorbars\n    var N0 = [];\n    var N_times = [];\n    var xmax = Number.MIN_VALUE;\n    var xmin = Number.MAX_VALUE;\n\n    var curveTime = [];\n    var curveStats = [];\n    var subVals = [];\n    var subSecs = [];\n    var subLevs = [];\n\n    var time_interval = rows.length > 1 ? Number(rows[1].avtime) - Number(rows[0].avtime) : undefined; //calculate a base time interval -- will be used if data is regular\n    for (var rowIndex = 0; rowIndex < rows.length; rowIndex++) {\n\n        var avSeconds = Number(rows[rowIndex].avtime);\n        var avTime = avSeconds * 1000;\n        xmin = avTime < xmin ? avTime : xmin;\n        xmax = avTime > xmax ? avTime : xmax;\n        var stat = rows[rowIndex].stat;\n        N0.push(rows[rowIndex].N0);             // number of values that go into a time series point\n        N_times.push(rows[rowIndex].N_times);   // number of times that go into a time series point\n\n        // find the minimum time_interval. For regular models, this will differ from the previous time_interval\n        // if the interval was artificially large due to missing values. For irregular models, we need the minimum\n        // interval to be sure we don't accidentally go past the next data point.\n        if (rowIndex < rows.length - 1) {\n            var time_diff = Number(rows[rowIndex + 1].avtime) - Number(rows[rowIndex].avtime);\n            if (time_diff < time_interval) {\n                time_interval = time_diff;\n            }\n        }\n\n        // store sub values that will later be used for calculating error bar statistics.\n        var sub_values = [];\n        var sub_secs = [];\n        var sub_levs = [];\n        if (stat !== null && stat !== \"NULL\" && rows[rowIndex].sub_data !== undefined) {\n            try {\n                var sub_data = rows[rowIndex].sub_data.toString().split(',');\n                var curr_sub_data;\n                for (var sd_idx = 0; sd_idx < sub_data.length; sd_idx++) {\n                    curr_sub_data = sub_data[sd_idx].split(';');\n                    sub_values.push(Number(curr_sub_data[0]));\n                    sub_secs.push(Number(curr_sub_data[1]));\n                    if (hasLevels) {\n                        if (!isNaN(Number(curr_sub_data[2]))) {\n                            sub_levs.push(Number(curr_sub_data[2]));\n                        } else {\n                            sub_levs.push(curr_sub_data[2]);\n                        }\n                    }\n                }\n            } catch (e) {\n                // this is an error produced by a bug in the query function, not an error returned by the mysql database\n                e.message = \"Error in parseQueryDataTimeSeries. The expected fields don't seem to be present in the results cache: \" + e.message;\n                throw new Error(e.message);\n            }\n        } else {\n            sub_values = NaN;\n            sub_secs = NaN;\n            if (hasLevels) {\n                sub_levs = NaN;\n            }\n        }\n        curveTime.push(avTime);\n        curveStats.push(stat);\n        subVals.push(sub_values);\n        subSecs.push(sub_secs);\n        if (hasLevels) {\n            subLevs.push(sub_levs);\n        }\n    }\n\n    var N0_max = Math.max(...N0);\n    var N_times_max = Math.max(...N_times);\n\n    if (xmin < Number(rows[0].avtime) * 1000 || averageStr !== \"None\") {\n        xmin = Number(rows[0].avtime) * 1000;\n    }\n\n    time_interval = time_interval * 1000;\n    var loopTime = xmin;\n    var sum = 0;\n    while (loopTime <= xmax) {\n        var d_idx = curveTime.indexOf(loopTime);\n        if (d_idx < 0) {\n            if (hasLevels) {\n                //d.push([loopTime, null, -1, NaN, NaN, NaN]);// add a null for missing data\n                d.x.push(loopTime);\n                d.y.push(null);\n                //d.error_x not used\n                d.error_y.push(null);   //placeholder\n                d.subVals.push(NaN);\n                d.subSecs.push(NaN);\n                d.subLevs.push(NaN);\n            } else {\n                //d.push([loopTime, null, -1, NaN, NaN]);     // add a null for missing data\n                d.x.push(loopTime);\n                d.y.push(null);\n                //d.error_x not used\n                d.error_y.push(null); //placeholder\n                d.subVals.push(NaN);\n                d.subSecs.push(NaN);\n            }\n        } else {\n            var this_N0 = N0[d_idx];\n            var this_N_times = N_times[d_idx];\n            // Make sure that we don't have any points with far less data than the rest of the graph, and that\n            // we don't have any points with a smaller completeness value than specified by the user.\n            if (this_N0 < 0.1 * N0_max || this_N_times < completenessQCParam * N_times_max) {\n                if (hasLevels) {\n//                    d.push([loopTime, null, -1, NaN, NaN, NaN]);     // add a null if this time doesn't pass QC\n                    d.x.push(loopTime);\n                    d.y.push(null);\n                    //d.error_x not used\n                    d.error_y.push(null); //placeholder\n                    d.subVals.push(NaN);\n                    d.subSecs.push(NaN);\n                    d.subLevs.push(NaN);\n                } else {\n//                    d.push([loopTime, null, -1, NaN, NaN]);     // add a null if this time doesn't pass QC\n                    d.x.push(loopTime);\n                    d.y.push(null);\n                    //d.error_x not used\n                    d.error_y.push(null); //placeholder\n                    d.subVals.push(NaN);\n                    d.subSecs.push(NaN);\n                }\n            } else {\n                sum += curveStats[d_idx];\n                if (hasLevels) {\n                    //d.push([loopTime, curveStats[d_idx], -1, subVals[d_idx], subSecs[d_idx], subLevs[d_idx]]);   // else add the real data\n                    d.x.push(loopTime);\n                    d.y.push(curveStats[d_idx]);\n                    //d.error_x not used\n                    d.error_y.push(null);\n                    d.subVals.push(subVals[d_idx]);\n                    d.subSecs.push(subSecs[d_idx]);\n                    d.subLevs.push(subLevs[d_idx]);\n                } else {\n                    //d.push([loopTime, curveStats[d_idx], -1, subVals[d_idx], subSecs[d_idx]]);   // else add the real data\n                    d.x.push(loopTime);\n                    d.y.push(curveStats[d_idx]);\n                    //d.error_x not used\n                    d.error_y.push(null);\n                    d.subVals.push(subVals[d_idx]);\n                    d.subSecs.push(subSecs[d_idx]);\n                }\n            }\n        }\n        if (!regular) {  // it is a model that has an irregular set of intervals, i.e. an irregular cadence\n            time_interval = getTimeInterval(loopTime, time_interval, foreCastOffset, cycles);   // the time interval most likely will not be the one calculated above\n        }\n        loopTime = loopTime + time_interval;    // advance to the next time.\n    }\n    if (regular) {\n        cycles = [time_interval];   // regular models will return one cycle cadence\n    }\n    const filteredx = d.x.filter(x => x);\n    const filteredy = d.y.filter(y => y);\n    d.xmin = Math.min(...filteredx);\n    d.xmax = Math.max(...filteredx);\n    d.ymin = Math.min(...filteredy);\n    d.ymax = Math.max(...filteredy);\n    d.sum = sum;\n\n    if (d.xmin == \"-Infinity\" || (d.x.indexOf(0) !== -1 && 0 < d.xmin)) {\n        d.xmin = 0;\n    }\n    if (d.ymin == \"-Infinity\" || (d.y.indexOf(0) !== -1 && 0 < d.ymin)) {\n        d.ymin = 0;\n    }\n\n    if (d.xmax == \"-Infinity\") {\n        d.xmax = 0;\n    }\n    if (d.ymax == \"-Infinity\") {\n        d.ymax = 0;\n    }\n    return {\n        d: d,\n        N0: N0,\n        N_times: N_times,\n        cycles: cycles\n    };\n};\n\n//this method parses the returned query data for specialty curves such as profiles, dieoffs, threshold plots, and valid time plots\nconst parseQueryDataSpecialtyCurve = function (rows, d, completenessQCParam, plotType, appType, hasLevels) {\n    /*\n        var d = {// d will contain the curve data\n            x: [],\n            y: [],\n            error_x: [],   // curveTime\n            error_y: [],   // values\n            subVals: [],   //subVals\n            subSecs: [],   //subSecs\n            subLevs: [],   //subLevs\n            stats: [],     //pointStats\n            text: [],\n            glob_stats: {},     //curveStats\n            xmin:num,\n            ymin:num,\n            xmax:num,\n            ymax:num,\n            sum:num;\n        };\n    */\n    var N0 = [];\n    var N_times = [];\n    var curveIndependentVars = [];\n    var curveStats = [];\n    var subVals = [];\n    var subSecs = [];\n    var subLevs = [];\n    for (var rowIndex = 0; rowIndex < rows.length; rowIndex++) {\n        var independentVar;\n        if (plotType === matsTypes.PlotTypes.validtime) {\n            independentVar = Number(rows[rowIndex].hr_of_day);\n        } else if (plotType === matsTypes.PlotTypes.profile) {\n            independentVar = Number((rows[rowIndex].avVal).toString().replace('P', ''));\n        } else if (plotType === matsTypes.PlotTypes.dailyModelCycle) {\n            independentVar = Number(rows[rowIndex].avtime) * 1000;\n        } else {\n            independentVar = Number(rows[rowIndex].avtime);\n        }\n\n        var stat = rows[rowIndex].stat;\n        N0.push(rows[rowIndex].N0);             // number of values that go into a point on the graph\n        N_times.push(rows[rowIndex].N_times);   // number of times that go into a point on the graph\n\n        var sub_stats = [];\n        var sub_secs = [];\n        var sub_levs = [];\n        if (stat !== null && stat !== \"NULL\" && rows[rowIndex].sub_data !== undefined) {\n            try {\n                var sub_data = rows[rowIndex].sub_data.toString().split(',');\n                var curr_sub_data;\n                for (var sd_idx = 0; sd_idx < sub_data.length; sd_idx++) {\n                    curr_sub_data = sub_data[sd_idx].split(';');\n                    sub_stats.push(Number(curr_sub_data[0]));\n                    sub_secs.push(Number(curr_sub_data[1]));\n                    if (hasLevels) {\n                        if (!isNaN(Number(curr_sub_data[2]))) {\n                            sub_levs.push(Number(curr_sub_data[2]));\n                        } else {\n                            sub_levs.push(curr_sub_data[2]);\n                        }\n                    }\n                }\n            } catch (e) {\n                // this is an error produced by a bug in the query function, not an error returned by the mysql database\n                e.message = \"Error in parseQueryDataSpecialtyCurve. The expected fields don't seem to be present in the results cache: \" + e.message;\n                throw new Error(e.message);\n            }\n        } else {\n            sub_stats = NaN;\n            sub_secs = NaN;\n            if (hasLevels) {\n                sub_levs = NaN;\n            }\n        }\n\n        // deal with missing forecast cycles for dailyModelCycle plot type\n        if (plotType === matsTypes.PlotTypes.dailyModelCycle && rowIndex > 0 && (Number(independentVar) - Number(rows[rowIndex - 1].avtime * 1000)) > 3600 * 24 * 1000) {\n            const cycles_missing = Math.floor((Number(independentVar) - Number(rows[rowIndex - 1].avtime * 1000)) / (3600 * 24 * 1000));\n            for (var missingIdx = cycles_missing; missingIdx > 0; missingIdx--) {\n                curveIndependentVars.push(independentVar - 3600 * 24 * 1000 * missingIdx);\n                curveStats.push(null);\n                subVals.push(NaN);\n                subSecs.push(NaN);\n                if (hasLevels) {\n                    subLevs.push(NaN);\n                }\n            }\n        }\n        curveIndependentVars.push(independentVar);\n        curveStats.push(stat);\n        subVals.push(sub_stats);\n        subSecs.push(sub_secs);\n        if (hasLevels) {\n            subLevs.push(sub_levs);\n        }\n    }\n    var N0_max = Math.max(...N0);\n    var N_times_max = Math.max(...N_times);\n    var sum = 0;\n    for (var d_idx = 0; d_idx < curveIndependentVars.length; d_idx++) {\n        var this_N0 = N0[d_idx];\n        var this_N_times = N_times[d_idx];\n        // Make sure that we don't have any points with far less data than the rest of the graph, and that\n        // we don't have any points with a smaller completeness value than specified by the user.\n        if (this_N0 < 0.05 * N0_max || this_N_times < completenessQCParam * N_times_max) {\n            if (plotType === matsTypes.PlotTypes.profile) {\n                // profile has the stat first, and then the independent var. The others have independent var and then stat.\n                // this is in the pattern of x-plotted-variable, y-plotted-variable.\n                //d.push([null, curveIndependentVars[d_idx], -1, NaN, NaN, NaN]);\n                d.x.push(null);\n                d.y.push(curveIndependentVars[d_idx]);\n                d.error_x.push(null);  // placeholder\n                //d.error_y not used for profile\n                d.subVals.push(NaN);\n                d.subSecs.push(NaN);\n                d.subLevs.push(NaN);\n            } else if (plotType !== matsTypes.PlotTypes.dieoff) {\n                // for dieoffs, we don't want to add a null for missing data. Just don't have a point for that FHR.\n                if (hasLevels) {\n                    //d.push([curveIndependentVars[d_idx], null, -1, NaN, NaN, NaN]);\n                    d.x.push(curveIndependentVars[d_idx]);\n                    d.y.push(null);\n                    //d.error_x not used for curves other than profile\n                    d.error_y.push(null);  // placeholder\n                    d.subVals.push(NaN);\n                    d.subSecs.push(NaN);\n                    d.subLevs.push(NaN);\n                } else {\n                    //d.push([curveIndependentVars[d_idx], null, -1, NaN, NaN]);\n                    d.x.push(curveIndependentVars[d_idx]);\n                    d.y.push(null);\n                    //d.error_x not used for curves other than profile\n                    d.error_y.push(null);  // placeholder\n                    d.subVals.push(NaN);\n                    d.subSecs.push(NaN);\n                }\n            }\n        } else {\n            // else add the real data\n            sum += curveStats[d_idx];\n            if (plotType === matsTypes.PlotTypes.profile) {\n                // profile has the stat first, and then the independent var. The others have independent var and then stat.\n                // this is in the pattern of x-plotted-variable, y-plotted-variable.\n//                d.push([curveStats[d_idx], curveIndependentVars[d_idx], -1, subVals[d_idx], subSecs[d_idx], subLevs[d_idx]]);\n                d.x.push(curveStats[d_idx]);\n                d.y.push(curveIndependentVars[d_idx]);\n                d.error_x.push(null); // placeholder\n                //d.error_y not used for curves other than profile\n                d.subVals.push(subVals[d_idx]);\n                d.subSecs.push(subSecs[d_idx]);\n                d.subLevs.push(subLevs[d_idx]);\n            } else if (hasLevels) {\n//                d.push([curveIndependentVars[d_idx], curveStats[d_idx], -1, subVals[d_idx], subSecs[d_idx], subLevs[d_idx]]);\n                d.x.push(curveIndependentVars[d_idx]);\n                d.y.push(curveStats[d_idx]);\n                //d.error_x not used for curves other than profile\n                d.error_y.push(null);  // placeholder\n                d.subVals.push(subVals[d_idx]);\n                d.subSecs.push(subSecs[d_idx]);\n                d.subLevs.push(subLevs[d_idx]);\n            } else {\n//                d.push([curveIndependentVars[d_idx], curveStats[d_idx], -1, subVals[d_idx], subSecs[d_idx]]);\n                d.x.push(curveIndependentVars[d_idx]);\n                d.y.push(curveStats[d_idx]);\n                //d.error_x not used for curves other than profile\n                d.error_y.push(null);  // placeholder\n                d.subVals.push(subVals[d_idx]);\n                d.subSecs.push(subSecs[d_idx]);\n            }\n        }\n    }\n\n    // the met levels are ordered as strings, so we need to re-sort them\n    if (plotType === matsTypes.PlotTypes.profile && appType === matsTypes.AppTypes.metexpress) {\n        var dSorted = [];\n        for (var didx = 0; didx < d.y.length; didx++) {\n            dSorted.push({\n                y: d.y[didx],\n                x: d.x[didx],\n                error_x: d.error_x[didx],\n                subVals: d.subVals[didx],\n                subSecs: d.subSecs[didx],\n                subLevs: d.subLevs[didx]\n            });\n        }\n        d.y = [];\n        d.x = [];\n        d.error_x = [];\n        d.subVals = [];\n        d.subSecs = [];\n        d.subLevs = [];\n        dSorted.sort(function(a,b) { return a.y - b.y; });\n        dSorted.map(function (elem) {\n            d.y.push(elem.y);\n            d.x.push(elem.x);\n            d.error_x.push(elem.error_x);\n            d.subVals.push(elem.subVals);\n            d.subSecs.push(elem.subSecs);\n            d.subLevs.push(elem.subLevs);\n        });\n    }\n\n    const filteredx = d.x.filter(x => x);\n    const filteredy = d.y.filter(y => y);\n    d.xmin = Math.min(...filteredx);\n    d.xmax = Math.max(...filteredx);\n    d.ymin = Math.min(...filteredy);\n    d.ymax = Math.max(...filteredy);\n    d.sum = sum;\n\n    if (d.xmin == \"-Infinity\" || (d.x.indexOf(0) !== -1 && 0 < d.xmin)) {\n        d.xmin = 0;\n    }\n    if (d.ymin == \"-Infinity\" || (d.y.indexOf(0) !== -1 && 0 < d.ymin)) {\n        d.ymin = 0;\n    }\n\n    if (d.xmax == \"-Infinity\") {\n        d.xmax = 0;\n    }\n    if (d.ymax == \"-Infinity\") {\n        d.ymax = 0;\n    }\n\n    return {\n        d: d,\n        N0: N0,\n        N_times: N_times\n    };\n};\n\n// this method parses the returned query data for histograms\nconst parseQueryDataHistogram = function (d, rows, hasLevels) {\n    /*\n        var d = {// d will contain the curve data\n            x: [], //placeholder\n            y: [], //placeholder\n            error_x: [], // unused\n            error_y: [], // unused\n            subVals: [],\n            subSecs: [],\n            subLevs: [],\n            glob_stats: [], // placeholder\n            bin_stats: [], // placeholder\n            text: [] //placeholder\n            xmin:num,\n            xmax:num,\n            ymin:num,\n            ymax:num\n        };\n    */\n\n    // these arrays hold all the sub values and seconds (and levels) until they are sorted into bins\n    var curveSubStatsRaw = [];\n    var curveSubSecsRaw = [];\n    var curveSubLevsRaw = [];\n\n    // parse the data returned from the query\n    for (var rowIndex = 0; rowIndex < rows.length; rowIndex++) {\n\n        var stat = rows[rowIndex].stat;\n        var sub_stats = [];\n        var sub_secs = [];\n        var sub_levs = [];\n        if (stat !== null && stat !== \"NULL\" && rows[rowIndex].sub_data !== undefined) {\n            try {\n                var sub_data = rows[rowIndex].sub_data.toString().split(',');\n                var curr_sub_data;\n                for (var sd_idx = 0; sd_idx < sub_data.length; sd_idx++) {\n                    curr_sub_data = sub_data[sd_idx].split(';');\n                    sub_stats.push(Number(curr_sub_data[0]));\n                    sub_secs.push(Number(curr_sub_data[1]));\n                    if (hasLevels) {\n                            if (!isNaN(Number(curr_sub_data[2]))) {\n                                sub_levs.push(Number(curr_sub_data[2]));\n                            } else {\n                                sub_levs.push(curr_sub_data[2]);\n                            }\n                        }\n                        curveSubLevsRaw.push(sub_levs);\n                    }\n                curveSubStatsRaw.push(sub_stats);\n                curveSubSecsRaw.push(sub_secs);\n            } catch (e) {\n                // this is an error produced by a bug in the query function, not an error returned by the mysql database\n                e.message = \"Error in parseQueryDataHistogram. The expected fields don't seem to be present in the results cache: \" + e.message;\n                throw new Error(e.message);\n            }\n        }\n    }\n\n    // we don't have bins yet, so we want all of the data in one array\n    const subVals = [].concat.apply([], curveSubStatsRaw);\n    const subSecs = [].concat.apply([], curveSubSecsRaw);\n    var subLevs;\n    if (hasLevels) {\n        subLevs = [].concat.apply([], curveSubLevsRaw);\n    }\n\n    d.subVals = subVals;\n    d.subSecs = subSecs;\n    d.subLevs = subLevs;\n\n    return {\n        d: d,\n        N0: subVals.length,\n        N_times: subSecs.length\n    };\n};\n\n//this method parses the returned query data for contour plots\nconst parseQueryDataContour = function (rows, d) {\n    /*\n        var d = {// d will contain the curve data\n            x: [],\n            y: [],\n            z: [],\n            n: [],\n            text: [],\n            xTextOutput: [],\n            yTextOutput: [],\n            zTextOutput: [],\n            nTextOutput: [],\n            minDateTextOutput: [],\n            maxDateTextOutput: [],\n            stats: []],\n            glob_stats: {},\n            xmin:num,\n            ymin:num,\n            zmin:num,\n            xmax:num,\n            ymax:num,\n            zmax:num,\n            sum:num\n        };\n    */\n    var curveStatLookup = {};\n    var curveNLookup = {};\n    // get all the data out of the query array\n    for (var rowIndex = 0; rowIndex < rows.length; rowIndex++) {\n        var rowXVal = rows[rowIndex].xVal;\n        var rowYVal = rows[rowIndex].yVal;\n        var statKey = rowXVal.toString() + '_' + rowYVal.toString();\n        var stat = rows[rowIndex].stat;\n        var n = rows[rowIndex].sub_data !== null ? rows[rowIndex].sub_data.toString().split(',').length : 0;\n        var minDate = rows[rowIndex].min_secs;\n        var maxDate = rows[rowIndex].max_secs;\n        if (stat === undefined || stat === null || stat === 'NULL') {\n            stat = null;\n            n = 0;\n            minDate = null;\n            maxDate = null;\n        }\n        // store flat arrays of all the parsed data, used by the text output and for some calculations later\n        d.xTextOutput.push(Number(rowXVal));\n        d.yTextOutput.push(Number(rowYVal));\n        d.zTextOutput.push(stat);\n        d.nTextOutput.push(n);\n        d.minDateTextOutput.push(minDate);\n        d.maxDateTextOutput.push(maxDate);\n        curveStatLookup[statKey] = stat;\n        curveNLookup[statKey] = n;\n    }\n    // get the unique x and y values and sort the stats into the 2D z array accordingly\n    d.x = matsDataUtils.arrayUnique(d.xTextOutput).sort(function (a, b) {\n        return a - b\n    });\n    d.y = matsDataUtils.arrayUnique(d.yTextOutput).sort(function (a, b) {\n        return a - b\n    });\n    var i;\n    var j;\n    var currX;\n    var currY;\n    var currStat;\n    var currN;\n    var currStatKey;\n    var currYStatArray;\n    var currYNArray;\n    var sum = 0;\n    var nPoints = 0;\n    for (j = 0; j < d.y.length; j++) {\n        currY = d.y[j];\n        currYStatArray = [];\n        currYNArray = [];\n        for (i = 0; i < d.x.length; i++) {\n            currX = d.x[i];\n            currStatKey = currX.toString() + '_' + currY.toString();\n            currStat = curveStatLookup[currStatKey];\n            currN = curveNLookup[currStatKey];\n            if (currStat === undefined) {\n                currYStatArray.push(null);\n                currYNArray.push(0);\n            } else {\n                sum += currStat;\n                nPoints = nPoints + 1;\n                currYStatArray.push(currStat);\n                currYNArray.push(currN);\n            }\n        }\n        d.z.push(currYStatArray);\n        d.n.push(currYNArray);\n    }\n\n    // calculate statistics\n    const filteredx = d.x.filter(x => x);\n    const filteredy = d.y.filter(y => y);\n    const filteredz = d.zTextOutput.filter(z => z);\n    d.xmin = Math.min(...filteredx);\n    d.xmax = Math.max(...filteredx);\n    d.ymin = Math.min(...filteredy);\n    d.ymax = Math.max(...filteredy);\n    d.zmin = Math.min(...filteredz);\n    d.zmax = Math.max(...filteredz);\n    d.sum = sum;\n\n    if (d.xmin == \"-Infinity\" || (d.x.indexOf(0) !== -1 && 0 < d.xmin)) {\n        d.xmin = 0;\n    }\n    if (d.ymin == \"-Infinity\" || (d.y.indexOf(0) !== -1 && 0 < d.ymin)) {\n        d.ymin = 0;\n    }\n    if (d.zmin == \"-Infinity\" || (d.zTextOutput.indexOf(0) !== -1 && 0 < d.zmin)) {\n        d.zmin = 0;\n    }\n\n    if (d.xmax == \"-Infinity\") {\n        d.xmax = 0;\n    }\n    if (d.ymax == \"-Infinity\") {\n        d.ymax = 0;\n    }\n    if (d.zmax == \"-Infinity\") {\n        d.zmax = 0;\n    }\n\n    const filteredMinDate = d.minDateTextOutput.filter(t => t);\n    const filteredMaxDate = d.maxDateTextOutput.filter(t => t);\n    d.glob_stats['mean'] = sum / nPoints;\n    d.glob_stats['minDate'] = Math.min(...filteredMinDate);\n    d.glob_stats['maxDate'] = Math.max(...filteredMaxDate);\n    d.glob_stats['n'] = nPoints;\n\n    return {\n        d: d\n    };\n};\n\nexport default matsDataQueryUtils = {\n\n    simplePoolQueryWrapSynchronous: simplePoolQueryWrapSynchronous,\n    queryDBTimeSeries: queryDBTimeSeries,\n    queryDBSpecialtyCurve: queryDBSpecialtyCurve,\n    queryMapDB: queryMapDB,\n    queryDBContour: queryDBContour\n\n}\n\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsTypes} from 'meteor/randyp:mats-common';\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport {matsPlotUtils} from 'meteor/randyp:mats-common';\n\n// returns the data for whichever curve has the larger interval in its independent variable\nconst getLargeIntervalCurveData = function (dataset, diffFrom, independentVarName) {\n    var dataMaxInterval = Number.MIN_VALUE;\n    var largeIntervalCurveData = dataset[diffFrom[0]];\n    // set up the indexes and determine the minimum independentVarName value for the dataset\n    for (var ci = 0; ci < dataset.length; ci++) {\n        if (dataset[ci][independentVarName] === undefined || dataset[ci][independentVarName].length === 0) {\n            // one of the curves has no data. No match possible. Just use interval from first curve\n            break;\n        }\n        if (dataset[ci][independentVarName].length > 1) {\n            var diff;\n            for (var di = 0; di < dataset[ci][independentVarName].length - 1; di++) {  // don't go all the way to the end - one shy\n                diff = dataset[ci][independentVarName][di + 1] - dataset[ci][independentVarName][di];\n                if (diff > dataMaxInterval) {\n                    dataMaxInterval = diff;\n                    largeIntervalCurveData = dataset[ci];\n                }\n            }\n        }\n    }\n    return largeIntervalCurveData;\n};\n\n// generates diff curves for all plot types that have diff curves.\nconst getDataForDiffCurve = function (dataset, diffFrom, plotType, hasLevels) {\n    /*\n     DATASET ELEMENTS:\n        series: [data,data,data ...... ]   each data is itself an object\n        d = {\n            x: [],\n            y: [],\n            error_x: [],   // curveTime\n            error_y: [],   // values\n            subVals: [],   //subVals\n            subSecs: [],   //subSecs\n            subLevs: [],   //subLevs\n            stats: [],     //pointStats\n            text: [],\n            glob_stats: {},     //curveStats\n            xmin: Number.MAX_VALUE,\n            xmax: Number.MIN_VALUE,\n            ymin: Number.MAX_VALUE,\n            ymax: Number.MIN_VALUE,\n            sum: 0\n        };\n\n     NOTE -- for profiles, x is the statVarName and y is the independentVarName, because profiles plot the statVarName\n        on the x axis and the independentVarName on the y axis.\n\n    For histograms:\n    DATASET ELEMENTS:\n        series: [data,data,data ...... ]   each data is itself an array\n        d = {\n            x: [], //placeholder\n            y: [], //placeholder\n            error_x: [], // unused\n            error_y: [], // unused\n            subVals: [],\n            subSecs: [],\n            subLevs: [],\n            glob_stats: [], // placeholder\n            bin_stats: [], // placeholder\n            text: [] //placeholder\n        };\n\n     */\n\n    // determine whether data[0] or data[1] is the independent variable, and which is the stat value\n    var independentVarName;\n    var statVarName;\n    if (plotType !== matsTypes.PlotTypes.profile) {\n        independentVarName = 'x';\n        statVarName = 'y';\n    } else {\n        independentVarName = 'y';\n        statVarName = 'x';\n    }\n\n    // initialize variables\n    var minuendData = dataset[diffFrom[0]];\n    var subtrahendData = dataset[diffFrom[1]];\n    var subtrahendIndex = 0;\n    var minuendIndex = 0;\n\n    var d;\n    if (plotType !== matsTypes.PlotTypes.histogram) {\n        d = {\n            x: [],\n            y: [],\n            error_x: [],   // curveTime\n            error_y: [],   // values\n            subVals: [],   //subVals\n            subSecs: [],   //subSecs\n            subLevs: [],   //subLevs\n            glob_stats: [],\n            stats: [],     //curveStats\n            text: [],\n            xmin: Number.MAX_VALUE,\n            xmax: Number.MIN_VALUE,\n            ymin: Number.MAX_VALUE,\n            ymax: Number.MIN_VALUE,\n            sum: 0\n        };\n    } else {\n        d = {\n            x: [],\n            y: [],\n            error_x: [],\n            error_y: [],\n            subVals: [],\n            subSecs: [],\n            subLevs: [],\n            glob_stats: {\n                'glob_mean': null,\n                'glob_sd': null,\n                'glob_n': null,\n                'glob_max': null,\n                'glob_min': null\n            },\n            bin_stats: [],\n            text: [],\n            xmin: Number.MAX_VALUE,\n            xmax: Number.MIN_VALUE,\n            ymin: Number.MAX_VALUE,\n            ymax: Number.MIN_VALUE,\n        };\n    }\n\n    // make sure neither curve is empty\n    if (minuendData.x.length === 0 || subtrahendData.x.length === 0) {\n        return {'dataset': d};\n    }\n\n    // this is a difference curve - we are differencing diffFrom[0] - diffFrom[1] based on the\n    // independentVarName values of whichever has the largest interval\n    // find the largest interval between diffFrom[0] curve and diffFrom[1] curve\n    var largeIntervalCurveData = getLargeIntervalCurveData(dataset, diffFrom, independentVarName);\n\n    // calculate the differences\n    for (var largeIntervalCurveIndex = 0; largeIntervalCurveIndex < largeIntervalCurveData[independentVarName].length; largeIntervalCurveIndex++) {\n\n        // make sure that we are actually on the same independentVarName value for each curve\n        var subtrahendIndependentVar = subtrahendData[independentVarName][subtrahendIndex];\n        var minuendIndependentVar = minuendData[independentVarName][minuendIndex];\n        var largeIntervalIndependentVar = largeIntervalCurveData[independentVarName][largeIntervalCurveIndex];\n\n        // increment the minuendIndex until it reaches this iteration's largeIntervalIndependentVar\n        var minuendChanged = false;\n        while (largeIntervalIndependentVar > minuendIndependentVar && minuendIndex < minuendData[independentVarName].length - 1) {\n            minuendIndependentVar = minuendData[independentVarName][++minuendIndex];\n            minuendChanged = true;\n        }\n        // if the end of the curve was reached without finding the largeIntervalIndependentVar, increase the minuendIndex to trigger the end conditions.\n        if (!minuendChanged && minuendIndex >= minuendData[independentVarName].length - 1) {\n            ++minuendIndex;\n        }\n\n        // increment the subtrahendIndex until it reaches this iteration's largeIntervalIndependentVar\n        var subtrahendChanged = false;\n        while (largeIntervalIndependentVar > subtrahendIndependentVar && subtrahendIndex < subtrahendData[independentVarName].length - 1) {\n            subtrahendIndependentVar = subtrahendData[independentVarName][++subtrahendIndex];\n            subtrahendChanged = true;\n        }\n        // if the end of the curve was reached without finding the largeIntervalIndependentVar, increase the subtrahendIndex to trigger the end conditions.\n        if (!subtrahendChanged && subtrahendIndex >= subtrahendData[independentVarName].length - 1) {\n            ++subtrahendIndex;\n        }\n\n        var diffValue = null;\n        var tempSubValsArray;\n        var tempSubSecsArray;\n        var tempSubLevsArray;\n        if (minuendData[independentVarName][minuendIndex] !== undefined && subtrahendData[independentVarName][subtrahendIndex] !== undefined) {  // make sure both curves actually have data at this index\n            if ((minuendData[statVarName][minuendIndex] !== null && subtrahendData[statVarName][subtrahendIndex] !== null) && minuendData[independentVarName][minuendIndex] === subtrahendData[independentVarName][subtrahendIndex]) { // make sure data is not null at this point and the independentVars actually match\n\n                diffValue = minuendData[statVarName][minuendIndex] - subtrahendData[statVarName][subtrahendIndex];\n                d[independentVarName].push(largeIntervalIndependentVar);\n                d[statVarName].push(diffValue);\n                d.error_x.push(null);\n                d.error_y.push(null);\n                tempSubValsArray = [];\n                tempSubSecsArray = [];\n                if (hasLevels) {\n                    tempSubLevsArray = [];\n                }\n\n                if (plotType !== matsTypes.PlotTypes.histogram) {\n                    var minuendDataSubValues = minuendData.subVals[minuendIndex];\n                    var minuendDataSubSeconds = minuendData.subSecs[minuendIndex];\n                    if (hasLevels) {\n                        var minuendDataSubLevels = minuendData.subLevs[minuendIndex];\n                    }\n                    var subtrahendDataSubValues = subtrahendData.subVals[subtrahendIndex];\n                    var subtrahendDataSubSeconds = subtrahendData.subSecs[subtrahendIndex];\n                    if (hasLevels) {\n                        var subtrahendDataSubLevels = subtrahendData.subLevs[subtrahendIndex];\n                    }\n\n                    // find matching sub values and diff those\n                    for (var mvalIdx = 0; mvalIdx < minuendDataSubValues.length; mvalIdx++) {\n                        for (var svalIdx = 0; svalIdx < subtrahendDataSubValues.length; svalIdx++) {\n                            if (hasLevels && minuendDataSubSeconds[mvalIdx] === subtrahendDataSubSeconds[svalIdx] && minuendDataSubLevels[mvalIdx] === subtrahendDataSubLevels[svalIdx]) {\n                                tempSubValsArray.push(minuendDataSubValues[mvalIdx] - subtrahendDataSubValues[svalIdx]);\n                                tempSubSecsArray.push(minuendDataSubSeconds[mvalIdx]);\n                                tempSubLevsArray.push(minuendDataSubLevels[mvalIdx]);\n                            } else if (!hasLevels && minuendDataSubSeconds[mvalIdx] === subtrahendDataSubSeconds[svalIdx]) {\n                                tempSubValsArray.push(minuendDataSubValues[mvalIdx] - subtrahendDataSubValues[svalIdx]);\n                                tempSubSecsArray.push(minuendDataSubSeconds[mvalIdx]);\n                            }\n                        }\n                    }\n\n                    d.subVals.push(tempSubValsArray);\n                    d.subSecs.push(tempSubSecsArray);\n                    if (hasLevels) {\n                        d.subLevs.push(tempSubLevsArray);\n                    }\n\n                    d.sum = d.sum + d[independentVarName][largeIntervalCurveIndex];\n\n                } else {\n                    d.bin_stats.push({\n                        'bin_mean': null,\n                        'bin_sd': null,\n                        'bin_n': diffValue,\n                        'bin_rf': minuendData.bin_stats[minuendIndex].bin_rf - subtrahendData.bin_stats[subtrahendIndex].bin_rf,\n                        'binLowBound': minuendData.bin_stats[minuendIndex].binLowBound,\n                        'binUpBound': minuendData.bin_stats[minuendIndex].binUpBound,\n                        'binLabel': minuendData.bin_stats[minuendIndex].binLabel\n                    });\n                }\n\n            } else {\n                // no match for this independentVarName\n                d[independentVarName].push(largeIntervalIndependentVar);\n                d[statVarName].push(null);\n                d.error_x.push(null);\n                d.error_y.push(null);\n                d.subVals.push([]);\n                d.subSecs.push([]);\n                if (hasLevels) {\n                    d.subLevs.push([]);\n                }\n                if (plotType === matsTypes.PlotTypes.histogram) {\n                    d.bin_stats.push({\n                        'bin_mean': null,\n                        'bin_sd': null,\n                        'bin_n': null,\n                        'bin_rf': null,\n                        'binLowBound': minuendData.bin_stats[minuendIndex].binLowBound,\n                        'binUpBound': minuendData.bin_stats[minuendIndex].binUpBound,\n                        'binLabel': minuendData.bin_stats[minuendIndex].binLabel\n                    });\n                }\n\n            }\n        } else if ((!subtrahendChanged && subtrahendIndex >= subtrahendData[independentVarName].length - 1) || (!minuendChanged && minuendIndex >= minuendData[independentVarName].length - 1)) {\n            // we've reached the end of at least one curve, so end the diffing.\n            break;\n        }\n    }\n\n    const filteredx = d.x.filter(x => x);\n    const filteredy = d.y.filter(y => y);\n    d.xmin = Math.min(...filteredx);\n    d.xmax = Math.max(...filteredx);\n    d.ymin = Math.min(...filteredy);\n    d.ymax = Math.max(...filteredy);\n\n    return {'dataset': d};\n};\n\n// generates diff of two contours.\nconst getDataForDiffContour = function (dataset) {\n    /*\n     DATASET ELEMENTS:\n        d[i] = {\n            label: string,\n            curveId: string,\n            name: string,\n            annotateColor: string,\n            annotation: string,             -----\n            x: [],                          *****\n            y: [],                          *****\n            z: [[]],                        *****\n            n: [[]],                        *****\n            text: [],\n            stats: [],\n            glob_stats: object,             -----\n            type: string,\n            autocontour: boolean,\n            ncontours: number,\n            colorbar: object,\n            colorscale: string,\n            reversescale: boolean,\n            contours: object,\n            marker: object,\n            xAxisKey: [],\n            yAxisKey: [],\n            visible: boolean,\n            xTextOutput: [],                *****\n            yTextOutput: [],                *****\n            zTextOutput: [],                *****\n            nTextOutput: [],                *****\n            maxDateTextOutput: [],          *****\n            minDateTextOutput: [],          *****\n            xmax: number,                   -----\n            xmin: number,                   -----\n            ymax: number,                   -----\n            ymin: number,                   -----\n            zmax: number,                   -----\n            zmin: number,                   -----\n            sum: number                     *****\n        };\n\n        ***** indicates calculation in loops\n        ----- indicates calculation after loops\n     */\n\n    // initialize output object\n    var diffDataset = {};\n    diffDataset['label'] = dataset[1].label + '-' + dataset[0].label;\n    diffDataset['curveId'] = dataset[1].curveId + '-' + dataset[0].curveId;\n    diffDataset['name'] = dataset[1].name + '-' + dataset[0].name;\n    diffDataset['annotateColor'] = \"rgb(255,165,0)\";\n    diffDataset['annotation'] = \"\";\n    diffDataset['text'] = [];\n    diffDataset['type'] = dataset[0].type;\n    diffDataset['marker'] = dataset[0].marker;\n    diffDataset['xAxisKey'] = dataset[0].xAxisKey;\n    diffDataset['yAxisKey'] = dataset[0].yAxisKey;\n    diffDataset['visible'] = dataset[0].visible;\n    diffDataset['x'] = [];\n    diffDataset['y'] = [];\n    diffDataset['z'] = [];\n    diffDataset['n'] = [];\n    diffDataset['xTextOutput'] = [];\n    diffDataset['yTextOutput'] = [];\n    diffDataset['zTextOutput'] = [];\n    diffDataset['nTextOutput'] = [];\n    diffDataset['maxDateTextOutput'] = [];\n    diffDataset['minDateTextOutput'] = [];\n    diffDataset['stats'] = [];\n    diffDataset['glob_stats'] = {};\n    diffDataset['xmax'] = -1 * Number.MAX_VALUE;\n    diffDataset['xmin'] = Number.MAX_VALUE;\n    diffDataset['ymax'] = -1 * Number.MAX_VALUE;\n    diffDataset['ymin'] = Number.MAX_VALUE;\n    diffDataset['zmax'] = -1 * Number.MAX_VALUE;\n    diffDataset['zmin'] = Number.MAX_VALUE;\n    diffDataset['sum'] = 0;\n\n    // initialize local variables\n    var minuendData = dataset[1];\n    var subtrahendData = dataset[0];\n\n    // get common x and y\n    diffDataset.x = _.intersection(minuendData.x, subtrahendData.x).sort(function (a, b) {\n        return a - b\n    });\n    diffDataset.y = _.intersection(minuendData.y, subtrahendData.y).sort(function (a, b) {\n        return a - b\n    });\n\n    // make we actually have matches\n    if (diffDataset.x.length === 0 || diffDataset.y.length === 0) {\n        diffDataset.x = [];\n        diffDataset.y = [];\n        return [diffDataset];\n    }\n\n    // make sure neither dataset is empty\n    if (minuendData.x.length === 0 || subtrahendData.x.length === 0 || minuendData.y.length === 0 || subtrahendData.y.length === 0) {\n        return [diffDataset];\n    }\n\n    var minuendYIndex = 0;\n    var subtrahendYIndex = 0;\n    var nPoints = 0;\n\n    // loop through common Ys\n    for (var diffDataYIndex = 0; diffDataYIndex < diffDataset.y.length; diffDataYIndex++) {\n        //make sure that we are actually on the same y value for each curve\n        var diffDataY = diffDataset.y[diffDataYIndex];\n        var minuendY = minuendData.y[minuendYIndex];\n        var subtrahendY = subtrahendData.y[subtrahendYIndex];\n\n        //increment the minuendYIndex until it reaches this iteration's diffDataY\n        while (diffDataY > minuendY && minuendYIndex < minuendData.y.length - 1) {\n            minuendY = minuendData.y[++minuendYIndex];\n        }\n\n        //increment the subtrahendYIndex until it reaches this iteration's diffDataY\n        while (diffDataY > subtrahendY && subtrahendYIndex < subtrahendData.y.length - 1) {\n            subtrahendY = subtrahendData.y[++subtrahendYIndex];\n        }\n\n        // initialize n and z arrays for this Y\n        diffDataset.z[diffDataYIndex] = [];\n        diffDataset.n[diffDataYIndex] = [];\n\n        var minuendXIndex = 0;\n        var subtrahendXIndex = 0;\n        for (var diffDataXIndex = 0; diffDataXIndex < diffDataset.x.length; diffDataXIndex++) {\n            //make sure that we are actually on the same x value for each curve\n            var diffDataX = diffDataset.x[diffDataXIndex];\n            var minuendX = minuendData.x[minuendXIndex];\n            var subtrahendX = subtrahendData.x[subtrahendXIndex];\n\n            //increment the minuendXIndex until it reaches this iteration's diffDataX\n            while (diffDataX > minuendX && minuendXIndex < minuendData.x.length - 1) {\n                minuendX = minuendData.x[++minuendXIndex];\n            }\n\n            //increment the subtrahendXIndex until it reaches this iteration's diffDataX\n            while (diffDataX > subtrahendX && subtrahendXIndex < subtrahendData.x.length - 1) {\n                subtrahendX = subtrahendData.x[++subtrahendXIndex];\n            }\n\n            var diffValue = null;\n            var diffNumber = 0;\n            var diffMinDate = null;\n            var diffMaxDate = null;\n            if ((minuendData.z[minuendYIndex][minuendXIndex] !== undefined && subtrahendData.z[subtrahendYIndex][subtrahendXIndex] !== undefined)\n                && (minuendData.z[minuendYIndex][minuendXIndex] !== null && subtrahendData.z[subtrahendYIndex][subtrahendXIndex] !== null)\n                && minuendX === subtrahendX && minuendY === subtrahendY) { // make sure both contours actually have data at these indices, data is not null at this point, and the x and y actually match\n                // calculate the difference values\n                diffValue = minuendData.z[minuendYIndex][minuendXIndex] - subtrahendData.z[subtrahendYIndex][subtrahendXIndex];\n                diffNumber = minuendData.n[minuendYIndex][minuendXIndex] <= subtrahendData.n[subtrahendYIndex][subtrahendXIndex] ? minuendData.n[minuendYIndex][minuendXIndex] : subtrahendData.n[subtrahendYIndex][subtrahendXIndex];\n                diffMinDate = minuendData.minDateTextOutput[minuendYIndex * minuendData.x.length + minuendXIndex] <= subtrahendData.minDateTextOutput[subtrahendYIndex * subtrahendData.x.length + subtrahendXIndex] ? minuendData.minDateTextOutput[minuendYIndex * minuendData.x.length + minuendXIndex] : subtrahendData.minDateTextOutput[subtrahendYIndex * subtrahendData.x.length + subtrahendXIndex];\n                diffMaxDate = minuendData.maxDateTextOutput[minuendYIndex * minuendData.x.length + minuendXIndex] >= subtrahendData.maxDateTextOutput[subtrahendYIndex * subtrahendData.x.length + subtrahendXIndex] ? minuendData.maxDateTextOutput[minuendYIndex * minuendData.x.length + minuendXIndex] : subtrahendData.maxDateTextOutput[subtrahendYIndex * subtrahendData.x.length + subtrahendXIndex];\n                diffDataset['sum'] += diffValue;\n                nPoints = nPoints + 1;\n            }\n            diffDataset.z[diffDataYIndex].push(diffValue);\n            diffDataset.n[diffDataYIndex].push(diffNumber);\n            diffDataset.xTextOutput.push(diffDataX);\n            diffDataset.yTextOutput.push(diffDataY);\n            diffDataset.zTextOutput.push(diffValue);\n            diffDataset.nTextOutput.push(diffNumber);\n            diffDataset.minDateTextOutput.push(diffMinDate);\n            diffDataset.maxDateTextOutput.push(diffMaxDate);\n        }\n    }\n\n    // calculate statistics\n    const filteredx = diffDataset.x.filter(x => x);\n    const filteredy = diffDataset.y.filter(y => y);\n    const filteredz = diffDataset.zTextOutput.filter(z => z);\n    diffDataset.xmin = Math.min(...filteredx);\n    diffDataset.xmax = Math.max(...filteredx);\n    diffDataset.ymin = Math.min(...filteredy);\n    diffDataset.ymax = Math.max(...filteredy);\n    diffDataset.zmin = Math.min(...filteredz);\n    diffDataset.zmax = Math.max(...filteredz);\n\n    if (diffDataset.xmin == \"-Infinity\" || (diffDataset.x.indexOf(0) !== -1 && 0 < diffDataset.xmin)) {\n        diffDataset.xmin = 0;\n    }\n    if (diffDataset.ymin == \"-Infinity\" || (diffDataset.y.indexOf(0) !== -1 && 0 < diffDataset.ymin)) {\n        diffDataset.ymin = 0;\n    }\n    if (diffDataset.zmin == \"-Infinity\" || (diffDataset.zTextOutput.indexOf(0) !== -1 && 0 < diffDataset.zmin)) {\n        diffDataset.zmin = 0;\n    }\n\n    if (diffDataset.xmax == \"-Infinity\") {\n        diffDataset.xmax = 0;\n    }\n    if (diffDataset.ymax == \"-Infinity\") {\n        diffDataset.ymax = 0;\n    }\n    if (diffDataset.zmax == \"-Infinity\") {\n        diffDataset.zmax = 0;\n    }\n\n    const filteredMinDate = diffDataset.minDateTextOutput.filter(t => t);\n    const filteredMaxDate = diffDataset.maxDateTextOutput.filter(t => t);\n    diffDataset.glob_stats['mean'] = diffDataset.sum / nPoints;\n    diffDataset.glob_stats['minDate'] = Math.min(...filteredMinDate);\n    diffDataset.glob_stats['maxDate'] = Math.max(...filteredMaxDate);\n    diffDataset.glob_stats['n'] = nPoints;\n    diffDataset['annotation'] = diffDataset.glob_stats.mean === undefined ? diffDataset.label + \"- mean = NaN\" : diffDataset.label + \"- mean = \" + diffDataset.glob_stats.mean.toPrecision(4);\n\n    // make contours symmetrical around 0\n    diffDataset['autocontour'] = false;\n    diffDataset['ncontours'] = 15;\n    diffDataset['colorbar'] = dataset[0].colorbar;\n    diffDataset['colorbar']['title'] = dataset[0].colorbar.title === dataset[1].colorbar.title ? dataset[0].colorbar.title : dataset[1].colorbar.title + \" - \" + dataset[0].colorbar.title;\n    diffDataset['colorscale'] = [[0,\"rgb(5,10,172)\"],[0.35,\"rgb(106,137,247)\"],[0.45,\"rgb(255,255,255)\"],[0.55,\"rgb(255,255,255)\"],[0.6,\"rgb(220,170,132)\"],[0.7,\"rgb(230,145,90)\"],[1,\"rgb(178,10,28)\"]];\n    diffDataset['reversescale'] = dataset[0].reversescale;\n    diffDataset['contours'] = dataset[0].contours;\n    const maxZ = Math.abs(diffDataset.zmax) > Math.abs(diffDataset.zmin) ? Math.abs(diffDataset.zmax) : Math.abs(diffDataset.zmin);\n    diffDataset['contours']['start'] = -1 * maxZ + (2 * maxZ) / 16;\n    diffDataset['contours']['end'] = maxZ - (2 * maxZ) / 16;\n    diffDataset['contours']['size'] = (2 * maxZ) / 16;\n\n    return [diffDataset];\n};\n\nexport default matsDataDiffUtils = {\n\n    getDataForDiffCurve: getDataForDiffCurve,\n    getDataForDiffContour: getDataForDiffContour\n\n}\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsDataUtils} from 'meteor/randyp:mats-common';\nimport {matsTypes} from 'meteor/randyp:mats-common';\n\n// function for removing unmatched data from a dataset containing multiple curves *without* levels\nconst getMatchedDataSet = function (dataset, curvesLength) {\n\n    var subSecs = [];\n    var subValues = [];\n    var newSubSecs = [];\n    var newSubValues = [];\n    var independentVarGroups = [];\n    var independentVarHasPoint = [];\n    var currIndependentVar;\n    var curveIndex;\n    var data;\n    var di;\n    var fi;\n    var si;\n\n    // matching in this function is based on a curve's independent variable. For a timeseries, the independentVar is epoch,\n    // for a profile, it's level, for a dieoff, it's forecast hour, for a threshold plot, it's threshold, and for a\n    // valid time plot, it's hour of day. This function identifies the the independentVar values common across all of\n    // the curves, and then the common sub times/levels/values for those independentVar values.\n\n    // find the matching independentVars shared across all curves\n    for (curveIndex = 0; curveIndex < curvesLength; curveIndex++) { // every curve\n        independentVarGroups[curveIndex] = [];  // store the independentVars for each curve that are not null\n        independentVarHasPoint[curveIndex] = [];   // store the *all* of the independentVars for each curve\n        subSecs[curveIndex] = {};  // store the individual record times (subSecs) going into each independentVar for each curve\n        data = dataset[curveIndex];\n        for (di = 0; di < data.x.length; di++) { // loop over every independentVar value in this curve\n            currIndependentVar = data.x[di];\n            if (data.y[di] !== null) {\n                subSecs[curveIndex][currIndependentVar] = data.subSecs[di];   // store raw secs for this independentVar value, since it's not a null point\n                independentVarGroups[curveIndex].push(currIndependentVar);   // store this independentVar value, since it's not a null point\n            }\n            independentVarHasPoint[curveIndex].push(currIndependentVar);    // store all the independentVar values, regardless of whether they're null\n        }\n    }\n\n    var matchingIndependentVars = _.intersection.apply(_, independentVarGroups);    // find all of the non-null independentVar values common across all the curves\n    var matchingIndependentHasPoint = _.intersection.apply(_, independentVarHasPoint);    // find all of the independentVar values common across all the curves, regardless of whether or not they're null\n    var subSecIntersection = {};       // eventually find the intersecting subSecs for each common non-null independentVar value\n\n    for (fi = 0; fi < matchingIndependentVars.length; fi++) { // loop over each common non-null independentVar value\n        currIndependentVar = matchingIndependentVars[fi];\n        var currSubSecIntersection = subSecs[0][currIndependentVar];   // fill current subSecs intersection array with subSecs from the first curve\n        for (curveIndex = 1; curveIndex < curvesLength; curveIndex++) { // loop over every curve\n            currSubSecIntersection = _.intersection(currSubSecIntersection, subSecs[curveIndex][currIndependentVar]);   // keep taking the intersection of the current subSecs intersection array with each curve's subSecs array for this independentVar value\n        }\n        subSecIntersection[currIndependentVar] = currSubSecIntersection;   // store the final intersecting subSecs array for this common non-null independentVar value\n    }\n\n    // remove non-matching independentVars and subSecs\n    for (curveIndex = 0; curveIndex < curvesLength; curveIndex++) { // loop over every curve\n        data = dataset[curveIndex];\n\n        // need to loop backwards through the data array so that we can splice non-matching indices\n        // while still having the remaining indices in the correct order\n        var dataLength = data.x.length;\n        for (di = dataLength - 1; di >= 0; di--) {\n\n            if (matchingIndependentVars.indexOf(data.x[di]) === -1) {  // if this is not a common non-null independentVar value, we'll have to remove some data\n                if (matchingIndependentHasPoint.indexOf(data.x[di]) === -1) {   // if at least one curve doesn't even have a null here, much less a matching value (beacause of the cadence), just drop this independentVar\n                    data.x.splice(di, 1);\n                    data.y.splice(di, 1);\n                    data.error_y.array.splice(di, 1);\n                    data.subVals.splice(di, 1);\n                    data.subSecs.splice(di, 1);\n                    data.stats.splice(di, 1);\n                    data.text.splice(di, 1);\n                } else {    // if all of the curves have either data or nulls at this independentVar, and there is at least one null, ensure all of the curves are null\n                    data.y[di] = null;\n                    data.subVals[di] = NaN;\n                    data.subSecs[di] = NaN;\n                }\n                continue;   // then move on to the next independentVar. There's no need to mess with the subSecs\n            }\n            subSecs = data.subSecs[di];\n            subValues = data.subVals[di];\n\n            if (subSecs.length > 0) {\n                currIndependentVar = data.x[di];\n                newSubValues = [];\n                newSubSecs = [];\n                for (si = 0; si < subSecs.length; si++) {  // loop over all subSecs for this independentVar\n                    if (subSecIntersection[currIndependentVar].indexOf(subSecs[si]) !== -1) { // keep the subValue only if its associated subSec is common to all curves for this independentVar\n                        var newVal = subValues[si];\n                        var newSec = subSecs[si];\n                        if (newVal !== undefined) {\n                            newSubValues.push(newVal);\n                            newSubSecs.push(newSec);\n                        }\n                    }\n                }\n                // store the filtered data\n                data.subVals[di] = newSubValues;\n                data.subSecs[di] = newSubSecs;\n            }\n        }\n        dataset[curveIndex] = data;\n    }\n\n    return dataset;\n};\n\n// function for removing unmatched data from a dataset containing multiple curves *with* levels\nconst getMatchedDataSetWithLevels = function (dataset, curvesLength, plotType) {\n\n    var subSecs = [];\n    var subLevs = [];\n    var subValues = [];\n    var newSubSecs = [];\n    var newSubLevs = [];\n    var newSubValues = [];\n    var independentVarGroups = [];\n    var independentVarHasPoint = [];\n    var currIndependentVar;\n    var curveIndex;\n    var data;\n    var di;\n    var fi;\n    var si;\n\n    // matching in this function is based on a curve's independent variable. For a timeseries, the independentVar is epoch,\n    // for a profile, it's level, for a dieoff, it's forecast hour, for a threshold plot, it's threshold, and for a\n    // valid time plot, it's hour of day. This function identifies the the independentVar values common across all of\n    // the curves, and then the common sub times/levels/values for those independentVar values.\n\n    //determine whether data.x or data.y is the independent variable, and which is the stat value\n    var independentVarName;\n    var statVarName;\n    if (plotType !== matsTypes.PlotTypes.profile) {\n        independentVarName = 'x';\n        statVarName = 'y';\n    } else {\n        independentVarName = 'y';\n        statVarName = 'x';\n    }\n\n    for (curveIndex = 0; curveIndex < curvesLength; curveIndex++) { // every curve\n        independentVarGroups[curveIndex] = [];  // store the independentVars for each curve that are not null\n        independentVarHasPoint[curveIndex] = [];   // store the *all* of the independentVars for each curve\n        subSecs[curveIndex] = {};  // store the individual record times (subSecs) going into each independentVar for each curve\n        subLevs[curveIndex] = {};  // store the individual record levels (subLevs) going into each independentVar for each curve\n        data = dataset[curveIndex];\n        for (di = 0; di < data[independentVarName].length; di++) { // loop over every independentVar value in this curve\n            currIndependentVar = data[independentVarName][di];\n            if (data[statVarName][di] !== null) {\n                subSecs[curveIndex][currIndependentVar] = data.subSecs[di];   // store raw secs for this independentVar value, since it's not a null point\n                subLevs[curveIndex][currIndependentVar] = data.subLevs[di];   // store raw levs for this independentVar value, since it's not a null point\n                independentVarGroups[curveIndex].push(currIndependentVar);   // store this independentVar value, since it's not a null point\n            }\n            independentVarHasPoint[curveIndex].push(currIndependentVar);    // store all the independentVar values, regardless of whether they're null\n        }\n    }\n\n    var matchingIndependentVars = _.intersection.apply(_, independentVarGroups);    // find all of the non-null independentVar values common across all the curves\n    var matchingIndependentHasPoint = _.intersection.apply(_, independentVarHasPoint);    // find all of the independentVar values common across all the curves, regardless of whether or not they're null\n    var subIntersections = [];       // eventually find the intersecting subSecs and subLevs for each common non-null independentVar value\n\n    for (fi = 0; fi < matchingIndependentVars.length; fi++) { // loop over each common non-null independentVar value\n        currIndependentVar = matchingIndependentVars[fi];\n        subIntersections[currIndependentVar] = [];\n        var currSubIntersections = [];\n        for (si = 0; si < subSecs[0][currIndependentVar].length; si++) {   // fill current intersection array with sec-lev pairs from the first curve\n            currSubIntersections.push([subSecs[0][currIndependentVar][si], subLevs[0][currIndependentVar][si]]);\n        }\n        for (curveIndex = 1; curveIndex < curvesLength; curveIndex++) { // loop over every curve after the first\n            var tempSubIntersections = [];\n            var tempPair;\n            for (si = 0; si < subSecs[curveIndex][currIndependentVar].length; si++) { // loop over every subSecs value\n                tempPair = [subSecs[curveIndex][currIndependentVar][si], subLevs[curveIndex][currIndependentVar][si]];    // create an individual sec-lev pair for each index in the subSecs and subLevs arrays\n                if (matsDataUtils.arrayContainsSubArray(currSubIntersections, tempPair)) {   // see if the individual sec-lev pair matches a pair from the current intersection array\n                    tempSubIntersections.push(tempPair);    // store matching pairs\n                }\n            }\n            currSubIntersections = tempSubIntersections;    //replace current intersection array with array of only pairs that matched from this loop through.\n        }\n        subIntersections[currIndependentVar] = currSubIntersections;   // store the final intersecting subSecs array for this common non-null independentVar value\n    }\n\n    // remove non-matching independentVars and subSecs\n    for (curveIndex = 0; curveIndex < curvesLength; curveIndex++) { // loop over every curve\n        data = dataset[curveIndex];\n\n        // need to loop backwards through the data array so that we can splice non-matching indices\n        // while still having the remaining indices in the correct order\n        var dataLength = data[independentVarName].length;\n        for (di = dataLength - 1; di >= 0; di--) {\n\n            if (matchingIndependentVars.indexOf(data[independentVarName][di]) === -1) {  // if this is not a common non-null independentVar value, we'll have to remove some data\n                if (matchingIndependentHasPoint.indexOf(data[independentVarName][di]) === -1) {   // if at least one curve doesn't even have a null here, much less a matching value (beacause of the cadence), just drop this independentVar\n                    data.x.splice(di, 1);\n                    data.y.splice(di, 1);\n                    data[('error_' + statVarName)].array.splice(di, 1);\n                    data.subVals.splice(di, 1);\n                    data.subSecs.splice(di, 1);\n                    data.subLevs.splice(di, 1);\n                    data.stats.splice(di, 1);\n                    data.text.splice(di, 1);\n                } else {    // if all of the curves have either data or nulls at this independentVar, and there is at least one null, ensure all of the curves are null\n                    data[statVarName][di] = null;\n                    data.subVals[di] = NaN;\n                    data.subSecs[di] = NaN;\n                    data.subLevs[di] = NaN;\n                }\n                continue;   // then move on to the next independentVar. There's no need to mess with the subSecs or subLevs\n            }\n            subSecs = data.subSecs[di];\n            subLevs = data.subLevs[di];\n            subValues = data.subVals[di];\n\n            if (subSecs.length > 0 && subLevs.length > 0) {\n                currIndependentVar = data[independentVarName][di];\n                newSubValues = [];\n                newSubSecs = [];\n                newSubLevs = [];\n                for (si = 0; si < subSecs.length; si++) {  // loop over all subSecs for this independentVar\n                    tempPair = [subSecs[si], subLevs[si]]; //create sec-lev pair for each sub value\n                    if (matsDataUtils.arrayContainsSubArray(subIntersections[currIndependentVar], tempPair)) {  // keep the subValue only if its sec-lev pair is common to all curves for this independentVar\n                        var newVal = subValues[si];\n                        var newSec = subSecs[si];\n                        var newLev = subLevs[si];\n                        if (newVal !== undefined) {\n                            newSubValues.push(newVal);\n                            newSubSecs.push(newSec);\n                            newSubLevs.push(newLev);\n                        }\n                    }\n                }\n                // store the filtered data\n                data.subVals[di] = newSubValues;\n                data.subSecs[di] = newSubSecs;\n                data.subLevs[di] = newSubLevs;\n            }\n        }\n        dataset[curveIndex] = data;\n    }\n\n    return dataset;\n};\n\n// function for removing unmatched data from a dataset containing multiple curves for a histogram *without* levels.\n// separate matching functions are needed for histograms because you have to take all of the data out of the bins, then\n// match it, then recalculate the bins. For other plot types, you can just leave the data in its already-sorted fhr, level, etc.\nconst getMatchedDataSetHistogram = function (dataset, curvesLength, binStats) {\n\n    var subStatsRaw = {};\n    var subSecsRaw = {};\n    var subStats = {};\n    var subSecs = {};\n    var newSubStats = {};\n    var newSubSecs = {};\n    var newCurveData;\n    var curveIndex;\n    var di;\n    var si;\n\n    // pull all subSecs and subStats out of their bins, and back into one master array\n    for (curveIndex = 0; curveIndex < curvesLength; curveIndex++) {\n        data = dataset[curveIndex];\n        subStatsRaw[curveIndex] = [];\n        subSecsRaw[curveIndex] = [];\n        subStats[curveIndex] = [];\n        subSecs[curveIndex] = [];\n        for (di = 0; di < data.x.length; di++) {\n            subStatsRaw[curveIndex].push(data.subVals[di]);\n            subSecsRaw[curveIndex].push(data.subSecs[di]);\n        }\n        subStats[curveIndex] = [].concat.apply([], subStatsRaw[curveIndex]);\n        subSecs[curveIndex] = [].concat.apply([], subSecsRaw[curveIndex]);\n    }\n\n    // determine which seconds are present in all curves\n    var subSecIntersection = subSecs[0];   // fill current subSecs intersection array with subSecs from the first curve\n    for (curveIndex = 1; curveIndex < curvesLength; curveIndex++) { // loop over every curve\n        subSecIntersection = _.intersection(subSecIntersection, subSecs[curveIndex]);   // keep taking the intersection of the current subSecs intersection array with each curve's subSecs array\n    }\n\n    // remove non-matching subSecs and subStats\n    for (curveIndex = 0; curveIndex < curvesLength; curveIndex++) { // loop over every curve\n        data = dataset[curveIndex];\n        if (subSecIntersection.length > 0) {\n            newSubStats[curveIndex] = [];\n            newSubSecs[curveIndex] = [];\n\n            for (si = 0; si < subSecs[curveIndex].length; si++) {  // loop over all subSecs for this curve\n                if (subSecIntersection.indexOf(subSecs[curveIndex][si]) !== -1) { // keep the subStat only if its associated subSec is common to all curves\n                    var newStat = subStats[curveIndex][si];\n                    var newSec = subSecs[curveIndex][si];\n                    if (newStat !== undefined) {\n                        newSubStats[curveIndex].push(newStat);\n                        newSubSecs[curveIndex].push(newSec);\n                    }\n                }\n            }\n            // re-sort all of the data into histogram bins\n            var d = {// d will contain the curve data\n                x: [], //placeholder\n                y: [], //placeholder\n                error_x: [], // unused\n                error_y: [], // unused\n                subVals: [],\n                subSecs: [],\n                subLevs: [],\n                glob_stats: {}, // placeholder\n                bin_stats: [], // placeholder\n                text: [], //placeholder\n                xmin: Number.MAX_VALUE,\n                xmax: Number.MIN_VALUE,\n                ymin: Number.MAX_VALUE,\n                ymax: Number.MIN_VALUE,\n            };\n            newCurveData = matsDataUtils.sortHistogramBins(newSubStats[curveIndex], newSubSecs[curveIndex], [], data.x.length, binStats, false, d);\n            var newCurveDataKeys = Object.keys(newCurveData.d);\n            for (var didx = 0; didx < newCurveDataKeys.length; didx++) {\n                dataset[curveIndex][newCurveDataKeys[didx]] = newCurveData.d[newCurveDataKeys[didx]];\n            }\n        } else {\n            // if there are no matching values, set data to an empty array\n            dataset[curveIndex] = {\n                x: [],\n                y: [],\n                error_x: [],\n                error_y: [],\n                subVals: [],\n                subSecs: [],\n                subLevs: [],\n                glob_stats: {},\n                bin_stats: [],\n                text: [],\n                xmin: Number.MAX_VALUE,\n                xmax: Number.MIN_VALUE,\n                ymin: Number.MAX_VALUE,\n                ymax: Number.MIN_VALUE,\n            };\n        }\n    }\n    return dataset;\n};\n\n// function for removing unmatched data from a dataset containing multiple curves for a histogram *with* levels.\n// separate matching functions are needed for histograms because you have to take all of the data out of the bins, then\n// match it, then recalculate the bins. For other plot types, you can just leave the data in its already-sorted fhr, level, etc.\nconst getMatchedDataSetHistogramWithLevels = function (dataset, curvesLength, binStats) {\n\n    var subStatsRaw = {};\n    var subSecsRaw = {};\n    var subLevsRaw = {};\n    var subStats = {};\n    var subSecs = {};\n    var subLevs = {};\n    var newSubStats = {};\n    var newSubSecs = {};\n    var newSubLevs = {};\n    var newCurveData;\n    var curveIndex;\n    var di;\n    var si;\n\n    // pull all subSecs and subStats out of their bins, and back into one master array\n    for (curveIndex = 0; curveIndex < curvesLength; curveIndex++) {\n        data = dataset[curveIndex];\n        subStatsRaw[curveIndex] = [];\n        subSecsRaw[curveIndex] = [];\n        subLevsRaw[curveIndex] = [];\n        subStats[curveIndex] = [];\n        subSecs[curveIndex] = [];\n        subLevs[curveIndex] = [];\n        for (di = 0; di < data.x.length; di++) {\n            subStatsRaw[curveIndex].push(data.subVals[di]);\n            subSecsRaw[curveIndex].push(data.subSecs[di]);\n            subLevsRaw[curveIndex].push(data.subLevs[di]);\n        }\n        subStats[curveIndex] = [].concat.apply([], subStatsRaw[curveIndex]);\n        subSecs[curveIndex] = [].concat.apply([], subSecsRaw[curveIndex]);\n        subLevs[curveIndex] = [].concat.apply([], subLevsRaw[curveIndex]);\n    }\n\n    // determine which seconds and levels are present in all curves\n    var subIntersections = [];       // eventually find the intersecting subSecs and subLevs across all curves\n    for (si = 0; si < subSecs[0].length; si++) {   // fill current intersection array with sec-lev pairs from the first curve\n        subIntersections.push([subSecs[0][si], subLevs[0][si]]);\n    }\n    for (curveIndex = 1; curveIndex < curvesLength; curveIndex++) { // loop over every curve after the first\n        var tempSubIntersections = [];\n        var tempPair;\n        for (si = 0; si < subSecs[curveIndex].length; si++) { // loop over every subSecs value\n            tempPair = [subSecs[curveIndex][si], subLevs[curveIndex][si]];    // create an individual sec-lev pair for each index in the subSecs and subLevs arrays\n            if (matsDataUtils.arrayContainsSubArray(subIntersections, tempPair)) {   // see if the individual sec-lev pair matches a pair from the current intersection array\n                tempSubIntersections.push(tempPair);    // store matching pairs\n            }\n        }\n        subIntersections = tempSubIntersections;    //replace current intersection array with array of only pairs that matched from this loop through.\n    }\n\n    // remove non-matching subSecs, subLevs, and subStats\n    for (curveIndex = 0; curveIndex < curvesLength; curveIndex++) { // loop over every curve\n        data = dataset[curveIndex];\n        if (subIntersections.length > 0) {\n            newSubStats[curveIndex] = [];\n            newSubSecs[curveIndex] = [];\n            newSubLevs[curveIndex] = [];\n\n            for (si = 0; si < subSecs[curveIndex].length; si++) {  // loop over all subSecs for this curve\n                tempPair = [subSecs[curveIndex][si], subLevs[curveIndex][si]]; //create sec-lev pair for each subStat\n                if (matsDataUtils.arrayContainsSubArray(subIntersections, tempPair)) {  // keep the subStat only if its sec-lev pair is common to all curves\n                    var newStat = subStats[curveIndex][si];\n                    var newSec = subSecs[curveIndex][si];\n                    var newLev = subLevs[curveIndex][si];\n                    if (newStat !== undefined) {\n                        newSubStats[curveIndex].push(newStat);\n                        newSubSecs[curveIndex].push(newSec);\n                        newSubLevs[curveIndex].push(newLev);\n                    }\n                }\n            }\n            // re-sort all of the data into histogram bins\n            var d = {// d will contain the curve data\n                x: [], //placeholder\n                y: [], //placeholder\n                error_x: [], // unused\n                error_y: [], // unused\n                subVals: [],\n                subSecs: [],\n                subLevs: [],\n                glob_stats: {}, // placeholder\n                bin_stats: [], // placeholder\n                text: [], //placeholder\n                xmin: Number.MAX_VALUE,\n                xmax: Number.MIN_VALUE,\n                ymin: Number.MAX_VALUE,\n                ymax: Number.MIN_VALUE,\n            };\n            newCurveData = matsDataUtils.sortHistogramBins(newSubStats[curveIndex], newSubSecs[curveIndex], newSubLevs[curveIndex], data.x.length, binStats, true, d);\n            var newCurveDataKeys = Object.keys(newCurveData.d);\n            for (var didx = 0; didx < newCurveDataKeys.length; didx++) {\n                dataset[curveIndex][newCurveDataKeys[didx]] = newCurveData.d[newCurveDataKeys[didx]];\n            }\n        } else {\n            // if there are no matching values, set data to an empty dataset\n            dataset[curveIndex] = {\n                x: [],\n                y: [],\n                error_x: [],\n                error_y: [],\n                subVals: [],\n                subSecs: [],\n                subLevs: [],\n                glob_stats: {},\n                bin_stats: [],\n                text: [],\n                xmin: Number.MAX_VALUE,\n                xmax: Number.MIN_VALUE,\n                ymin: Number.MAX_VALUE,\n                ymax: Number.MIN_VALUE,\n            };\n        }\n    }\n    return dataset;\n};\n\nexport default matsDataMatchUtils = {\n\n    getMatchedDataSet: getMatchedDataSet,\n    getMatchedDataSetWithLevels: getMatchedDataSetWithLevels,\n    getMatchedDataSetHistogram: getMatchedDataSetHistogram,\n    getMatchedDataSetHistogramWithLevels: getMatchedDataSetHistogramWithLevels\n\n}","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\n// adds a horizontal black line along a specific y value\nconst getHorizontalValueLine = function (xmax, xmin, yValue, cLabel) {\n\n    const valueLine = {\n        \"label\": cLabel,\n        \"curveId\": cLabel,\n        \"annotation\": \"\",\n        \"name\": \"y = \" + yValue.toString(),\n        \"mode\": \"lines\",\n        \"x\": [xmin, xmax],\n        \"x_epoch\": [xmin, xmax],\n        \"y\": [yValue, yValue],\n        \"error_x\": [null, null],\n        \"error_y\": [null, null],\n        \"subVals\": [],\n        \"subSecs\": [],\n        \"subLevs\": [],\n        \"stats\": [{\"d_mean\": 0, \"sd\": 0, \"n_good\": 0, \"lag1\": 0, \"stde\": 0}, {\n            \"d_mean\": 0,\n            \"sd\": 0,\n            \"n_good\": 0,\n            \"lag1\": 0,\n            \"stde\": 0\n        }],\n        \"tooltip\": [\"y = \" + yValue.toString(), \"y = \" + yValue.toString()],\n        \"xmin\": xmin,\n        \"xmax\": xmax,\n        \"ymin\": yValue,\n        \"ymax\": yValue,\n        \"line\": {\n            \"color\": \"rgb(0,0,0)\",\n        }\n    };\n\n    return valueLine\n};\n\n// adds a vertical black line along a specific x value\nconst getVerticalValueLine = function (ymax, ymin, xValue, cLabel) {\n\n    const valueLine = {\n        \"label\": cLabel,\n        \"curveId\": cLabel,\n        \"annotation\": \"\",\n        \"name\": \"x = \" + xValue.toString(),\n        \"mode\": \"lines\",\n        \"x\": [xValue, xValue],\n        \"y\": [ymin, ymax],\n        \"error_x\": [null, null],\n        \"error_y\": [null, null],\n        \"subVals\": [],\n        \"subSecs\": [],\n        \"subLevs\": [],\n        \"stats\": [{\"d_mean\": 0, \"sd\": 0, \"n_good\": 0, \"lag1\": 0, \"stde\": 0}, {\n            \"d_mean\": 0,\n            \"sd\": 0,\n            \"n_good\": 0,\n            \"lag1\": 0,\n            \"stde\": 0\n        }],\n        \"tooltip\": [\"x = \" + xValue.toString(), \"x = \" + xValue.toString()],\n        \"xmin\": xValue,\n        \"xmax\": xValue,\n        \"ymin\": ymin,\n        \"ymax\": ymax,\n        \"line\": {\n            \"color\": \"rgb(0,0,0)\",\n        }\n    };\n\n    return valueLine\n};\n\n// adds a linear line\nconst getLinearValueLine = function (xmax, xmin, ymax, ymin, cLabel) {\n\n    const valueLine = {\n        \"label\": cLabel,\n        \"curveId\": cLabel,\n        \"annotation\": \"\",\n        \"name\": cLabel,\n        \"mode\": \"lines\",\n        \"x\": [xmin, xmax],\n        \"x_epoch\": [xmin, xmax],\n        \"y\": [ymin, ymax],\n        \"error_x\": [null, null],\n        \"error_y\": [null, null],\n        \"subVals\": [],\n        \"subSecs\": [],\n        \"subLevs\": [],\n        \"stats\": [{\"d_mean\": 0, \"sd\": 0, \"n_good\": 0, \"lag1\": 0, \"stde\": 0}, {\n            \"d_mean\": 0,\n            \"sd\": 0,\n            \"n_good\": 0,\n            \"lag1\": 0,\n            \"stde\": 0\n        }],\n        \"tooltip\": \"\",\n        \"xmin\": xmin,\n        \"xmax\": xmax,\n        \"ymin\": ymin,\n        \"ymax\": ymax,\n        \"line\": {\n            \"color\": \"rgb(0,0,0)\",\n        }\n    };\n\n    return valueLine\n};\n\n// provides curve options for all plot types with an independent x axis and a dependent y axis\nconst generateSeriesCurveOptions = function (curve, curveIndex, axisMap, dataSeries) {\n\n    const label = curve['label'];\n    const annotation = curve['annotation'];\n\n    // adjust axes for later setting of the plot options\n    const ymin = curve['ymin'];\n    const ymax = curve['ymax'];\n    const xmin = curve['xmin'];\n    const xmax = curve['xmax'];\n    const axisKey = curve['axisKey'];\n    if (axisKey in axisMap) {\n        axisMap[axisKey].axisLabel = axisKey;\n        axisMap[axisKey].ymin = ymin < axisMap[axisKey].ymin ? ymin : axisMap[axisKey].ymin;\n        axisMap[axisKey].ymax = ymax > axisMap[axisKey].ymax ? ymax : axisMap[axisKey].ymax;\n        axisMap[axisKey].xmin = xmin < axisMap[axisKey].xmin ? xmin : axisMap[axisKey].xmin;\n        axisMap[axisKey].xmax = xmax > axisMap[axisKey].xmax ? xmax : axisMap[axisKey].xmax;\n    } else {\n        axisMap[axisKey] = {\n            index: Object.keys(axisMap).length + 1,\n            xmin: xmin,\n            xmax: xmax,\n            ymin: ymin,\n            ymax: ymax,\n            axisLabel: axisKey\n        };\n    }\n\n    const axisNumber = Object.keys(axisMap).indexOf(axisKey);\n\n    var error_y_temp = {\n        error_y: {\n            array: dataSeries.error_y,\n            thickness: 1,     // set the thickness of the error bars\n            color: curve['color'],\n            visible: false, // changed later if matching\n            // width: 0\n        }\n    };\n    var curveOptions = {\n        ...{\n            label: label,\n            curveId: label,\n            name: label,\n            xaxis: \"x1\",\n            yaxis: \"y\" + (axisNumber + 1),\n            annotation: annotation,\n            annotateColor: curve['color'],\n            mode: \"lines+markers\",\n            marker: {\n                symbol: \"circle\",\n                color: curve['color'],\n                size: 8\n            },\n            line: {\n                dash: 'solid',\n                color: curve['color'],\n                width: 2\n            },\n            visible: true\n        }, ...dataSeries\n    };\n\n    delete curveOptions.error_y;\n\n    curveOptions['error_y'] = error_y_temp.error_y;\n\n    return curveOptions;\n};\n\n// provides curve options for all plot types with an independent y axis and a dependent x axis\nconst generateProfileCurveOptions = function (curve, curveIndex, axisMap, dataProfile) {\n\n    const label = curve['label'];\n    const annotation = curve['annotation'];\n\n    // adjust axes for later setting of the plot options\n    const ymin = curve['ymin'];\n    const ymax = curve['ymax'];\n    const xmin = curve['xmin'];\n    const xmax = curve['xmax'];\n    const axisKey = curve['axisKey'];\n    if (axisKey in axisMap) {\n        axisMap[axisKey].axisLabel = axisKey;\n        axisMap[axisKey].ymin = ymin < axisMap[axisKey].ymin ? ymin : axisMap[axisKey].ymin;\n        axisMap[axisKey].ymax = ymax > axisMap[axisKey].ymax ? ymax : axisMap[axisKey].ymax;\n        axisMap[axisKey].xmin = xmin < axisMap[axisKey].xmin ? xmin : axisMap[axisKey].xmin;\n        axisMap[axisKey].xmax = xmax > axisMap[axisKey].xmax ? xmax : axisMap[axisKey].xmax;\n    } else {\n        axisMap[axisKey] = {\n            index: Object.keys(axisMap).length + 1,\n            xmin: xmin,\n            xmax: xmax,\n            ymin: ymin,\n            ymax: ymax,\n            axisLabel: axisKey\n        };\n    }\n\n    const axisNumber = Object.keys(axisMap).indexOf(axisKey);\n\n    var error_x_temp = {\n        error_x: {\n            array: dataProfile.error_x,\n            thickness: 1,     // set the thickness of the error bars\n            color: curve['color'],\n            visible: false, // changed later if matching\n            // width: 0\n        }\n    };\n    var curveOptions = {\n        ...{\n            label: label,\n            curveId: label,\n            name: label,\n            xaxis: \"x\" + (axisNumber + 1),\n            yaxis: \"y1\",\n            annotation: annotation,\n            annotateColor: curve['color'],\n            mode: \"lines+markers\",\n            marker: {\n                symbol: \"circle\",\n                color: curve['color'],\n                size: 8\n            },\n            line: {\n                dash: 'solid',\n                color: curve['color'],\n                width: 2\n            },\n            visible: true\n        }, ...dataProfile\n    };\n\n    delete curveOptions.error_x;\n\n    curveOptions['error_x'] = error_x_temp.error_x;\n\n    return curveOptions;\n};\n\n// provides curve options for reliability diagrams\nconst generateReliabilityCurveOptions = function (curve, curveIndex, axisMap, dataSeries) {\n\n    const label = curve['label'];\n    const annotation = curve['annotation'];\n\n    // adjust axes for later setting of the plot options\n    const ymin = curve['ymin'];\n    const ymax = curve['ymax'];\n    const xmin = curve['xmin'];\n    const xmax = curve['xmax'];\n    const axisKey = curve['axisKey'];\n    if (axisKey in axisMap) {\n        axisMap[axisKey].axisLabel = axisKey;\n        axisMap[axisKey].ymin = ymin < axisMap[axisKey].ymin ? ymin : axisMap[axisKey].ymin;\n        axisMap[axisKey].ymax = ymax > axisMap[axisKey].ymax ? ymax : axisMap[axisKey].ymax;\n        axisMap[axisKey].xmin = xmin < axisMap[axisKey].xmin ? xmin : axisMap[axisKey].xmin;\n        axisMap[axisKey].xmax = xmax > axisMap[axisKey].xmax ? xmax : axisMap[axisKey].xmax;\n    } else {\n        axisMap[axisKey] = {\n            index: Object.keys(axisMap).length + 1,\n            xmin: xmin,\n            xmax: xmax,\n            ymin: ymin,\n            ymax: ymax,\n            axisLabel: axisKey\n        };\n    }\n\n    const axisNumber = Object.keys(axisMap).indexOf(axisKey);\n\n    var error_y_temp = {\n        error_y: {\n            array: dataSeries.error_y,\n            thickness: 1,     // set the thickness of the error bars\n            color: curve['color'],\n            visible: false, // changed later if matching\n            // width: 0\n        }\n    };\n    var curveOptions = {\n        ...{\n            label: label,\n            curveId: label,\n            name: label,\n            xaxis: \"x1\",\n            yaxis: \"y\" + (axisNumber + 1),\n            annotation: annotation,\n            annotateColor: curve['color'],\n            mode: \"lines+markers\",\n            marker: {\n                symbol: \"circle\",\n                color: curve['color'],\n                size: 8\n            },\n            line: {\n                dash: 'solid',\n                color: curve['color'],\n                width: 2\n            },\n            visible: true\n        }, ...dataSeries\n    };\n\n    delete curveOptions.error_y;\n\n    curveOptions['error_y'] = error_y_temp.error_y;\n\n    return curveOptions;\n};\n\n// provides curve options for all plot types with an independent x axis and a dependent y axis\nconst generateBarChartCurveOptions = function (curve, curveIndex, axisMap, dataBars) {\n\n    const label = curve['label'];\n    const annotation = curve['annotation'];\n\n    // adjust axes for later setting of the plot options\n    const ymin = curve['ymin'];\n    const ymax = curve['ymax'];\n    const xmin = curve['xmin'];\n    const xmax = curve['xmax'];\n    const axisKey = curve['axisKey'];\n    if (axisKey in axisMap) {\n        axisMap[axisKey].axisLabel = axisKey;\n        axisMap[axisKey].ymin = ymin < axisMap[axisKey].ymin ? ymin : axisMap[axisKey].ymin;\n        axisMap[axisKey].ymax = ymax > axisMap[axisKey].ymax ? ymax : axisMap[axisKey].ymax;\n        axisMap[axisKey].xmin = xmin < axisMap[axisKey].xmin ? xmin : axisMap[axisKey].xmin;\n        axisMap[axisKey].xmax = xmax > axisMap[axisKey].xmax ? xmax : axisMap[axisKey].xmax;\n    } else {\n        axisMap[axisKey] = {\n            index: Object.keys(axisMap).length + 1,\n            xmin: xmin,\n            xmax: xmax,\n            ymin: ymin,\n            ymax: ymax,\n            axisLabel: axisKey\n        };\n    }\n\n    const curveOptions = {\n        ...{\n            label: label,\n            curveId: label,\n            name: label,\n            annotation: annotation,\n            annotateColor: curve['color'],\n            marker: {\n                color: curve['color'],\n                line: {\n                    color: \"rgb(0,0,0)\"\n                }\n            },\n            type: 'bar',\n            visible: true\n        }, ...dataBars\n    };\n\n    return curveOptions;\n};\n\nconst generateMapCurveOptions = function (curve, dataSeries) {\n\n    const markerSizes = dataSeries.queryVal.map(function (val) {\n        return Math.ceil(Math.abs(val * 4)) + 2;\n    });\n\n    const label = curve['label'];\n\n    const curveOptions = {\n        ...{\n            label: label,\n            curveId: label,\n            name: label,\n            type: 'scattermapbox',\n            mode: 'markers',\n            marker: {\n                color: dataSeries.color,\n                size: markerSizes,\n                opacity: 0\n            },\n        }, ...dataSeries\n    };\n\n    delete curveOptions.color;\n\n    return curveOptions;\n};\n\nconst generateMapColorTextOptions = function (label, dataSeries) {\n\n    const curveOptions = {\n        ...{\n            label: label,\n            type: 'scattermapbox',\n            mode: 'markers+text',\n            marker: {\n                opacity: 0\n            },\n            textfont: {\n                family: 'sans serif',\n                // size: 18,\n                color: dataSeries.color\n            },\n            hoverinfo: 'skip',\n            visible: true\n        }, ...dataSeries\n    };\n\n    delete curveOptions.color;\n\n    return curveOptions;\n};\n\nconst generateContourCurveOptions = function (curve, axisMap, dataset) {\n\n    const label = curve['label'];\n    const annotation = curve['annotation'];\n    const unitKey = curve['unitKey'];\n\n    const curveOptions = {\n        ...{\n            label: label,\n            curveId: label,\n            name: label,\n            annotation: annotation,\n            annotateColor: curve['color'],\n            xAxisKey: curve['xAxisKey'],\n            yAxisKey: curve['yAxisKey'],\n            marker: {\n                color: curve['color'],\n            },\n            type: 'contour',\n            autocontour: false,\n            ncontours: 15,   // apparently plotly regards this as a \"less than or equal to\" field\n            contours: {\n                // these are only used if autocontour is set to false and ncontour is disregarded\n                start: dataset.zmin + (dataset.zmax - dataset.zmin) / 16,\n                end: dataset.zmax - (dataset.zmax - dataset.zmin) / 16,\n                size:  (dataset.zmax - dataset.zmin) / 16,\n                showlabels: false\n            },\n            colorscale: 'RdBu',\n            reversescale: false,\n            colorbar:{\n                title: unitKey,\n                titleside: 'right',\n                titlefont: {\n                    size: 20,\n                    family: 'Arial, sans-serif'\n                }\n            },\n            // connectgaps: true,   // this option will interpolate to fill in nulls\n            visible: true\n        }, ...dataset\n    };\n\n    return curveOptions;\n};\n\nexport default matsDataCurveOpsUtils = {\n\n    getHorizontalValueLine: getHorizontalValueLine,\n    getVerticalValueLine: getVerticalValueLine,\n    getLinearValueLine: getLinearValueLine,\n\n    generateSeriesCurveOptions: generateSeriesCurveOptions,\n    generateReliabilityCurveOptions: generateReliabilityCurveOptions,\n    generateProfileCurveOptions: generateProfileCurveOptions,\n    generateBarChartCurveOptions: generateBarChartCurveOptions,\n    generateMapCurveOptions: generateMapCurveOptions,\n    generateMapColorTextOptions: generateMapColorTextOptions,\n    generateContourCurveOptions: generateContourCurveOptions\n\n}","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport {matsTypes} from 'meteor/randyp:mats-common';\nimport {moment} from 'meteor/momentjs:moment'\n\n// sets plot options for timeseries graphs\nconst generateSeriesPlotOptions = function (dataset, curves, axisMap, errorMax) {\n    var xmin = axisMap[Object.keys(axisMap)[0]].xmin;\n    var xmax = axisMap[Object.keys(axisMap)[0]].xmax;\n\n    var layout = {\n        margin: {\n            l: 80,\n            r: 80,\n            b: 80,\n            t: 20,\n            pad: 4\n        },\n        zeroline: false,\n        hovermode: 'closest',\n        hoverlabel: {'font': {'size': 14, 'family': 'Arial', 'color': '#FFFFFF'}},\n        showlegend: false\n    };\n\n    layout['xaxis'] = {\n        title: 'Time',\n        titlefont: {color: '#000000', size: 22},\n        tickfont: {color: '#000000', size: 12}\n    };\n\n    const axisAnchor = {0: 'x', 1: 'x', 2: 'free', 3: 'free', 4: 'free', 5: 'free', 6: 'free', 7: 'free'};\n    const axisSide = {0: 'left', 1: 'right', 2: 'left', 3: 'right', 4: 'left', 5: 'right', 6: 'left', 7: 'right'};\n    const axisPosition = {0: 0, 1: 1, 2: 0.1, 3: 0.9, 4: 0.2, 5: 0.8, 6: 0.3, 7: 0.7};\n\n    const yAxisNumber = Object.keys(axisMap).length;\n    var axisKey;\n    var axisIdx;\n    var axisLabel;\n    for (axisIdx = 0; axisIdx < yAxisNumber; axisIdx++) {\n        axisKey = Object.keys(axisMap)[axisIdx];\n        var ymin = axisMap[axisKey].ymin;\n        var ymax = axisMap[axisKey].ymax;\n        ymax = ymax + errorMax;\n        ymin = ymin - errorMax;\n        const yPad = ((ymax - ymin) * 0.05) !== 0 ? (ymax - ymin) * 0.05 : 0.05;\n        xmin = axisMap[axisKey].xmin < xmin ? axisMap[axisKey].xmin : xmin;\n        xmax = axisMap[axisKey].xmax > xmax ? axisMap[axisKey].xmax : xmax;\n        axisLabel = axisMap[axisKey].axisLabel;\n        var axisObjectKey;\n        if (axisIdx === 0) {\n            axisObjectKey = 'yaxis';\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [ymin - yPad, ymax + yPad],\n                zeroline: false\n            };\n        } else if (axisIdx < Object.keys(axisPosition).length) {\n            axisObjectKey = 'yaxis' + (axisIdx + 1);\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [ymin - yPad, ymax + yPad],\n                anchor: axisAnchor[axisIdx],\n                overlaying: 'y',\n                side: axisSide[axisIdx],\n                position: axisPosition[axisIdx],\n                zeroline: false\n            };\n        } else {\n            axisObjectKey = 'yaxis' + (axisIdx + 1);\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [ymin - yPad, ymax + yPad],\n                anchor: axisAnchor[Object.keys(axisPosition).length - 1],\n                overlaying: 'y',\n                side: axisSide[Object.keys(axisPosition).length - 1],\n                position: axisPosition[Object.keys(axisPosition).length - 1],\n                zeroline: false\n            };\n        }\n    }\n    const xPad = ((xmax - xmin) * 0.075) !== 0 ? (xmax - xmin) * 0.075 : 0.075;\n    xmax = moment.utc(xmax + xPad * Math.ceil(yAxisNumber / 2)).format(\"YYYY-MM-DD HH:mm\");\n    xmin = moment.utc(xmin - xPad * Math.ceil(yAxisNumber / 2)).format(\"YYYY-MM-DD HH:mm\");\n    layout['xaxis']['range'] = [xmin, xmax];\n    return layout;\n};\n\n// sets plot options for profile graphs\nconst generateProfilePlotOptions = function (dataset, curves, axisMap, errorMax) {\n    var ymin = 10;\n    var ymax = 1075;\n    const xAxisNumber = Object.keys(axisMap).length;\n\n    var layout = {\n        margin: {\n            l: 80,\n            r: 80,\n            b: 80,\n            t: xAxisNumber > 1 ? 80 : 20,\n            pad: 4\n        },\n        zeroline: false,\n        hovermode: 'closest',\n        hoverlabel: {'font': {'size': 14, 'family': 'Arial', 'color': '#FFFFFF'}},\n        showlegend: false\n    };\n    var tickVals;\n    var tickText;\n    if (matsCollections.Settings.findOne({}).appType === matsTypes.AppTypes.metexpress) {\n        tickVals = [1000, 850, 700, 600, 500, 400, 300, 250, 200, 150, 100, 50, 10];\n        tickText = ['1000', '850', '700', '600', '500', '400', '300', '250', '200', '150', '100', '50', '10'];\n    } else {\n        tickVals = [1000, 900, 800, 700, 600, 500, 400, 300, 200, 100];\n        tickText = ['1000', '900', '800', '700', '600', '500', '400', '300', '200', '100'];\n    }\n    layout['yaxis'] = {\n        title: 'Pressure Level',\n        titlefont: {color: '#000000', size: 22},\n        tickfont: {color: '#000000', size: 14},\n        tickvals: tickVals,\n        ticktext: tickText,\n        type: 'linear',\n        autorange: 'reversed'\n    };\n\n    const axisAnchor = {0: 'x', 1: 'x', 2: 'free', 3: 'free', 4: 'free', 5: 'free', 6: 'free', 7: 'free'};\n    const axisSide = {0: 'bottom', 1: 'top', 2: 'bottom', 3: 'top', 4: 'bottom', 5: 'top', 6: 'bottom', 7: 'top'};\n    const axisPosition = {0: 0, 1: 1, 2: 0.15, 3: 0.85, 4: 0.3, 5: 0.7, 6: 0.45, 7: 0.55};\n\n    var axisKey;\n    var axisIdx;\n    var axisLabel;\n    for (axisIdx = 0; axisIdx < xAxisNumber; axisIdx++) {\n        axisKey = Object.keys(axisMap)[axisIdx];\n        var xmin = axisMap[axisKey].xmin;\n        var xmax = axisMap[axisKey].xmax;\n        xmax = xmax + errorMax;\n        xmin = xmin - errorMax;\n        axisLabel = axisMap[axisKey].axisLabel;\n        const xPad = ((xmax - xmin) * 0.05) !== 0 ? (xmax - xmin) * 0.05 : 0.05;\n        axisLabel = axisMap[axisKey].axisLabel;\n        var axisObjectKey;\n        if (axisIdx === 0) {\n            axisObjectKey = 'xaxis';\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [xmin - xPad, xmax + xPad],\n                zeroline: false\n            };\n        } else if (axisIdx < Object.keys(axisPosition).length) {\n            axisObjectKey = 'xaxis' + (axisIdx + 1);\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [xmin - xPad, xmax + xPad],\n                anchor: axisAnchor[axisIdx],\n                overlaying: 'x',\n                side: axisSide[axisIdx],\n                position: axisPosition[axisIdx],\n                zeroline: false\n            };\n        } else {\n            axisObjectKey = 'xaxis' + (axisIdx + 1);\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [xmin - xPad, xmax + xPad],\n                anchor: axisAnchor[Object.keys(axisPosition).length - 1],\n                overlaying: 'x',\n                side: axisSide[Object.keys(axisPosition).length - 1],\n                position: axisPosition[Object.keys(axisPosition).length - 1],\n                zeroline: false\n            };\n        }\n    }\n    const yPad = ((ymax - ymin) * 0.25) !== 0 ? (ymax - ymin) * 0.25 : 0.25;\n    ymax = ymax + (yPad * Math.ceil(xAxisNumber / 2));\n    ymin = ymin - (yPad * Math.ceil(xAxisNumber / 2));\n    layout['yaxis']['range'] = [ymin, ymax];\n    return layout;\n};\n\n// sets plot options for dieoff graphs\nconst generateDieoffPlotOptions = function (dataset, curves, axisMap, errorMax) {\n    var xmin = axisMap[Object.keys(axisMap)[0]].xmin;\n    var xmax = axisMap[Object.keys(axisMap)[0]].xmax;\n\n    var layout = {\n        margin: {\n            l: 80,\n            r: 80,\n            b: 80,\n            t: 20,\n            pad: 4\n        },\n        zeroline: false,\n        hovermode: 'closest',\n        hoverlabel: {'font': {'size': 14, 'family': 'Arial', 'color': '#FFFFFF'}},\n        showlegend: false\n    };\n\n    layout['xaxis'] = {\n        title: 'Forecast Hour',\n        titlefont: {color: '#000000', size: 22},\n        tickfont: {color: '#000000', size: 14},\n    };\n\n    const axisAnchor = {0: 'x', 1: 'x', 2: 'free', 3: 'free', 4: 'free', 5: 'free', 6: 'free', 7: 'free'};\n    const axisSide = {0: 'left', 1: 'right', 2: 'left', 3: 'right', 4: 'left', 5: 'right', 6: 'left', 7: 'right'};\n    const axisPosition = {0: 0, 1: 1, 2: 0.1, 3: 0.9, 4: 0.2, 5: 0.8, 6: 0.3, 7: 0.7};\n\n    const yAxisNumber = Object.keys(axisMap).length;\n    var axisKey;\n    var axisIdx;\n    var axisLabel;\n    for (axisIdx = 0; axisIdx < yAxisNumber; axisIdx++) {\n        axisKey = Object.keys(axisMap)[axisIdx];\n        var ymin = axisMap[axisKey].ymin;\n        var ymax = axisMap[axisKey].ymax;\n        ymax = ymax + errorMax;\n        ymin = ymin - errorMax;\n        const yPad = ((ymax - ymin) * 0.05) !== 0 ? (ymax - ymin) * 0.05 : 0.05;\n        xmin = axisMap[axisKey].xmin < xmin ? axisMap[axisKey].xmin : xmin;\n        xmax = axisMap[axisKey].xmax > xmax ? axisMap[axisKey].xmax : xmax;\n        axisLabel = axisMap[axisKey].axisLabel;\n        var axisObjectKey;\n        if (axisIdx === 0) {\n            axisObjectKey = 'yaxis';\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [ymin - yPad, ymax + yPad],\n                zeroline: false\n            };\n        } else if (axisIdx < Object.keys(axisPosition).length) {\n            axisObjectKey = 'yaxis' + (axisIdx + 1);\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [ymin - yPad, ymax + yPad],\n                anchor: axisAnchor[axisIdx],\n                overlaying: 'y',\n                side: axisSide[axisIdx],\n                position: axisPosition[axisIdx],\n                zeroline: false\n            };\n        } else {\n            axisObjectKey = 'yaxis' + (axisIdx + 1);\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [ymin - yPad, ymax + yPad],\n                anchor: axisAnchor[Object.keys(axisPosition).length - 1],\n                overlaying: 'y',\n                side: axisSide[Object.keys(axisPosition).length - 1],\n                position: axisPosition[Object.keys(axisPosition).length - 1],\n                zeroline: false\n            };\n        }\n    }\n    const xPad = ((xmax - xmin) * 0.075) !== 0 ? (xmax - xmin) * 0.075 : 0.075;\n    xmax = xmax + (xPad * Math.ceil(yAxisNumber / 2));\n    xmin = xmin - (xPad * Math.ceil(yAxisNumber / 2));\n    layout['xaxis']['range'] = [xmin, xmax];\n    return layout;\n};\n\n// sets plot options for threshold graphs\nconst generateThresholdPlotOptions = function (dataset, curves, axisMap, errorMax) {\n    var xmin = 0;\n    var xmax = 3;\n\n    var layout = {\n        margin: {\n            l: 80,\n            r: 80,\n            b: 80,\n            t: 20,\n            pad: 4\n        },\n        zeroline: false,\n        hovermode: 'closest',\n        hoverlabel: {'font': {'size': 14, 'family': 'Arial', 'color': '#FFFFFF'}},\n        showlegend: false\n    };\n\n    layout['xaxis'] = {\n        title: 'Threshold',\n        titlefont: {color: '#000000', size: 22},\n        tickfont: {color: '#000000', size: 14},\n        tickvals: [0.01, 0.1, 0.25, 0.5, 1.0, 1.5, 2.0, 3.0],\n        ticktext: [\"0.01\", \"0.10\", \"0.25\", \"0.50\", \"1.00\", \"1.50\", \"2.00\", \"3.00\"]\n    };\n\n    const axisAnchor = {0: 'x', 1: 'x', 2: 'free', 3: 'free', 4: 'free', 5: 'free', 6: 'free', 7: 'free'};\n    const axisSide = {0: 'left', 1: 'right', 2: 'left', 3: 'right', 4: 'left', 5: 'right', 6: 'left', 7: 'right'};\n    const axisPosition = {0: 0, 1: 1, 2: 0.1, 3: 0.9, 4: 0.2, 5: 0.8, 6: 0.3, 7: 0.7};\n\n    const yAxisNumber = Object.keys(axisMap).length;\n    var axisKey;\n    var axisIdx;\n    var axisLabel;\n    for (axisIdx = 0; axisIdx < yAxisNumber; axisIdx++) {\n        axisKey = Object.keys(axisMap)[axisIdx];\n        var ymin = axisMap[axisKey].ymin;\n        var ymax = axisMap[axisKey].ymax;\n        ymax = ymax + errorMax;\n        ymin = ymin - errorMax;\n        const yPad = ((ymax - ymin) * 0.05) !== 0 ? (ymax - ymin) * 0.05 : 0.05;\n        axisLabel = axisMap[axisKey].axisLabel;\n        var axisObjectKey;\n        if (axisIdx === 0) {\n            axisObjectKey = 'yaxis';\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [ymin - yPad, ymax + yPad],\n                zeroline: false\n            };\n        } else if (axisIdx < Object.keys(axisPosition).length) {\n            axisObjectKey = 'yaxis' + (axisIdx + 1);\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [ymin - yPad, ymax + yPad],\n                anchor: axisAnchor[axisIdx],\n                overlaying: 'y',\n                side: axisSide[axisIdx],\n                position: axisPosition[axisIdx],\n                zeroline: false\n            };\n        } else {\n            axisObjectKey = 'yaxis' + (axisIdx + 1);\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [ymin - yPad, ymax + yPad],\n                anchor: axisAnchor[Object.keys(axisPosition).length - 1],\n                overlaying: 'y',\n                side: axisSide[Object.keys(axisPosition).length - 1],\n                position: axisPosition[Object.keys(axisPosition).length - 1],\n                zeroline: false\n            };\n        }\n    }\n    const xPad = ((xmax - xmin) * 0.075) !== 0 ? (xmax - xmin) * 0.075 : 0.075;\n    xmax = xmax + (xPad * Math.ceil(yAxisNumber / 2));\n    xmin = xmin - (xPad * Math.ceil(yAxisNumber / 2));\n    layout['xaxis']['range'] = [xmin, xmax];\n    return layout;\n};\n\n// sets plot options for valid time graphs\nconst generateValidTimePlotOptions = function (dataset, curves, axisMap, errorMax) {\n    var xmin = 0;\n    var xmax = 23;\n\n    var layout = {\n        margin: {\n            l: 80,\n            r: 80,\n            b: 80,\n            t: 20,\n            pad: 4\n        },\n        zeroline: false,\n        hovermode: 'closest',\n        hoverlabel: {'font': {'size': 14, 'family': 'Arial', 'color': '#FFFFFF'}},\n        showlegend: false\n    };\n\n    layout['xaxis'] = {\n        title: 'Hour of Day',\n        titlefont: {color: '#000000', size: 22},\n        tickfont: {color: '#000000', size: 14},\n        tickvals: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23],\n        ticktext: [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\", \"13\", \"14\", \"15\", \"16\", \"17\", \"18\", \"19\", \"20\", \"21\", \"22\", \"23\"]\n    };\n\n    const axisAnchor = {0: 'x', 1: 'x', 2: 'free', 3: 'free', 4: 'free', 5: 'free', 6: 'free', 7: 'free'};\n    const axisSide = {0: 'left', 1: 'right', 2: 'left', 3: 'right', 4: 'left', 5: 'right', 6: 'left', 7: 'right'};\n    const axisPosition = {0: 0, 1: 1, 2: 0.1, 3: 0.9, 4: 0.2, 5: 0.8, 6: 0.3, 7: 0.7};\n\n    const yAxisNumber = Object.keys(axisMap).length;\n    var axisKey;\n    var axisIdx;\n    var axisLabel;\n    for (axisIdx = 0; axisIdx < yAxisNumber; axisIdx++) {\n        axisKey = Object.keys(axisMap)[axisIdx];\n        var ymin = axisMap[axisKey].ymin;\n        var ymax = axisMap[axisKey].ymax;\n        ymax = ymax + errorMax;\n        ymin = ymin - errorMax;\n        const yPad = ((ymax - ymin) * 0.05) !== 0 ? (ymax - ymin) * 0.05 : 0.05;\n        axisLabel = axisMap[axisKey].axisLabel;\n        var axisObjectKey;\n        if (axisIdx === 0) {\n            axisObjectKey = 'yaxis';\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [ymin - yPad, ymax + yPad],\n                zeroline: false\n            };\n        } else if (axisIdx < Object.keys(axisPosition).length) {\n            axisObjectKey = 'yaxis' + (axisIdx + 1);\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [ymin - yPad, ymax + yPad],\n                anchor: axisAnchor[axisIdx],\n                overlaying: 'y',\n                side: axisSide[axisIdx],\n                position: axisPosition[axisIdx],\n                zeroline: false\n            };\n        } else {\n            axisObjectKey = 'yaxis' + (axisIdx + 1);\n            layout[axisObjectKey] = {\n                title: axisLabel,\n                titlefont: {color: '#000000', size: 22},\n                tickfont: {color: '#000000', size: 14},\n                range: [ymin - yPad, ymax + yPad],\n                anchor: axisAnchor[Object.keys(axisPosition).length - 1],\n                overlaying: 'y',\n                side: axisSide[Object.keys(axisPosition).length - 1],\n                position: axisPosition[Object.keys(axisPosition).length - 1],\n                zeroline: false\n            };\n        }\n    }\n    const xPad = ((xmax - xmin) * 0.075) !== 0 ? (xmax - xmin) * 0.075 : 0.075;\n    xmax = xmax + (xPad * Math.ceil(yAxisNumber / 2));\n    xmin = xmin - (xPad * Math.ceil(yAxisNumber / 2));\n    layout['xaxis']['range'] = [xmin, xmax];\n    return layout;\n};\n\n// sets plot options for reliability graphs\nconst generateReliabilityPlotOptions = function (dataset) {\n    var xmin = 0;\n    var xmax = 1;\n    var ymin = 0;\n    var ymax = 1;\n\n    var layout = {\n        margin: {\n            l: 80,\n            r: 80,\n            b: 80,\n            t: 20,\n            pad: 4\n        },\n        zeroline: true,\n        perfectLine: false,\n        hovermode: 'closest',\n        hoverlabel: {'font': {'size': 14, 'family': 'Arial', 'color': '#FFFFFF'}},\n        showlegend: false\n    };\n\n    layout['xaxis'] = {\n        title: 'Forecast Probability',\n        titlefont: {color: '#000000', size: 22},\n        tickfont: {color: '#000000', size: 14},\n        tickvals: [0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0],\n        ticktext: [\"0.0\", \"0.1\", \"0.2\", \"0.3\", \"0.4\", \"0.5\", \"0.6\", \"0.7\", \"0.8\", \"0.9\", \"1.0\"],\n        range: [xmin, xmax]\n    };\n\n    layout['yaxis'] = {\n        title: 'Observed Relative Frequency',\n        titlefont: {color: '#000000', size: 22},\n        tickfont: {color: '#000000', size: 14},\n        tickvals: [0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0],\n        ticktext: [\"0.0\", \"0.1\", \"0.2\", \"0.3\", \"0.4\", \"0.5\", \"0.6\", \"0.7\", \"0.8\", \"0.9\", \"1.0\"],\n        range: [ymin, ymax]\n    };\n\n    return layout;\n};\n\n\n// sets plot options for map graphs\nconst generateMapPlotOptions = function () {\n    const options = {\n        autosize: true,\n        hovermode: 'closest',\n        mapbox: {\n            bearing: 0,\n            center: {\n                lat: 39.834,\n                lon: -98.604\n            },\n            pitch: 0,\n            zoom: 3.25,\n            accesstoken: 'pk.eyJ1IjoibWF0cy1nc2QiLCJhIjoiY2pvN2l1N2MyMG9xdTN3bWR3ODV5a2E2ZiJ9.PtgcGhxaoD43N0OwJSNVMg',\n            style: 'light'\n        },\n        margin: {\n            l: 30,\n            r: 30,\n            b: 40,\n            t: 10,\n            pad: 4\n        },\n        showlegend: false,\n    };\n    return options;\n};\n\n// sets plot options for valid time graphs\nconst generateHistogramPlotOptions = function (dataset, curves, axisMap, plotBins) {\n    const axisKey = curves[0].axisKey;\n    const axisLabel = axisMap[axisKey].axisLabel;\n\n    var layout = {\n        margin: {\n            l: 80,\n            r: 80,\n            b: 80,\n            t: 20,\n            pad: 4\n        },\n        zeroline: false,\n        bargap: 0.25,\n        barmode: 'group',\n        hovermode: 'closest',\n        hoverlabel: {'font': {'size': 14, 'family': 'Arial', 'color': '#FFFFFF'}},\n        showlegend: false\n    };\n\n    layout['xaxis'] = {\n        title: 'Bin',\n        titlefont: {color: '#000000', size: 22},\n        tickfont: {color: '#000000', size: 12},\n        tickvals: plotBins.binMeans,\n        ticktext: plotBins.binLabels,\n    };\n\n    layout['yaxis'] = {\n        title: axisLabel,\n        titlefont: {color: '#000000', size: 22},\n        tickfont: {color: '#000000', size: 14},\n    };\n\n    return layout;\n\n};\n\n// sets plot options for valid time graphs\nconst generateContourPlotOptions = function (dataset, axisMap) {\n    const xAxisKey = dataset[0]['xAxisKey'];\n    const yAxisKey = dataset[0]['yAxisKey'];\n\n    var layout = {\n        margin: {\n            l: 80,\n            r: 80,\n            b: 80,\n            t: 20,\n            pad: 4\n        },\n        zeroline: false,\n        hovermode: 'closest',\n        hoverlabel: {'font': {'size': 14, 'family': 'Arial', 'color': '#FFFFFF'}}\n    };\n\n    layout['xaxis'] = {\n        title: xAxisKey,\n        titlefont: {color: '#000000', size: 22},\n        tickfont: {color: '#000000', size: 12},\n    };\n\n    if (yAxisKey === \"Pressure level\") {\n        layout['yaxis'] = {\n            title: yAxisKey,\n            titlefont: {color: '#000000', size: 22},\n            tickfont: {color: '#000000', size: 14},\n            tickvals: [1000, 900, 800, 700, 600, 500, 400, 300, 200, 100],\n            ticktext: ['1000', '900', '800', '700', '600', '500', '400', '300', '200', '100'],\n            range: [1100, 0],\n            type: 'linear',\n            autorange: 'reversed'\n        };\n    } else {\n        layout['yaxis'] = {\n            title: yAxisKey,\n            titlefont: {color: '#000000', size: 22},\n            tickfont: {color: '#000000', size: 14},\n        };\n    }\n    return layout;\n\n};\n\nexport default matsDataPlotOpsUtils = {\n\n    generateSeriesPlotOptions: generateSeriesPlotOptions,\n    generateProfilePlotOptions: generateProfilePlotOptions,\n    generateDieoffPlotOptions: generateDieoffPlotOptions,\n    generateThresholdPlotOptions: generateThresholdPlotOptions,\n    generateValidTimePlotOptions: generateValidTimePlotOptions,\n    generateReliabilityPlotOptions: generateReliabilityPlotOptions,\n    generateMapPlotOptions: generateMapPlotOptions,\n    generateHistogramPlotOptions: generateHistogramPlotOptions,\n    generateContourPlotOptions: generateContourPlotOptions\n\n}\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsTypes} from 'meteor/randyp:mats-common';\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport {matsDataUtils} from 'meteor/randyp:mats-common';\nimport {matsDataMatchUtils} from 'meteor/randyp:mats-common';\nimport {matsDataDiffUtils} from 'meteor/randyp:mats-common';\nimport {matsDataCurveOpsUtils} from 'meteor/randyp:mats-common';\nimport {matsDataPlotOpsUtils} from 'meteor/randyp:mats-common';\nimport {moment} from 'meteor/momentjs:moment'\n\nconst processDataXYCurve = function (dataset, appParams, curveInfoParams, plotParams, bookkeepingParams) {\n    // variable to store maximum error bar length\n    var errorMax = Number.MIN_VALUE;\n    var error = \"\";\n\n    const appName = matsCollections.appName.findOne({}).app;\n\n    // if matching, pare down dataset to only matching data\n    if (curveInfoParams.curvesLength > 1 && appParams.matching) {\n        if (appParams.hasLevels) {\n            dataset = matsDataMatchUtils.getMatchedDataSetWithLevels(dataset, curveInfoParams.curvesLength, appParams.plotType);\n        } else {\n            dataset = matsDataMatchUtils.getMatchedDataSet(dataset, curveInfoParams.curvesLength);\n        }\n    }\n\n    // we may need to recalculate the axis limits after unmatched data and outliers are removed\n    var axisLimitReprocessed = {};\n\n    // calculate data statistics (including error bars) for each curve\n    for (var curveIndex = 0; curveIndex < curveInfoParams.curvesLength; curveIndex++) {\n        if (appName !== \"surfrad\") {\n            axisLimitReprocessed[curveInfoParams.curves[curveIndex].axisKey] = axisLimitReprocessed[curveInfoParams.curves[curveIndex].axisKey] !== undefined;\n        }\n        var diffFrom = curveInfoParams.curves[curveIndex].diffFrom;\n        var statisticSelect = appName.indexOf(\"anomalycor\") !== -1 ? \"ACC\" : curveInfoParams.curves[curveIndex]['statistic'];\n        var data = dataset[curveIndex];\n        const label = dataset[curveIndex].label;\n\n        var di = 0;\n        var values = [];\n        var indVars = [];\n        var means = [];\n        var rawStat;\n\n        /*\n        dataset[curveIndex] is the dataset.\n        it looks like:\n\n        d = {\n            x: [],\n            y: [],\n            error_x: [],   // curveTime\n            error_y: [],   // values\n            subVals: [],   //subVals\n            subSecs: [],   //subSecs\n            subLevs: [],   //subLevs\n            stats: [],     //pointStats\n            text: [],\n            glob_stats: {},     //curveStats\n            xmin: Number.MAX_VALUE,\n            xmax: Number.MIN_VALUE,\n            ymin: Number.MAX_VALUE,\n            ymax: Number.MIN_VALUE,\n            sum: 0\n        };\n        */\n\n        while (di < data.x.length) {\n\n            // errorResult holds all the calculated curve stats like mean, sd, etc.\n            var errorResult;\n            if (appParams.hasLevels) {\n                errorResult = matsDataUtils.get_err(data.subVals[di], data.subSecs[di], data.subLevs[di]);\n            } else {\n                errorResult = matsDataUtils.get_err(data.subVals[di], data.subSecs[di], []);\n            }\n\n            // store raw statistic from query before recalculating that statistic to account for data removed due to matching, QC, etc.\n            rawStat = data.y[di];\n            // this ungainly if statement is because the surfrad3 database doesn't support recalculating some stats.\n            if (appName !== \"surfrad\" ||\n                !(appName === \"surfrad\" &&\n                    (statisticSelect === 'Std deviation (do not plot matched)' || statisticSelect === 'RMS (do not plot matched)') &&\n                    !appParams.matching)) {\n                if ((diffFrom === null || diffFrom === undefined) || !appParams.matching) {\n                    // assign recalculated statistic to data[di][1], which is the value to be plotted\n                    data.y[di] = errorResult.d_mean;\n                } else {\n                    if (dataset[diffFrom[0]].y[di] !== null && dataset[diffFrom[1]].y[di] !== null) {\n                        // make sure that the diff curve actually shows the difference when matching. Otherwise outlier filtering etc. can make it slightly off.\n                        data.y[di] = dataset[diffFrom[0]].y[di] - dataset[diffFrom[1]].y[di];\n                    } else {\n                        // keep the null for no data at this point\n                        data.y[di] = null;\n                    }\n                }\n            }\n            values.push(data.y[di]);\n            indVars.push(data.x[di]);\n            means.push(errorResult.d_mean);\n\n            // store error bars if matching\n            const errorBar = errorResult.stde_betsy * 1.96;\n            if (appParams.matching) {\n                errorMax = errorMax > errorBar ? errorMax : errorBar;\n                data.error_y.array[di] = errorBar;\n            } else {\n                data.error_y.array[di] = null;\n            }\n\n            // remove sub values and times to save space\n            data.subVals[di] = [];\n            data.subSecs[di] = [];\n            data.subLevs[di] = [];\n\n            // store statistics for this di datapoint\n            data.stats[di] = {\n                raw_stat: rawStat,\n                d_mean: errorResult.d_mean,\n                sd: errorResult.sd,\n                n_good: errorResult.n_good,\n                lag1: errorResult.lag1,\n                stde_betsy: errorResult.stde_betsy\n            };\n\n            // this is the tooltip, it is the last element of each dataseries element.\n            // also change the x array from epoch to date for timeseries and DMC, as we are now done with it for calculations.\n            data.text[di] = label;\n            switch (appParams.plotType) {\n                case matsTypes.PlotTypes.timeSeries:\n                    data.text[di] = data.text[di] + \"<br>time: \" + moment.utc(data.x[di]).format(\"YYYY-MM-DD HH:mm\");\n                    break;\n                case matsTypes.PlotTypes.dailyModelCycle:\n                    var fhr = ((data.x[di] / 1000) % (24 * 3600)) / 3600 - curveInfoParams.utcCycleStarts[curveIndex];\n                    fhr = fhr < 0 ? fhr + 24 : fhr;\n                    data.text[di] = data.text[di] + \"<br>time: \" + moment.utc(data.x[di]).format(\"YYYY-MM-DD HH:mm\");\n                    data.text[di] = data.text[di] + \"<br>forecast hour: \" + fhr;\n                    break;\n                case matsTypes.PlotTypes.dieoff:\n                    data.text[di] = data.text[di] + \"<br>fhr: \" + data.x[di];\n                    break;\n                case matsTypes.PlotTypes.threshold:\n                    data.text[di] = data.text[di] + \"<br>threshold: \" + data.x[di];\n                    break;\n                case matsTypes.PlotTypes.validtime:\n                    data.text[di] = data.text[di] + \"<br>hour of day: \" + data.x[di];\n                    break;\n                default:\n                    data.text[di] = data.text[di] + \"<br>\" + data.x[di];\n                    break;\n            }\n            data.text[di] = data.text[di] +\n                \"<br>\" + statisticSelect + \": \" + (data.y[di] === null ? null : data.y[di].toPrecision(4)) +\n                \"<br>sd: \" + (errorResult.sd === null ? null : errorResult.sd.toPrecision(4)) +\n                \"<br>mean: \" + (errorResult.d_mean === null ? null : errorResult.d_mean.toPrecision(4)) +\n                \"<br>n: \" + errorResult.n_good +\n                // \"<br>lag1: \" + (errorResult.lag1 === null ? null : errorResult.lag1.toPrecision(4)) +\n                // \"<br>stde: \" + errorResult.stde_betsy +\n                \"<br>errorbars: \" + Number((data.y[di]) - (errorResult.stde_betsy * 1.96)).toPrecision(4) + \" to \" + Number((data.y[di]) + (errorResult.stde_betsy * 1.96)).toPrecision(4);\n\n            di++;\n        }\n\n        // enable error bars if matching and they aren't null\n        if (appParams.matching && data.error_y.array.filter(x => x).length > 0) {\n            data.error_y.visible = true;\n        }\n\n        // get the overall stats for the text output - this uses the means not the stats.\n        const stats = matsDataUtils.get_err(values, indVars, []);\n        const filteredMeans = means.filter(x => x);\n        var miny = Math.min(...filteredMeans);\n        var maxy = Math.max(...filteredMeans);\n        if (means.indexOf(0) !== -1 && 0 < miny) {\n            miny = 0;\n        }\n        if (means.indexOf(0) !== -1 && 0 > maxy) {\n            maxy = 0;\n        }\n        stats.miny = miny;\n        stats.maxy = maxy;\n        dataset[curveIndex]['glob_stats'] = stats;\n\n        // recalculate axis options after QC and matching\n        if (appName !== \"surfrad\") {\n            const minx = Math.min(...indVars);\n            const maxx = Math.max(...indVars);\n            curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['ymax'] = (curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['ymax'] < maxy || !axisLimitReprocessed[curveInfoParams.curves[curveIndex].axisKey]) ? maxy : curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['ymax'];\n            curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['ymin'] = (curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['ymin'] > miny || !axisLimitReprocessed[curveInfoParams.curves[curveIndex].axisKey]) ? miny : curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['ymin'];\n            curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['xmax'] = (curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['xmax'] < maxx || !axisLimitReprocessed[curveInfoParams.curves[curveIndex].axisKey]) ? maxx : curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['xmax'];\n            curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['xmin'] = (curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['xmin'] > minx || !axisLimitReprocessed[curveInfoParams.curves[curveIndex].axisKey]) ? minx : curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['xmin'];\n        }\n\n        // recalculate curve annotation after QC and matching\n        if (stats.d_mean !== undefined && stats.d_mean !== null) {\n            dataset[curveIndex]['annotation'] = label + \"- mean = \" + stats.d_mean.toPrecision(4);\n        }\n\n        if (appParams.plotType === matsTypes.PlotTypes.timeSeries || appParams.plotType === matsTypes.PlotTypes.dailyModelCycle) {\n            data['x_epoch'] = data.x;\n            data.x = data.x.map(function (val) {\n                return moment.utc(val).format(\"YYYY-MM-DD HH:mm\");\n            });\n        }\n\n    }\n\n    // add black 0 line curve\n    // need to define the minimum and maximum x value for making the zero curve\n    const zeroLine = matsDataCurveOpsUtils.getHorizontalValueLine(curveInfoParams.xmax, curveInfoParams.xmin, 0, matsTypes.ReservedWords.zero);\n    dataset.push(zeroLine);\n\n    //add ideal value lines, if any\n    var idealValueLine;\n    var idealLabel;\n    for (var ivIdx = 0; ivIdx < curveInfoParams.idealValues.length; ivIdx++) {\n        idealLabel = \"ideal\" + ivIdx.toString();\n        idealValueLine = matsDataCurveOpsUtils.getHorizontalValueLine(curveInfoParams.xmax, curveInfoParams.xmin, curveInfoParams.idealValues[ivIdx], matsTypes.ReservedWords[idealLabel]);\n        dataset.push(idealValueLine);\n    }\n\n    // generate plot options\n    var resultOptions;\n    switch (appParams.plotType) {\n        case matsTypes.PlotTypes.timeSeries:\n        case matsTypes.PlotTypes.dailyModelCycle:\n            resultOptions = matsDataPlotOpsUtils.generateSeriesPlotOptions(dataset, curveInfoParams.curves, curveInfoParams.axisMap, errorMax);\n            break;\n        case matsTypes.PlotTypes.dieoff:\n            resultOptions = matsDataPlotOpsUtils.generateDieoffPlotOptions(dataset, curveInfoParams.curves, curveInfoParams.axisMap, errorMax);\n            break;\n        case matsTypes.PlotTypes.validtime:\n            resultOptions = matsDataPlotOpsUtils.generateValidTimePlotOptions(dataset, curveInfoParams.curves, curveInfoParams.axisMap, errorMax);\n            break;\n        case matsTypes.PlotTypes.threshold:\n            resultOptions = matsDataPlotOpsUtils.generateThresholdPlotOptions(dataset, curveInfoParams.curves, curveInfoParams.axisMap, errorMax);\n            break;\n        default:\n            break;\n    }\n\n    var totalProcessingFinish = moment();\n    bookkeepingParams.dataRequests[\"total retrieval and processing time for curve set\"] = {\n        begin: bookkeepingParams.totalProcessingStart.format(),\n        finish: totalProcessingFinish.format(),\n        duration: moment.duration(totalProcessingFinish.diff(bookkeepingParams.totalProcessingStart)).asSeconds() + ' seconds'\n    };\n\n    // pass result to client-side plotting functions\n    return {\n        error: error,\n        data: dataset,\n        options: resultOptions,\n        basis: {\n            plotParams: plotParams,\n            queries: bookkeepingParams.dataRequests\n        }\n    };\n};\n\nconst processDataProfile = function (dataset, appParams, curveInfoParams, plotParams, bookkeepingParams) {\n    // variable to store maximum error bar length\n    var errorMax = Number.MIN_VALUE;\n    var error = \"\";\n\n    const appName = matsCollections.appName.findOne({}).app;\n\n    // if matching, pare down dataset to only matching data\n    if (curveInfoParams.curvesLength > 1 && appParams.matching) {\n        dataset = matsDataMatchUtils.getMatchedDataSetWithLevels(dataset, curveInfoParams.curvesLength, appParams.plotType);\n    }\n\n    // we may need to recalculate the axis limits after unmatched data and outliers are removed\n    var axisLimitReprocessed = {};\n\n    // calculate data statistics (including error bars) for each curve\n    for (var curveIndex = 0; curveIndex < curveInfoParams.curvesLength; curveIndex++) {\n        axisLimitReprocessed[curveInfoParams.curves[curveIndex].axisKey] = axisLimitReprocessed[curveInfoParams.curves[curveIndex].axisKey] !== undefined;\n        var diffFrom = curveInfoParams.curves[curveIndex].diffFrom;\n        var statisticSelect = appName.indexOf(\"anomalycor\") !== -1 ? \"ACC\" : curveInfoParams.curves[curveIndex]['statistic'];\n        var data = dataset[curveIndex];\n        const label = dataset[curveIndex].label;\n\n        var di = 0;\n        var values = [];\n        var levels = [];\n        var means = [];\n        var rawStat;\n\n        /*\n        dataset[curveIndex] is the dataset.\n        it looks like:\n\n        d = {\n            x: [],\n            y: [],\n            error_x: [],   // curveTime\n            error_y: [],   // values\n            subVals: [],   //subVals\n            subSecs: [],   //subSecs\n            subLevs: [],   //subLevs\n            stats: [],     //pointStats\n            text: [],\n            glob_stats: {},     //curveStats\n            xmin: Number.MAX_VALUE,\n            xmax: Number.MIN_VALUE,\n            ymin: Number.MAX_VALUE,\n            ymax: Number.MIN_VALUE,\n            sum: 0\n        };\n        */\n\n        while (di < data.y.length) {\n\n            // errorResult holds all the calculated curve stats like mean, sd, etc.\n            var errorResult = matsDataUtils.get_err(data.subVals[di], data.subSecs[di], data.subLevs[di]);\n\n            // store raw statistic from query before recalculating that statistic to account for data removed due to matching, QC, etc.\n            rawStat = data.x[di];\n            if ((diffFrom === null || diffFrom === undefined) || !appParams.matching) {\n                // assign recalculated statistic to data[di][1], which is the value to be plotted\n                data.x[di] = errorResult.d_mean;\n            } else {\n                if (dataset[diffFrom[0]].x[di] !== null && dataset[diffFrom[1]].x[di] !== null) {\n                    // make sure that the diff curve actually shows the difference when matching. Otherwise outlier filtering etc. can make it slightly off.\n                    data.x[di] = dataset[diffFrom[0]].x[di] - dataset[diffFrom[1]].x[di];\n                } else {\n                    // keep the null for no data at this point\n                    data.x[di] = null;\n                }\n            }\n            values.push(data.x[di]);\n            levels.push(data.y[di]);\n            means.push(errorResult.d_mean);\n\n            // store error bars if matching\n            const errorBar = errorResult.stde_betsy * 1.96;\n            if (appParams.matching) {\n                errorMax = errorMax > errorBar ? errorMax : errorBar;\n                data.error_x.array[di] = errorBar;\n            } else {\n                data.error_x.array[di] = null;\n            }\n\n            // remove sub values and times to save space\n            data.subVals[di] = [];\n            data.subSecs[di] = [];\n            data.subLevs[di] = [];\n\n            // store statistics\n            data.stats[di] = {\n                raw_stat: rawStat,\n                d_mean: errorResult.d_mean,\n                sd: errorResult.sd,\n                n_good: errorResult.n_good,\n                lag1: errorResult.lag1,\n                stde_betsy: errorResult.stde_betsy\n            };\n\n            // this is the tooltip, it is the last element of each dataseries element\n            data.text[di] = label +\n                \"<br>\" + data.y[di] + \"mb\" +\n                \"<br>\" + statisticSelect + \": \" + (data.x[di] === null ? null : data.x[di].toPrecision(4)) +\n                \"<br>sd: \" + (errorResult.sd === null ? null : errorResult.sd.toPrecision(4)) +\n                \"<br>mean: \" + (errorResult.d_mean === null ? null : errorResult.d_mean.toPrecision(4)) +\n                \"<br>n: \" + errorResult.n_good +\n                // \"<br>lag1: \" + (errorResult.lag1 === null ? null : errorResult.lag1.toPrecision(4)) +\n                // \"<br>stde: \" + errorResult.stde_betsy +\n                \"<br>errorbars: \" + Number((data.x[di]) - (errorResult.stde_betsy * 1.96)).toPrecision(4) + \" to \" + Number((data.x[di]) + (errorResult.stde_betsy * 1.96)).toPrecision(4);\n\n            di++;\n        }\n\n        // enable error bars if matching and they aren't null\n        if (appParams.matching && data.error_x.array.filter(x => x).length > 0) {\n            data.error_x.visible = true;\n        }\n\n        // get the overall stats for the text output - this uses the means not the stats.\n        const stats = matsDataUtils.get_err(values.reverse(), levels.reverse(), []); // have to reverse because of data inversion\n        const filteredMeans = means.filter(x => x);\n        var minx = Math.min(...filteredMeans);\n        var maxx = Math.max(...filteredMeans);\n        if (means.indexOf(0) !== -1 && 0 < minx) {\n            minx = 0;\n        }\n        if (means.indexOf(0) !== -1 && 0 > maxx) {\n            maxx = 0;\n        }\n        stats.minx = minx;\n        stats.maxx = maxx;\n        dataset[curveIndex]['glob_stats'] = stats;\n\n        // recalculate axis options after QC and matching\n        curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['xmax'] = (curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['xmax'] < maxx || !axisLimitReprocessed[curveInfoParams.curves[curveIndex].axisKey]) ? maxx : curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['xmax'];\n        curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['xmin'] = (curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['xmin'] > minx || !axisLimitReprocessed[curveInfoParams.curves[curveIndex].axisKey]) ? minx : curveInfoParams.axisMap[curveInfoParams.curves[curveIndex].axisKey]['xmin'];\n\n        // recalculate curve annotation after QC and matching\n        if (stats.d_mean !== undefined && stats.d_mean !== null) {\n            dataset[curveIndex]['annotation'] = label + \"- mean = \" + stats.d_mean.toPrecision(4);\n        }\n    }\n\n    // add black 0 line curve\n    // need to define the minimum and maximum x value for making the zero curve\n    const zeroLine = matsDataCurveOpsUtils.getVerticalValueLine(1100, 0, 0, matsTypes.ReservedWords.zero);\n    dataset.push(zeroLine);\n\n    //add ideal value lines, if any\n    var idealValueLine;\n    var idealLabel;\n    for (var ivIdx = 0; ivIdx < curveInfoParams.idealValues.length; ivIdx++) {\n        idealLabel = \"ideal\" + ivIdx.toString();\n        idealValueLine = matsDataCurveOpsUtils.getVerticalValueLine(1100, 0, curveInfoParams.idealValues[ivIdx], matsTypes.ReservedWords[idealLabel]);\n        dataset.push(idealValueLine);\n    }\n\n    // generate plot options\n    const resultOptions = matsDataPlotOpsUtils.generateProfilePlotOptions(dataset, curveInfoParams.curves, curveInfoParams.axisMap, errorMax);\n    var totalProcessingFinish = moment();\n    bookkeepingParams.dataRequests[\"total retrieval and processing time for curve set\"] = {\n        begin: bookkeepingParams.totalProcessingStart.format(),\n        finish: totalProcessingFinish.format(),\n        duration: moment.duration(totalProcessingFinish.diff(bookkeepingParams.totalProcessingStart)).asSeconds() + ' seconds'\n    };\n\n    // pass result to client-side plotting functions\n    return {\n        error: error,\n        data: dataset,\n        options: resultOptions,\n        basis: {\n            plotParams: plotParams,\n            queries: bookkeepingParams.dataRequests\n        }\n    };\n};\n\nconst processDataReliability = function (dataset, appParams, curveInfoParams, plotParams, bookkeepingParams) {\n    var error = \"\";\n\n    // calculate data statistics (including error bars) for each curve\n    for (var curveIndex = 0; curveIndex < curveInfoParams.curvesLength; curveIndex++) {\n\n        var data = dataset[curveIndex];\n        const label = dataset[curveIndex].label;\n\n        var sample_climo = data.subVals;\n        var di = 0;\n\n        /*\n        dataset[curveIndex] is the dataset.\n        it looks like:\n\n        d = {\n            x: [],\n            y: [],\n            error_x: [],   // curveTime\n            error_y: [],   // values\n            subVals: [],   //subVals\n            subSecs: [],   //subSecs\n            subLevs: [],   //subLevs\n            stats: [],     //pointStats\n            text: [],\n            glob_stats: {},     //curveStats\n            xmin: Number.MAX_VALUE,\n            xmax: Number.MIN_VALUE,\n            ymin: Number.MAX_VALUE,\n            ymax: Number.MIN_VALUE,\n            sum: 0\n        };\n        */\n\n        while (di < data.x.length) {\n\n            // store statistics for this di datapoint\n            data.stats[di] = {\n                prob_bin: data.x[di],\n                hit_rate: data.y[di],\n                obs_y: data.error_x[di],\n                obs_n: data.subLevs[di]\n            };\n\n            // this is the tooltip, it is the last element of each dataseries element.\n            // also change the x array from epoch to date for timeseries and DMC, as we are now done with it for calculations.\n            data.text[di] = label;\n            data.text[di] = data.text[di] + \"<br>probability bin: \" + data.x[di];\n            data.text[di] = data.text[di] + \"<br>hit rate: \" + data.y[di];\n            data.text[di] = data.text[di] + \"<br>oy: \" + data.error_x[di];\n            data.text[di] = data.text[di] + \"<br>on: \" + data.subLevs[di];\n\n            // remove sub values and times to save space\n            data.subVals[di] = [];\n            data.subSecs[di] = [];\n            data.subLevs[di] = [];\n\n            di++;\n        }\n\n        dataset[curveIndex]['glob_stats'] = {\n            sample_climo: sample_climo\n        };\n    }\n\n    // add black perfect reliability line curve\n    const perfectLine = matsDataCurveOpsUtils.getLinearValueLine(curveInfoParams.xmax, curveInfoParams.xmin, data.ymax, data.ymin, matsTypes.ReservedWords.perfectReliability);\n    dataset.push(perfectLine);\n\n    if (sample_climo >= data.ymin) {\n        var skillmin = sample_climo - ((sample_climo - data.xmin) / 2);\n    } else {\n        var skillmin = data.xmin - ((data.xmin - sample_climo) / 2);\n    }\n    if (sample_climo >= data.ymax) {\n        var skillmax = sample_climo - ((sample_climo - data.xmax) / 2);\n    } else {\n        var skillmax = data.xmax - ((data.xmax - sample_climo) / 2);\n    }\n\n\n    // add black no skill line curve\n    const noSkillLine = matsDataCurveOpsUtils.getLinearValueLine(curveInfoParams.xmax, curveInfoParams.xmin, skillmax, skillmin, matsTypes.ReservedWords.noSkill);\n    dataset.push(noSkillLine);\n\n    // add sample climo lines\n    // need to define the minimum and maximum x value for making the curves\n    const xClimoLine = matsDataCurveOpsUtils.getHorizontalValueLine(curveInfoParams.xmax, curveInfoParams.xmin, sample_climo, matsTypes.ReservedWords.zero);\n    dataset.push(xClimoLine);\n\n    const yClimoLine = matsDataCurveOpsUtils.getVerticalValueLine(curveInfoParams.xmax, curveInfoParams.xmin, sample_climo, matsTypes.ReservedWords.zero);\n    dataset.push(yClimoLine);\n\n    // generate plot options\n    var resultOptions = matsDataPlotOpsUtils.generateReliabilityPlotOptions();\n\n    var totalProcessingFinish = moment();\n    bookkeepingParams.dataRequests[\"total retrieval and processing time for curve set\"] = {\n        begin: bookkeepingParams.totalProcessingStart.format(),\n        finish: totalProcessingFinish.format(),\n        duration: moment.duration(totalProcessingFinish.diff(bookkeepingParams.totalProcessingStart)).asSeconds() + ' seconds'\n    };\n\n    // pass result to client-side plotting functions\n    return {\n        error: error,\n        data: dataset,\n        options: resultOptions,\n        basis: {\n            plotParams: plotParams,\n            queries: bookkeepingParams.dataRequests\n        }\n    };\n};\n\nconst processDataHistogram = function (allReturnedSubStats, allReturnedSubSecs, allReturnedSubLevs, dataset, appParams, curveInfoParams, plotParams, binParams, bookkeepingParams) {\n    var error = \"\";\n    var curvesLengthSoFar = 0;\n\n    // flatten all the returned data into one stats array and one secs array in order to calculate histogram bins over the whole range.\n    const curveSubStats = [].concat.apply([], allReturnedSubStats);\n    const curveSubSecs = [].concat.apply([], allReturnedSubSecs);\n\n    var binStats;\n    if (binParams.binBounds.length === 0) {\n        binStats = matsDataUtils.calculateHistogramBins(curveSubStats, curveSubSecs, binParams).binStats;\n    } else {\n        binStats = matsDataUtils.prescribeHistogramBins(curveSubStats, curveSubSecs, binParams).binStats;\n    }\n\n    // store bin labels and x-axis positions of those labels for later when we set up the plot options\n    var plotBins = {};\n    plotBins['binMeans'] = [];\n    plotBins['binLabels'] = [];\n    for (var b_idx = 0; b_idx < binStats.binMeans.length; b_idx++) {\n        plotBins['binMeans'].push(binStats.binMeans[b_idx]);\n        plotBins['binLabels'].push(binStats.binLabels[b_idx]);\n    }\n\n    // post process curves\n    var sortedData;\n    var curve;\n    var diffFrom;\n    var label;\n    for (var curveIndex = 0; curveIndex < curveInfoParams.curvesLength; curveIndex++) {\n        curve = curveInfoParams.curves[curveIndex];\n        diffFrom = curve.diffFrom;\n        label = curve.label;\n\n        var d = {// d will contain the curve data\n            x: [], //placeholder\n            y: [], //placeholder\n            error_x: [], // unused\n            error_y: [], // unused\n            subVals: [],\n            subSecs: [],\n            subLevs: [],\n            glob_stats: {}, // placeholder\n            bin_stats: [], // placeholder\n            text: [], //placeholder\n            xmin: Number.MAX_VALUE,\n            xmax: Number.MIN_VALUE,\n            ymin: Number.MAX_VALUE,\n            ymax: Number.MIN_VALUE,\n        };\n\n        if (diffFrom == null) {\n            var postQueryStartMoment = moment();\n            if (curveInfoParams.dataFoundForCurve[curveIndex]) {\n                // sort queried data into the full set of histogram bins\n                sortedData = matsDataUtils.sortHistogramBins(allReturnedSubStats[curveIndex], allReturnedSubSecs[curveIndex], allReturnedSubLevs[curveIndex], binParams.binNum, binStats, appParams.hasLevels, d);\n                d = sortedData.d;\n            }\n        } else {\n            // this is a difference curve, so we're done with regular curves.\n            // do any matching that needs to be done.\n            if (appParams.matching && !bookkeepingParams.alreadyMatched) {\n                if (appParams.hasLevels) {\n                    dataset = matsDataMatchUtils.getMatchedDataSetHistogramWithLevels(dataset, curvesLengthSoFar, binStats);\n                } else {\n                    dataset = matsDataMatchUtils.getMatchedDataSetHistogram(dataset, curvesLengthSoFar, binStats);\n                }\n                bookkeepingParams.alreadyMatched = true;\n            }\n\n            // then take diffs\n            const diffResult = matsDataDiffUtils.getDataForDiffCurve(dataset, diffFrom, matsTypes.PlotTypes.histogram, appParams.hasLevels);\n\n            // adjust axis stats based on new data from diff curve\n            d = diffResult.dataset;\n        }\n\n        // set curve annotation to be the curve mean -- may be recalculated later\n        // also pass previously calculated axis stats to curve options\n        curve['annotation'] = \"\";\n        curve['axisKey'] = curveInfoParams.curves[curveIndex].axisKey;\n        const cOptions = matsDataCurveOpsUtils.generateBarChartCurveOptions(curve, curveIndex, curveInfoParams.axisMap, d);  // generate plot with data, curve annotation, axis labels, etc.\n        dataset.push(cOptions);\n        curvesLengthSoFar++;\n        var postQueryFinishMoment = moment();\n        bookkeepingParams.dataRequests[\"post data retrieval (query) process time - \" + curve.label] = {\n            begin: postQueryStartMoment.format(),\n            finish: postQueryFinishMoment.format(),\n            duration: moment.duration(postQueryFinishMoment.diff(postQueryStartMoment)).asSeconds() + ' seconds'\n        }\n    }  // end for curves\n\n    // if matching, pare down dataset to only matching data. Only do this if we didn't already do it while calculating diffs.\n    if (curveInfoParams.curvesLength > 1 && (appParams.matching && !bookkeepingParams.alreadyMatched)) {\n        if (appParams.hasLevels) {\n            dataset = matsDataMatchUtils.getMatchedDataSetHistogramWithLevels(dataset, curveInfoParams.curvesLength, binStats);\n        } else {\n            dataset = matsDataMatchUtils.getMatchedDataSetHistogram(dataset, curveInfoParams.curvesLength, binStats);\n        }\n    }\n\n    // calculate data statistics (including error bars) for each curve\n    for (curveIndex = 0; curveIndex < curveInfoParams.curvesLength; curveIndex++) {\n        var statisticSelect = curveInfoParams.curves[curveIndex]['statistic'];\n        diffFrom = curveInfoParams.curves[curveIndex].diffFrom;\n        var data = dataset[curveIndex];\n        label = dataset[curveIndex].label;\n\n        var di = 0;\n\n        while (di < data.x.length) {\n\n            if (curveInfoParams.yAxisFormat === 'Relative frequency') {\n                // replace the bin number with the bin relative frequency for the plotted statistic\n                data.y[di] = data.bin_stats[di].bin_rf * 100;\n            }\n\n            // remove sub values and times to save space\n            data.subVals[di] = [];\n            data.subSecs[di] = [];\n            data.subLevs[di] = [];\n\n            // this is the tooltip, it is the last element of each dataseries element\n            data.text[di] = label +\n                \"<br>\" + \"bin: \" + di + \" (\" + statisticSelect + \" values between \" + (data.bin_stats[di].binLowBound === null ? null : data.bin_stats[di].binLowBound.toPrecision(4)) + \" and \" + (data.bin_stats[di].binUpBound === null ? null : data.bin_stats[di].binUpBound.toPrecision(4)) + \")\" +\n                \"<br>\" + \"number in bin for this curve: \" + (data.y[di] === null ? null : data.y[di]) +\n                \"<br>bin mean for this curve: \" + statisticSelect + \" = \" + (data.bin_stats[di].bin_mean === null ? null : data.bin_stats[di].bin_mean.toPrecision(4)) +\n                \"<br>bin sd  for this curve: \" + statisticSelect + \" = \" + (data.bin_stats[di].bin_sd === null ? null : data.bin_stats[di].bin_sd.toPrecision(4));\n\n            di++;\n        }\n    } // end curves\n\n    // generate plot options\n    const resultOptions = matsDataPlotOpsUtils.generateHistogramPlotOptions(dataset, curveInfoParams.curves, curveInfoParams.axisMap, plotBins);\n    var totalProcessingFinish = moment();\n    bookkeepingParams.dataRequests[\"total retrieval and processing time for curve set\"] = {\n        begin: bookkeepingParams.totalProcessingStart.format(),\n        finish: totalProcessingFinish.format(),\n        duration: moment.duration(totalProcessingFinish.diff(bookkeepingParams.totalProcessingStart)).asSeconds() + ' seconds'\n    };\n\n    // pass result to client-side plotting functions\n    return {\n        error: error,\n        data: dataset,\n        options: resultOptions,\n        basis: {\n            plotParams: plotParams,\n            queries: bookkeepingParams.dataRequests\n        }\n    };\n\n};\n\nconst processDataContour = function (dataset, curveInfoParams, plotParams, bookkeepingParams) {\n    var error = \"\";\n    const appName = matsCollections.appName.findOne({}).app;\n    var statisticSelect = appName.indexOf(\"anomalycor\") !== -1 ? \"ACC\" : curveInfoParams.curve[0]['statistic'];\n    var data = dataset[0];\n    const label = dataset[0].label;\n\n    if (data.xAxisKey.indexOf(\"Date\") !== -1) {\n        data.x = data.x.map(function (val) {\n            return moment.utc(val * 1000).format(\"YYYY-MM-DD HH:mm\");\n        });\n    } else if (data.yAxisKey.indexOf(\"Date\") !== -1) {\n        data.y = data.y.map(function (val) {\n            return moment.utc(val * 1000).format(\"YYYY-MM-DD HH:mm\");\n        });\n    }\n\n    var i;\n    var j;\n    var currX;\n    var currY;\n    var currText;\n    var currYTextArray;\n    for (j = 0; j < data.y.length; j++) {\n        currY = data.y[j];\n        currYTextArray = [];\n        for (i = 0; i < data.x.length; i++) {\n            currX = data.x[i];\n            currText = label +\n                \"<br>\" + data['xAxisKey'] + \": \" + data.x[i] +\n                \"<br>\" + data['yAxisKey'] + \": \" + data.y[j] +\n                \"<br>\" + statisticSelect + \": \" + (data.z[j][i] === undefined || data.z[j][i] === null || data.z[j][i] === 'null' ? null : data.z[j][i].toPrecision(4)) +\n                \"<br>n: \" + data['n'][j][i];\n            currYTextArray.push(currText);\n        }\n        data.text.push(currYTextArray);\n    }\n\n    // generate plot options\n    const resultOptions = matsDataPlotOpsUtils.generateContourPlotOptions(dataset, curveInfoParams.axisMap);\n\n    var totalProcessingFinish = moment();\n    bookkeepingParams.dataRequests[\"total retrieval and processing time for curve set\"] = {\n        begin: bookkeepingParams.totalProcessingStart.format(),\n        finish: totalProcessingFinish.format(),\n        duration: moment.duration(totalProcessingFinish.diff(bookkeepingParams.totalProcessingStart)).asSeconds() + ' seconds'\n    };\n\n    // pass result to client-side plotting functions\n    return {\n        error: error,\n        data: dataset,\n        options: resultOptions,\n        basis: {\n            plotParams: plotParams,\n            queries: bookkeepingParams.dataRequests\n        }\n    };\n};\n\nexport default matsDataProcessUtils = {\n\n    processDataXYCurve: processDataXYCurve,\n    processDataProfile: processDataProfile,\n    processDataReliability: processDataReliability,\n    processDataHistogram: processDataHistogram,\n    processDataContour: processDataContour\n\n}","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {Meteor} from \"meteor/meteor\";\nimport {\n    matsCollections,\n    matsDataCurveOpsUtils,\n    matsDataDiffUtils,\n    matsDataProcessUtils,\n    matsDataQueryUtils,\n    matsDataUtils,\n    matsMethods,\n    matsParamUtils,\n    matsTypes\n} from 'meteor/randyp:mats-common';\nimport {mysql} from 'meteor/pcel:mysql';\nimport {moment} from 'meteor/momentjs:moment';\n\nconst statMvTranslation = {\n    'ACC': \"ANOM_CORR\",\n    'RMS': 'RMSE',\n    'Bias (Model - Obs)': 'ME',\n    'Model average': \"FBAR\",\n    'Obs average': \"OBAR\"\n};\n\nconst xmlBuilder = require('xmlbuilder');\n\nconst _pad = function(num, size){\n    var s = num+\"\";\n    while (s.length < size) s = \"0\" + s;\n    return s;\n}\n\nconst _title = function () {\n    try {\n        if (matsCollections.Settings === undefined || matsCollections.Settings.findOne({}, {fields: {Title: 1}}) === undefined) {\n            return \"\";\n        } else {\n            return matsCollections.Settings.findOne({}, {fields: {Title: 1}}).Title;\n        }\n    } catch (someError) {\n        return \"\";\n    }\n};\n\nconst _plotText = function (plotParams) {\n    var format = plotParams.plotFormat;\n\n    if (matsCollections.PlotParams.findOne({name: 'plotFormat'}) &&\n        matsCollections.PlotParams.findOne({name: 'plotFormat'}).optionsMap &&\n        matsCollections.PlotParams.findOne({name: 'plotFormat'}).optionsMap[plotParams.plotFormat] !== undefined) {\n        format = matsCollections.PlotParams.findOne({name: 'plotFormat'}).optionsMap[plotParams.plotFormat];\n    }\n    if (format === undefined) {\n        format = \"Unmatched\";\n    }\n    const plotType = (_.invert(plotParams.plotTypes))[true];\n    switch (plotType) {\n        case matsTypes.PlotTypes.timeSeries:\n            return \"TimeSeries \" + plotParams.dates + \" : \" + format;\n            break;\n        case matsTypes.PlotTypes.profile:\n            return \"Profile: \" + format;\n            break;\n        case matsTypes.PlotTypes.dieoff:\n            return \"DieOff: \" + format;\n            break;\n        case matsTypes.PlotTypes.threshold:\n            return \"Threshold: \" + format;\n            break;\n        case matsTypes.PlotTypes.validtime:\n            return \"ValidTime: \" + format;\n            break;\n        case matsTypes.PlotTypes.dailyModelCycle:\n            return \"DailyModelCycle \" + plotParams.dates + \" : \" + format;\n            break;\n        case matsTypes.PlotTypes.reliability:\n            return \"Reliability: \" + format;\n            break;\n        case matsTypes.PlotTypes.map:\n            return \"Map \" + plotParams.dates + \" \";\n            break;\n        case matsTypes.PlotTypes.histogram:\n            return \"Histogram: \" + format;\n            break;\n        default:\n            return \"Scatter: \" + plotParams.dates + \" : \" + format;\n    }\n}\n\nconst _componentToHex = function(c) {\n    var hex = c.toString(16);\n    return hex.length == 1 ? \"0\" + hex : hex;\n};\n\nconst _rgbToHex = function(color) {\n    const cParts = color.replace('rgb(','').replace(')','').split(',');\n    const r = Number(cParts[0]);\n    const g = Number(cParts[1]);\n    const b = Number(cParts[2]);\n    return \"#\" + _componentToHex(r) + _componentToHex(g) + _componentToHex(b);\n};\n\n\nconst _getUniqDates = function(dates, database, model, dataSource, region, variable, forecastLength, fromSecs, toSecs, validTimes ) {\n    var regionsClause = \"\";\n    if (region != null) {\n        region = Array.isArray(region) ? region : [region];\n        if (region.length > 0) {\n            const regions = region.map(function (r) {\n                return \"'\" + r + \"'\";\n            }).join(',');\n            regionsClause = \"and h.vx_mask IN(\" + regions + \")\";\n        }\n    }\n\n    // the forecast lengths appear to have sometimes been inconsistent (by format) in the varias databases\n    // so they have been sanitized for display purposes in the forecastValueMap.\n    // now we have to go get the damn ole unsanitary ones for the database.\n    var forecastLengthsClause = \"\";\n    if (forecastLength != null) {\n        forecastLength = Array.isArray(forecastLength) ? forecastLength : [forecastLength];\n        if (forecastLength.length > 0) {\n            const forecastValueMap = matsCollections.CurveParams.findOne({name: 'forecast-length'}, {valuesMap: 1})['valuesMap'][database][dataSource];\n            const forecastLengths = forecastLength.map(function (fl) {\n                return forecastValueMap[fl];\n            }).join(',');\n            forecastLengthsClause = \"and ld.fcst_lead IN (\" + forecastLengths + \")\";\n        }\n    }\n\n    var statement = \"select ld.fcst_valid_beg as avtime \" +\n        \"from \" + database + \".stat_header h, \" + database + \".line_data_sl1l2 ld \" +\n        \"where 1=1 and h.model = '\" + model + \"' \" +\n        regionsClause +\n        \"and unix_timestamp(ld.fcst_valid_beg) >= '\" + fromSecs + \"' \" +\n        \"and unix_timestamp(ld.fcst_valid_beg) <= '\" + toSecs + \"' \" +\n        forecastLengthsClause +\n        \"and h.fcst_var = '\" + variable + \"' \" +\n        \"and ld.stat_header_id = h.stat_header_id \" +\n        \"group by avtime order by avtime;\";\n\n    var rows = matsDataQueryUtils.simplePoolQueryWrapSynchronous(metadataPool, statement);\n    if (rows === undefined || rows === null || rows.length === 0) {\n        console.log(matsTypes.Messages.NO_DATA_FOUND);\n    } else {\n\n        for (var rowIndex = 0; rowIndex < rows.length; rowIndex++) {\n            const dstrMoment = moment(rows[rowIndex].avtime);\n            const dstr = dstrMoment.format('YYYY-MM-DD HH:mm:ss').trim();\n            // apply the valid-time filter here.....\n            var valid = true;\n            if (validTimes != null && validTimes.length > 0) {\n                valid = false;\n                const momentSdiHour = Number(dstrMoment.format(\"HH\"));\n                for (var vti = 0; vti < validTimes.length; vti++) {\n                    const thisvt = Number(validTimes[vti]);\n                    if (momentSdiHour === thisvt) {\n                        // it is valid\n                        valid = true;\n                        break;\n                    }\n                }\n            }\n            if (valid === true && dates.indexOf(dstr) === -1) {\n                dates.push(dstr);\n            }\n        }\n    }\n    return dates;\n}\n\n\n// adds date elements to an element of the current xml between a start and an end date, incremented by specific seconds\n// series variables can be grouped or ungrouped.\n// e.g. grouped ...    <val>2018-11-01 00:00:00,2018-11-01 06:00:00,2018-11-01 12:00:00,2018-11-01</val>\n// e.g. ungrouped ...    <val>2018-11-01 00:00:00</val>\n//                       <val>2018-11-01 06:00:00</val>\n//                       <val>2018-11-01 12:00:00</val>\n//                       <val>2018-11-01</val>\n\n// for time series valid_beg is always ungrouped.\nconst _getSortedDatesForIndepRange = function(plotParams) {\n    const dateRange = matsDataUtils.getDateRange(plotParams.dates);\n    const fromSecs = dateRange.fromSeconds;\n    const toSecs = dateRange.toSeconds;\n    const curves = plotParams.curves;\n    // have to get all the valid dates for each curve then union them\n    // to get a complete date list\n    var dates = [];\n    for (var ci = 0; ci < curves.length; ci++) {\n        if (curves[ci]['diffFrom']) {\n            // currrently we do not do mv differencing\n            continue;\n        }\n        var curve = curves[ci];\n        const validTimes = curve['valid-time'];\n        const region = curve['region'];\n        const forecastLength = curve['forecast-length'];\n        const variable = curve['variable'];\n        //example 2018-11-06 00:00:00\n        const database = curve['database'];\n        const dataSource = curve['data-source'];\n        const model = matsCollections.CurveParams.findOne({name: 'data-source'}).optionsMap[database][dataSource][0];\n        dates = _getUniqDates(dates, database, model, dataSource, region, variable, forecastLength, fromSecs, toSecs, validTimes);\n    }\n    // sort the dates\n    const sortedDates = dates.sort(\n        function (a, b) {\n            return new moment(a) - new moment(b);\n        }\n    );\n    return sortedDates;\n}\n\nconst _getSortedHoursForIndepRange = function(plotParams) {\n    const sortedDates = _getSortedDatesForIndepRange(plotParams);\n    var hours = new Set();\n    for (var di=0;di<sortedDates.length;di++) {\n        const hour = moment(sortedDates[di]).format(\"HH\");\n        hours.add(hour);\n    }\n    return Array.from(hours).sort();\n}\n\nconst _getSortedDatesForDepRange = function(curve) {\n    var dates = [];\n    const dateRange = matsDataUtils.getDateRange(curve['curve-dates']);\n    const fromSecs = dateRange.fromSeconds;\n    const toSecs = dateRange.toSeconds;\n    const validTimes = curve['valid-time'];\n    const region = curve['region'];\n    const forecastLength = curve['forecast-length'];\n    const variable = curve['variable'];\n    //example 2018-11-06 00:00:00\n    const database = curve['database'];\n    const dataSource = curve['data-source'];\n    const model = matsCollections.CurveParams.findOne({name: 'data-source'}).optionsMap[database][dataSource][0];\n    dates = _getUniqDates(dates, database, model, dataSource, region, variable, forecastLength, fromSecs, toSecs, validTimes);\n\n    // sort the dates\n    const sortedDates = dates.sort(\n        function (a, b) {\n            return new moment(a) - new moment(b);\n        }\n    );\n    return sortedDates;\n}\n\n\n// for profiles valid_beg is always grouped.\nconst addIndepUngroupedDateElementsBetween = function (element, plotParams) {\n    const sortedDates = _getSortedDatesForIndepRange(plotParams);\n    //these must be ungrouped\n    for (var sdi = 0; sdi < sortedDates.length; sdi++) {\n        element.ele('val', {\n            'label': sortedDates[sdi],\n            'plot_val': \"\"\n        }, sortedDates[sdi]);\n    }\n}\n\n// parse the databases from the curves and add a database string\nconst addDatabaseElement = function(element, curves){\n    try {\n        databases = [];\n\n        for (var ci=0; ci < curves.length; ci++) {\n            if (curves[ci]['diffFrom']) {\n                // currrently we do not do mv differencing\n                continue;\n            }\n            if (!databases.includes(curves[ci].database)) {\n                databases.push(curves[ci].database);\n            }\n        }\n        databasesStr = databases.join(\"'\");\n        element.ele('database',databasesStr);\n        return element;\n    } catch (someError) {\n        return \"\";\n    }\n};\n\n// add the required metviewer folders\nconst addFolders = function(element) {\n    try {\n        element.ele('rscript', Meteor.settings.private.MV_RSCRIPT);\n        var folders = element.ele('folders');\n        folders.ele('r_tmpl', matsMethods.MV_DIRS.HOME + \"/R_tmpl\");\n        folders.ele('r_work', matsMethods.MV_DIRS.HOME + \"/R_work\");\n        folders.ele('plots', matsMethods.MV_DIRS.PLOTSDIR);\n        folders.ele('data', matsMethods.MV_DIRS.DATADIR);\n        folders.ele('scripts', matsMethods.MV_DIRS.SCRIPTSDIR);\n        return element;\n    } catch (e) {\n    }\n};\n\n// start the plotspec\nconst startPlotSpec = function(pool, plotParams) {\n    try {\n        var xml = xmlBuilder.create('plot_spec', {version: \"1.0\", encoding: \"UTF-8\", standalone: false});\n        var connection = xml.ele('connection');\n        connection.ele('host', sumPool.config.connectionConfig.host + \":\" + sumPool.config.connectionConfig.port);\n        addDatabaseElement(connection, plotParams.curves);\n        connection.ele('user', sumPool.config.connectionConfig.user);\n        connection.ele('password', sumPool.config.connectionConfig.password);\n        const management_system = Meteor.settings.private.MV_DB_MANAGEMENT_SYSTEM != null ? Meteor.settings.private.MV_DB_MANAGEMENT_SYSTEM : \"mysql\";\n        connection.ele('management_system', management_system);\n        addFolders(xml);\n        var plot = xml.ele('plot');\n        return {xml:xml,plot:plot};\n    } catch (e) {\n    }\n};\n\nconst addPlotCi = function(element,plotParams){\n    try { //example c(\"none\",\"none\")\n        var curves = plotParams.curves;\n        var cList = [];\n        var cListStr = 'c(';\n        for (var ci = 0; ci < curves.length; ci++) {\n            if (curves[ci]['diffFrom']) {\n                // currrently we do not do mv differencing\n                continue;\n            }\n            cList.push('\"none\"');\n        }\n        cListStr += cList.join(',') + ')';\n        element.ele('plot_ci', cListStr);\n    } catch (e) {\n    }\n};\n\nconst addShowSignif = function(element,plotParams){\n    try { //example c(FALSE,FALSE)\n        var curves = plotParams.curves;\n        var cList = [];\n        var cListStr = 'c(';\n        for (var ci = 0; ci < curves.length; ci++) {\n            if (curves[ci]['diffFrom']) {\n                // currrently we do not do mv differencing\n                continue;\n            }\n            cList.push('FALSE');\n        }\n        cListStr += cList.join(',') + ')';\n        element.ele('show_signif', cListStr);\n    } catch (e) {\n    }\n};\n\nconst addPlotDisp = function(element,plotParams){\n    try { //example c(TRUE,TRUE)\n        var curves = plotParams.curves;\n        var cList = [];\n        var cListStr = 'c(';\n        for (var ci = 0; ci < curves.length; ci++) {\n            cList.push('TRUE');\n        }\n        cListStr += cList.join(',') + ')';\n        element.ele('plot_disp', cListStr);\n    } catch (e) {\n    }\n};\n\nconst addColors = function(element,plotParams){\n    try { //  example  'c(\"#ff0000FF\",\"#8000ffFF\")'\n        var curves = plotParams.curves;\n        var cList = [];\n        var cListStr = 'c(';\n        for (var ci = 0; ci < curves.length; ci++) {\n            if (curves[ci]['diffFrom']) {\n                // currrently we do not do mv differencing\n                continue;\n            }\n            var ch = _rgbToHex(curves[ci].color) + \"FF\";\n            cList.push('\"' + ch + '\"');\n        }\n        cListStr += cList.join(',') + ')';\n        element.ele('colors', cListStr);\n    } catch (e) {\n    }\n};\n\nconst addPch = function(element,plotParams){\n    try { //example c(20,20)\n        var curves = plotParams.curves;\n        var cList = [];\n        var cListStr = 'c(';\n        for (var ci = 0; ci < curves.length; ci++) {\n            if (curves[ci]['diffFrom']) {\n                // currrently we do not do mv differencing\n                continue;\n            }\n            cList.push('20');\n        }\n        cListStr += cList.join(',') + ')';\n        element.ele('pch', cListStr);\n    } catch (e) {\n    }\n};\n\nconst addType = function(element,plotParams){\n    try { //example c(\"b\",\"b\")\n        var curves = plotParams.curves;\n        var cList = [];\n        var cListStr = 'c(';\n        for (var ci = 0; ci < curves.length; ci++) {\n            if (curves[ci]['diffFrom']) {\n                // currrently we do not do mv differencing\n                continue;\n            }\n            cList.push('\"b\"');\n        }\n        cListStr += cList.join(',') + ')';\n        element.ele('type', cListStr);\n    } catch (e) {\n    }\n};\n\nconst addLty = function(element,plotParams){\n    try { // example c(1,1)\n        var curves = plotParams.curves;\n        var cList = [];\n        var cListStr = 'c(';\n        for (var ci = 0; ci < curves.length; ci++) {\n            if (curves[ci]['diffFrom']) {\n                // currrently we do not do mv differencing\n                continue;\n            }\n            cList.push(1);\n        }\n        cListStr += cList.join(',') + ')';\n        element.ele('lty', cListStr);\n    } catch (e) {\n    }\n};\n\nconst addLwd = function(element,plotParams){\n    try { // example c(1,1)\n        var curves = plotParams.curves;\n        var cList = [];\n        var cListStr = 'c(';\n        for (var ci = 0; ci < curves.length; ci++) {\n            if (curves[ci]['diffFrom']) {\n                // currrently we do not do mv differencing\n                continue;\n            }\n            cList.push(1);\n        }\n        cListStr += cList.join(',') + ')';\n        element.ele('lwd', cListStr);\n    } catch (e) {\n    }\n};\n\nconst addConSeries = function(element,plotParams){\n    try { // example c(1,1)\n        var curves = plotParams.curves;\n        var cList = [];\n        var cListStr = 'c(';\n        for (var ci = 0; ci < curves.length; ci++) {\n            if (curves[ci]['diffFrom']) {\n                // currrently we do not do mv differencing\n                continue;\n            }\n            cList.push(1);\n        }\n        cListStr += cList.join(',') + ')';\n        element.ele('con_series', cListStr);\n    } catch (e) {\n    }\n};\n\nconst addOrderSeries = function(element,plotParams){\n    try { // example c(1,2)\n        var curves = plotParams.curves;\n        var cList = [];\n        var cListStr = 'c(';\n        for (var ci = 0; ci < curves.length; ci++) {\n            if (curves[ci]['diffFrom']) {\n                // currrently we do not do mv differencing\n                continue;\n            }\n            cList.push(ci + 1);\n        }\n        cListStr += cList.join(',') + ')';\n        element.ele('order_series', cListStr);\n    } catch (e) {\n    }\n};\n\nconst addLegend = function(element,plotParams){\n    try { // example c(\"\",\"\")\n        var curves = plotParams.curves;\n        var cList = [];\n        var cListStr = 'c(';\n        for (var ci = 0; ci < curves.length; ci++) {\n            if (curves[ci]['diffFrom']) {\n                // currrently we do not do mv differencing\n                continue;\n            }\n            cList.push('\"\"');\n        }\n        cListStr += cList.join(',') + ')';\n        element.ele('legend', cListStr);\n    } catch (e) {\n    }\n};\n\nconst addSeries = function(plot, dependentAxes, plotParams) {\n    /***\n     data-source(models), region(vx_mask),forecast_length (fcst_lead), and pres-level(fcst_lev)\n     are series variables. Multiple selections for a given curve are MV grouped (join'd)\n     Multiple selections associated with different curves are seperate <val> tags.\n\n     All of the non grouped combinations are added which results in possibly too many curves. The redundant ones are later hidden.\n\n     They can also go on the axis that is associated with the curve that the region parameter is on.\n     In other words force a new series.\n     i.e. Y1 Series variables or Y2 Series variables\n\n     series variables can be grouped or ungrouped.\n     e.g. grouped ...    <val>2018-11-01 00:00:00,2018-11-01 06:00:00,2018-11-01 12:00:00,2018-11-01</val>\n     e.g. ungrouped ...    <val>2018-11-01 00:00:00</val>\n     <val>2018-11-01 06:00:00</val>\n     <val>2018-11-01 12:00:00</val>\n     <val>2018-11-01</val>\n     For MATS curves they are grouped for each curve and added ase series variables. This results in redundant curves in MV and so the\n     redundant curves will be hidden.\n     Curves that were assigned to different axis were figured out and assigned in getDependents and are assigned in the dependentAxes structure.\n     ***/\n    var hiddenCurves = [];\n    var sVars = {'data-source':'model','region':'vx_mask','forecast-length':'fcst_lead','pres-level':'fcst_lev'};\n    const type = (_.invert(plotParams.plotTypes))[true];\n    const seriesAxisMap = {'series1':'y1', 'series2':'y2'};\n    Object.keys(seriesAxisMap).forEach(function (series) {\n        var models = [];\n        var vx_masks = [];\n        var fcst_leads = [];\n        var fcst_levls = [];\n        var seriesElem = plot.ele(series);\n        const axis = seriesAxisMap[series];\n        var initHours = new Set();\n        switch (type) {\n            case matsTypes.PlotTypes.timeSeries:\n                sVars = {'data-source':'model','region':'vx_mask','forecast-length':'fcst_lead','pres-level':'fcst_lev'};\n                break;\n            case matsTypes.PlotTypes.dailyModelCycle:\n                sVars = {'data-source':'model','region':'vx_mask','forecast-length':'fcst_lead','pres-level':'fcst_lev'};\n                break;\n            case matsTypes.PlotTypes.profile:\n                sVars = {'data-source':'model','region':'vx_mask','forecast-length':'fcst_lead','curve-dates':'fcst_valid_beg'};\n                break;\n            case matsTypes.PlotTypes.dieoff:\n                sVars = {'data-source': 'model', 'region': 'vx_mask', 'pres-level': 'fcst_lev', 'curve-dates': 'fcst_valid_beg'};\n                for (var ci=0; ci < plotParams.curves.length;ci++) {\n                    if (curves[ci]['diffFrom']) {\n                        // currrently we do not do mv differencing\n                        continue;\n                    }\n                    const c = plotParams.curves[ci];\n                    if (c['dieoff-type'] === 'Dieoff for a specified UTC cycle init hour') {\n                        initHours.add(c['utc-cycle-start']);\n                    } else if (c.dieoff - type === matsTypes.ForecastTypes.singleCycle) {\n                        // placeholder for if issue 60313 gets resolved\n                    }\n                }\n               if (initHours.size > 0) {\n                   sVars['utc-cycle-start'] = 'init_hour';\n               }\n                break;\n            case matsTypes.PlotTypes.threshold:\n                sVars = {'data-source':'model','region':'vx_mask','forecast-length':'fcst_lead','pres-level':'fcst_lev','curve-dates':'fcst_valid_beg'};\n                break;\n            case matsTypes.PlotTypes.validtime:\n                sVars = {'data-source':'model','region':'vx_mask','forecast-length':'fcst_lead','pres-level':'fcst_lev','curve-dates':'fcst_valid_beg'};\n                break;\n            case matsTypes.PlotTypes.reliability:\n                sVars = {'data-source':'model','region':'vx_mask','forecast-length':'fcst_lead','pres-level':'fcst_lev','curve-dates':'fcst_valid_beg'};\n                break;\n            case matsTypes.PlotTypes.histogram:\n                sVars = {'data-source':'model','region':'vx_mask','forecast-length':'fcst_lead','pres-level':'fcst_lev','curve-dates':'fcst_valid_beg'};\n                break;\n            default:\n                sVars = {'data-source':'model','region':'vx_mask','forecast-length':'fcst_lead','pres-level':'fcst_lev'};\n        }\n\n        if (type === matsTypes.PlotTypes.profile) {\n            delete sVars['pres-level'];\n        } else {\n            // we only consider pressure levels when it isn't a profile\n            sVars['pres-level'] = 'fcst_lev';\n        }\n        var seriesElements = {};\n        var seriesElementValues = {};\n        for (var daci = 0; daci < dependentAxes[axis].length; daci++) {\n            const curve = dependentAxes[axis][daci];\n            const database = curve['database'];\n            const dataSource = curve['data-source'];\n                Object.keys(sVars).forEach(function(sVar) {\n                    try {\n                        // models - not multiple - ungrouped\n                        var sValues = [];\n                        switch(sVar) {\n                            case 'data-source':\n                                // convert data-source to single element array\n                                sValues = [matsParamUtils.getParameterForName(sVar).optionsMap[database][dataSource][0]];\n                                break;\n                            case 'curve-dates':\n                                sValues = _getSortedDatesForDepRange(curve);\n                                break;\n                            case 'utc-cycle-start':\n                                const v = curve['utc-cycle-start'];\n                                const paddedV = _pad(v,2);\n                                sValues = [paddedV]; // turn single selection padded value into array\n                                break;\n                            case 'forecast-length':\n                                sValues = curve[sVar];\n                                if (sValues == null || sValues.length === 0) {\n                                    sValues = matsParamUtils.getParameterForName(sVar).optionsMap[database][dataSource]; // have to assign all the fcst leads\n                                }\n                                const forecastValueMap = matsParamUtils.getParameterForName(sVar).valuesMap[database][dataSource];\n                                sValues = sValues.map(function (fl) {return forecastValueMap[fl]}).join(',');\n                                break;\n                            default:\n                                sValues = curve[sVar];\n                                if (sValues == null || sValues.length === 0) {\n                                    sValues = matsParamUtils.getParameterForName(sVar).optionsMap[database][dataSource]; // have to assign all the regions\n                                }\n                        }\n                        // check to see if this element was already added.\n                        // if not added then add the element.\n                        // if element was already added see if we need to add this value.\n                        // multiples are always grouped.\n                        if (sValues !== undefined) {\n                            sValues = Array.isArray(sValues) ? sValues : [sValues];\n                            if (sValues.length > 0) {\n                                const sValuesStr = sValues.join(',');\n                                if (sValuesStr !== undefined) {\n                                    const thisVar = sVars[sVar];\n                                    if (seriesElements[thisVar] == null) {\n                                        seriesElements[thisVar] = seriesElem.ele('field', {'name': sVars[sVar]});\n                                        seriesElementValues[thisVar] = new Set();\n                                        seriesElementValues[thisVar].add(sValuesStr);\n                                    } else {\n                                        // already exists\n                                        if (seriesElementValues[thisVar].has(sValuesStr) === false) {\n                                            seriesElementValues[thisVar].add(sValuesStr);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                } catch (error) {\n                    console.log(error)\n                    throw new Meteor.Error(error);\n                }\n            });\n        }\n        const sElementKeys = Object.keys(seriesElements);\n        for (var sei=0; sei < sElementKeys.length; sei++) {\n            const seVar = sElementKeys[sei];\n            const svars = Array.from(seriesElementValues[seVar]).sort();\n            for (var svi=0; svi < svars.length; svi++){\n                const v = svars[svi];\n                if (v !== \"undefined\") {\n                    seriesElements[seVar].ele('val', v);\n                }\n            };\n        }\n    });\n\n}\n\nconst getDependentAxis = function(plotParams) {\n    // there are two possible axis for metviewer. We want to collect all the variables\n    // into groups. We will take the two largest groups.\n    // variables and statistics go together. They are dependent variabales in MV.\n    // The variable/stat pairs always are associated with different curves, and will always be on different axis,\n    // if possible, but might be assigned an axis via an axes parameter.\n    const yaxesDefault = \"auto-by-variable\";\n    var curves = plotParams['curves'];\n    var dependentAxes = {'y1': [], 'y2': []};\n    dependentAxes['y1'].push(curves[0]);\n    var dependentAxesVariables = {'y1': [curves[0]['variable']], 'y2': []};\n    for (var ci = 1; ci < curves.length; ci++) {\n        if (curves[ci]['diffFrom']) {\n            // currrently we do not do mv differencing\n            continue;\n        }\n        if (curves[ci].yaxes != yaxesDefault) {\n            // it was assigned an axis by the axis param so sort it into its selectedYaxes\n            dependentAxes[curves[ci].yaxes].push(curves[ci]);\n        } else {\n            // sort it into an axis by its variable/stat combination\n            //     variables:\n            //     variables that share an axis are different dependent variables. Put them in dep1.\n            // unless it is a variable with multiple stats.\n            // different variable with different stats that have differing axis must go in different Y axis vars (and you can only have two of those)\n\n            const variable = curves[ci].variable;\n            if (dependentAxesVariables['y1'].includes(variable)) {\n                dependentAxes['y1'].push(curves[ci]);\n            } else {\n                dependentAxes['y2'].push(curves[ci]);\n            }\n        }\n    }\n    return dependentAxes;\n}\n\nfunction addDeps(plot, dependentAxes) {\n    var dep = plot.ele('dep');\n    const deps = {\"dep1\":\"y1\",\"dep2\":\"y2\"};\n    for (var di=0; di<Object.keys(deps).length;di++) {  // [dep1, dep2]\n        var depKey = Object.keys(deps)[di];  // dep1 or dep2\n        var depAxis = deps[depKey];\n        var subDep = dep.ele(depKey); //<dep><dep1/><dep2/>\n        var variableStatisticPairs = {};\n        for (var daci = 0; daci < dependentAxes[depAxis].length; daci++) {    //[y1,y2]\n            // record the variable-statistic pair\n            const variable = dependentAxes[depAxis][daci]['variable'];\n            const stat = statMvTranslation[dependentAxes[depAxis][daci]['statistic']];\n            if (variableStatisticPairs[variable] == null) {\n                variableStatisticPairs[variable] = [stat];\n            } else {\n                variableStatisticPairs[variable].push(stat);\n            }\n        }\n        var vars = Object.keys(variableStatisticPairs);  //['T','HGT','WIND'...]\n        for (var v = 0; v < vars.length; v++) {\n            const stats = Array.from(new Set(variableStatisticPairs[vars[v]]));\n            var depElem = subDep.ele('fcst_var', {'name': vars[v]}); //<dep><dep1><fcst_var name='T'><stat>RMS</stat></fcst_var> </dep1><dep2/>\n            for (var si=0;si<stats.length;si++) {\n                depElem.ele('stat',stats[si]);\n            }\n        }\n    }\n}\n\nfunction addAnomalycorrDeps(plot, dependentAxes) {\n    var dep = plot.ele('dep');\n    const deps = {\"dep1\":\"y1\",\"dep2\":\"y2\"};\n    for (var di=0; di<Object.keys(deps).length;di++) {  // [dep1, dep2]\n        var depKey = Object.keys(deps)[di];  // dep1 or dep2\n        var depAxis = deps[depKey];\n        var subDep = dep.ele(depKey); //<dep><dep1/><dep2/>\n        var variables = new Set();\n        for (var daci = 0; daci < dependentAxes[depAxis].length; daci++) {    //[y1,y2]\n            const variable = dependentAxes[depAxis][daci]['variable'];\n            variables.add(variable);\n        }\n        var vars = Array.from(variables);\n        for (var v = 0; v < vars.length; v++) {\n            subDep.ele('fcst_var', {'name': vars[v]}).ele('stat','ANOM_CORR');\n        }\n    }\n}\n\nconst _addSeriesLabels = function(element,dependentAxes, plotParams) {\n    const plotType = (_.invert(plotParams.plotTypes))[true];\n    var label;\n    switch (plotType) {\n        case matsTypes.PlotTypes.timeSeries:\n            label = \"Time\";\n            break;\n        case matsTypes.PlotTypes.dieoff:\n            label = \"Forecast Hour\";\n            break;\n        case matsTypes.PlotTypes.dailyModelCycle:\n            label = \"Time\";\n            break;\n        case matsTypes.PlotTypes.histogram:\n            label = \"Bin\";\n            break;\n        case matsTypes.PlotTypes.validtime:\n            label = \"Hour of Day\";\n            break;\n        case matsTypes.PlotTypes.reliability:\n            label = \"Reliability\";\n            break;\n        case matsTypes.PlotTypes.threshold:\n            label = \"Threshold\";\n            break;\n        case matsTypes.PlotTypes.profile:\n            var vars = new Set();\n            plotParams.curves.forEach(function(c){\n                vars.add(c.variable);\n            });\n            label = Array.from(vars).join(' - ');\n            break;\n        default:\n            label = \"Time\";\n    }\n    element.ele('x_label', label);\n\n    var y1vars = [];\n    for (var y1i=0; y1i < dependentAxes['y1'].length; y1i++) {\n        if (!y1vars.includes(dependentAxes['y1'][y1i]['variable'])) {\n            y1vars.push(dependentAxes['y1'][y1i]['variable']);\n        }\n    }\n    element.ele('y1_label', y1vars.join(','));\n    var y2vars = [];\n    for (var y2i=0; y2i < dependentAxes['y2'].length; y2i++) {\n        if (!y2vars.includes(dependentAxes['y2'][y2i]['variable'])) {\n            y2vars.push(dependentAxes['y2'][y2i]['variable']);\n        }\n    }\n    element.ele('y2_label', y2vars.join(','));\n}\n\nconst addTemplate = function(plot,templateStr)\n{\n    plot.ele('template', templateStr);\n}\n\nconst addIndepDates = function(plot, plotParams) {\n    var indep = plot.ele('indep', {'equalize': 'false', 'name': 'fcst_valid_beg'});\n    addIndepUngroupedDateElementsBetween(indep, plotParams);\n}\n\nconst addIndepLevels = function(plot, plotParams) {\n    // for profiles we use a union of all the levels available for all the data-sources\n    var indep = plot.ele('indep', {'equalize': 'false', 'name': 'fcst_lev'});\n    var curves = plotParams.curves;\n    var lvlSet = new Set(); // use a set to accumulate all the levels\n    for (var ci=0; ci<curves.length;ci++) {\n        if (curves[ci]['diffFrom']) {\n            // currrently we do not do mv differencing\n            continue;\n        }\n        const curve = curves[ci];\n        const database = curve['database'];\n        const dataSource = curve['data-source'];\n        const levelVals = matsCollections.CurveParams.findOne({name: 'data-source'})['levelsMap'][database][dataSource];\n        lvlSet.add(levelVals);\n    }\n    // only add the fcst_lev tag if there are pres-levels requested - leaving it out will get them all\n    const lvls = Array.from(lvlSet)[0];\n    for (var li=0; li<lvls.length;li++) {\n        var val = indep.ele('val',lvls[li]);\n        val.att('label',lvls[li]);\n        val.att('plot_val',\"\");\n    }\n}\n\nconst addIndepValidHours = function(plot, plotParams) {\n    // for validTimes we use a union of all the vts available for all the data-sources\n    var indep = plot.ele('indep', {'equalize': 'false', 'name': 'valid_hour'});\n    const hours = _getSortedHoursForIndepRange(plotParams);\n    for (var hi=0; hi<hours.length;hi++) {\n        var val = indep.ele('val',hours[hi]);\n        val.att('label',hours[hi]);\n        val.att('plot_val',\"\");\n    }\n}\n\nconst addIndepForecastHours = function(plot, plotParams) {\n    // for dieoffs we use a union of all the fhrs available for all the data-sources\n    var indep = plot.ele('indep', {'equalize': 'false', 'name': 'fcst_lead'});\n    var curves = plotParams.curves;\n    var leadSet = new Set(); // use a set to accumulate all the levels\n    for (var ci=0; ci<curves.length;ci++) {\n        if (curves[ci]['diffFrom']) {\n            // currrently we do not do mv differencing\n            continue;\n        }\n        const curve = curves[ci];\n        const database = curve['database'];\n        const dataSource = curve['data-source'];\n        const forecastLengths = matsCollections.CurveParams.findOne({name: 'forecast-length'})['optionsMap'][database][dataSource];\n        leadSet.add(forecastLengths);\n    }\n    const leads = Array.from(leadSet)[0];\n    for (var li=0; li<leads.length;li++) {\n        var val = indep.ele('val',leads[li]);\n        val.att('label',leads[li]);\n        val.att('plot_val',\"\");\n    }\n}\n\nconst addTmpl = function(plot, key, plotParams, dependentAxes) {\n    var tmpl = plot.ele('tmpl');\n    tmpl.ele('data_file', key + '.data');\n    tmpl.ele('plot_file', key + '.png');\n    tmpl.ele('r_file', key + '.R');\n    tmpl.ele('title', _title() + \" : \" + _plotText(plotParams) + \" \" + plotParams.plotAction);\n    _addSeriesLabels(tmpl, dependentAxes, plotParams);\n    tmpl.ele('caption');\n    tmpl.ele('job_title');\n    tmpl.ele('keep_revisions', 'false');\n    tmpl.ele('listdiffseries1', 'list()');\n    tmpl.ele('listdiffseries2', 'list()');\n}\n\nconst addPlotFix = function(plot) {\n    plot.ele('plot_fix');\n}\n\nconst addPlotCond = function(plot,plotParams)\n{\n    plot.ele('plot_cond');\n}\n\nconst addCalcStat = function(plot,statType){\n    plot.ele('calc_stat').ele(statType,true);\n} // unused for time series\n\nconst addPlotStat = function(plot,stat){\n    //Statistics --- We always do Summary with Mean - so there\n    plot.ele('plot_stat',stat);\n}\n\n\nconst addPlotCmd = function (plot){\n    plot.ele('plot_cmd');\n}\nconst addY1Lim = function(plot){\n    plot.ele('y1_lim','c()');\n}\nconst addY1Bufr = function(plot){\n    plot.ele('y1_bufr','0.04');\n}\nconst addY2Lim = function(plot) {\n    plot.ele('y2_lim','c()');\n}\n\nconst addMiscellaneous = function(plot,plotParams) {\n    plot.ele('event_equal', 'false');\n\n    const plotType = (_.invert(plotParams.plotTypes))[true];\n    switch (plotType) {\n        case matsTypes.PlotTypes.timeSeries:\n        case matsTypes.PlotTypes.dieoff:\n        case matsTypes.PlotTypes.dailyModelCycle:\n        case matsTypes.PlotTypes.histogram:\n        case matsTypes.PlotTypes.validtime:\n        case matsTypes.PlotTypes.reliability:\n        case matsTypes.PlotTypes.threshold:\n            plot.ele('vert_plot', 'false');\n            plot.ele('x_reverse', 'false');\n            break;\n        case matsTypes.PlotTypes.profile:\n            plot.ele('vert_plot', 'true');\n            plot.ele('x_reverse', 'true');\n            break;\n        default:\n            plot.ele('vert_plot', 'false');\n            plot.ele('x_reverse', 'false');\n    }\n\n    plot.ele('num_stats', 'false');\n    plot.ele('indy1_stag', 'false');\n    plot.ele('indy2_stag', 'false');\n    plot.ele('grid_on', 'true');\n    plot.ele('sync_axes', 'false');\n    plot.ele('dump_points1', 'true');\n    plot.ele('dump_points2', 'true');\n    plot.ele('log_y1', 'false');\n    plot.ele('log_y2', 'false');\n    plot.ele('varianceinflationfactor', 'false');\n    plot.ele('plot_type', 'png16m');\n    plot.ele('plot_height', '8.5');\n    plot.ele('plot_width', '11');\n    plot.ele('plot_res', '72');\n    plot.ele('plot_units', 'in');\n    plot.ele('mar', 'c(8,4,5,4)');\n    plot.ele('mgp', 'c(1,1,0)');\n    plot.ele('cex', '1');\n    plot.ele('title_weight', '2');\n    plot.ele('title_size', '1.4');\n    plot.ele('title_offset', '-2');\n    plot.ele('title_align', '0.5');\n    plot.ele('xtlab_orient', '1');\n    plot.ele('xtlab_perp', '-0.75');\n    plot.ele('xtlab_horiz', '0.5');\n    plot.ele('xtlab_freq', '0');\n    plot.ele('xtlab_size', '1');\n    plot.ele('xlab_weight', '1');\n    plot.ele('xlab_size', '1');\n    plot.ele('xlab_offset', '2');\n    plot.ele('xlab_align', '0.5');\n    plot.ele('ytlab_orient', '1');\n    plot.ele('ytlab_perp', '0.5');\n    plot.ele('ytlab_horiz', '0.5');\n    plot.ele('ytlab_size', '1');\n    plot.ele('ylab_weight', '1');\n    plot.ele('ylab_size', '1');\n    plot.ele('ylab_offset', '-2');\n    plot.ele('ylab_align', '0.5');\n    plot.ele('grid_lty', '3');\n    plot.ele('grid_col', '#cccccc');\n    plot.ele('grid_lwd', '1');\n    plot.ele('grid_x', 'listX');\n    plot.ele('x2tlab_orient', '1');\n    plot.ele('x2tlab_perp', '1');\n    plot.ele('x2tlab_horiz', '0.5');\n    plot.ele('x2tlab_size', '0.8');\n    plot.ele('x2lab_size', '0.8');\n    plot.ele('x2lab_offset', '-0.5');\n    plot.ele('x2lab_align', '0.5');\n    plot.ele('y2tlab_orient', '1');\n    plot.ele('y2tlab_perp', '0.5');\n    plot.ele('y2tlab_horiz', '0.5');\n    plot.ele('y2tlab_size', '1');\n    plot.ele('y2lab_size', '1');\n    plot.ele('y2lab_offset', '1');\n    plot.ele('y2lab_align', '0.5');\n    plot.ele('legend_box', 'o');\n    plot.ele('legend_inset', 'c(0, -.25)');\n    plot.ele('legend_ncol', '3');\n    plot.ele('legend_size', '0.8');\n    plot.ele('caption_weight', '1');\n    plot.ele('caption_col', '#333333');\n    plot.ele('caption_size', '0.8');\n    plot.ele('caption_offset', '3');\n    plot.ele('caption_align', '0');\n    plot.ele('ci_alpha', '0.05');\n}\n\nconst endPlotSpec = function(xml) {\n    xml.end({pretty: true});\n}\n\nexport default matsPlotSpecUtils = {\n    startPlotSpec:startPlotSpec,\n    addDeps:addDeps,\n    addAnomalycorrDeps:addAnomalycorrDeps,\n    getDependentAxis:getDependentAxis,\n    addDatabaseElement:addDatabaseElement,\n    addFolders:addFolders,\n    addPlotCi:addPlotCi,\n    addShowSignif:addShowSignif,\n    addPlotDisp:addPlotDisp,\n    addColors:addColors,\n    addPch:addPch,\n    addType:addType,\n    addLty:addLty,\n    addLwd:addLwd,\n    addConSeries:addConSeries,\n    addOrderSeries:addOrderSeries,\n    addLegend:addLegend,\n    addSeries:addSeries,\n    addTemplate:addTemplate,\n    addIndepDates:addIndepDates,\n    addTmpl:addTmpl,\n    addPlotFix:addPlotFix,\n    addPlotCond:addPlotCond,\n    addCalcStat:addCalcStat,\n    addPlotStat:addPlotStat,\n    addPlotCmd:addPlotCmd,\n    addY1Lim:addY1Lim,\n    addY1Bufr:addY1Bufr,\n    addY2Lim:addY2Lim,\n    addMiscellaneous:addMiscellaneous,\n    endPlotSpec:endPlotSpec,\n    addIndepLevels:addIndepLevels,\n    addIndepForecastHours:addIndepForecastHours,\n    addIndepValidHours:addIndepValidHours\n}","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\n/**\n * Created by pierce on 8/31/16.\n */\nimport './publications.js';\nimport './data_util.js';\nimport './data_query_util.js';\nimport './data_diff_util.js';\nimport './data_match_util.js';\nimport './data_curve_ops_util.js';\nimport './data_plot_ops_util.js';\nimport './data_process_util.js';\nimport './plot_spec_util.js';\nimport './cache.js';\nimport '../both';\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { Meteor } from 'meteor/meteor';\nimport {matsCollections} from 'meteor/randyp:mats-common';\n\nif (Meteor.isServer) {\n    Meteor.publish(\"CurveParams\", function () {\n        var data = matsCollections.CurveParams.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"CurveTextPatterns\", function () {\n        var data = matsCollections.CurveTextPatterns.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"ScatterAxisTextPattern\", function () {\n        var data = matsCollections.ScatterAxisTextPattern.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"SavedCurveParams\", function () {\n        var data = matsCollections.SavedCurveParams.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"PlotParams\", function () {\n        var data = matsCollections.PlotParams.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"Scatter2dParams\", function () {\n        var data = matsCollections.Scatter2dParams.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"PlotGraphFunctions\", function () {\n        var data = matsCollections.PlotGraphFunctions.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"RegionsPerModel\", function () {\n        var data = matsCollections.RegionsPerModel.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"SitesPerModel\", function () {\n        var data = matsCollections.SitesPerModel.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"RegionDescriptions\", function () {\n        var data = matsCollections.RegionDescriptions.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"Models\", function () {\n        var data = matsCollections.Models.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"FcstLensPerModel\", function () {\n        var data = matsCollections.FcstLensPerModel.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"ColorScheme\", function () {\n        var data = matsCollections.ColorScheme.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"Settings\", function () {\n        var data = matsCollections.Settings.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"CurveSettings\", function () {\n        var data = matsCollections.CurveSettings.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"SentAddresses\", function () {\n        var data = matsCollections.SentAddresses.find({userId: this.userId});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n// do not publish roles\n// Meteor.publish(\"Roles\", function () {\n//     var data = matsCollections.Roles.find({});\n//     if (data) {\n//         return data;\n//     }\n//     return this.ready();\n// });\n\n// do not publish Authorization\n// Meteor.publish(\"Authorization\", function () {\n//     var data = matsCollections.Authorization.find({});\n//     if (data) {\n//         return data;\n//     }\n//     return this.ready();\n// });\n\n// do not publish credentials\n// Meteor.publish(\"Credentials\", function () {\n//     var data = matsCollections.Credentials.find({});\n//     if (data) {\n//         return data;\n//     }\n//     return this.ready();\n// });\n\n//do not publish databases\n// Meteor.publish(\"Databases\", function () {\n//     var data = matsCollections.Databases.find({});\n//     if (data) {\n//         return data;\n//     }\n//     return this.ready();\n// });\n    Meteor.publish(\"SiteMap\", function () {\n        var data = matsCollections.SiteMap.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"StationMap\", function () {\n        var data = matsCollections.StationMap.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n    Meteor.publish(\"appName\", function () {\n        var data = matsCollections.appName.find({});\n        if (data) {\n            return data;\n        }\n        return this.ready();\n    });\n}","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {Meteor} from \"meteor/meteor\";\nimport {matsCollections} from 'meteor/randyp:mats-common';\nif (Meteor.isServer) {\n    const Results = require('node-file-cache').create({file:'fileCache', life: 8 * 3600});\n    var getResult = function (key) {\n        //console.log('asked to get result from cache for key:', key);\n        var result = Results.get(key);\n        return result === null ? undefined : result;\n    }\n    var storeResult = function (key, result) {\n        //console.log('asked to set result in cache for app: ',process.env.PWD, ' key:', key);\n        Results.set(key, result);\n        //console.log('set result in cache for app: ', process.env.PWD, 'key:', key);\n    }\n    var clear = function () {\n        //console.log('asked to clear result cache');\n        Results.clear();\n    }\n    var expireKey = function(key) {\n        //console.log('asked to clear result cache for key ', key);\n        Results.expire(key);\n    }\n}\n\n\nexport default\n    matsCache = {\n        getResult: getResult,\n        storeResult: storeResult,\n        clear: clear,\n        expireKey: expireKey\n    }\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n    var gaussianElimination = function(a, o) {\n           var i = 0, j = 0, k = 0, maxrow = 0, tmp = 0, n = a.length - 1, x = new Array(o);\n           for (i = 0; i < n; i++) {\n              maxrow = i;\n              for (j = i + 1; j < n; j++) {\n                 if (Math.abs(a[i][j]) > Math.abs(a[i][maxrow]))\n                    maxrow = j;\n              }\n              for (k = i; k < n + 1; k++) {\n                 tmp = a[k][i];\n                 a[k][i] = a[k][maxrow];\n                 a[k][maxrow] = tmp;\n              }\n              for (j = i + 1; j < n; j++) {\n                 for (k = n; k >= i; k--) {\n                    a[k][j] -= a[k][i] * a[i][j] / a[i][i];\n                 }\n              }\n           }\n           for (j = n - 1; j >= 0; j--) {\n              tmp = 0;\n              for (k = j + 1; k < n; k++)\n                 tmp += a[k][j] * x[k];\n              x[j] = (a[n][j] - tmp) / a[j][j];\n           }\n           return (x);\n    };\n\n    var methods = {\n            linear: function(data) {\n                var sum = [0, 0, 0, 0, 0], n = 0, results = [];\n\n                for (; n < data.length; n++) {\n                  if (data[n][1] != null) {\n                    sum[0] += data[n][0];\n                    sum[1] += data[n][1];\n                    sum[2] += data[n][0] * data[n][0];\n                    sum[3] += data[n][0] * data[n][1];\n                    sum[4] += data[n][1] * data[n][1];\n                  }\n                }\n\n                var gradient = (n * sum[3] - sum[0] * sum[1]) / (n * sum[2] - sum[0] * sum[0]);\n                var intercept = (sum[1] / n) - (gradient * sum[0]) / n;\n              //  var correlation = (n * sum[3] - sum[0] * sum[1]) / Math.sqrt((n * sum[2] - sum[0] * sum[0]) * (n * sum[4] - sum[1] * sum[1]));\n\n                for (var i = 0, len = data.length; i < len; i++) {\n                    var coordinate = [data[i][0], data[i][0] * gradient + intercept];\n                    results.push(coordinate);\n                }\n\n                var string = 'y = ' + Math.round(gradient*100) / 100 + 'x + ' + Math.round(intercept*100) / 100;\n\n                return {equation: [gradient, intercept], points: results, string: string};\n            },\n\n            linearThroughOrigin: function(data) {\n                var sum = [0, 0], n = 0, results = [];\n\n                for (; n < data.length; n++) {\n                    if (data[n][1] != null) {\n                        sum[0] += data[n][0] * data[n][0]; //sumSqX\n                        sum[1] += data[n][0] * data[n][1]; //sumXY\n                    }\n                }\n\n                var gradient = sum[1] / sum[0];\n\n                for (var i = 0, len = data.length; i < len; i++) {\n                    var coordinate = [data[i][0], data[i][0] * gradient];\n                    results.push(coordinate);\n                }\n\n                var string = 'y = ' + Math.round(gradient*100) / 100 + 'x';\n\n                return {equation: [gradient], points: results, string: string};\n            },\n\n            exponential: function(data) {\n                var sum = [0, 0, 0, 0, 0, 0], n = 0, results = [];\n\n                for (len = data.length; n < len; n++) {\n                  if (data[n][1] != null) {\n                    sum[0] += data[n][0];\n                    sum[1] += data[n][1];\n                    sum[2] += data[n][0] * data[n][0] * data[n][1];\n                    sum[3] += data[n][1] * Math.log(data[n][1]);\n                    sum[4] += data[n][0] * data[n][1] * Math.log(data[n][1]);\n                    sum[5] += data[n][0] * data[n][1];\n                  }\n                }\n\n                var denominator = (sum[1] * sum[2] - sum[5] * sum[5]);\n                var A = Math.pow(Math.E, (sum[2] * sum[3] - sum[5] * sum[4]) / denominator);\n                var B = (sum[1] * sum[4] - sum[5] * sum[3]) / denominator;\n\n                for (var i = 0, len = data.length; i < len; i++) {\n                    var coordinate = [data[i][0], A * Math.pow(Math.E, B * data[i][0])];\n                    results.push(coordinate);\n                }\n\n                var string = 'y = ' + Math.round(A*100) / 100 + 'e^(' + Math.round(B*100) / 100 + 'x)';\n\n                return {equation: [A, B], points: results, string: string};\n            },\n\n            logarithmic: function(data) {\n                var sum = [0, 0, 0, 0], n = 0, results = [];\n\n                for (len = data.length; n < len; n++) {\n                  if (data[n][1] != null) {\n                    sum[0] += Math.log(data[n][0]);\n                    sum[1] += data[n][1] * Math.log(data[n][0]);\n                    sum[2] += data[n][1];\n                    sum[3] += Math.pow(Math.log(data[n][0]), 2);\n                  }\n                }\n\n                var B = (n * sum[1] - sum[2] * sum[0]) / (n * sum[3] - sum[0] * sum[0]);\n                var A = (sum[2] - B * sum[0]) / n;\n\n                for (var i = 0, len = data.length; i < len; i++) {\n                    var coordinate = [data[i][0], A + B * Math.log(data[i][0])];\n                    results.push(coordinate);\n                }\n\n                var string = 'y = ' + Math.round(A*100) / 100 + ' + ' + Math.round(B*100) / 100 + ' ln(x)';\n\n                return {equation: [A, B], points: results, string: string};\n            },\n\n            power: function(data) {\n                var sum = [0, 0, 0, 0], n = 0, results = [];\n\n                for (len = data.length; n < len; n++) {\n                  if (data[n][1] != null) {\n                    sum[0] += Math.log(data[n][0]);\n                    sum[1] += Math.log(data[n][1]) * Math.log(data[n][0]);\n                    sum[2] += Math.log(data[n][1]);\n                    sum[3] += Math.pow(Math.log(data[n][0]), 2);\n                  }\n                }\n\n                var B = (n * sum[1] - sum[2] * sum[0]) / (n * sum[3] - sum[0] * sum[0]);\n                var A = Math.pow(Math.E, (sum[2] - B * sum[0]) / n);\n\n                for (var i = 0, len = data.length; i < len; i++) {\n                    var coordinate = [data[i][0], A * Math.pow(data[i][0] , B)];\n                    results.push(coordinate);\n                }\n\n                 var string = 'y = ' + Math.round(A*100) / 100 + 'x^' + Math.round(B*100) / 100;\n\n                return {equation: [A, B], points: results, string: string};\n            },\n\n            polynomial: function(data, order) {\n                if(typeof order == 'undefined'){\n                    order = 2;\n                }\n                 var lhs = [], rhs = [], results = [], a = 0, b = 0, i = 0, k = order + 1;\n\n                        for (; i < k; i++) {\n                           for (var l = 0, len = data.length; l < len; l++) {\n                              if (data[l][1] != null) {\n                               a += Math.pow(data[l][0], i) * data[l][1];\n                              }\n                            }\n                            lhs.push(a), a = 0;\n                            var c = [];\n                            for (var j = 0; j < k; j++) {\n                               for (var l = 0, len = data.length; l < len; l++) {\n                                  if (data[l][1] != null) {\n                                   b += Math.pow(data[l][0], i + j);\n                                  }\n                                }\n                                c.push(b), b = 0;\n                            }\n                            rhs.push(c);\n                        }\n                rhs.push(lhs);\n\n               var equation = gaussianElimination(rhs, k);\n\n                    for (var i = 0, len = data.length; i < len; i++) {\n                        var answer = 0;\n                        for (var w = 0; w < equation.length; w++) {\n                            answer += equation[w] * Math.pow(data[i][0], w);\n                        }\n                        results.push([data[i][0], answer]);\n                    }\n\n                    var string = 'y = ';\n\n                    for(var i = equation.length-1; i >= 0; i--){\n                      if(i > 1) string += Math.round(equation[i] * Math.pow(10, i)) / Math.pow(10, i)  + 'x^' + i + ' + ';\n                      else if (i == 1) string += Math.round(equation[i]*100) / 100 + 'x' + ' + ';\n                      else string += Math.round(equation[i]*100) / 100;\n                    }\n\n                return {equation: equation, points: results, string: string};\n            },\n\n            lastvalue: function(data) {\n              var results = [];\n              var lastvalue = null;\n              for (var i = 0; i < data.length; i++) {\n                if (data[i][1]) {\n                  lastvalue = data[i][1];\n                  results.push([data[i][0], data[i][1]]);\n                }\n                else {\n                  results.push([data[i][0], lastvalue]);\n                }\n              }\n\n              return {equation: [lastvalue], points: results, string: \"\" + lastvalue};\n            }\n        };\n\n    export default  regression = function(method, data, order) {\n       if (typeof method == 'string') {\n           return methods[method](data, order);\n       }\n    };\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsTypes} from 'meteor/randyp:mats-common';\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport {matsCurveUtils} from 'meteor/randyp:mats-common';\nimport {matsPlotUtils} from 'meteor/randyp:mats-common';\nimport {moment} from 'meteor/momentjs:moment'\n\n// get the document id for the control button element that corresponds to the param name\nconst getControlButtonIdForParamName = function (paramName) {\n    // scatter axis don't really exist in matsCollections.CurveParams but they are elements\n    const pname = paramName.replace(/^.axis-/, '');\n    const param = matsCollections.CurveParams.findOne({name: pname});\n    if (param !== undefined) {\n        const id = \"controlButton-\" + param.name;\n        return id;\n    }\n};\n\n// get the control Button Element that corresponds to the param name\nconst getControlElementForParamName = function (paramName) {\n    // scatter axis don't really exist in matsCollections.CurveParams but they are elements\n    const pname = paramName.replace(/^.axis-/, '');\n    return document.getElementById(getControlButtonIdForParamName(pname));\n};\n\n// get the document element that corresponds to the param name\nconst getValueElementForParamName = function (paramName) {\n    // scatter axis don't really exist in matsCollections.CurveParams but they are elements\n    const pname = paramName.replace(/^.axis-/, '');\n    const val = getValueIdForParamName(pname);\n    return document.getElementById(val);\n};\n\n// get the current selected value in the document element that corresponds to the param name\n// Note that the value should be reflected in the adjoining control button value textContent.\nconst getValueForParamName = function (paramName) {\n    try {\n        const elem = getValueElementForParamName(paramName);\n        return getValueElementForParamName(paramName).textContent.trim();\n    } catch (error) {\n        return undefined;\n    }\n};\n\n// get the VALUE BOX id for the element that corresponds to the param name\nconst getValueIdForParamName = function (paramName) {\n    // scatter axis don't really exist in matsCollections.CurveParams but they are elements\n    const pname = paramName.replace(/^.axis-/, '');\n    return \"controlButton-\" + pname + \"-value\";\n};\n\n// set the VALUE BOX text for the element that corresponds to the param name\nconst setValueTextForParamName = function (paramName, text) {\n    try {\n        var text = text;\n        var param = matsCollections.CurveParams.findOne({name: paramName});\n        if (param === undefined) {\n            param = matsCollections.PlotParams.findOne({name: paramName});\n        }\n        if (param === undefined) {\n            return;\n        }\n        if (text === undefined) {\n            if (param.multiple) {\n                // .... if multi selected  get the first .. last\n                const selection = getInputElementForParamName(paramName).selectedOptions;\n                if (selection.length == 0) {\n                    text = \"\";\n                } else if (selection.length == 1) {\n                    text = selection[0].textContent;\n                } else {\n                    text = selection[0].textContent + \" .. \" + selection[selection.length - 1].textContent;\n                }\n            }\n        }\n        const elem = getValueElementForParamName(paramName);\n        if (elem.textContent !== text) {\n            elem.textContent = text;\n        }\n    } catch (error) {\n        console.log(\"Error: could not find param: \" + paramName);\n    }\n};\n\n// get the document id for the element that corresponds to the param name\nconst getInputIdForParamName = function (paramName) {\n    // scatter axis don't really exist in matsCollections.CurveParams but they are elements\n    const pname = paramName.replace(/^.axis-/, '');\n    var param = matsCollections.CurveParams.findOne({name: pname});\n    if (param === undefined) {\n        param = matsCollections.PlotParams.findOne({name: pname});\n    }\n    if (param === undefined) {\n        param = matsCollections.Scatter2dParams.findOne({name: pname});\n        if (param === undefined) {\n            return undefined;\n        }\n    }\n    if (param.type === matsTypes.InputTypes.dateRange) {\n        return (\"element-\" + param.name).replace(/ /g, '-');\n    } else {\n        return (param.name + \"-\" + param.type).replace(/ /g, '-');\n    }\n};\n\n\n// get the parameter for the element that corresponds to the param name\nconst getParameterForName = function (paramName) {\n    // scatter axis don't really exist in matsCollections.CurveParams but they are elements\n    const pname = paramName.replace(/^.axis-/, '');\n\n    var param = matsCollections.CurveParams.findOne({name: pname});\n    if (param === undefined) {\n        param = matsCollections.PlotParams.findOne({name: pname});\n    }\n    if (param === undefined) {\n        param = matsCollections.Scatter2dParams.findOne({name: pname});\n        if (param === undefined) {\n            return undefined;\n        }\n    }\n    return (param);\n};\n\n// get the document element that corresponds to the param name\nconst getInputElementForParamName = function (paramName) {\n    const name = paramName.replace(/^.axis-/, '');\n    const id = getInputIdForParamName(name);\n    if (id === undefined) {\n        return undefined;\n    }\n    return document.getElementById(id);\n};\n\n// get a param disabledOptions list - if any.\nconst getDisabledOptionsForParamName = function (paramName) {\n    const name = paramName.replace(/^.axis-/, '');\n    const id = getInputIdForParamName(name);\n    if (id === undefined) {\n        return undefined;\n    }\n    const param = getParameterForName(name);\n    if (!param) {\n        return undefined;\n    }\n    return param.disabledOptions;\n};\n\n// set the input for the element that corresponds to the param name\n// also sets a data-mats-currentValue attribute\nconst setInputForParamName = function (paramName, value) {\n    const param = getParameterForName(paramName);\n    const id = getInputIdForParamName(paramName);\n    const idSelectorStr = \"#\" + id;\n    const idSelector = $(idSelectorStr);\n\n    // SHOULD DEAL WITH CHECKBOXES HERE\n    if (param.type === matsTypes.InputTypes.radioGroup) {\n        $(\"#\" + id + \"-\" + value).prop(\"checked\", true);\n    } else {\n        idSelector.val(value);\n        setValueTextForParamName(paramName, value);\n    }\n};\n\nconst getElementValues = function () {\n    const data = {\n        curveParams: {},\n        plotParams: {},\n        scatterParams: {}\n    };\n    const axis = ['xaxis-', 'yaxis-'];\n    var params = matsCollections.CurveParams.find({}).fetch();\n    params.forEach(function (param) {\n        var val = \"\";\n        if (param.type === matsTypes.InputTypes.radioGroup) {\n            var selector = \"input:radio[name='\" + param.name + \"']:checked\";\n            val = $(selector).val()\n        } else if (param.type === matsTypes.InputTypes.checkBoxGroup) {\n            var selector = \"input[name='\" + param.name + \"']:checked\";\n            val = $(selector).map(function (_, el) {\n                return $(el).val();\n            }).get();\n        } else if (param.type === matsTypes.InputTypes.dateRange) {\n            val = getValueForParamName(param.name);\n        } else {\n            var idSelect = '#' + getInputIdForParamName(param.name);\n            val = $(idSelect).val();\n        }\n        data.curveParams[param.name] = val;\n        if (matsPlotUtils.getPlotType() == matsTypes.PlotTypes.scatter2d) {\n            for (var a = 0; a < axis.length; a++) {\n                const axisStr = axis[a];\n                const name = axisStr + param.name;\n                var val = \"\";\n                if (param.type === matsTypes.InputTypes.radioGroup) {\n                    var selector = \"input:radio[name='\" + name + \"']:checked\";\n                    val = $(selector).val()\n                } else if (param.type === matsTypes.InputTypes.checkBoxGroup) {\n                    var selector = \"input[name='\" + name + \"']:checked\";\n                    val = $(selector).map(function (_, el) {\n                        return $(el).val();\n                    }).get();\n                } else {\n                    var idSelect = '#' + getInputIdForParamName(name);\n                    val = $(idSelect).val();\n                }\n                data.curveParams[name] = val;\n            }\n        }\n    });\n\n    params = matsCollections.PlotParams.find({}).fetch();\n    params.forEach(function (param) {\n        var val = \"\";\n        if (param.type === matsTypes.InputTypes.radioGroup) {\n            var selector = \"input:radio[name='\" + param.name + \"']:checked\";\n            val = $(selector).val()\n        } else if (param.type === matsTypes.InputTypes.checkBoxGroup) {\n            var selector = \"input[name='\" + param.name + \"']:checked\";\n            val = $(selector).map(function (_, el) {\n                return $(el).val();\n            }).get();\n        } else {\n            var idSelect = '#' + getInputIdForParamName(param.name);\n            val = $(idSelect).val();\n        }\n        data.plotParams[param.name] = val;\n    });\n\n    params = matsCollections.Scatter2dParams.find({}).fetch();\n    params.forEach(function (param) {\n        var val = \"\";\n        if (param.type === matsTypes.InputTypes.radioGroup) {\n            var selector = \"input:radio[name='\" + param.name + \"']:checked\";\n            val = $(selector).val()\n        } else if (param.type === matsTypes.InputTypes.checkBoxGroup) {\n            var selector = \"input[name='\" + param.name + \"']:checked\";\n            val = $(selector).map(function (_, el) {\n                return $(el).val();\n            }).get();\n        } else {\n            var idSelect = '#' + getInputIdForParamName(param.name);\n            val = $(idSelect).val();\n        }\n        data.scatterParams[param.name] = val;\n        if (matsPlotUtils.getPlotType() == matsTypes.PlotTypes.scatter2d) {\n            for (var a = 0; a < axis.length; a++) {\n                var axisStr = axis[a];\n                var name = axisStr + param.name;\n                var val = \"\";\n                if (param.type === matsTypes.InputTypes.radioGroup) {\n                    var selector = \"input:radio[name='\" + name + \"']:checked\";\n                    val = $(selector).val()\n                } else if (param.type === matsTypes.InputTypes.checkBoxGroup) {\n                    var selector = \"input[name='\" + name + \"']:checked\";\n                    val = $(selector).map(function (_, el) {\n                        return $(el).val();\n                    }).get();\n                } else {\n                    var idSelect = '#' + getInputIdForParamName(name);\n                    val = $(idSelect).val();\n                }\n                data.scatterParams[name] = val;\n            }\n        }\n    });\n    return data;\n};\n\nconst expandParams = function () {\n    const params = matsCollections.CurveParams.find({}).fetch();\n    params.forEach(function (param) {\n        if (param.type !== matsTypes.InputTypes.selectMap) {\n            const selector = \"element\" + \"-\" + param.name;\n            const elem = document.getElementById(selector);\n            if (elem) {\n                elem.style.display = \"block\";\n                const dataElem = document.getElementById(param.name + \"-\" + param.type);\n                if (dataElem && dataElem.options && dataElem.selectedIndex >= 0) {\n                    dataElem.options[dataElem.selectedIndex].scrollIntoView();\n                }\n            }\n        }\n    });\n};\n\nconst collapseParams = function () {\n    const params = matsCollections.CurveParams.find({}).fetch();\n    params.forEach(function (param) {\n        if (param.type !== matsTypes.InputTypes.selectMap) {\n            const selector = \"element\" + \"-\" + param.name;\n            if (document.getElementById(selector)) {\n                document.getElementById(selector).style.display = \"none\";\n            }\n        }\n    });\n};\n\nconst collapseParam = function (paramName) {\n    const param = matsCollections.CurveParams.findOne({name: paramName});\n    if (param === undefined || param === null) {\n        return;\n    }\n    if (param.type !== matsTypes.InputTypes.selectMap) {\n        const selector = \"element\" + \"-\" + param.name;\n        if (document.getElementById(selector)) {\n            document.getElementById(selector).style.display = \"none\";\n        }\n    }\n};\n\nconst typeSort = function (arr) {\n    if (arr === undefined) {\n        return undefined;\n    }\n    return arr.sort(function (a, b) {\n        if (isNaN(Number(a) && isNaN(Number(b)))) { // string compare\n            const A = a.toLowerCase();\n            const B = b.toLowerCase();\n            if (A < B) {\n                return -1;\n            } else if (A > B) {\n                return 1;\n            } else {\n                return 0;\n            }\n        } else if (isNaN(Number(a) || isNaN(Number(b)))) {   // number always precedes\n            if (isNaN(Number(a))) {\n                return 1;\n            } else {\n                return -1\n            }\n        } else {\n            return a - b;  // numerical compare\n        }\n    });\n};\n\nconst setDefaultForParamName = function (param) {\n    const paramName = param.name;\n    const type = param.type;\n    const defaultValue = param.default;\n    if (paramName == 'label') {\n        setInputForParamName(paramName, Session.get('NextCurveLabel'));\n    } else {\n        if (defaultValue != \"undefined\") {\n            if (type === matsTypes.InputTypes.select && (defaultValue === -1 || defaultValue === undefined || defaultValue === matsTypes.InputTypes.unused)) {\n                setInputForParamName(paramName, matsTypes.InputTypes.unused);\n            }\n            else {\n                setInputForParamName(paramName, defaultValue);\n            }\n        }\n    }\n};\n\nconst getDefaultDateRange = function(name) {\n    var dateParam = matsCollections.CurveParams.findOne({name: name});\n    if (dateParam === undefined) {\n        dateParam = matsCollections.PlotParams.findOne({name: name});\n    }\n    const startInit = dateParam.startDate;\n    const stopInit = dateParam.stopDate;\n    const dstr = dateParam.default;\n    return {startDate:startInit,stopDate:stopInit,dstr:dstr};\n};\n\nconst getMinMaxDates = function(minDate, maxDate) {\n    var minMoment = moment(minDate,\"MM/DD/YYYY HH:mm\");\n    var maxMoment = moment(maxDate, \"MM/DD/YYYY HH:mm\");\n    if (maxMoment.diff(minMoment, 'days') > 30) {\n        minDate = moment(maxMoment.subtract(30, 'days')).format(\"MM/DD/YYYY HH:mm\");\n    }\n    return {minDate:minDate,maxDate:maxDate};\n};\n\nconst setAllParamsToDefault = function () {\n    // default the superiors and refresh them so that they cause the dependent options to refresh\n    var params = matsCollections.CurveParams.find({}).fetch();\n\n    const superiors = matsCollections.CurveParams.find({\"dependentNames\": {\"$exists\": true}}).fetch();\n    superiors.forEach(function (param) {\n        setDefaultForParamName(param);\n        // actually call the refresh directly - don't use an event, because we want this all to be synchronous\n        matsSelectUtils.refresh(null, param.name);\n        // remove from params list - actually rewrite params list NOT with this param\n        params = params.filter(function (obj) {\n            return obj.name !== param.name;\n        });\n    });\n    // refresh all the non superiors to their default values\n    const nonDependents = matsCollections.CurveParams.find({\"superiorNames\": {\"$exists\": true}}).fetch();\n    nonDependents.forEach(function (param) {\n        setDefaultForParamName(param);\n        if (param.type === matsTypes.InputTypes.dateRange) {\n            const dstr = getDefaultDateRange(param.name).dstr;\n            setValueTextForParamName(param.name, dstr);\n        } else {\n            matsSelectUtils.refresh(null, param.name);\n            // remove from params list - actually rewrite params list NOT with this param\n            params = params.filter(function (obj) {\n                return obj.name !== param.name;\n            });\n        }\n    });\n    // reset everything else\n    params.forEach(function (param) {\n        if (param.type === matsTypes.InputTypes.dateRange) {\n            const dstr = getDefaultDateRange(param.name).dstr;\n            setValueTextForParamName(param.name, dstr);\n        } else if (param.type === matsTypes.InputTypes.selectMap) {\n            const targetId = param.name + '-' + param.type;\n            const targetElem = document.getElementById(targetId);\n            const resetMapEvent = new CustomEvent(\"reset\", {\n                detail: {\n                    refElement: null\n                }\n            });\n            targetElem.dispatchEvent(resetMapEvent);\n        } else {\n            setDefaultForParamName(param);\n        }\n    });\n    matsCollections.PlotParams.find({}).fetch().forEach(function (param) {\n        if (param.type === matsTypes.InputTypes.dateRange) {\n            const dstr = getDefaultDateRange(param.name).dstr;\n            setValueTextForParamName(param.name, dstr);\n        } else {\n            setDefaultForParamName(param);\n        }\n    });\n\n};\n// is the input element displaying? used by curve_param_item_group\nconst isInputElementVisible = function (paramName) {\n    const name = paramName.replace(/^.axis-/, ''); // need to acount for scatter plots params\n    const inputElement = getInputElementForParamName(name);\n    return $(inputElement).is(':visible');\n};\n\n// is the input element displaying? used by curve_param_item_group\nconst isParamVisible = function (paramName) {\n    const name = paramName.replace(/^.axis-/, ''); // need to acount for scatter plots params\n    const paramRef = \"#\" + name + \"-item\";\n    return $(paramRef).is(':visible');\n};\n\n// is the input element displaying? used by curve_param_item_group\nconst isControlButtonVisible = function (paramName) {\n    const name = paramName.replace(/^.axis-/, ''); // need to acount for scatter plots params\n    const paramRef = \"#controlButton-\" + name;\n    return $(paramRef).is(':visible');\n};\n\nconst setInputValueForParamAndtriggerChange = function (paramName, value) {\n    const elem = getInputElementForParamName(paramName);\n    elem.value = value;\n    setValueTextForParamName(paramName, elem.value);\n    $(elem).trigger('change');\n};\n\nconst getOptionsMapForParam = function (paramName) {\n    const param = matsCollections.CurveParams.findOne({name: paramName});\n    return param.optionsMap;\n};\n\nconst getOptionsForParam = function (paramName) {\n    const param = matsCollections.CurveParams.findOne({name: paramName});\n    return param.options;\n};\n\nconst getAppName = function () {\n    const app = matsCollections.appName.findOne({}).app;\n    return app;\n};\n\nconst getCurveItemValueForParamName = function (curveNumber, paramName) {\n    //MODEL-curve-0-Item\n//    const id = paramName.toString().toUpperCase() + \"-curve-\" + curveNumber + \"-Item\"; // the id of the text span for a curveItem\n//    return text = â€Œâ€Œdocument.getElementById(id).innerText;\n    // const elem = $(\"#\" + id);\n    // var text = undefined;\n    // if (elem) {\n    //     text = elem.text();\n    // }\n};\nconst visibilityControllerForParam = function (paramName) {\n    /*\n    Need to iterate all the params looking for one that has this paramName as a key in its\n    hideOtherFor map.\n    If it exists, that param is returned. Otherwise return undefined.\n     */\n    var params = matsCollections.CurveParams.find({}).fetch();\n    var found = undefined;\n    params.some(function (param) {\n        if (param.hideOtherFor) {\n            const pKeys = Object.keys(param.hideOtherFor);\n            if (pKeys.indexOf(paramName) !== -1) {\n                found = param;\n                return;\n            }\n        }\n    });\n    return found;\n}\n\nexport default matsParamUtils = {\n    getDisabledOptionsForParamName: getDisabledOptionsForParamName,\n    getControlButtonIdForParamName: getControlButtonIdForParamName,\n    getControlElementForParamName: getControlElementForParamName,\n    getValueElementForParamName: getValueElementForParamName,\n    getValueForParamName: getValueForParamName,\n    setValueTextForParamName: setValueTextForParamName,\n    getValueIdForParamName: getValueIdForParamName,\n    getInputIdForParamName: getInputIdForParamName,\n    getInputElementForParamName: getInputElementForParamName,\n    getElementValues: getElementValues,\n    setInputForParamName: setInputForParamName,\n    expandParams: expandParams,\n    collapseParams: collapseParams,\n    collapseParam: collapseParam,\n    getParameterForName: getParameterForName,\n    setDefaultForParamName: setDefaultForParamName,\n    setAllParamsToDefault: setAllParamsToDefault,\n    typeSort: typeSort,\n    isInputElementVisible: isInputElementVisible,\n    isParamVisible: isParamVisible,\n    isControlButtonVisible: isControlButtonVisible,\n    setInputValueForParamAndtriggerChange: setInputValueForParamAndtriggerChange,\n    getOptionsForParam: getOptionsForParam,\n    getOptionsMapForParam: getOptionsMapForParam,\n    getCurveItemValueForParamName: getCurveItemValueForParamName,\n    visibilityControllerForParam: visibilityControllerForParam,\n    getAppName: getAppName,\n    getDefaultDateRange:getDefaultDateRange,\n    getMinMaxDates:getMinMaxDates\n};","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport {matsParamUtils} from 'meteor/randyp:mats-common';\nimport {matsTypes} from 'meteor/randyp:mats-common';\n\n// determine the axisText (used in scatter_axis.js for example)\n// according to the Scatter Axis Text Patterns Pattern defined in\n// ScatterAxisTextPatterns according to plotType - and derived from\n// currently selected inputs in the document.\nconst getAxisText = function (plotType) {\n    var scatterAxisTextPattern = matsCollections.ScatterAxisTextPattern.findOne({plotType: getPlotType()});\n    var textPattern = scatterAxisTextPattern ? matsCollections.ScatterAxisTextPattern.findOne({plotType: getPlotType()}).textPattern : undefined;\n    if (scatterAxisTextPattern === undefined) {\n        return \"\";\n    }\n    var text = \"\";\n    for (var i = 0; i < scatterAxisTextPattern.length; i++) {\n        var pName = scatterAxisTextPattern[i][0];\n        var delimiter = scatterAxisTextPattern[i][1];\n        var value = matsParamUtils.getValueForParamName(pName);\n        text += value += delimiter;\n    }\n    return text;\n};\n\n// determine the curveText (used in curveItem for example) for a given curve (from Session.get('curves'))\n// that has already been added\nconst getCurveText = function (plotType, curve) {\n    var curveTextPattern = matsCollections.CurveTextPatterns.findOne({plotType: plotType}).textPattern;\n    var text = \"\";\n\n    for (var i = 0; i < curveTextPattern.length; i++) {\n        var a = curveTextPattern[i];\n        if (a === undefined || a === null || curve[a[1]] === undefined) {\n            continue;\n        }\n        text += a[0];\n        if (curve[a[1]] instanceof Array && (curve[a[1]].length > 2)) {\n            text += curve[a[1]][0] + \"..\" + curve[a[1]][curve[a[1]].length - 1];\n        } else {\n            text += curve[a[1]];\n        }\n        text += a[2];\n    }\n    return text;\n};\n\n// determine which plotType radio button is checked\nconst getPlotType = function () {\n    var buttons = document.getElementsByName('plot-type');\n    for (var i = 0, len = buttons.length; i < len; i++) {\n        if (buttons[i].checked) {\n            return buttons[i].value;\n        }\n    }\n    return \"\";    // error condition actually - shouldn't ever happen\n};\n\n// determine which plotFormat radio button is checked\nconst getPlotFormat = function () {\n    var buttons = document.getElementsByName('plotFormat');\n    if (buttons === undefined) {\n        return \"\"; // app may not have plotFormat?\n    }\n    var plotFormatParam = matsCollections.PlotParams.findOne({name: 'plotFormat'});\n    if (plotFormatParam === undefined) {\n        return \"\"; // app may not have plotFormat?\n    }\n    var optionsMap = plotFormatParam.optionsMap;\n    for (var i = 0, len = buttons.length; i < len; i++) {\n        if (buttons[i].checked) {\n            return buttons[i].value;\n        }\n    }\n    return \"\";  // error condition actually - shouldn't ever happen\n};\n\n// Determine which BestFit radio button is checked\nconst getBestFit = function () {\n    var buttons = document.getElementsByName('Fit Type');\n    var optionsMap = matsCollections.PlotParams.findOne({name: 'bestFit'}).optionsMap;\n    for (var i = 0, len = buttons.length; i < len; i++) {\n        if (buttons[i].checked) {\n            return buttons[i].value;\n        }\n    }\n    return \"\";  // error condition actually - shouldn't ever happen\n};\n\nconst containsPoint = function (pointArray, point) {\n    var lat = point[0];\n    var lon = point[1];\n    for (var i = 0; i < pointArray.length; i++) {\n        var pLat = pointArray[i][0];\n        var pLon = pointArray[i][1];\n        if (lat === pLat && lon === pLon) {\n            return true\n        }\n    }\n    return false;\n};\n\n// disable the action buttons while the query and plot routines are processing, then re-enable them afterwards\nconst disableActionButtons = function () {\n    document.getElementById('plotMatched').disabled = true;\n    document.getElementById('plotUnmatched').disabled = true;\n    document.getElementById('add').disabled = true;\n    document.getElementById('remove-all').disabled = true;\n};\nconst enableActionButtons = function () {\n    document.getElementById('plotMatched').disabled = false;\n    document.getElementById('plotUnmatched').disabled = false;\n    document.getElementById('add').disabled = false;\n    document.getElementById('remove-all').disabled = false;\n};\n\nexport default matsPlotUtils = {\n    getAxisText: getAxisText,\n    getCurveText: getCurveText,\n    getPlotType: getPlotType,\n    getPlotFormat: getPlotFormat,\n    getBestFit: getBestFit,\n    containsPoint: containsPoint,\n    disableActionButtons: disableActionButtons,\n    enableActionButtons: enableActionButtons\n};","\n/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\n/*\ngeneric Math Functions\n */\nvar isNum = function (args)\n{\n    if (args == null || args == undefined) {\n        return false;\n    }\n    args = args.toString();\n    if (args.length == 0) return false;\n\n    for (var i = 0;  i<args.length;  i++)\n    {\n        if ((args.substring(i,i+1) < \"0\" || args.substring(i, i+1) > \"9\") && args.substring(i, i+1) != \".\"&& args.substring(i, i+1) != \"-\")\n        {\n            return false;\n        }\n    }\n\n    return true;\n};\n\nvar mean = function (arr)\n{\n    var len = 0;\n    var sum = 0;\n\n    for(var i=0;i<arr.length;i++)\n    {\n        if (arr[i] == \"\"){}\n        else if (!isNum(arr[i]))\n        {\n            //alert(arr[i] + \" is not number!\");\n            console.log(\"Error: value at position: \" + i + \" is not number! Mean Calculation failed!\" );\n            return 0;\n        }\n        else\n        {\n            len = len + 1;\n            sum = sum + parseFloat(arr[i]);\n        }\n    }\n    return sum / len;\n};\n\nvar variance = function (arr)\n{\n    var len = 0;\n    var sum=0;\n    for(var i=0;i<arr.length;i++)\n    {\n        if (arr[i] == \"\"){}\n        else if (!isNum(arr[i]))\n        {\n            //alert(arr[i] + \" is not number, Variance Calculation failed!\");\n            console.log (\"value at position \" + i + \" is not number, Variance Calculation failed!\");\n            return 0;\n        }\n        else\n        {\n            len = len + 1;\n            sum = sum + parseFloat(arr[i]);\n        }\n    }\n\n    var v = 0;\n    if (len > 1)\n    {\n        var mean = sum / len;\n        for(var i=0;i<arr.length;i++)\n        {\n            if (arr[i] == \"\"){}\n            else\n            {\n                v = v + (arr[i] - mean) * (arr[i] - mean);\n            }\n        }\n\n        return v / len;\n    }\n    else\n    {\n        return 0;\n    }\n};\n\n\nvar median = function (arr)\n{\n    arr.sort(function(a,b){return a-b});\n\n    var median = 0;\n\n    if (arr.length % 2 == 1)\n    {\n        median = arr[(arr.length+1)/2 - 1];\n    }\n    else\n    {\n        median = (1 * arr[arr.length/2 - 1] + 1 * arr[arr.length/2] )/2;\n    }\n\n    return median\n};\n\nexport default matsMathUtils = {\n    isNum:isNum,\n    mean:mean,\n    variance:variance,\n    median:median\n}","\n/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nTemplate.topNav.events({\n    'click .matshome' : function(event) {\n        event.preventDefault();\n        var homeref = document.referrer;\n        if (homeref === \"\" || homeref === undefined) {\n            var r = document.location.href;\n            var rparts = r.split(\":\");\n            if (rparts.length >= 2) {\n                // has a port - remove the port part\n                rparts.pop\n                homeref = rparts.join(\":\");\n            } else {\n                // doesn't have a port - strip the appreference\n                var appref = Session.get(\"app\").appref;\n                homeref = appref.substring(0, appref.lastIndexOf(\"/\"));\n//                homeref = r.split(\"://\")[0] + \"://\" + r.split(\"://\")[1].split(\".\").splice(1, 10).join(\".\")\n            }\n        }\n        window.location.replace(homeref);\n        return false;\n    },\n    'click .about' : function() {\n        $(\"#modal-display-about\").modal();\n        return false;\n    }\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsCurveUtils,matsPlotUtils} from 'meteor/randyp:mats-common';\n\nTemplate.spinner.helpers({\n    image: function () {\n        var img = Session.get(\"spinner_img\");\n        if (img == undefined) {\n            img = \"spinner.gif\";\n            Session.set(\"spinner_img\", \"spinner.gif\");\n        }\n        return img;\n    }\n});\n\n\nTemplate.spinner.events({\n    'click .cancel': function () {\n        matsCurveUtils.hideSpinner();\n        matsPlotUtils.enableActionButtons();\n    }\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsPlotUtils } from 'meteor/randyp:mats-common';\nimport { matsTypes } from 'meteor/randyp:mats-common';\nimport { matsCollections } from 'meteor/randyp:mats-common';\nimport { matsCurveUtils } from 'meteor/randyp:mats-common';\nimport {matsParamUtils } from 'meteor/randyp:mats-common';\n\nTemplate.Home.onCreated(function() {\n    this.subscribe(\"matsPlotUtils\").ready();\n    this.subscribe(\"matsTypes\").ready();\n    this.subscribe(\"matsCollections\").ready();\n    this.subscribe(\"matsCurveUtils\").ready();\n    this.subscribe(\"matsParamUtils\").ready();\n    this.subscribe(\"plotType\").ready();\n});\n\nTemplate.Home.helpers({\n    isUnderConstruction: function () {\n        return matsCollections.CurveParams.findOne({name:'underConstruction'}) !== undefined;\n    },\n    resetDefaults: function() {\n        matsMethods.refreshMetaData.call({}, function (error, result) {\n            if (error !== undefined) {\n                setError(new Error(error.message));\n            }\n            matsParamUtils.setAllParamsToDefault();\n        });\n    }\n});\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nTemplate.underConstruction.helpers({\n    image: function () {\n        var img = \"underConstruction.jpg\";\n        return img;\n    }\n});\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsPlotUtils } from 'meteor/randyp:mats-common';\nimport { matsTypes } from 'meteor/randyp:mats-common';\nimport { matsCollections } from 'meteor/randyp:mats-common';\nimport { matsCurveUtils } from 'meteor/randyp:mats-common';\nimport { matsParamUtils } from 'meteor/randyp:mats-common';\nimport { jqueryui } from 'jquery-ui';\nimport matsMethods from \"../imports/startup/api/matsMethods\";\n\nvar notes;\n\nTemplate.About.helpers({\n    version: function () {\n        var settings = matsCollections.Settings.findOne({});\n        var version = \"unknown\";\n        var buildDate = \"unkown\";\n        if (settings) {\n            version = settings.appVersion;\n            buildDate = settings.buildDate;\n        }\n        versionStr = \"<div class='row' style='text-align:center'>Version: \" + version + \"</div>\";\n        return versionStr + \"<div class='row' style='text-align:center'> Last Build Date: \" + buildDate + \"</div>\";\n\n    },\n    releaseNotes: function() {\n        Session.get('notesUpdated');\n        return notes;\n    }\n});\n\nTemplate.About.events({\n    'click .show-release-notes': function () {\n        matsMethods.getReleaseNotes.call({},function (error, result) {\n            if (error !== undefined) {\n                setError(error);\n                return \"<p>\" + error + \"</p>\";\n            }\n            notes = result;\n            Session.set('notesUpdated', Date.now());\n        });\n        document.getElementById('releaseNotes').style.display = \"block\";\n    },\n    'click .hide-release-notes': function () {\n        document.getElementById('releaseNotes').style.display = \"none\";\n    }\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsCollections } from 'meteor/randyp:mats-common';\n\nTemplate.version.helpers({\n    version: function() {\n        if (matsCollections.Settings.findOne()) {\n            var settings = matsCollections.Settings.findOne({});\n            var version = settings.appVersion;\n            return version;\n        } else {\n            return \"unknown\";\n        }\n    }\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsTypes } from 'meteor/randyp:mats-common';â€¨\nimport { matsCollections } from 'meteor/randyp:mats-common';\nimport { matsCurveUtils } from 'meteor/randyp:mats-common';\nimport { matsMethods } from 'meteor/randyp:mats-common';\nimport { matsGraphUtils } from 'meteor/randyp:mats-common';\nimport { matsPlotUtils } from 'meteor/randyp:mats-common';\nimport { matsParamUtils } from 'meteor/randyp:mats-common';\nimport { matsSelectUtils } from 'meteor/randyp:mats-common';\n\nTemplate.plotList.helpers({\n    Title: function() {\n       return matsCollections.Settings.findOne({},{fields:{Title:1}}).Title;\n    } ,\n    PlotParamGroups: function () {\n        var groupNums = [];\n        var params = matsCollections.PlotParams.find({},{fields:{displayGroup:1}}).fetch();\n        for (var i = 0; i < params.length; i++) {\n            groupNums.push(params[i].displayGroup);\n        }\n        var res = _.uniq(groupNums).sort();\n        return res;\n    },\n    curves: function () {\n        return Session.get('Curves');\n    },\n    privateDisabled: function() {\n        if (!Meteor.user()) {\n            return \"disabled\";\n        } else {\n            return \"\";\n        }\n    },\n    privateRestoreNames: function() {\n        var names = [];\n        var l = matsCollections.CurveSettings.find({},{fields:{name:1,owner:1,permission:1}}).fetch();\n        for (var i = 0; i < l.length; i++) {\n            if (l[i].owner === Meteor.userId() && l[i].permission === \"private\") {\n                names.push(l[i].name);\n            }\n        }\n        return names;\n    },\n    publicRestoreNames: function() {\n        var names = [];\n        var savedSettings = matsCollections.CurveSettings.find({},{fields:{name:1,owner:1,permission:1}}).fetch();\n        for (var i = 0; i < savedSettings.length; i++) {\n            if (savedSettings[i].permission === \"public\") {\n                names.push(savedSettings[i].name);\n            }\n        }\n        return names;\n    },\n    isOwner: function() {\n        return  this.owner === Meteor.userId();\n    }\n});\n\nTemplate.plotList.events({\n    'click .cancel-restore' : function() {\n        document.getElementById('restore_from_public').value = \"\";\n        document.getElementById('restore_from_private').value = \"\";\n    },\n    'click .cancel-save' : function() {\n        document.getElementById('save_as').value = \"\";\n        document.getElementById('save_to').value = \"\";\n    },\n    'click .delete-selected' : function() {\n        var deleteThis = document.getElementById('save_to').value;\n        if (deleteThis !== undefined && deleteThis !== \"\") {\n            matsMethods.deleteSettings.call({name:deleteThis}, function(error){\n                if (error) {\n                    setError(new Error(error.message));\n                }\n            });\n        }\n    },\n\n    // catch a click on a diff plotFormat radio button.\n    'click .data-input' : function() {\n        var formats = Object.keys(matsTypes.PlotFormats);\n        if ($.inArray(this.toString(),formats) !== -1) {\n                matsCurveUtils.checkDiffs();\n        }\n    },\n    'click .restore-from-private' : function() {\n        document.getElementById('restore_from_public').value = \"\";\n    },\n    'click .restore-from-public' : function() {\n        document.getElementById('restore_from_private').value = \"\";\n    },\n    'click .submit-params': function (event, template) {\n        var plotAction = Session.get('plotParameter');\n        Session.set(\"spinner_img\", \"spinner.gif\");\n        document.getElementById(\"spinner\").style.display=\"block\";\n        event.preventDefault();\n        var action = event.currentTarget.name;\n        var p = {};\n        // get the plot-type elements checked state\n        const plotTypeElems = $('input[name=plot-type]');\n        p.plotTypes = {};\n        for (ptei = 0; ptei < plotTypeElems.length; ptei++){\n            const ptElem = plotTypeElems[ptei];\n            p.plotTypes[ptElem.value] = ptElem.checked;\n        }\n        var curves = Session.get('Curves');\n        if (curves == 0 && action !== \"restore\") {\n            //alert (\"No Curves To plot\");\n            setError(new Error(\"There are no curves to plot!\"));\n            Session.set(\"spinner_img\", \"spinner.gif\");\n            document.getElementById(\"spinner\").style.display=\"none\";\n            return false;\n        }\n        p.curves = [];\n        p.plotAction = plotAction;\n        curves.forEach(function(curve){p.curves.push(curve)});\n        matsCollections.PlotParams.find({}).fetch().forEach(function(plotParam){\n            var name = plotParam.name;\n            var type = plotParam.type;\n            var options = plotParam.options;\n\n            if (type == matsTypes.InputTypes.radioGroup) {\n                for (var i=0; i<options.length; i++) {\n                    if (document.getElementById(name+\"-\" + type + \"-\" + options[i]).checked == true) {\n                        p[name] = options[i];\n                        break;\n                    }\n                }\n            } else if (type == matsTypes.InputTypes.checkBoxGroup) {\n                p[name] = [];\n                for (var i = 0; i < options.length; i++) {\n                    if (document.getElementById(name + \"-\" + type + \"-\" + options[i]).checked) {\n                        p[name].push(options[i]);\n                    }\n                }\n            } else if (type == matsTypes.InputTypes.dateRange) {\n                p[name] = matsParamUtils.getValueForParamName(name);\n            } else if (type == matsTypes.InputTypes.numberSpinner) {\n                p[name] = document.getElementById(name + '-' + type).value;\n            } else if (type == matsTypes.InputTypes.select) {\n                p[name] = document.getElementById(name + '-' + type).value;\n            } else if (type == matsTypes.InputTypes.textInput) {\n                p[name] = document.getElementById(name + '-' + type).value;\n            }\n        });\n        p['completeness'] = document.getElementById(\"completeness\").value;\n        p['outliers'] = document.getElementById(\"outliers\").value;\n        Session.set(\"PlotParams\", p);\n\n        switch (action) {\n            case \"save\":\n                if ((document.getElementById('save_as').value === \"\" ||\n                    document.getElementById('save_as').value === undefined) &&\n                    (document.getElementById('save_to').value === \"\" ||\n                    document.getElementById('save_to').value === undefined)) {\n                    $(\"#saveModal\").modal('show');\n                    Session.set(\"spinner_img\", \"spinner.gif\");\n                    document.getElementById(\"spinner\").style.display=\"none\";\n                    return false;\n                }\n                var saveAs = \"\";\n                if (document.getElementById('save_as').value !== \"\" &&\n                    document.getElementById('save_as').value !== undefined) {\n                    saveAs = document.getElementById('save_as').value;\n                } else {\n                    saveAs = document.getElementById('save_to').value;\n                }\n                var permission = document.getElementById(\"save-public\").checked == true?\"public\":\"private\";\n                //console.log(\"saving settings to \" + saveAs);\n                Session.set('plotName', saveAs);\n                // get the settings to save out of the session\n                p = Session.get(\"PlotParams\");\n                var paramData = matsParamUtils.getElementValues();\n                p['paramData'] = paramData;\n                matsMethods.saveSettings.call( {saveAs:saveAs, p:p, permission:permission}, function(error){\n                    if (error) {\n                        setError(new Error(\"matsMethods.saveSettings from plot_list.js \" +error.message));\n                    }\n                });\n\n                document.getElementById('save_as').value = \"\";\n                document.getElementById('save_to').value = \"\";\n                $(\"#saveModal\").modal('hide');\n                Session.set(\"spinner_img\", \"spinner.gif\");\n                document.getElementById(\"spinner\").style.display=\"none\";\n                return false;\n                break;\n            case \"restore\":\n                matsCurveUtils.clearAllUsed();\n                if (((document.getElementById('restore_from_private').value === \"\" ||\n                      document.getElementById('restore_from_private').value === undefined)) &&\n                    ((document.getElementById('restore_from_public').value === \"\" ||\n                      document.getElementById('restore_from_public').value === undefined))){\n                    $(\"#restoreModal\").modal('show');\n                    Session.set(\"spinner_img\", \"spinner.gif\");\n                    document.getElementById(\"spinner\").style.display=\"none\";\n                    return false;\n                }\n                var restoreFrom = document.getElementById('restore_from_private').value;\n                if (restoreFrom === \"\" || restoreFrom === undefined) {\n                    restoreFrom = document.getElementById('restore_from_public').value;\n                }\n                //console.log(\"restore settings from \" + restoreFrom);\n                Session.set('plotName', restoreFrom);\n\n                p = matsCollections.CurveSettings.findOne({name:restoreFrom});\n                // now set all the curves.... This will refresh the curves list\n                Session.set('Curves',p.data.curves);\n                // reset the plotType - have to do this first because the event will remove all the possibly existing curves\n                // get the plot-type elements checked state\n                var plotTypeSaved = false;\n                const plotTypeElems = $('input[name=plot-type]');\n                for (var ptei = 0; ptei < plotTypeElems.length; ptei++){\n                    var ptElem = plotTypeElems[ptei];\n                    if (p.data.plotTypes && p.data.plotTypes[ptElem.value] === true) {\n                        plotTypeSaved = true;\n                        ptElem.checked = true;\n                        // We have to set up the display without using click events because that would cause\n                        // the restored curves to be removed\n                        switch (ptElem.value) {\n                            case matsTypes.PlotTypes.timeSeries:\n                                matsCurveUtils.showTimeseriesFace();\n                                break;\n                            case matsTypes.PlotTypes.profile:\n                                matsCurveUtils.showProfileFace();\n                                break;\n                            case matsTypes.PlotTypes.dieoff:\n                                matsCurveUtils.showDieOffFace();\n                                break;\n                            case matsTypes.PlotTypes.threshold:\n                                matsCurveUtils.showThresholdFace();\n                                break;\n                            case matsTypes.PlotTypes.validtime:\n                                matsCurveUtils.showValidTimeFace();\n                                break;\n                            case matsTypes.PlotTypes.dailyModelCycle:\n                                matsCurveUtils.showDailyModelCycleFace();\n                                break;\n                            case matsTypes.PlotTypes.reliability:\n                                matsCurveUtils.showReliabilityFace();\n                                break;\n                            case matsTypes.PlotTypes.map:\n                                matsCurveUtils.showMapFace();\n                                break;\n                            case matsTypes.PlotTypes.histogram:\n                                matsCurveUtils.showHistogramFace();\n                                break;\n                            case matsTypes.PlotTypes.contour:\n                            case matsTypes.PlotTypes.contourDiff:\n                                matsCurveUtils.showContourFace();\n                                break;\n                            case matsTypes.PlotTypes.scatter2d:\n                                matsCurveUtils.showScatterFace();\n                                break;\n                        }\n                    } else {\n                        ptElem.checked = false;\n                    }\n                }\n                if (plotTypeSaved !== true) {\n                    // set the default - in the case none was set in an old saved settings\n                    document.getElementById(\"plot-type-\" + matsCollections.PlotGraphFunctions.findOne({checked:true}).plotType).checked = true;\n                }\n\n                // now set the PlotParams\n                var params = matsCollections.PlotParams.find({}).fetch();\n                params.forEach(function(plotParam){\n                    const val =  p.data.paramData.plotParams[plotParam.name] === null ||\n                        p.data.paramData.plotParams[plotParam.name] === undefined ? matsTypes.InputTypes.unused : p.data.paramData.plotParams[plotParam.name];\n                    matsParamUtils.setInputForParamName(plotParam.name,val);\n                });\n                \n                // reset the form parameters for the superiors first\n                params = matsCollections.CurveParams.find({\"dependentNames\" : { \"$exists\" : true }}).fetch();\n                params.forEach(function(plotParam) {\n                    if (plotParam.type === matsTypes.InputTypes.dateRange) {\n                        if (p.data.paramData.curveParams[plotParam.name] === undefined) {\n                            return;   // just like continue\n                        }\n                        const dateArr = p.data.paramData.curveParams[plotParam.name].split(' - ');\n                        const from = dateArr[0];\n                        const to = dateArr[1];\n                        const idref = \"#\" + plotParam.name + \"-item\";\n                        $(idref).data('daterangepicker').setStartDate(moment.utc (from, 'MM-DD-YYYY HH:mm'));\n                        $(idref).data('daterangepicker').setEndDate(moment.utc (to, 'MM-DD-YYYY HH:mm'));\n                        matsParamUtils.setValueTextForParamName(plotParam.name,p.data.paramData.curveParams[plotParam.name]);\n                    } else {\n                        const val =  p.data.paramData.curveParams[plotParam.name] === null ||\n                            p.data.paramData.curveParams[plotParam.name] === undefined ? matsTypes.InputTypes.unused : p.data.paramData.curveParams[plotParam.name];\n                        matsParamUtils.setInputForParamName(plotParam.name, val);\n                    }\n                });\n\n                // now reset the form parameters for the dependents\n                params = matsCollections.CurveParams.find({\"dependentNames\" : { \"$exists\" : false }}).fetch();\n                params.forEach(function(plotParam) {\n                    if (plotParam.type === matsTypes.InputTypes.dateRange) {\n                        if (p.data.paramData.curveParams[plotParam.name] === undefined) {\n                            return;   // just like continue\n                        }\n                        const dateArr = p.data.paramData.curveParams[plotParam.name].split(' - ');\n                        const from = dateArr[0];\n                        const to = dateArr[1];\n                        const idref = \"#\" + plotParam.name + \"-item\";\n                        $(idref).data('daterangepicker').setStartDate(moment.utc (from, 'MM-DD-YYYY HH:mm'));\n                        $(idref).data('daterangepicker').setEndDate(moment.utc (to, 'MM-DD-YYYY HH:mm'));\n                        matsParamUtils.setValueTextForParamName(plotParam.name,p.data.paramData.curveParams[plotParam.name]);\n                    } else {\n                        const val =  p.data.paramData.curveParams[plotParam.name] === null ||\n                            p.data.paramData.curveParams[plotParam.name] === undefined ? matsTypes.InputTypes.unused : p.data.paramData.curveParams[plotParam.name];\n                        matsParamUtils.setInputForParamName(plotParam.name, val);\n                    }\n                });\n\n                // reset the scatter parameters\n                params = matsCollections.Scatter2dParams.find({}).fetch();\n                params.forEach(function(plotParam) {\n                    const val =  p.data.paramData.scatterParams[plotParam.name] === null ||\n                    p.data.paramData.scatterParams[plotParam.name] === undefined ? matsTypes.InputTypes.unused : p.data.paramData.scatterParams[plotParam.name];\n                    matsParamUtils.setInputForParamName(plotParam.name, val);\n                });\n\n                // reset the dates\n                if (p.data.dates !== undefined) {\n                    const dateArr = p.data.dates.split(' - ');\n                    const from = dateArr[0];\n                    const to = dateArr[1];\n                    $('#dates-item').data('daterangepicker').setStartDate(moment.utc (from, 'MM-DD-YYYY HH:mm'));\n                    $('#dates-item').data('daterangepicker').setEndDate(moment.utc (to, 'MM-DD-YYYY HH:mm'));\n                    matsParamUtils.setValueTextForParamName('dates',p.data.dates);\n                }\n\n                // reset the plotFormat\n\n                // reset the plotParams\n                Session.set(\"PlotParams\", p);\n                //set the used defaults so that subsequent adds get a core default\n                matsCurveUtils.setUsedColorsAndLabels();\n                document.getElementById('restore_from_public').value = \"\";\n                document.getElementById('restore_from_private').value = \"\";\n                $(\"#restoreModal\").modal('hide');\n                Session.set(\"spinner_img\", \"spinner.gif\");\n                document.getElementById(\"spinner\").style.display=\"none\";\n                matsParamUtils.collapseParams();\n                return false;\n                break;\n            case \"plot\":\n                var pt = matsPlotUtils.getPlotType();\n                console.log(\"resizing graph type is \", pt);\n                matsGraphUtils.resizeGraph(pt);\n                var pgf = matsCollections.PlotGraphFunctions.findOne({plotType: pt});\n                if (pgf === undefined) {\n                    setError(new Error(\"plot_list.js - plot -do not have a plotGraphFunction for this plotType: \" + pt));\n                    Session.set(\"spinner_img\", \"spinner.gif\");\n                    document.getElementById(\"spinner\").style.display=\"none\";\n                    return false;\n                }\n                Session.set('graphViewMode',matsTypes.PlotView.graph);\n                Session.set('mvResultKey',null); // disable the mv links on the graph page\n\n                var graphFunction = pgf.graphFunction;\n                console.log(\"prior to getGraphData call time:\", new Date() );\n                // the following line converts a null expireKey to false.\n                var expireKey = Session.get('expireKey') === true ? true : false;\n                matsMethods.getGraphData.call({plotParams: p, plotType: pt, expireKey: expireKey}, function (error, ret) {\n                    if (error !== undefined) {\n                        //setError(new Error(\"matsMethods.getGraphData from plot_list.js : error: \" + error ));\n                        setError(error);\n                        matsCurveUtils.resetGraphResult();\n                        //Session.set ('PlotResultsUpDated', new Date());\n                        Session.set(\"spinner_img\", \"spinner.gif\");\n                        matsCurveUtils.hideSpinner();\n                        Session.set('expireKey', false);\n                        return false;\n                    }\n                    Session.set('expireKey', false);\n                    matsCurveUtils.setGraphResult(ret.result);\n                    const plotType = Session.get('plotType');\n                    if (plotType === matsTypes.PlotTypes.contourDiff) {\n                        const oldCurves = Session.get('Curves');\n                        Session.set('oldCurves', oldCurves);\n                        Session.set('Curves', ret.result.basis.plotParams.curves);\n                    }\n                    Session.set(\"plotResultKey\", ret.key);\n                    delete ret;\n                    Session.set('graphFunction', graphFunction);\n                    Session.set ('PlotResultsUpDated', new Date());\n                    console.log(\"after successful getGraphData call time:\", new Date(), \":Session key: \",  ret.key, \" graphFunction:\", graphFunction);\n                    matsGraphUtils.setGraphView(pt);\n                });\n                if (matsCollections.Settings.findOne({}).appType === matsTypes.AppTypes.metexpress && p['metexpress-mode'] === \"matsmv\") {\n                    p['mvPlot'] = true;   // mark this as a metviewer plot so that the key is uniq wrt the mats plot\n                    Session.set('mvs', null);\n                    Session.set(\"mvResultKey\", null);\n                    matsMethods.mvBatch.call({plotParams: p, plotType: pt}, function (error, ret) {\n                        if (error !== undefined) {\n                            setError(\"matsMethods.mvBatch from plot_list.js : error: \" + error);\n                            return false;\n                        }\n                        var mvs = [];\n                            var key = ret.key;\n                            var artifacts = ret.artifacts;\n                            for (var i =0; i < Object.keys(artifacts).length; i++){\n                                const name = Object.keys(artifacts)[i];\n                                const url = location.href + artifacts[name];\n                                mvs.push({name:name,url:url});\n                            }\n                            Session.set('mvs', mvs);\n                            Session.set(\"mvResultKey\", key);\n                            Session.set('MvResultsUpDated', new Date());\n                        });\n                }\n                break;\n            default:\n                break;\n        }\n        return false;\n    }\n});\nTemplate.plotList.onRendered( function() {\n    // last bit of stuff that needs to be done when the page finally renders\n\n    // hide selectors that don't belong to timeseries\n    var elem;\n    for (var sidx = 0; sidx < matsTypes.selectorsToHide.length; sidx++) {\n        elem = document.getElementById(matsTypes.selectorsToHide[sidx] + '-item');\n        if (elem && elem.style) {\n            elem.style.display = 'none';\n        }\n    }\n\n    // need to display correct selectors on page load if default plot type is not timeseries\n    const plotType = matsPlotUtils.getPlotType();\n    switch (plotType) {\n        case matsTypes.PlotTypes.profile:\n            matsCurveUtils.showProfileFace();\n            break;\n        case matsTypes.PlotTypes.dieoff:\n            matsCurveUtils.showDieOffFace();\n            break;\n        case matsTypes.PlotTypes.threshold:\n            matsCurveUtils.showThresholdFace();\n            break;\n        case matsTypes.PlotTypes.validtime:\n            matsCurveUtils.showValidTimeFace();\n            break;\n        case matsTypes.PlotTypes.dailyModelCycle:\n            matsCurveUtils.showDailyModelCycleFace();\n            break;\n        case matsTypes.PlotTypes.reliability:\n            matsCurveUtils.showReliabilityFace();\n            break;\n        case matsTypes.PlotTypes.map:\n            matsCurveUtils.showMapFace();\n            break;\n        case matsTypes.PlotTypes.histogram:\n            matsCurveUtils.showHistogramFace();\n            break;\n        case matsTypes.PlotTypes.contour:\n        case matsTypes.PlotTypes.contourDiff:\n            matsCurveUtils.showContourFace();\n            break;\n        case matsTypes.PlotTypes.scatter2d:\n            matsCurveUtils.showScatterFace();\n            break;\n        case matsTypes.PlotTypes.timeSeries:\n        default:\n            break;\n    }\n\n    // make sure everything is at default\n    matsParamUtils.setAllParamsToDefault();\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsCollections } from 'meteor/randyp:mats-common';\nimport { plotParamHandler } from 'meteor/randyp:mats-common';\nTemplate.plotParamGroup.helpers({\n    PlotParams: function (num) {\n            var params = matsCollections.PlotParams.find({displayGroup:num},{sort:[\"displayOrder\", \"asc\"]}).fetch();\n            return params;\n        },\n    displayGroup: function() {\n        return \"block\";\n    },\n    log: function() {\n        console.log(this);\n    }\n});\n\nTemplate.plotParamGroup.events({\n    'click': function(event) {\n        if (plotParamHandler !== undefined) {\n            plotParamHandler (event);  // call app specific handler with event.\n        }\n    }\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsCollections } from 'meteor/randyp:mats-common';\nimport { matsParamUtils } from 'meteor/randyp:mats-common';\nimport { matsTypes } from 'meteor/randyp:mats-common';\nimport { plotParamHandler } from 'meteor/randyp:mats-common';\n\nTemplate.QCParamGroup.helpers({\n    completenessNumber: function () {\n        var appType = matsCollections.Settings.findOne({}).appType;\n        if (appType === 'anomalycor' || appType === matsTypes.AppTypes.metexpress) {\n            return '0';\n        } else {\n            return '75';\n        }\n    },\n    noQC: function () {\n        var appType = matsCollections.Settings.findOne({}).appType;\n        return appType === 'anomalycor' || appType === matsTypes.AppTypes.metexpress\n    }\n});\n\nTemplate.QCParamGroup.events({\n\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsPlotUtils} from 'meteor/randyp:mats-common';\n\nTemplate.error.helpers({\n   errorMessage: function() {\n       return getError();\n   },\n    stackTrace: function() {\n       return getStack();\n    }\n});\n\nTemplate.error.events({\n    'click .clear-error': function() {\n        clearError();\n        document.getElementById('stack').style.display = \"none\";\n        matsPlotUtils.enableActionButtons();\n        return false;\n    },\n    'click .show-stack': function() {\n        document.getElementById('stack').style.display = \"block\";\n    },\n    'click .hide-stack': function() {\n        document.getElementById('stack').style.display = \"none\";\n    }\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsPlotUtils} from 'meteor/randyp:mats-common';\n\nTemplate.info.helpers({\n   infoMessage: function() {\n       return getInfo();\n   }\n});\n\nTemplate.info.events({\n    'click .clear-info': function() {\n        clearInfo();\n        matsPlotUtils.enableActionButtons();\n        return false;\n    }\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsParamUtils,matsCurveUtils} from 'meteor/randyp:mats-common';\n\n// moved here from plotType.html and plotType.js\nTemplate.changePlotType.events({\n    'click .confirm-remove-all': function (event) {\n        event.preventDefault();\n        matsCurveUtils.clearAllUsed();\n        matsParamUtils.setAllParamsToDefault();\n        Session.set(\"editMode\", \"\");\n        Session.set(\"paramWellColor\", \"#f5f5f5\");  // default grey\n        Session.set(\"lastUpdate\", Date.now());\n\n        Session.set(\"confirmPlotChange\", Date.now());\n        const plotChangeType = Session.get('plotChangeType');\n        const ref = \"#plot-type-\" + plotChangeType;   //NOTE: this assumes that the id of the associated plotType is following a convention defined by matsTypes.PlotTypes\n        $(ref).trigger('click');\n        //return false;\n    },\n    'click .confirm-keep-all': function (event) {\n        event.preventDefault();\n        Session.set(\"confirmPlotChange\", Date.now());\n        const plotChangeType = Session.get('plotChangeType');\n        const ref = \"#plot-type-\" + plotChangeType;   //NOTE: this assumes that the id of the associated plotType is following a convention defined by matsTypes.PlotTypes\n        $(ref).trigger('click');\n        //return false;\n    },\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {Meteor} from 'meteor/meteor';\nimport {Hooks} from 'meteor/differential:event-hooks';\nimport {\n    matsCollections,\n    matsCurveUtils,\n    matsGraphUtils,\n    matsMethods,\n    matsParamUtils,\n    matsPlotUtils,\n    matsTypes\n} from 'meteor/randyp:mats-common';\n\nvar pageIndex = 0;\nvar annotation = \"\";\nvar openWindows = [];\nvar xAxes = [];\nvar yAxes = [];\nvar curveOpsUpdate = [];\n\nTemplate.graph.onCreated(function () {\n    // the window resize event needs to also resize the graph\n    $(window).resize(function () {\n        matsGraphUtils.resizeGraph(matsPlotUtils.getPlotType());\n        var dataset = matsCurveUtils.getGraphResult().data;\n        var options = matsCurveUtils.getGraphResult().options;\n        if (dataset !== undefined && options !== undefined) {\n            Plotly.newPlot($(\"#placeholder\")[0], dataset, options, {showLink: true});\n        }\n    });\n});\n\nTemplate.graph.helpers({\n    /**\n     * @return {string}\n     * @return {string}\n     */\n    graphFunction: function () {\n        // causes graph display routine to be processed\n        Session.get('PlotResultsUpDated');\n        var graphFunction = Session.get('graphFunction');\n        if (graphFunction) {\n            eval(graphFunction)(Session.get('plotResultKey'));\n            var plotType = Session.get('plotType');\n            var dataset = matsCurveUtils.getGraphResult().data;\n            var options = matsCurveUtils.getGraphResult().options;\n            Session.set('options', options);\n\n            // need to save some curve options so that the reset button can undo Plotly.restyle\n            switch (plotType) {\n                case matsTypes.PlotTypes.contour:\n                case matsTypes.PlotTypes.contourDiff:\n                    //saved curve options for contours\n                    Session.set('colorbarResetOpts', {\n                        'colorbar.title': dataset[0].colorbar.title,\n                        'autocontour': dataset[0].autocontour,\n                        'ncontours': dataset[0].ncontours,\n                        'contours.start': dataset[0].contours.start,\n                        'contours.end': dataset[0].contours.end,\n                        'contours.size': dataset[0].contours.size,\n                        'reversescale': false,\n                        'colorscale': JSON.stringify(dataset[0].colorscale)\n                    });\n                    break;\n                case matsTypes.PlotTypes.timeSeries:\n                case matsTypes.PlotTypes.profile:\n                case matsTypes.PlotTypes.dieoff:\n                case matsTypes.PlotTypes.threshold:\n                case matsTypes.PlotTypes.validtime:\n                case matsTypes.PlotTypes.dailyModelCycle:\n                case matsTypes.PlotTypes.reliability:\n                    // saved curve options for line graphs\n                    var lineTypeResetOpts = [];\n                    for (var lidx = 0; lidx < dataset.length; lidx++) {\n                        if (Object.values(matsTypes.ReservedWords).indexOf(dataset[lidx].label) === -1) {\n                            lineTypeResetOpts.push({\n                                'visible': dataset[lidx].visible,\n                                'mode': dataset[lidx].mode,\n                                'error_y': dataset[lidx].error_y,\n                                'error_x': dataset[lidx].error_x,\n                                'line.dash': dataset[lidx].line.dash,\n                                'line.width': dataset[lidx].line.width,\n                                'marker.symbol': dataset[lidx].marker.symbol,\n                            });\n                        } else {\n                            break;\n                        }\n                    }\n                    Session.set('lineTypeResetOpts', lineTypeResetOpts);\n                    break;\n                case matsTypes.PlotTypes.histogram:\n                    // saved curve options for maps\n                    var barTypeResetOpts = [];\n                    for (var bidx = 0; bidx < dataset.length; bidx++) {\n                        if (Object.values(matsTypes.ReservedWords).indexOf(dataset[bidx].label) === -1) {\n                            barTypeResetOpts.push({\n                                'visible': dataset[bidx].visible,\n                            });\n                        } else {\n                            break;\n                        }\n                    }\n                    Session.set('barTypeResetOpts', barTypeResetOpts);\n                    break;\n                case matsTypes.PlotTypes.map:\n                    // saved curve options for maps\n                    var mapResetOpts = [];\n                    mapResetOpts[0] = {\n                        'marker.opacity': dataset[0].marker.opacity,\n                    };\n                    for (var midx = 1; midx < dataset.length; midx++) {\n                        mapResetOpts.push({\n                            'visible': dataset[midx].visible,\n                        });\n                    }\n                    Session.set('mapResetOpts', mapResetOpts);\n                    break;\n                case matsTypes.PlotTypes.scatter2d:\n                default:\n                    break;\n            }\n\n            // initial plot\n            $(\"#legendContainer\").empty();\n            $(\"#placeholder\").empty();\n            if (!dataset || !options) {\n                return false;\n            }\n            Plotly.newPlot($(\"#placeholder\")[0], dataset, options, {showLink: true});\n\n            // append annotations\n            if (plotType !== matsTypes.PlotTypes.map) {\n                annotation = \"\";\n                for (var i = 0; i < dataset.length; i++) {\n                    if (plotType !== matsTypes.PlotTypes.histogram && dataset[i].curveId !== undefined) {\n                        annotation = annotation + \"<div id='\" + dataset[i].curveId + \"-annotation' style='color:\" + dataset[i].annotateColor + \"'>\" + dataset[i].annotation + \" </div>\";\n                    }\n                }\n                $(\"#legendContainer\").append(\"<div id='annotationContainer' style='font-size:smaller'>\" + annotation + \"</div>\");\n\n                // store the existing axes.\n                Object.keys($(\"#placeholder\")[0].layout).filter(function (k) {\n                    if (k.startsWith('xaxis')) {\n                        xAxes.push(k);\n                    }\n                    if (k.startsWith('yaxis')) {\n                        yAxes.push(k);\n                    }\n                });\n            }\n            matsCurveUtils.hideSpinner();\n        }\n        return graphFunction;\n    },\n    Title: function () {\n        if (matsCollections.Settings === undefined || matsCollections.Settings.findOne({}, {fields: {Title: 1}}) === undefined) {\n            return \"\";\n        } else {\n            return matsCollections.Settings.findOne({}, {fields: {Title: 1}}).Title;\n        }\n    },\n    width: function () {\n        return matsGraphUtils.width(matsPlotUtils.getPlotType());\n    },\n    height: function () {\n        return matsGraphUtils.height(matsPlotUtils.getPlotType());\n    },\n    curves: function () {\n        return Session.get('Curves');\n    },\n    plotName: function () {\n        return (Session.get('PlotParams') === [] || Session.get('PlotParams').plotAction === undefined) || Session.get('plotType') === matsTypes.PlotTypes.map ? \"\" : Session.get('PlotParams').plotAction.toUpperCase();\n    },\n    curveText: function () {\n        if (this.diffFrom === undefined) {\n            var plotType = Session.get('plotType');\n            if (plotType === undefined) {\n                pfuncs = matsCollections.PlotGraphFunctions.find({}).fetch();\n                for (var i = 0; i < pfuncs.length; i++) {\n                    if (pfuncs[i].checked === true) {\n                        Session.set('plotType', pfuncs[i].plotType);\n                    }\n                }\n                plotType = Session.get('plotType');\n            }\n            return matsPlotUtils.getCurveText(plotType, this);\n        } else {\n            return this.label + \":  Difference\";\n        }\n    },\n    confidenceDisplay: function () {\n        if (Session.get('plotParameter') === \"matched\") {\n            var plotType = Session.get('plotType');\n            switch (plotType) {\n                case matsTypes.PlotTypes.timeSeries:\n                case matsTypes.PlotTypes.profile:\n                case matsTypes.PlotTypes.dieoff:\n                case matsTypes.PlotTypes.threshold:\n                case matsTypes.PlotTypes.validtime:\n                case matsTypes.PlotTypes.dailyModelCycle:\n                    return \"block\";\n                case matsTypes.PlotTypes.reliability:\n                case matsTypes.PlotTypes.map:\n                case matsTypes.PlotTypes.histogram:\n                case matsTypes.PlotTypes.scatter2d:\n                case matsTypes.PlotTypes.contour:\n                case matsTypes.PlotTypes.contourDiff:\n                default:\n                    return \"none\";\n            }\n        } else {\n            return \"none\";\n        }\n    },\n    mvSpanDisplay: function () {\n        var updated = Session.get(\"MvResultsUpDated\");\n        if (Session.get(\"mvResultKey\") != null || Session.get('plotParams')['metexpress-mode'] == \"matsmv\") {\n            return \"block\";\n        } else {\n            return \"none\";\n        }\n    },\n\n    plotText: function () {\n        var p = Session.get('PlotParams');\n        if (p !== undefined) {\n            var format = p.plotFormat;\n            if (matsCollections.PlotParams.findOne({name: 'plotFormat'}) &&\n                matsCollections.PlotParams.findOne({name: 'plotFormat'}).optionsMap &&\n                matsCollections.PlotParams.findOne({name: 'plotFormat'}).optionsMap[p.plotFormat] !== undefined) {\n                format = matsCollections.PlotParams.findOne({name: 'plotFormat'}).optionsMap[p.plotFormat];\n            }\n            if (format === undefined) {\n                format = \"Unmatched\";\n            }\n            var plotType = Session.get('plotType');\n            switch (plotType) {\n                case matsTypes.PlotTypes.timeSeries:\n                    return \"TimeSeries \" + p.dates + \" : \" + format;\n                case matsTypes.PlotTypes.profile:\n                    return \"Profile: \" + format;\n                case matsTypes.PlotTypes.dieoff:\n                    return \"DieOff: \" + format;\n                case matsTypes.PlotTypes.threshold:\n                    return \"Threshold: \" + format;\n                case matsTypes.PlotTypes.validtime:\n                    return \"ValidTime: \" + format;\n                case matsTypes.PlotTypes.dailyModelCycle:\n                    return \"DailyModelCycle \" + p.dates + \" : \" + format;\n                case matsTypes.PlotTypes.reliability:\n                    return \"Reliability: \" + p.dates + \" : \" + format;\n                case matsTypes.PlotTypes.map:\n                    return \"Map \" + p.dates + \" \";\n                case matsTypes.PlotTypes.histogram:\n                    return \"Histogram: \" + format;\n                case matsTypes.PlotTypes.contour:\n                    return \"Contour \" + p.dates + \" : \" + format;\n                case matsTypes.PlotTypes.contourDiff:\n                    return \"ContourDiff \" + p.dates + \" : \" + format;\n                case matsTypes.PlotTypes.scatter2d:\n                    break;\n                default:\n                    return \"Scatter: \" + p.dates + \" : \" + format;\n            }\n        } else {\n            return \"no plot params\";\n        }\n    },\n    color: function () {\n        return this.color;\n    },\n    xAxes: function () {\n        Session.get('PlotResultsUpDated');\n        var plotType = Session.get('plotType');\n        // create an array like [0,1,2...] for each unique xaxis\n        // by getting the xaxis keys - filtering them to be unique, then using an Array.apply on the resulting array\n        // to assign a number to each value\n        var xaxis = {};\n        if ($(\"#placeholder\")[0] === undefined || $(\"#placeholder\")[0].layout === undefined || plotType === matsTypes.PlotTypes.map) {\n            return;\n        }\n        Object.keys($(\"#placeholder\")[0].layout).filter(function (k) {\n            if (k.startsWith('xaxis')) {\n                xaxis[k] = $(\"#placeholder\")[0].layout[k];\n            }\n        });\n        return Array.apply(null, {length: Object.keys(xaxis).length}).map(Number.call, Number);\n    },\n    yAxes: function () {\n        Session.get('PlotResultsUpDated');\n        var plotType = Session.get('plotType');\n        // create an array like [0,1,2...] for each unique yaxis\n        // by getting the yaxis keys - filtering them to be unique, then using an Array.apply on the resulting array\n        // to assign a number to each value\n        var yaxis = {};\n        if ($(\"#placeholder\")[0] === undefined || $(\"#placeholder\")[0].layout === undefined || plotType === matsTypes.PlotTypes.map) {\n            return;\n        }\n        Object.keys($(\"#placeholder\")[0].layout).filter(function (k) {\n            if (k.startsWith('yaxis')) {\n                yaxis[k] = $(\"#placeholder\")[0].layout[k];\n            }\n        });\n        return Array.apply(null, {length: Object.keys(yaxis).length}).map(Number.call, Number);\n    },\n    isProfile: function () {\n        return (Session.get('plotType') === matsTypes.PlotTypes.profile)\n    },\n    isLinePlot: function () {\n        var plotType = Session.get('plotType');\n        switch (plotType) {\n            case matsTypes.PlotTypes.timeSeries:\n            case matsTypes.PlotTypes.profile:\n            case matsTypes.PlotTypes.dieoff:\n            case matsTypes.PlotTypes.threshold:\n            case matsTypes.PlotTypes.validtime:\n            case matsTypes.PlotTypes.dailyModelCycle:\n            case matsTypes.PlotTypes.reliability:\n                return true;\n            case matsTypes.PlotTypes.map:\n            case matsTypes.PlotTypes.histogram:\n            case matsTypes.PlotTypes.scatter2d:\n            case matsTypes.PlotTypes.contour:\n            case matsTypes.PlotTypes.contourDiff:\n            default:\n                return false;\n        }\n    },\n    isContour: function () {\n        return (Session.get('plotType') === matsTypes.PlotTypes.contour || Session.get('plotType') === matsTypes.PlotTypes.contourDiff)\n    },\n    isContourDiff: function () {\n        return (Session.get('plotType') === matsTypes.PlotTypes.contourDiff)\n    },\n    isNotMap: function () {\n        return (Session.get('plotType') !== matsTypes.PlotTypes.map)\n    },\n    sentAddresses: function () {\n        var addresses = [];\n        var a = matsCollections.SentAddresses.find({}, {fields: {address: 1}}).fetch();\n        for (var i = 0; i < a.length; i++) {\n            addresses.push(a[i].address);\n        }\n        return addresses;\n    },\n    hideButtonText: function () {\n        var sval = this.label + \"hideButtonText\";\n        if (Session.get(sval) === undefined) {\n            Session.set(sval, 'hide curve');\n        }\n        return Session.get(sval);\n    },\n    pointsButtonText: function () {\n        var sval = this.label + \"pointsButtonText\";\n        if (Session.get(sval) === undefined) {\n            Session.set(sval, 'hide points');\n        }\n        return Session.get(sval);\n    },\n    errorBarButtonText: function () {\n        var sval = this.label + \"errorBarButtonText\";\n        if (Session.get(sval) === undefined) {\n            Session.set(sval, 'hide error bars');\n        }\n        return Session.get(sval);\n    },\n    barChartButtonText: function () {\n        var sval = this.label + \"barChartButtonText\";\n        if (Session.get(sval) === undefined) {\n            Session.set(sval, 'hide bars');\n        }\n        return Session.get(sval);\n    },\n    annotateButtonText: function () {\n        var sval = this.label + \"annotateButtonText\";\n        if (Session.get(sval) === undefined) {\n            Session.set(sval, 'hide annotation');\n        }\n        return Session.get(sval);\n    },\n    heatMapButtonText: function () {\n        var sval = this.label + \"heatMapButtonText\";\n        if (Session.get(sval) === undefined) {\n            Session.set(sval, 'show heat map');\n        }\n        return Session.get(sval);\n    },\n    curveShowHideDisplay: function () {\n        var plotType = Session.get('plotType');\n        switch (plotType) {\n            case matsTypes.PlotTypes.timeSeries:\n            case matsTypes.PlotTypes.profile:\n            case matsTypes.PlotTypes.dieoff:\n            case matsTypes.PlotTypes.threshold:\n            case matsTypes.PlotTypes.validtime:\n            case matsTypes.PlotTypes.dailyModelCycle:\n            case matsTypes.PlotTypes.reliability:\n            case matsTypes.PlotTypes.scatter2d:\n                return \"block\";\n            case matsTypes.PlotTypes.map:\n            case matsTypes.PlotTypes.histogram:\n            case matsTypes.PlotTypes.contour:\n            case matsTypes.PlotTypes.contourDiff:\n            default:\n                return \"none\";\n        }\n    },\n    pointsShowHideDisplay: function () {\n        var plotType = Session.get('plotType');\n        switch (plotType) {\n            case matsTypes.PlotTypes.timeSeries:\n            case matsTypes.PlotTypes.profile:\n            case matsTypes.PlotTypes.dieoff:\n            case matsTypes.PlotTypes.threshold:\n            case matsTypes.PlotTypes.validtime:\n            case matsTypes.PlotTypes.dailyModelCycle:\n            case matsTypes.PlotTypes.reliability:\n            case matsTypes.PlotTypes.scatter2d:\n                return \"block\";\n            case matsTypes.PlotTypes.map:\n            case matsTypes.PlotTypes.histogram:\n            case matsTypes.PlotTypes.contour:\n            case matsTypes.PlotTypes.contourDiff:\n            default:\n                return \"none\";\n        }\n    },\n    errorbarsShowHideDisplay: function () {\n        var plotType = Session.get('plotType');\n        var isMatched = Session.get('plotParameter') === \"matched\";\n        if (isMatched) {\n            switch (plotType) {\n                case matsTypes.PlotTypes.timeSeries:\n                case matsTypes.PlotTypes.profile:\n                case matsTypes.PlotTypes.dieoff:\n                case matsTypes.PlotTypes.threshold:\n                case matsTypes.PlotTypes.validtime:\n                case matsTypes.PlotTypes.dailyModelCycle:\n                    return \"block\";\n                case matsTypes.PlotTypes.reliability:\n                case matsTypes.PlotTypes.map:\n                case matsTypes.PlotTypes.histogram:\n                case matsTypes.PlotTypes.scatter2d:\n                case matsTypes.PlotTypes.contour:\n                case matsTypes.PlotTypes.contourDiff:\n                default:\n                    return \"none\";\n            }\n        } else {\n            return \"none\";\n        }\n    },\n    barsShowHideDisplay: function () {\n        var plotType = Session.get('plotType');\n        if (plotType === matsTypes.PlotTypes.histogram) {\n            return 'block';\n        } else {\n            return 'none';\n        }\n    },\n    annotateShowHideDisplay: function () {\n        var plotType = Session.get('plotType');\n        if (plotType === matsTypes.PlotTypes.map || plotType === matsTypes.PlotTypes.histogram) {\n            return 'none';\n        } else {\n            return 'block';\n        }\n    },\n    heatMapShowHideDisplay: function () {\n        var plotType = Session.get('plotType');\n        if (plotType !== matsTypes.PlotTypes.map) {\n            return 'none';\n        } else {\n            return 'block';\n        }\n    },\n    xAxisControlsNumberVisibility: function () {\n        Session.get('PlotResultsUpDated');\n        var plotType = Session.get('plotType');\n        if (plotType === matsTypes.PlotTypes.timeSeries || plotType === matsTypes.PlotTypes.dailyModelCycle ||\n            ((plotType === matsTypes.PlotTypes.contour || plotType === matsTypes.PlotTypes.contourDiff) && ($(\"#placeholder\")[0].layout.xaxis.title.text).indexOf(\"Date\") > -1)) {\n            return \"none\";\n        } else {\n            return \"block\";\n        }\n    },\n    xAxisControlsTextVisibility: function () {\n        Session.get('PlotResultsUpDated');\n        var plotType = Session.get('plotType');\n        if (plotType === matsTypes.PlotTypes.timeSeries || plotType === matsTypes.PlotTypes.dailyModelCycle ||\n            ((plotType === matsTypes.PlotTypes.contour || plotType === matsTypes.PlotTypes.contourDiff) && ($(\"#placeholder\")[0].layout.xaxis.title.text).indexOf(\"Date\") > -1)) {\n            return \"block\";\n        } else {\n            return \"none\";\n        }\n    },\n    yAxisControlsNumberVisibility: function () {\n        Session.get('PlotResultsUpDated');\n        if ((plotType === matsTypes.PlotTypes.contour || plotType === matsTypes.PlotTypes.contourDiff) && ($(\"#placeholder\")[0].layout.yaxis.title.text).indexOf(\"Date\") > -1) {\n            return \"none\";\n        } else {\n            return \"block\";\n        }\n    },\n    yAxisControlsTextVisibility: function () {\n        Session.get('PlotResultsUpDated');\n        if ((plotType === matsTypes.PlotTypes.contour || plotType === matsTypes.PlotTypes.contourDiff) && ($(\"#placeholder\")[0].layout.yaxis.title.text).indexOf(\"Date\") > -1) {\n            return \"block\";\n        } else {\n            return \"none\";\n        }\n    },\n    displayReplotZoom: function () {\n        // the replot to zoom function is only really appropriate for downsampled graphs which are\n        // only possible in timeseries or dailymodelcycle plots\n        Session.get(\"PlotParams\");\n        Session.get('PlotResultsUpDated');\n        var plotType = Session.get('plotType');\n        if (plotType === matsTypes.PlotTypes.timeSeries || plotType === matsTypes.PlotTypes.dailyModelCycle) {\n            return \"block\";\n        } else {\n            return \"none\";\n        }\n    },\n    metApp: function () {\n        Session.get(\"PlotParams\");\n        Session.get('PlotResultsUpDated');\n        if (matsCollections.Settings.findOne({}).appType && matsCollections.Settings.findOne({}).appType === matsTypes.AppTypes.metexpress && Session.get('PlotParams')['metexpress-mode'] == \"matsmv\") {\n            return \"block\";\n        } else {\n            return \"none\";\n        }\n    },\n    mvFiles: function () {\n        var updated = Session.get('MvResultsUpDated');\n        var key = Session.get('mvResultKey');\n        var mvs = Session.get('mvs');\n        if (mvs != null) {\n            return mvs;\n        } else {\n            return [];\n        }\n    },\n    mvDisabled: function () {\n        var updated = Session.get('MvResultsUpDated');\n        if (Session.get('mvs') == null || Session.get('PlotParams')['metexpress-mode'] == \"mats\") {\n            return \"none\";\n        } else {\n            return \"block\";\n        }\n    },\n    mvLoading: function () {\n        var updated = Session.get('MvResultsUpDated');\n        if (Session.get('mvs') == null && Session.get('PlotParams')['metexpress-mode'] == \"matsmv\") {\n            return \"block\";\n        } else {\n            return \"none\";\n        }\n    }\n});\n\nTemplate.graph.events({\n    'click .mvCtrlButton': function () {\n        var mvWindow = window.open(this.url, \"mv\", \"height=200,width=200\");\n        setTimeout(function () {\n            mvWindow.reload();\n        }, 500);\n\n    },\n    'click .back': function () {\n        const plotType = Session.get('plotType');\n        if (plotType === matsTypes.PlotTypes.contourDiff) {\n            const oldCurves = Session.get('oldCurves');\n            Session.set('Curves', oldCurves);\n        }\n        matsPlotUtils.enableActionButtons();\n        matsGraphUtils.setDefaultView();\n        matsCurveUtils.resetPlotResultData();\n        return false;\n    },\n\n    'click .header': function (event) {\n        document.getElementById('graph-control').style.display = 'block';\n        // document.getElementById('showAdministration').style.display = 'block';\n        document.getElementById('navbar').style.display = 'block';\n        document.getElementById('footnav').style.display = 'block';\n\n        var ctbgElems = $('*[id^=\"curve-text-buttons-grp\"]');\n        for (var i = 0; i < ctbgElems.length; i++) {\n            ctbgElems[i].style.display = 'block';\n        }\n    },\n    'click .preview': function () {\n        // capture the layout\n        const layout = $(\"#placeholder\")[0].layout;\n        var key = Session.get('plotResultKey');\n        matsMethods.saveLayout.call({\n            resultKey: key,\n            layout: layout,\n            curveOpsUpdate: {curveOpsUpdate: curveOpsUpdate}\n        }, function (error) {\n            if (error !== undefined) {\n                setError(error);\n            }\n        });\n        // open a new window with a standAlone graph of the current graph\n        var h = Math.max(document.documentElement.clientHeight, window.innerWidth || 0) * .5;\n        var w = h * 1.3;\n        var wind = window.open(window.location + \"/preview/\" + Session.get(\"graphFunction\") + \"/\" + Session.get(\"plotResultKey\") + \"/\" + Session.get('plotParameter') + \"/\" + matsCollections.Settings.findOne({}, {fields: {Title: 1}}).Title, \"_blank\", \"status=no,titlebar=no,toolbar=no,scrollbars=no,menubar=no,resizable=yes\", \"height=\" + h + \",width=\" + w);\n        setTimeout(function () {\n            wind.resizeTo(w, h);\n        }, 500);\n        openWindows.push(wind);\n    },\n    'click .closeapp': function () {\n        for (var widx = 0; widx < openWindows.length; widx++) {\n            openWindows[widx].close();\n        }\n        openWindows = [];\n    },\n    'click .reload': function () {\n        var dataset = matsCurveUtils.getGraphResult().data;\n        var options = matsCurveUtils.getGraphResult().options;\n        var graphFunction = Session.get('graphFunction');\n        window[graphFunction](dataset, options);\n    },\n    'click .plotButton': function () {\n        matsGraphUtils.setGraphView(Session.get('plotType'));\n        var graphView = document.getElementById('graphView');\n        Session.set('graphViewMode', matsTypes.PlotView.graph);\n        matsCurveUtils.hideSpinner();\n    },\n    'click .textButton': function () {\n        matsGraphUtils.setTextView(Session.get('plotType'));\n        Session.set('graphViewMode', matsTypes.PlotView.text);\n        Session.set(\"pageIndex\", 0);\n        Session.set(\"newPageIndex\", 1);\n        Session.set('textRefreshNeeded', true);\n    },\n    'click .export': function () {\n        document.getElementById('text_export').click();\n    },\n    'click .sentAddresses': function (event) {\n        var address = event.currentTarget.options[event.currentTarget.selectedIndex].value;\n        document.getElementById(\"sendAddress\").value = address;\n    },\n    'click .share': function () {\n        // show address modal\n        if (!Meteor.user()) {\n            setError(new Error(\"You must be logged in to use the 'share' feature\"));\n            return false;\n        }\n        $(\"#sendModal\").modal('show');\n    },\n    'click .basis': function () {\n        window.open(window.location + \"/JSON/\" + Session.get(\"graphFunction\") + \"/\" + Session.get(\"plotResultKey\") + \"/\" + Session.get('plotParameter') + \"/\" + matsCollections.Settings.findOne({}, {fields: {Title: 1}}).Title, \"_blank\", \"resizable=yes\");\n    },\n    'click .axisLimitButton': function () {\n        $(\"#axisLimitModal\").modal('show');\n    },\n    'click .lineTypeButton': function () {\n        $(\"#lineTypeModal\").modal('show');\n    },\n    'click .colorbarButton': function () {\n        $(\"#colorbarModal\").modal('show');\n    },\n    'click .axisYScale': function () {\n        // get all yaxes and change their scales\n        var newOpts = {};\n        var yAxis;\n        for (var k = 0; k < yAxes.length; k++) {\n            yAxis = yAxes[k];\n            newOpts[yAxis + '.type'] = $(\"#placeholder\")[0].layout[yAxis].type === 'linear' ? 'log' : 'linear';\n        }\n        Plotly.relayout($(\"#placeholder\")[0], newOpts);\n    },\n    'click .firstPageButton': function () {\n        var pageIndex = Session.get(\"pageIndex\");\n        // if pageIndex is NaN, it means we only have one page and these buttons shouldn't do anything\n        if (!Number.isNaN(pageIndex)) {\n            Session.set(\"pageIndex\", 0);\n            Session.set(\"newPageIndex\", 1);\n            Session.set('textRefreshNeeded', true);\n        }\n    },\n    'click .previousTenPageButton': function () {\n        var pageIndex = Session.get(\"pageIndex\");\n        // if pageIndex is NaN, it means we only have one page and these buttons shouldn't do anything\n        if (!Number.isNaN(pageIndex)) {\n            var pageTextDirection = Session.get(\"pageTextDirection\");\n            // if the navigation direction is changing, you have to increment the page index an additional time,\n            // or you just move to the other end of the current page, and nothing appears to change.\n            if (pageTextDirection !== undefined && pageTextDirection === -1) {\n                Session.set(\"newPageIndex\", pageIndex - 10);\n            } else {\n                Session.set(\"newPageIndex\", pageIndex - 11);\n            }\n            Session.set('textRefreshNeeded', true);\n        }\n    },\n    'click .previousPageButton': function () {\n        var pageIndex = Session.get(\"pageIndex\");\n        // if pageIndex is NaN, it means we only have one page and these buttons shouldn't do anything\n        if (!Number.isNaN(pageIndex)) {\n            var pageTextDirection = Session.get(\"pageTextDirection\");\n            // if the navigation direction is changing, you have to increment the page index an additional time,\n            // or you just move to the other end of the current page, and nothing appears to change.\n            if (pageTextDirection !== undefined && pageTextDirection === -1) {\n                Session.set(\"newPageIndex\", pageIndex - 1);\n            } else {\n                Session.set(\"newPageIndex\", pageIndex - 2);\n            }\n            Session.set('textRefreshNeeded', true);\n        }\n    },\n    'click .nextPageButton': function () {\n        var pageIndex = Session.get(\"pageIndex\");\n        // if pageIndex is NaN, it means we only have one page and these buttons shouldn't do anything\n        if (!Number.isNaN(pageIndex)) {\n            var pageTextDirection = Session.get(\"pageTextDirection\");\n            // if the navigation direction is changing, you have to increment the page index an additional time,\n            // or you just move to the other end of the current page, and nothing appears to change.\n            if (pageTextDirection !== undefined && pageTextDirection === 1) {\n                Session.set(\"newPageIndex\", pageIndex + 1);\n            } else {\n                Session.set(\"newPageIndex\", pageIndex + 2);\n            }\n            Session.set('textRefreshNeeded', true);\n        }\n    },\n    'click .nextTenPageButton': function () {\n        var pageIndex = Session.get(\"pageIndex\");\n        // if pageIndex is NaN, it means we only have one page and these buttons shouldn't do anything\n        if (!Number.isNaN(pageIndex)) {\n            var pageTextDirection = Session.get(\"pageTextDirection\");\n            // if the navigation direction is changing, you have to increment the page index an additional time,\n            // or you just move to the other end of the current page, and nothing appears to change.\n            if (pageTextDirection !== undefined && pageTextDirection === 1) {\n                Session.set(\"newPageIndex\", pageIndex + 10);\n            } else {\n                Session.set(\"newPageIndex\", pageIndex + 11);\n            }\n            Session.set('textRefreshNeeded', true);\n        }\n    },\n    'click .lastPageButton': function () {\n        var pageIndex = Session.get(\"pageIndex\");\n        // if pageIndex is NaN, it means we only have one page and these buttons shouldn't do anything\n        if (!Number.isNaN(pageIndex)) {\n            Session.set(\"newPageIndex\", -2000);\n            Session.set('textRefreshNeeded', true);\n        }\n    },\n    'click .replotZoomButton': function () {\n        var plotType = Session.get('plotType');\n        if (plotType === matsTypes.PlotTypes.timeSeries || plotType === matsTypes.PlotTypes.dailyModelCycle) {\n            var newDateRange = moment.utc($(\"#placeholder\")[0].layout['xaxis'].range[0]).format('M/DD/YYYY HH:mm') + \" - \" + moment.utc($(\"#placeholder\")[0].layout['xaxis'].range[1]).format('M/DD/YYYY HH:mm');\n            console.log(newDateRange);\n            document.getElementById('controlButton-dates-value').innerHTML = newDateRange;\n            var params = Session.get('params');\n            var actionId = \"plotUnmatched\";\n            if (params.plotAction === \"matched\") {\n                actionId = plotMatched;\n            }\n            document.getElementById(\"plot-curves\").click();\n        }\n    },\n    'click .reCacheButton': function () {\n        var plotType = Session.get('plotType');\n        var params = Session.get('params');\n        var actionId = \"plotUnmatched\";\n        if (params.plotAction === \"matched\") {\n            actionId = plotMatched;\n        }\n        Session.set('expireKey', true);\n        document.getElementById(\"plot-curves\").click();\n    },\n    'click .curveVisibility': function (event) {\n        event.preventDefault();\n        var dataset = matsCurveUtils.getGraphResult().data;\n        const id = event.target.id;\n        const label = id.replace('-curve-show-hide', '');\n        const myDataIdx = dataset.findIndex(function (d) {\n            return d.curveId === label;\n        });\n        if (dataset[myDataIdx].x.length > 0) {\n            var update;\n            if (dataset[myDataIdx].visible) {\n                if (dataset[myDataIdx].mode === \"lines\") {                  // in line mode, lines are visible, so make nothing visible\n                    update = {\n                        visible: !dataset[myDataIdx].visible\n                    };\n                    $('#' + label + \"-curve-show-hide\")[0].value = \"show curve\";\n                } else if (dataset[myDataIdx].mode === \"lines+markers\") {   // in line and point mode, lines and points are visible, so make nothing visible\n                    update = {\n                        visible: !dataset[myDataIdx].visible\n                    };\n                    $('#' + label + \"-curve-show-hide\")[0].value = \"show curve\";\n                    $('#' + label + \"-curve-show-hide-points\")[0].value = \"show points\";\n                } else if (dataset[myDataIdx].mode === \"markers\") {         // in point mode, points are visible, so make lines and points visible\n                    update = {\n                        mode: \"lines+markers\"\n                    };\n                    $('#' + label + \"-curve-show-hide\")[0].value = \"hide curve\";\n                }\n            } else {\n                if (dataset[myDataIdx].mode === \"lines\") {                  // in line mode, nothing is visible, so make lines visible\n                    update = {\n                        visible: !dataset[myDataIdx].visible\n                    };\n                    $('#' + label + \"-curve-show-hide\")[0].value = \"hide curve\";\n                } else if (dataset[myDataIdx].mode === \"lines+markers\") {   // in line and point mode, nothing is visible, so make lines and points visible\n                    update = {\n                        visible: !dataset[myDataIdx].visible\n                    };\n                    $('#' + label + \"-curve-show-hide\")[0].value = \"hide curve\";\n                    $('#' + label + \"-curve-show-hide-points\")[0].value = \"hide points\";\n                }\n            }\n        }\n        Plotly.restyle($(\"#placeholder\")[0], update, myDataIdx);\n        // save the updates in case we want to pass them to a pop-out window.\n        curveOpsUpdate[myDataIdx] = curveOpsUpdate[myDataIdx] === undefined ? {} : curveOpsUpdate[myDataIdx];\n        var updatedKeys = Object.keys(update);\n        for (var kidx = 0; kidx < updatedKeys.length; kidx++) {\n            var updatedKey = updatedKeys[kidx];\n            // json doesn't like . to be in keys, so replace it with a placeholder\n            var jsonHappyKey = updatedKey.split(\".\").join(\"____\");\n            curveOpsUpdate[myDataIdx][jsonHappyKey] = update[updatedKey];\n        }\n    },\n    'click .pointsVisibility': function (event) {\n        event.preventDefault();\n        var dataset = matsCurveUtils.getGraphResult().data;\n        const id = event.target.id;\n        const label = id.replace('-curve-show-hide-points', '');\n        const myDataIdx = dataset.findIndex(function (d) {\n            return d.curveId === label;\n        });\n        if (dataset[myDataIdx].x.length > 0) {\n            var update;\n            if (dataset[myDataIdx].visible) {\n                if (dataset[myDataIdx].mode === \"lines\") {                  // lines are visible, so make lines and points visible\n                    update = {\n                        mode: \"lines+markers\"\n                    };\n                    $('#' + label + \"-curve-show-hide-points\")[0].value = \"hide points\";\n                } else if (dataset[myDataIdx].mode === \"lines+markers\") {   // lines and points are visible, so make only lines visible\n                    update = {\n                        mode: \"lines\"\n                    };\n                    $('#' + label + \"-curve-show-hide-points\")[0].value = \"show points\";\n                } else if (dataset[myDataIdx].mode === \"markers\") {         // points are visible, so make nothing visible\n                    update = {\n                        visible: !dataset[myDataIdx].visible,\n                        mode: \"lines\"\n                    };\n                    $('#' + label + \"-curve-show-hide-points\")[0].value = \"show points\";\n                }\n            } else {                                                        // nothing is visible, so make points visible\n                update = {\n                    visible: !dataset[myDataIdx].visible,\n                    mode: \"markers\"\n                };\n                $('#' + label + \"-curve-show-hide-points\")[0].value = \"hide points\";\n            }\n        }\n        Plotly.restyle($(\"#placeholder\")[0], update, myDataIdx);\n        // save the updates in case we want to pass them to a pop-out window.\n        curveOpsUpdate[myDataIdx] = curveOpsUpdate[myDataIdx] === undefined ? {} : curveOpsUpdate[myDataIdx];\n        var updatedKeys = Object.keys(update);\n        for (var kidx = 0; kidx < updatedKeys.length; kidx++) {\n            var updatedKey = updatedKeys[kidx];\n            // json doesn't like . to be in keys, so replace it with a placeholder\n            var jsonHappyKey = updatedKey.split(\".\").join(\"____\");\n            curveOpsUpdate[myDataIdx][jsonHappyKey] = update[updatedKey];\n        }\n    },\n    'click .errorBarVisibility': function (event) {\n        event.preventDefault();\n        var plotType = Session.get('plotType');\n        var dataset = matsCurveUtils.getGraphResult().data;\n        const id = event.target.id;\n        const label = id.replace('-curve-show-hide-errorbars', '');\n        const myDataIdx = dataset.findIndex(function (d) {\n            return d.curveId === label;\n        });\n        if (dataset[myDataIdx].x.length > 0) {\n            var update;\n            if (plotType !== matsTypes.PlotTypes.profile) {\n                update = {\n                    error_y: dataset[myDataIdx].error_y\n                };\n                update.error_y.visible = !update.error_y.visible;\n                if (update.error_y.visible) {\n                    $('#' + label + \"-curve-show-hide-errorbars\")[0].value = \"hide error bars\";\n                } else {\n                    $('#' + label + \"-curve-show-hide-errorbars\")[0].value = \"show error bars\";\n                }\n            } else {\n                update = {\n                    error_x: dataset[myDataIdx].error_x\n                };\n                update.error_x.visible = !update.error_x.visible;\n                if (update.error_x.visible) {\n                    $('#' + label + \"-curve-show-hide-errorbars\")[0].value = \"hide error bars\";\n                } else {\n                    $('#' + label + \"-curve-show-hide-errorbars\")[0].value = \"show error bars\";\n                }\n            }\n        }\n        Plotly.restyle($(\"#placeholder\")[0], update, myDataIdx);\n        // save the updates in case we want to pass them to a pop-out window.\n        curveOpsUpdate[myDataIdx] = curveOpsUpdate[myDataIdx] === undefined ? {} : curveOpsUpdate[myDataIdx];\n        var updatedKeys = Object.keys(update);\n        for (var kidx = 0; kidx < updatedKeys.length; kidx++) {\n            var updatedKey = updatedKeys[kidx];\n            // json doesn't like . to be in keys, so replace it with a placeholder\n            var jsonHappyKey = updatedKey.split(\".\").join(\"____\");\n            curveOpsUpdate[myDataIdx][jsonHappyKey] = update[updatedKey];\n        }\n    },\n    'click .barVisibility': function (event) {\n        event.preventDefault();\n        var dataset = matsCurveUtils.getGraphResult().data;\n        const id = event.target.id;\n        const label = id.replace('-curve-show-hide-bars', '');\n        const myDataIdx = dataset.findIndex(function (d) {\n            return d.curveId === label;\n        });\n        if (dataset[myDataIdx].x.length > 0) {\n            var update = {\n                visible: !dataset[myDataIdx].visible\n            };\n            if (update.visible) {\n                $('#' + label + \"-curve-show-hide-bars\")[0].value = \"hide bars\";\n            } else {\n                $('#' + label + \"-curve-show-hide-bars\")[0].value = \"show bars\";\n            }\n        }\n        Plotly.restyle($(\"#placeholder\")[0], update, myDataIdx);\n        // save the updates in case we want to pass them to a pop-out window.\n        curveOpsUpdate[myDataIdx] = curveOpsUpdate[myDataIdx] === undefined ? {} : curveOpsUpdate[myDataIdx];\n        var updatedKeys = Object.keys(update);\n        for (var kidx = 0; kidx < updatedKeys.length; kidx++) {\n            var updatedKey = updatedKeys[kidx];\n            // json doesn't like . to be in keys, so replace it with a placeholder\n            var jsonHappyKey = updatedKey.split(\".\").join(\"____\");\n            curveOpsUpdate[myDataIdx][jsonHappyKey] = update[updatedKey];\n        }\n    },\n    'click .annotateVisibility': function (event) {\n        event.preventDefault();\n        const id = event.target.id;\n        const label = id.replace('-curve-show-hide-annotate', '');\n        if ($('#' + label + \"-annotation\")[0].hidden) {\n            $('#' + label + \"-annotation\")[0].style.display = \"block\";\n            $('#' + label + \"-curve-show-hide-annotate\")[0].value = \"hide annotation\";\n            $('#' + label + \"-annotation\")[0].hidden = false;\n        } else {\n            $('#' + label + \"-annotation\")[0].style.display = \"none\";\n            $('#' + label + \"-curve-show-hide-annotate\")[0].value = \"show annotation\";\n            $('#' + label + \"-annotation\")[0].hidden = true;\n        }\n        annotation = $('#annotationContainer')[0].innerHTML;\n    },\n    'click .heatMapVisibility': function (event) {\n        event.preventDefault();\n        var dataset = matsCurveUtils.getGraphResult().data;\n        if (dataset[0].lat.length > 0) {\n            var update;\n            var didx;\n            if (dataset[0].marker.opacity === 0) {\n                update = {\n                    'marker.opacity': 1\n                };\n                Plotly.restyle($(\"#placeholder\")[0], update, 0);\n                // save the updates in case we want to pass them to a pop-out window.\n                curveOpsUpdate[0] = curveOpsUpdate[0] === undefined ? {} : curveOpsUpdate[0];\n                curveOpsUpdate[0]['marker____opacity'] = update['marker.opacity'];\n                update = {\n                    'visible': false\n                };\n                for (didx = 1; didx < dataset.length; didx++) {\n                    Plotly.restyle($(\"#placeholder\")[0], update, didx);\n                    // save the updates in case we want to pass them to a pop-out window.\n                    curveOpsUpdate[didx] = curveOpsUpdate[didx] === undefined ? {} : curveOpsUpdate[didx];\n                    curveOpsUpdate[didx]['visible'] = update['visible'];\n                }\n                $('#' + label + \"-curve-show-hide-heatmap\")[0].value = \"hide heat map\";\n            } else {\n                update = {\n                    'marker.opacity': 0\n                };\n                Plotly.restyle($(\"#placeholder\")[0], update, 0);\n                // save the updates in case we want to pass them to a pop-out window.\n                curveOpsUpdate[0] = curveOpsUpdate[0] === undefined ? {} : curveOpsUpdate[0];\n                curveOpsUpdate[0]['marker____opacity'] = update['marker.opacity'];\n                update = {\n                    'visible': true\n                };\n                for (didx = 1; didx < dataset.length; didx++) {\n                    Plotly.restyle($(\"#placeholder\")[0], update, didx);\n                    // save the updates in case we want to pass them to a pop-out window.\n                    curveOpsUpdate[didx] = curveOpsUpdate[didx] === undefined ? {} : curveOpsUpdate[didx];\n                    curveOpsUpdate[didx]['visible'] = update['visible'];\n                }\n                $('#' + label + \"-curve-show-hide-heatmap\")[0].value = \"show heat map\";\n\n            }\n        }\n    },\n    // add refresh button\n    'click #refresh-plot': function (event) {\n        event.preventDefault();\n        var plotType = Session.get('plotType');\n        var dataset = matsCurveUtils.getGraphResult().data;\n        var options = Session.get('options');\n        if (curveOpsUpdate.length === 0) {\n            // we just need a relayout\n            Plotly.relayout($(\"#placeholder\")[0], options);\n        } else {\n            // we need both a relayout and a restyle\n            curveOpsUpdate = [];\n            switch (plotType) {\n                case matsTypes.PlotTypes.contour:\n                case matsTypes.PlotTypes.contourDiff:\n                    // restyle for contour plots\n                    Plotly.restyle($(\"#placeholder\")[0], Session.get('colorbarResetOpts'), 0);\n                    break;\n                case matsTypes.PlotTypes.timeSeries:\n                case matsTypes.PlotTypes.profile:\n                case matsTypes.PlotTypes.dieoff:\n                case matsTypes.PlotTypes.threshold:\n                case matsTypes.PlotTypes.validtime:\n                case matsTypes.PlotTypes.dailyModelCycle:\n                case matsTypes.PlotTypes.reliability:\n                    // restyle for line plots\n                    const lineTypeResetOpts = Session.get('lineTypeResetOpts');\n                    for (var lidx = 0; lidx < lineTypeResetOpts.length; lidx++) {\n                        Plotly.restyle($(\"#placeholder\")[0], lineTypeResetOpts[lidx], lidx);\n                        $('#' + dataset[lidx].label + \"-curve-show-hide\")[0].value = \"hide curve\";\n                        $('#' + dataset[lidx].label + \"-curve-show-hide-points\")[0].value = \"hide points\";\n                        $('#' + dataset[lidx].label + \"-curve-show-hide-errorbars\")[0].value = \"hide error bars\";\n                    }\n                    break;\n                case matsTypes.PlotTypes.histogram:\n                    // restyle for bar plots\n                    const barTypeResetOpts = Session.get('barTypeResetOpts');\n                    for (var bidx = 0; bidx < barTypeResetOpts.length; bidx++) {\n                        Plotly.restyle($(\"#placeholder\")[0], barTypeResetOpts[bidx], bidx);\n                        $('#' + dataset[bidx].label + \"-curve-show-hide-bars\")[0].value = \"hide bars\";\n                    }\n                    break;\n                case matsTypes.PlotTypes.map:\n                    // restyle for maps\n                    const mapResetOpts = Session.get('mapResetOpts');\n                    for (var midx = 0; midx < mapResetOpts.length; midx++) {\n                        Plotly.restyle($(\"#placeholder\")[0], mapResetOpts[midx], midx);\n                    }\n                    $('#' + dataset[0].label + \"-curve-show-hide-heatmap\")[0].value = \"show heat map\";\n                    break;\n                case matsTypes.PlotTypes.scatter2d:\n                default:\n                    break;\n            }\n            Plotly.relayout($(\"#placeholder\")[0], options);\n        }\n    },\n    // add axis customization modal submit button\n    'click #axisSubmit': function (event) {\n        event.preventDefault();\n        var plotType = Session.get('plotType');\n        var changeYScaleBack = false;\n        var newOpts = {};\n        // get input axis limits and labels\n        $(\"input[id^=x][id$=AxisLabel]\").get().forEach(function (elem, index) {\n            if (elem.value !== undefined && elem.value !== \"\") {\n                newOpts['xaxis' + (index === 0 ? \"\" : index + 1) + '.title'] = elem.value;\n            }\n        });\n        if (plotType === matsTypes.PlotTypes.timeSeries || plotType === matsTypes.PlotTypes.dailyModelCycle ||\n            ((plotType === matsTypes.PlotTypes.contour || plotType === matsTypes.PlotTypes.contourDiff) && ($(\"#placeholder\")[0].layout.xaxis.title.text).indexOf(\"Date\") > -1)) {\n            $(\"input[id^=x][id$=AxisMinText]\").get().forEach(function (elem, index) {\n                if (elem.value !== undefined && elem.value !== \"\") {\n                    newOpts['xaxis' + (index === 0 ? \"\" : index + 1) + '.range[0]'] = elem.value;\n                }\n            });\n            $(\"input[id^=x][id$=AxisMaxText]\").get().forEach(function (elem, index) {\n                if (elem.value !== undefined && elem.value !== \"\") {\n                    newOpts['xaxis' + (index === 0 ? \"\" : index + 1) + '.range[1]'] = elem.value;\n                }\n            });\n        } else {\n            $(\"input[id^=x][id$=AxisMin]\").get().forEach(function (elem, index) {\n                if (elem.value !== undefined && elem.value !== \"\") {\n                    newOpts['xaxis' + (index === 0 ? \"\" : index + 1) + '.range[0]'] = elem.value;\n                }\n            });\n            $(\"input[id^=x][id$=AxisMax]\").get().forEach(function (elem, index) {\n                if (elem.value !== undefined && elem.value !== \"\") {\n                    newOpts['xaxis' + (index === 0 ? \"\" : index + 1) + '.range[1]'] = elem.value;\n                }\n            });\n        }\n        $(\"input[id^=y][id$=AxisLabel]\").get().forEach(function (elem, index) {\n            if (elem.value !== undefined && elem.value !== \"\") {\n                newOpts['yaxis' + (index === 0 ? \"\" : index + 1) + '.title'] = elem.value;\n            }\n        });\n        if ((plotType === matsTypes.PlotTypes.contour || plotType === matsTypes.PlotTypes.contourDiff) && ($(\"#placeholder\")[0].layout.xaxis.title.text).indexOf(\"Date\") > -1) {\n            $(\"input[id^=y][id$=AxisMinText]\").get().forEach(function (elem, index) {\n                if (elem.value !== undefined && elem.value !== \"\") {\n                    newOpts['yaxis' + (index === 0 ? \"\" : index + 1) + '.range[0]'] = elem.value;\n                }\n            });\n            $(\"input[id^=y][id$=AxisMaxText]\").get().forEach(function (elem, index) {\n                if (elem.value !== undefined && elem.value !== \"\") {\n                    newOpts['yaxis' + (index === 0 ? \"\" : index + 1) + '.range[1]'] = elem.value;\n                }\n            });\n        } else {\n            $(\"input[id^=y][id$=AxisMin]\").get().forEach(function (elem, index) {\n                if (elem.value !== undefined && elem.value !== \"\") {\n                    if (plotType === matsTypes.PlotTypes.profile) {\n                        newOpts['yaxis' + (index === 0 ? \"\" : index + 1) + '.range[1]'] = elem.value;\n                        // plotly can't seem to set axis limits on a log axis, so this needs to be changed to linear\n                        if ($(\"#placeholder\")[0].layout['yaxis' + (index === 0 ? \"\" : index + 1)].type === 'log') {\n                            $(\"#axisYScale\").click();\n                            changeYScaleBack = true;\n                        }\n                    } else {\n                        newOpts['yaxis' + (index === 0 ? \"\" : index + 1) + '.range[0]'] = elem.value;\n                    }\n                }\n            });\n            $(\"input[id^=y][id$=AxisMax]\").get().forEach(function (elem, index) {\n                if (elem.value !== undefined && elem.value !== \"\") {\n                    if (plotType === matsTypes.PlotTypes.profile) {\n                        newOpts['yaxis' + (index === 0 ? \"\" : index + 1) + '.range[0]'] = elem.value;\n                        // plotly can't seem to set axis limits on a log axis, so this needs to be changed to linear\n                        if ($(\"#placeholder\")[0].layout['yaxis' + (index === 0 ? \"\" : index + 1)].type === 'log') {\n                            $(\"#axisYScale\").click();\n                            changeYScaleBack = true;\n                        }\n                    } else {\n                        newOpts['yaxis' + (index === 0 ? \"\" : index + 1) + '.range[1]'] = elem.value;\n                    }\n                }\n            });\n        }\n        Plotly.relayout($(\"#placeholder\")[0], newOpts);\n        // if needed, restore the log axis\n        if (changeYScaleBack) {\n            $(\"#axisYScale\").click();\n        }\n        $(\"#axisLimitModal\").modal('hide');\n    },\n    // add line style modal submit button\n    'click #lineTypeSubmit': function (event) {\n        event.preventDefault();\n        var plotType = Session.get('plotType');\n        var updates = [];\n        // get input line style change\n        $(\"[id$=LineStyle]\").get().forEach(function (elem, index) {\n            if (elem.value !== undefined && elem.value !== \"\") {\n                updates[index] = updates[index] === undefined ? {} : updates[index];\n                updates[index]['line.dash'] = elem.value;\n            }\n        });\n        $(\"input[id$=LineWeight]\").get().forEach(function (elem, index) {\n            if (elem.value !== undefined && elem.value !== \"\") {\n                updates[index] = updates[index] === undefined ? {} : updates[index];\n                updates[index]['line.width'] = elem.value;\n            }\n        });\n        $(\"[id$=LineMarker]\").get().forEach(function (elem, index) {\n            if (elem.value !== undefined && elem.value !== \"\") {\n                updates[index] = updates[index] === undefined ? {} : updates[index];\n                updates[index]['marker.symbol'] = elem.value;\n            }\n        });\n        for (var uidx = 0; uidx < updates.length; uidx++) {\n            // apply new settings\n            Plotly.restyle($(\"#placeholder\")[0], updates[uidx], uidx);\n        }\n        $(\"#lineTypeModal\").modal('hide');\n        // save the updates in case we want to pass them to a pop-out window.\n        for (uidx = 0; uidx < updates.length; uidx++) {\n            curveOpsUpdate[uidx] = curveOpsUpdate[uidx] === undefined ? {} : curveOpsUpdate[uidx];\n            var updatedKeys = Object.keys(updates[uidx]);\n            for (var kidx = 0; kidx < updatedKeys.length; kidx++) {\n                var updatedKey = updatedKeys[kidx];\n                // json doesn't like . to be in keys, so replace it with a placeholder\n                var jsonHappyKey = updatedKey.split(\".\").join(\"____\");\n                curveOpsUpdate[uidx][jsonHappyKey] = updates[uidx][updatedKey];\n            }\n        }\n    },\n    // add colorbar customization modal submit button\n    'click #colorbarSubmit': function (event) {\n        event.preventDefault();\n        var dataset = matsCurveUtils.getGraphResult().data;\n        var update = {};\n        // get new formatting\n        $(\"input[id=colorbarLabel]\").get().forEach(function (elem, index) {\n            if (elem.value !== undefined && elem.value !== \"\") {\n                update['colorbar.title'] = elem.value;\n                update['colorbar.titleside'] = 'right';\n                update['colorbar.titlefont'] = {size: 16, family: 'Arial, sans-serif'};\n            }\n        });\n        $(\"input[id=colorbarMin]\").get().forEach(function (elem, index) {\n            if (elem.value !== undefined && elem.value !== \"\") {\n                update['autocontour'] = false;\n                update['contours.start'] = elem.value;\n            }\n        });\n        $(\"input[id=colorbarMax]\").get().forEach(function (elem, index) {\n            if (elem.value !== undefined && elem.value !== \"\") {\n                update['autocontour'] = false;\n                update['contours.end'] = elem.value;\n            }\n        });\n        $(\"input[id=colorbarNumber]\").get().forEach(function (elem, index) {\n            if (elem.value !== undefined && elem.value !== \"\") {\n                update['autocontour'] = false;\n                update['ncontours'] = elem.value;   // sadly plotly regards this as a \"less than or equal to\" value, so we have to manually set contour size\n                const isStartDefined = update['contours.start'] !== undefined;\n                const isEndDefined = update['contours.end'] !== undefined;\n                const startVal = isStartDefined ? update['contours.start'] : dataset[0].zmin+(dataset[0].zmax-dataset[0].zmin)/16;\n                const endVal = isEndDefined ? update['contours.end'] : dataset[0].zmax-(dataset[0].zmax-dataset[0].zmin)/16;\n                update['contours.size'] = (endVal - startVal) / (Number(update['ncontours']) - 1);\n            }\n        });\n        $(\"input[id=colorbarStep]\").get().forEach(function (elem, index) {\n            if (elem.value !== undefined && elem.value !== \"\") {\n                if (update['ncontours'] === undefined) {\n                    update['autocontour'] = false;\n                    update['contours.size'] = elem.value;\n                }\n            }\n        });\n        $(\"input[id=colorbarReverse]\").get().forEach(function (elem, index) {\n            if (elem && elem.checked) {\n                update['reversescale'] = true;\n            } else {\n                update['reversescale'] = false;\n            }\n        });\n        var elem = document.getElementById(\"colormapSelect\");\n        if (elem !== undefined && elem.value !== undefined) {\n            update['colorscale'] = elem.value;\n        }\n        // apply new settings\n        Plotly.restyle($(\"#placeholder\")[0], update, 0);\n        $(\"#colorbarModal\").modal('hide');\n        // save the updates in case we want to pass them to a pop-out window.\n        curveOpsUpdate[0] = curveOpsUpdate[0] === undefined ? {} : curveOpsUpdate[0];\n        const updatedKeys = Object.keys(update);\n        for (var uidx = 0; uidx < updatedKeys.length; uidx++) {\n            var updatedKey = updatedKeys[uidx];\n            // json doesn't like . to be in keys, so replace it with a placeholder\n            var jsonHappyKey = updatedKey.split(\".\").join(\"____\");\n            curveOpsUpdate[0][jsonHappyKey] = update[updatedKey];\n        }\n    }\n});\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {moment} from 'meteor/momentjs:moment'\nimport {matsTypes} from 'meteor/randyp:mats-common';\nimport {matsCurveUtils} from 'meteor/randyp:mats-common';\nimport {matsGraphUtils} from 'meteor/randyp:mats-common';\n\ngraphPlotly = function (key) {\n    // get plot info\n    var route = Session.get('route');\n\n    // get dataset info and options\n    var resultSet = matsCurveUtils.getGraphResult();\n    if (resultSet === null || resultSet === undefined || resultSet.data === undefined) {\n        return false;\n    }\n\n    //set options\n    var options = resultSet.options;\n    if (route !== undefined && route !== \"\") {\n        options.selection = [];\n    }\n\n    // initialize show/hide button labels\n    var dataset = resultSet.data;\n    if (Session.get('plotType') !== matsTypes.PlotTypes.map) {\n        matsGraphUtils.setNoDataLabels(dataset);\n    } else {\n        matsGraphUtils.setNoDataLabelsMap(dataset);\n    }\n};","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsCollections, matsCurveUtils, matsPlotUtils, matsTypes} from 'meteor/randyp:mats-common';\nimport {moment} from 'meteor/momentjs:moment';\n/*\nReferring to the Session variable plotResultKey here causes the html template to get re-rendered with the current graph data\n(which is in the Results collection).\n */\nvar fillStr = \"---\";\n\nvar times = [];\n\n// I don't think this is used anymore, but I'm not certain, so I'm leaving it here for now.\nconst getDataForTime = function (data, time) {\n    if (data === undefined) {\n        return undefined;\n    }\n    for (var i = 0; i < data.length; i++) {\n        if (data[i][0] == Number(time)) {\n            return data[i] === null ? undefined : data[i];\n        }\n    }\n    return undefined;\n};\n\n// fetches the data back from where the query routine stored it.\nconst getDataForCurve = function (curve) {\n    if (Session.get(\"plotResultKey\") == undefined || matsCurveUtils.getPlotResultData() === undefined) {\n        return undefined;\n    }\n    if (matsCurveUtils.getPlotResultData() === null) {\n        return [];\n    }\n    if (Session.get(\"plotType\") === matsTypes.PlotTypes.scatter2d) {\n        return matsCurveUtils.getPlotResultData()[curve.label];\n    } else {\n        return matsCurveUtils.getPlotResultData().data[curve.label];\n    }\n};\n\nTemplate.textOutput.onRendered(function () {\n    const settings = matsCollections.Settings.findOne({}, {fields: {NullFillString: 1}});\n    if (settings === undefined) {\n        fillStr = \"---\";\n    } else {\n        fillStr = settings.NullFillString;\n    }\n});\n\nTemplate.textOutput.helpers({\n    notScatter: function () {\n        return Session.get(\"plotType\") !== matsTypes.PlotTypes.scatter2d;\n    },\n\n    // get the table header for the summary stats at the top of the text page\n    statHeaders: function () {\n        var header = \"\";\n        switch (Session.get('plotType')) {\n            case matsTypes.PlotTypes.timeSeries:\n            case matsTypes.PlotTypes.dailyModelCycle:\n            case matsTypes.PlotTypes.profile:\n                header += \"<th>label</th>\\\n                    <th>mean</th>\\\n                    <th>standard deviation</th>\\\n                    <th>n</th>\\\n                    <th>standard error</th>\\\n                    <th>lag1</th>\\\n                    <th>minimum</th>\\\n                    <th>maximum</th>\";\n                break;\n            case matsTypes.PlotTypes.dieoff:\n            case matsTypes.PlotTypes.threshold:\n            case matsTypes.PlotTypes.validtime:\n                header += \"<th>label</th>\\\n                    <th>mean</th>\\\n                    <th>standard deviation</th>\\\n                    <th>n</th>\\\n                    <th>minimum</th>\\\n                    <th>maximum</th>\";\n                break;\n            case matsTypes.PlotTypes.reliability:\n                header += \"<th>label</th>\\\n                    <th>sample climatology</th>\";\n                break;\n            case matsTypes.PlotTypes.map:\n                header += \"<th>label</th>\\\n                    <th>mean</th>\\\n                    <th>standard deviation</th>\\\n                    <th>n</th>\\\n                    <th>minimum time</th>\\\n                    <th>maximum time</th>\";\n                break;\n            case matsTypes.PlotTypes.histogram:\n                header += \"<th>label</th>\\\n                    <th>mean</th>\\\n                    <th>standard deviation</th>\\\n                    <th>n</th>\\\n                    <th>minimum</th>\\\n                    <th>maximum</th>\";\n                break;\n            case matsTypes.PlotTypes.contour:\n            case matsTypes.PlotTypes.contourDiff:\n                header += \"<th>label</th>\\\n                    <th>mean stat</th>\\\n                    <th>n</th>\\\n                    <th>minimum time</th>\\\n                    <th>maximum time</th>\";\n                break;\n            case matsTypes.PlotTypes.scatter2d:\n                // no stat for scatter\n                break;\n            default:\n                break;\n        }\n        return header;\n    },\n\n    // get the table header for each curve's data\n    elementHeaders: function (curve) {\n        var header = \"\";\n        switch (Session.get('plotType')) {\n            case matsTypes.PlotTypes.timeSeries:\n                header += \"<th>\" + curve.label + \" time</th>\\\n                        <th>raw stat from query</th>\\\n                        <th>plotted stat</th>\\\n                        <th>std dev</th>\\\n                        <th>std error</th>\\\n                        <th>lag1</th>\\\n                        <th>n</th>\";\n                break;\n            case matsTypes.PlotTypes.dailyModelCycle:\n                header += \"<th>\" + curve.label + \" time</th>\\\n                        <th>raw stat from query</th>\\\n                        <th>plotted stat</th>\\\n                        <th>std dev</th>\\\n                        <th>n</th>\";\n                break;\n            case matsTypes.PlotTypes.profile:\n                header += \"<th>\" + curve.label + \" level</th>\\\n                        <th>raw stat from query</th>\\\n                        <th>plotted stat</th>\\\n                        <th>std dev</th>\\\n                        <th>std error</th>\\\n                        <th>lag1</th>\\\n                        <th>n</th>\";\n                break;\n            case matsTypes.PlotTypes.dieoff:\n                header += \"<th>\" + curve.label + \" forecast lead time</th>\\\n                        <th>raw stat from query</th>\\\n                        <th>plotted stat</th>\\\n                        <th>std dev</th>\\\n                        <th>n</th>\";\n                break;\n            case matsTypes.PlotTypes.threshold:\n                header += \"<th>\" + curve.label + \" threshold (in)</th>\\\n                        <th>raw stat from query</th>\\\n                        <th>plotted stat</th>\\\n                        <th>std dev</th>\\\n                        <th>n</th>\";\n                break;\n            case matsTypes.PlotTypes.validtime:\n                header += \"<th>\" + curve.label + \" hour of day</th>\\\n                        <th>raw stat from query</th>\\\n                        <th>plotted stat</th>\\\n                        <th>std dev</th>\\\n                        <th>n</th>\";\n                break;\n            case matsTypes.PlotTypes.reliability:\n                header += \"<th>\" + curve.label + \" probability bin</th>\\\n                        <th>hit rate</th>\\\n                        <th>oy</th>\\\n                        <th>on</th>\";\n                break;\n            case matsTypes.PlotTypes.map:\n                header += \"<th>Site Name</th>\\\n                        <th>Number of Times</th>\\\n                        <th>Start Date</th>\\\n                        <th>End Date</th>\\\n                        <th>Average Difference</th>\";\n                break;\n            case matsTypes.PlotTypes.histogram:\n                header += \"<th>\" + curve.label + \"  bin range</th>\\\n                        <th>bin n</th>\\\n                        <th>bin rel freq</th>\\\n                        <th>bin lower bound</th>\\\n                        <th>bin upper bound</th>\\\n                        <th>bin mean</th>\\\n                        <th>bin std dev</th>\";\n                break;\n            case matsTypes.PlotTypes.contour:\n            case matsTypes.PlotTypes.contourDiff:\n                header += \"<th>X Value</th>\\\n                        <th>Y Value</th>\\\n                        <th>Stat</th>\\\n                        <th>Number</th>\\\n                        <th>Start Date</th>\\\n                        <th>End Date</th>\";\n                break;\n            case matsTypes.PlotTypes.scatter2d:\n                header += \"<th>\" + curve.label + \" x axis</th>\\\n                        <th>\" + curve.label + \" y axis</th>\\\n                        <th>best fit</th>\";\n                break;\n            default:\n                break;\n        }\n        return header;\n    },\n    elements: function (curve) {\n        Session.get('textLoaded'); // monitor for data changres like previous / next\n        return getDataForCurve(curve);\n    },\n    curves: function () {\n        Session.get('textLoaded');\n        Session.get(\"plotResultKey\"); // make sure we re-render when data changes\n        return Session.get('Curves');\n    },\n    curveLabel: function (curve) {\n        switch (Session.get('plotType')) {\n            case matsTypes.PlotTypes.timeSeries:\n                return curve.label + \" time\";\n                break;\n            case matsTypes.PlotTypes.profile:\n                return curve.label + \" level\";\n                break;\n            case matsTypes.PlotTypes.dieoff:\n                return curve.label + \" forecast lead time\";\n            default:\n                return curve.label;\n                break;\n        }\n    },\n    curveText: function () {\n        const text = matsPlotUtils.getCurveText(matsPlotUtils.getPlotType(), this);\n        return text;\n    },\n\n    // get the table row values for each curve's data\n    elementHtml: function (element) {\n        var labelKey = Template.parentData().label;\n        var elementLabel = \"\";\n        var line = \"\";\n        switch (Session.get('plotType')) {\n            case matsTypes.PlotTypes.timeSeries:\n                line += \"<td>\" + element[labelKey += \" time\"] + \"</td>\" +\n                    \"<td>\" + (element['raw stat from query'] != undefined && element['raw stat from query'] !== null ? element['raw stat from query'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['plotted stat'] != undefined && element['plotted stat'] !== null ? element['plotted stat'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['std dev'] != undefined && element['std dev'] !== null ? element['std dev'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['std error'] != undefined && element['std error'] !== null ? element['std error'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['lag1'] != undefined && element['lag1'] !== null ? element['lag1'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (('n' in element) && element['n'] ? element['n'] : fillStr) + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.profile:\n                line += \"<td>\" + element[labelKey += \" level\"] + \"</td>\" +\n                    \"<td>\" + (element['raw stat from query'] != undefined && element['raw stat from query'] !== null ? element['raw stat from query'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['plotted stat'] != undefined && element['plotted stat'] !== null ? element['plotted stat'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['std dev'] != undefined && element['std dev'] !== null ? element['std dev'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['std error'] != undefined && element['std error'] !== null ? element['std error'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['lag1'] != undefined && element['lag1'] !== null ? element['lag1'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (('n' in element) ? element['n'] : fillStr) + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.dieoff:\n                line += \"<td>\" + element[labelKey += \" forecast lead time\"] + \"</td>\" +\n                    \"<td>\" + (element['raw stat from query'] != undefined && element['raw stat from query'] !== null ? element['raw stat from query'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['plotted stat'] != undefined && element['plotted stat'] !== null ? element['plotted stat'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['std dev'] != undefined && element['std dev'] !== null ? element['std dev'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (('n' in element) ? element['n'] : fillStr) + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.threshold:\n                line += \"<td>\" + element[labelKey += \" threshold (in)\"] + \"</td>\" +\n                    \"<td>\" + (element['raw stat from query'] != undefined && element['raw stat from query'] !== null ? element['raw stat from query'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['plotted stat'] != undefined && element['plotted stat'] !== null ? element['plotted stat'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['std dev'] != undefined && element['std dev'] !== null ? element['std dev'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (('n' in element) ? element['n'] : fillStr) + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.validtime:\n                line += \"<td>\" + element[labelKey += \" hour of day\"] + \"</td>\" +\n                    \"<td>\" + (element['raw stat from query'] != undefined && element['raw stat from query'] !== null ? element['raw stat from query'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['plotted stat'] != undefined && element['plotted stat'] !== null ? element['plotted stat'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['std dev'] != undefined && element['std dev'] !== null ? element['std dev'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (('n' in element) ? element['n'] : fillStr) + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.dailyModelCycle:\n                line += \"<td>\" + element[labelKey += \" time\"] + \"</td>\" +\n                    \"<td>\" + (element['raw stat from query'] != undefined && element['raw stat from query'] !== null ? element['raw stat from query'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['plotted stat'] != undefined && element['plotted stat'] !== null ? element['plotted stat'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['std dev'] != undefined && element['std dev'] !== null ? element['std dev'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (('n' in element) ? element['n'] : fillStr) + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.reliability:\n                line += \"<td>\" + element[labelKey += \" probability bin\"] + \"</td>\" +\n                    \"<td>\" + (element['hit rate'] != undefined && element['hit rate'] !== null ? element['hit rate'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['oy'] != undefined && element['oy'] !== null ? element['oy'] : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['on'] != undefined && element['on'] !== null ? element['on'] : fillStr) + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.map:\n                line += \"<td>\" + element[\"Site Name\"] + \"</td>\" +\n                    \"<td>\" + (element['Number of Times'] != undefined && element['Number of Times'] !== null ? element['Number of Times'] : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['Start Date'] != undefined && element['Start Date'] !== null ? element['Start Date'] : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['End Date'] != undefined && element['End Date'] !== null ? element['End Date'] : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['Average Difference'] != undefined && element['Average Difference'] !== null ? element['Average Difference'] : fillStr) + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.histogram:\n                line += \"<td>\" + element[labelKey += \" bin range\"] + \"</td>\" +\n                    \"<td>\" + (('n' in element) ? element['n'] : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['bin rel freq'] != undefined && element['bin rel freq'] !== null ? element['bin rel freq'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['bin lower bound'] != undefined && element['bin lower bound'] !== null ? element['bin lower bound'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['bin upper bound'] != undefined && element['bin upper bound'] !== null ? element['bin upper bound'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['bin mean'] != undefined && element['bin mean'] !== null ? element['bin mean'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['bin std dev'] != undefined && element['bin std dev'] !== null ? element['bin std dev'].toPrecision(4) : fillStr) + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.contour:\n            case matsTypes.PlotTypes.contourDiff:\n                line += \"<td>\" + element[\"xVal\"] + \"</td>\" +\n                    \"<td>\" + element[\"yVal\"] + \"</td>\" +\n                    \"<td>\" + (element['stat'] != undefined && element['stat'] !== null ? element['stat'] : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['N'] != undefined && element['N'] !== null ? element['N'] : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['Start Date'] != undefined && element['Start Date'] !== null ? element['Start Date'] : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['End Date'] != undefined && element['End Date'] !== null ? element['End Date'] : fillStr) + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.scatter2d:\n                line += \"<td>\" + (element['xAxis'] != undefined && element['xAxis'] !== null ? element['xAxis'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['yAxis'] != undefined && element['yAxis'] !== null ? element['yAxis'].toPrecision(4) : fillStr) + \"</td>\" +\n                    \"<td>\" + (element['best fit'] != undefined && element['best fit'] !== null ? element['best fit'] : fillStr) + \"</td>\";\n                break;\n            default:\n                break;\n        }\n        return line;\n    },\n\n    // get the table row values for the summary stats at the top of the text page\n    stats: function (curve) {\n        if (Session.get(\"plotResultKey\") === undefined) {\n            return [];\n        }\n        var curves = Session.get('Curves');\n        if (curves === undefined || curves.length == 0) {\n            return [];\n        }\n        var cindex;\n        for (cindex = 0; cindex < curves.length; cindex++) {\n            if (curves[cindex].label == curve.label) {\n                break;\n            }\n        }\n        if (matsCurveUtils.getPlotResultData() === null ||\n            matsCurveUtils.getPlotResultData() === undefined ||\n            matsCurveUtils.getPlotResultData().stats === undefined ||\n            matsCurveUtils.getPlotResultData().stats[curves[cindex].label] === undefined) {\n            return \"\";\n        }\n        const stats = matsCurveUtils.getPlotResultData().stats[curves[cindex].label];\n\n        var line = \"\";\n        switch (Session.get('plotType')) {\n            case matsTypes.PlotTypes.timeSeries:\n            case matsTypes.PlotTypes.profile:\n            case matsTypes.PlotTypes.dailyModelCycle:\n                line += \"<td>\" + curve['label'] + \"</td>\" +\n                    \"<td>\" + (stats['mean'] != undefined && stats['mean'] !== null ? stats['mean'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['standard deviation'] != undefined && stats['standard deviation'] !== null ? stats['standard deviation'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['n']).toString() + \"</td>\" +\n                    \"<td>\" + (stats['standard error'] != undefined && stats['standard error'] != null ? stats['standard error'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['lag1'] != undefined && stats['lag1'] != null ? stats['lag1'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['minimum'] != undefined && stats['minimum'] != null ? stats['minimum'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['maximum'] != undefined && stats['maximum'] != null ? stats['maximum'].toPrecision(4) : \"undefined\").toString() + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.dieoff:\n            case matsTypes.PlotTypes.threshold:\n            case matsTypes.PlotTypes.validtime:\n                line += \"<td>\" + curve['label'] + \"</td>\" +\n                    \"<td>\" + (stats['mean'] != undefined && stats['mean'] !== null ? stats['mean'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['standard deviation'] != undefined && stats['standard deviation'] !== null ? stats['standard deviation'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['n']).toString() + \"</td>\" +\n                    \"<td>\" + (stats['minimum'] != undefined && stats['minimum'] != null ? stats['minimum'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['maximum'] != undefined && stats['maximum'] != null ? stats['maximum'].toPrecision(4) : \"undefined\").toString() + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.reliability:\n                line += \"<td>\" + curve['label'] + \"</td>\" +\n                    \"<td>\" + (stats['sample climo'] != undefined && stats['sample climo'] !== null ? stats['sample climo'].toPrecision(4) : \"undefined\").toString() + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.map:\n                line += \"<td>\" + curve['label'] + \"</td>\" +\n                    \"<td>\" + (stats['mean difference'] != undefined && stats['mean difference'] !== null ? stats['mean difference'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['standard deviation'] != undefined && stats['standard deviation'] !== null ? stats['standard deviation'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['total number of obs'] != undefined && stats['total number of obs'] !== null ? stats['total number of obs'] : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['minimum time'] != undefined && stats['minimum time'] != null ? stats['minimum time'] : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['maximum time'] != undefined && stats['maximum time'] != null ? stats['maximum time'] : \"undefined\").toString() + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.histogram:\n                line += \"<td>\" + curve['label'] + \"</td>\" +\n                    \"<td>\" + (stats['mean'] != undefined && stats['mean'] !== null ? stats['mean'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['standard deviation'] != undefined && stats['standard deviation'] != null ? stats['standard deviation'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['n']).toString() + \"</td>\" +\n                    \"<td>\" + (stats['minimum'] != undefined && stats['minimum'] != null ? stats['minimum'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['maximum'] != undefined && stats['maximum'] != null ? stats['maximum'].toPrecision(4) : \"undefined\").toString() + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.contour:\n            case matsTypes.PlotTypes.contourDiff:\n                line += \"<td>\" + curve['label'] + \"</td>\" +\n                    \"<td>\" + (stats['mean stat'] != undefined && stats['mean stat'] !== null ? stats['mean stat'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['total number of points'] != undefined && stats['total number of points'] !== null ? stats['total number of points'] : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['minimum time'] != undefined && stats['minimum time'] != null ? stats['minimum time'] : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['maximum time'] != undefined && stats['maximum time'] != null ? stats['maximum time'] : \"undefined\").toString() + \"</td>\";\n                break;\n            case matsTypes.PlotTypes.scatter2d:\n                line += \"<td>\" + curve['label'] + \"</td>\" +\n                    \"<td>\" + (stats['mean'] != undefined && stats['mean'] !== null ? stats['mean'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['standard deviation'] != undefined && stats['standard deviation'] !== null ? stats['standard deviation'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['n']).toString() + \"</td>\" +\n                    \"<td>\" + (stats['standard error'] != undefined && stats['standard error'] != null ? stats['standard error'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['lag1'] != undefined && stats['lag1'] != null ? stats['lag1'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['minimum'] != undefined && stats['minimum'] != null ? stats['minimum'].toPrecision(4) : \"undefined\").toString() + \"</td>\" +\n                    \"<td>\" + (stats['maximum'] != undefined && stats['maximum'] != null ? stats['maximum'].toPrecision(4) : \"undefined\").toString() + \"</td>\";\n                break;\n            default:\n                break;\n        }\n        return line;\n    }\n});\n\nTemplate.textOutput.events({\n    'click .export': function () {\n        var plotType = Session.get('plotType');\n        var key = Session.get('plotResultKey');\n        // open a new window with\n        window.open(window.location + \"/CSV/\" + Session.get(\"graphFunction\") + \"/\" + Session.get(\"plotResultKey\") + \"/\" + Session.get('plotParameter') + \"/\" + matsCollections.Settings.findOne({}, {fields: {Title: 1}}).Title);\n    }\n});\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {Meteor} from 'meteor/meteor';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport {\n    matsCollections,\n    matsCurveUtils,\n    matsGraphUtils,\n    matsMethods,\n    matsParamUtils,\n    matsPlotUtils,\n    matsTypes\n} from 'meteor/randyp:mats-common';\nimport {Template} from 'meteor/templating';\nimport {FlowRouter} from 'meteor/ostrio:flow-router-extra';\nimport './graphStandAlone.html';\n\nvar annotation = \"\";\nvar resizeOptions;\n\nTemplate.GraphStandAlone.onCreated(function () {\n    // get the params for what this window will contain from the route\n    console.log(\"GraphStandAlone.onCreated\");\n    Session.set('route', FlowRouter.getRouteName());\n    Session.set(\"graphFunction\", FlowRouter.getParam('graphFunction'));\n    Session.set(\"plotResultKey\", FlowRouter.getParam('key'));\n    Session.set(\"plotParameter\", FlowRouter.getParam('matching'));\n    Session.set(\"appName\", FlowRouter.getParam('appName'));\n});\n\nTemplate.GraphStandAlone.onRendered(function () {\n    // the window resize event needs to also resize the graph\n    $(window).resize(function () {\n        document.getElementById('placeholder').style.width = matsGraphUtils.standAloneWidth();\n        document.getElementById('placeholder').style.height = matsGraphUtils.standAloneHeight();\n        var dataset = matsCurveUtils.getGraphResult().data;\n        Plotly.newPlot($(\"#placeholder\")[0], dataset, resizeOptions, {showLink: true});\n    });\n    document.getElementById('graph-container').style.backgroundColor = 'white';\n});\n\nTemplate.GraphStandAlone.helpers({\n    /**\n     * @return {string}\n     * @return {string}\n     */\n    graphFunction: function (params) {\n        // causes graph display routine to be processed\n        var graphFunction = FlowRouter.getParam('graphFunction');\n        var key = FlowRouter.getParam('key');\n        matsMethods.getGraphDataByKey.call({resultKey: key,}, function (error, ret) {\n            if (error !== undefined) {\n                setError(error);\n                matsCurveUtils.resetGraphResult();\n                return false;\n            }\n            matsCurveUtils.setGraphResult(ret.result);\n            Session.set(\"plotResultKey\", ret.key);\n            Session.set('Curves', ret.result.basis.plotParams.curves);\n            Session.set('graphFunction', graphFunction);\n            Session.set('PlotResultsUpDated', new Date());\n            Session.set('PlotParams', ret.result.basis.plotParams);\n            var ptypes = Object.keys(ret.result.basis.plotParams.plotTypes);\n            for (var i = 0; i < ptypes.length; i++) {\n                if (ret.result.basis.plotParams.plotTypes[ptypes[i]] === true) {\n                    Session.set('plotType', ptypes[i]);\n                    break;\n                }\n            }\n            delete ret;\n            if (graphFunction) {\n                eval(graphFunction)(key);\n                var plotType = Session.get('plotType');\n                var dataset = matsCurveUtils.getGraphResult().data;\n                var options = matsCurveUtils.getGraphResult().options;\n                if (dataset === undefined) {\n                    return false;\n                }\n                // make sure to capture the options (layout) from the old graph - which were stored in graph.js\n                matsMethods.getLayout.call({resultKey: key,}, function (error, ret) {\n                    if (error !== undefined) {\n                        setError(error);\n                        return false;\n                    }\n                    var mapLoadPause = 0;\n                    options = ret.layout;\n                    if (plotType === matsTypes.PlotTypes.map) {\n                        options.mapbox.zoom = 2.75;\n                        mapLoadPause = 1000;\n                    }\n                    resizeOptions = options;\n\n                    // initial plot\n                    $(\"#legendContainer\").empty();\n                    $(\"#placeholder\").empty();\n\n                    // need a slight delay for plotly to load\n                    setTimeout(function () {\n                        Plotly.newPlot($(\"#placeholder\")[0], dataset, options, {showLink: false});\n                        // update changes to the curve ops -- need to pause if we're doing a map so the map can finish loading before we try to edit it\n                        setTimeout(function() {\n                            const updates = ret.curveOpsUpdate.curveOpsUpdate;\n                            for (var uidx = 0; uidx < updates.length; uidx++) {\n                                var curveOpsUpdate = {};\n                                var updatedKeys = Object.keys(updates[uidx]);\n                                for (var kidx = 0; kidx < updatedKeys.length; kidx++) {\n                                    var jsonHappyKey = updatedKeys[kidx];\n                                    // turn the json placeholder back into .\n                                    var updatedKey = jsonHappyKey.split(\"____\").join(\".\");\n                                    curveOpsUpdate[updatedKey] = updates[uidx][jsonHappyKey];\n                                }\n                                Plotly.restyle($(\"#placeholder\")[0], curveOpsUpdate, uidx);\n                            }\n                        }, mapLoadPause);\n                    }, 100);\n\n                    // append annotations\n                    if (plotType !== matsTypes.PlotTypes.map) {\n                        annotation = \"\";\n                        for (var i = 0; i < dataset.length; i++) {\n                            if (plotType !== matsTypes.PlotTypes.histogram && dataset[i].curveId !== undefined) {\n                                annotation = annotation + \"<div id='\" + dataset[i].curveId + \"-annotation' style='color:\" + dataset[i].annotateColor + \"'>\" + dataset[i].annotation + \" </div>\";\n                            }\n                        }\n                        $(\"#legendContainer\").append(\"<div id='annotationContainer' style='font-size:smaller'>\" + annotation + \"</div>\");\n                    }\n                    document.getElementById(\"gsaSpinner\").style.display = \"none\";\n                });\n            }\n        });\n    },\n    graphFunctionDispay: function () {\n        return \"block\";\n    },\n    Title: function () {\n        return Session.get('appName');\n    },\n    width: function () {\n        return matsGraphUtils.standAloneWidth();\n    },\n    height: function () {\n        return matsGraphUtils.standAloneHeight();\n    },\n    curves: function () {\n        return Session.get('Curves');\n    },\n    plotName: function () {\n        return (Session.get('PlotParams') === [] || Session.get('PlotParams').plotAction === undefined) || Session.get('plotType') === matsTypes.PlotTypes.map ? \"\" : Session.get('PlotParams').plotAction.toUpperCase();\n    },\n    curveText: function () {\n        if (this.diffFrom === undefined) {\n            var plotType = Session.get('plotType');\n            if (plotType === undefined) {\n                pfuncs = matsCollections.PlotGraphFunctions.find({}).fetch();\n                for (var i = 0; i < pfuncs.length; i++) {\n                    if (pfuncs[i].checked === true) {\n                        Session.set('plotType', pfuncs[i].plotType);\n                    }\n                }\n                plotType = Session.get('plotType');\n            }\n            return matsPlotUtils.getCurveText(plotType, this);\n        } else {\n            return this.label + \":  Difference\";\n        }\n    },\n    plotText: function () {\n        var p = Session.get('PlotParams');\n        if (p !== undefined) {\n            var format = p.plotFormat;\n            if (matsCollections.PlotParams.findOne({name: 'plotFormat'}) &&\n                matsCollections.PlotParams.findOne({name: 'plotFormat'}).optionsMap &&\n                matsCollections.PlotParams.findOne({name: 'plotFormat'}).optionsMap[p.plotFormat] !== undefined) {\n                format = matsCollections.PlotParams.findOne({name: 'plotFormat'}).optionsMap[p.plotFormat];\n            }\n            if (format === undefined) {\n                format = \"Unmatched\";\n            }\n            var plotType = Session.get('plotType');\n            switch (plotType) {\n                case matsTypes.PlotTypes.timeSeries:\n                    return \"TimeSeries \" + p.dates + \" : \" + format;\n                case matsTypes.PlotTypes.profile:\n                    return \"Profile: \" + format;\n                case matsTypes.PlotTypes.dieoff:\n                    return \"DieOff: \" + format;\n                case matsTypes.PlotTypes.threshold:\n                    return \"Threshold: \" + format;\n                case matsTypes.PlotTypes.validtime:\n                    return \"ValidTime: \" + format;\n                case matsTypes.PlotTypes.dailyModelCycle:\n                    return \"DailyModelCycle \" + p.dates + \" : \" + format;\n                case matsTypes.PlotTypes.reliability:\n                    return \"Reliability: \" + p.dates + \" : \" + format;\n                case matsTypes.PlotTypes.map:\n                    return \"Map \" + p.dates + \" \";\n                case matsTypes.PlotTypes.histogram:\n                    return \"Histogram: \" + format;\n                case matsTypes.PlotTypes.contour:\n                    return \"Contour \" + p.dates + \" : \" + format;\n                case matsTypes.PlotTypes.contourDiff:\n                    return \"ContourDiff \" + p.dates + \" : \" + format;\n                case matsTypes.PlotTypes.scatter2d:\n                    break;\n                default:\n                    return \"Scatter: \" + p.dates + \" : \" + format;\n            }\n        } else {\n            return \"no plot params\";\n        }\n    },\n    color: function () {\n        return this.color;\n    },\n    annotateButtonText: function () {\n        var sval = this.label + \"annotateButtonText\";\n        if (Session.get(sval) === undefined) {\n            Session.set(sval, 'hide annotation');\n        }\n        return Session.get(sval);\n    },\n    annotateShowHideDisplay: function () {\n        var plotType = Session.get('plotType');\n        if (plotType === matsTypes.PlotTypes.map || plotType === matsTypes.PlotTypes.histogram) {\n            return 'none';\n        } else {\n            return 'block';\n        }\n    },\n    matsplotFilemname: function () {\n        return \"matsplot-\" + moment(new Date()).format(\"DD-MM-YYYY-hh:mm:ss\")\n    },\n    image: function () {\n        var img = Session.get(\"spinner_img\");\n        if (img == undefined) {\n            img = \"spinner.gif\";\n            Session.set(\"spinner_img\", \"../../../../../image/spinner.gif\");\n        }\n        return img;\n    }\n});\n\nTemplate.GraphStandAlone.events({\n    'click .annotateVisibility': function (event) {\n        event.preventDefault();\n        const id = event.target.id;\n        const label = id.replace('-curve-show-hide-annotate', '');\n        if ($('#' + label + \"-annotation\")[0].hidden) {\n            $('#' + label + \"-annotation\")[0].style.display = \"block\";\n            $('#' + label + \"-curve-show-hide-annotate\")[0].value = \"hide annotation\";\n            $('#' + label + \"-annotation\")[0].hidden = false;\n        } else {\n            $('#' + label + \"-annotation\")[0].style.display = \"none\";\n            $('#' + label + \"-curve-show-hide-annotate\")[0].value = \"show annotation\";\n            $('#' + label + \"-annotation\")[0].hidden = true;\n        }\n        annotation = $('#annotationContainer')[0].innerHTML;\n    },\n    'click .exportpdf': function (e) {\n        $(\".previewCurveButtons\").each(function (i, obj) {\n            obj.style.display = \"none\";\n        });\n        //const filename  = 'MATSPlot' + moment(new Date()).format(\"DD-MM-YYYY-hh:mm:ss\") + '.pdf';\n        html2canvas(document.querySelector('#graph-container'), {scale: 3.0}).then(canvas => {\n            var h = 419.53;\n            var w = 595.28;\n            var filename = document.getElementById(\"exportFileName\").value;\n            let pdf = new jsPDF('letter', 'pt', 'a5');\n            pdf.addImage(canvas.toDataURL('image/jpeg'), 'JPEG', 0, 0, w, h);\n            pdf.save(filename);\n            $(\".previewCurveButtons\").each(function (i, obj) {\n                obj.style.display = \"block\";\n            });\n        });\n    },\n    'click .exportpng': function (e) {\n        $(\".previewCurveButtons\").each(function (i, obj) {\n            obj.style.display = \"none\";\n        });\n        html2canvas(document.querySelector('#graph-container'), {scale: 3.0}).then(canvas => {\n            var h = 419.53;\n            var w = 595.28;\n            var filename = document.getElementById(\"exportFileName\").value;\n            saveAs(canvas.toDataURL(), filename + '.png');\n            $(\".previewCurveButtons\").each(function (i, obj) {\n                obj.style.display = \"block\";\n            });\n        });\n\n        function saveAs(uri, filename) {\n            var link = document.createElement('a');\n            if (typeof link.download === 'string') {\n                link.href = uri;\n                link.download = filename;\n\n                //Firefox requires the link to be in the body\n                document.body.appendChild(link);\n\n                //simulate click\n                link.click();\n\n                //remove the link when done\n                document.body.removeChild(link);\n            } else {\n                window.open(uri);\n            }\n        }\n    }\n});\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsCurveUtils } from 'meteor/randyp:mats-common';\nimport { matsParamUtils } from 'meteor/randyp:mats-common'\nimport { matsTypes } from 'meteor/randyp:mats-common'\nTemplate.textInput.helpers({\n    defaultTextInput: function() {\n        if (this.name == 'label') {   // labels are handled specially\n            var label;\n            var input = document.getElementById('label-textInput');\n            var value = document.getElementById('controlButton-label-value');\n            if (input && value) {\n                if (label !== input.value || label != value.textContent) {\n                    if (!Session.get('NextCurveLabel')) {\n                        label = matsCurveUtils.getNextCurveLabel();\n                    } else {\n                        label = Session.get('NextCurveLabel');\n                    }\n                    input.value = label;\n                    value.textContent = label;\n                    return label;\n                }\n            } else {\n                // must be initialization\n                label = matsCurveUtils.getNextCurveLabel();\n                return label;\n            }\n        } else {\n            return this.default;\n        }\n    }\n});\n\nTemplate.textInput.events({\n    'click, blur': function (event) {\n        try {\n            // label is handled differently - special case because of NextCurveLabel stored in Session\n            const text = event.currentTarget.value;\n            if (event.target.name == \"label\" && Session.get('NextCurveLabel') == text) {\n            } else {\n                matsParamUtils.setValueTextForParamName(event.target.name, text);\n            }\n        } catch (error){\n            matsParamUtils.setValueTextForParamName(event.target.name, \"\");\n        }\n    },\n    'change': function (event) {\n        try {\n            // label is handled differently - special case because of NextCurveLabel stored in Session\n            const text = event.currentTarget.value;\n            if (Object.values(matsTypes.ReservedWords).indexOf(text) === -1) {\n                matsParamUtils.setValueTextForParamName(event.target.name, text);\n                Session.set(\"NextCurveLabel\", text);\n            } else {\n                console.log(\"that curve label is not allowed\");\n                setTimeout(function (){\n                    matsParamUtils.setValueTextForParamName(event.target.name, \"LabelNotAllowed\");\n                }, 10);\n            }\n        } catch (error){\n            matsParamUtils.setValueTextForParamName(event.target.name, \"\");\n        }\n    }\n});\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsTypes } from 'meteor/randyp:mats-common';\nimport { matsCollections } from 'meteor/randyp:mats-common';\nimport { matsParamUtils } from 'meteor/randyp:mats-common';\nimport { matsSelectUtils } from 'meteor/randyp:mats-common';\n\n/*\n    Much of the work for select widgets happens in mats-common->imports->client->select_util.js. Especially the refresh\n    routine which sets all the options. Don't forget to look there for much of the handling.\n */\nTemplate.select.onRendered( function () {\n    const ref = this.data.name + '-' + this.data.type;\n    $(\"#\" + ref).select2({minimumResultsForSearch: 20,closeOnSelect: false});\n\n    const elem = document.getElementById(ref);\n    try {\n        // register refresh event for axis change to use to enforce a refresh\n\n        elem && elem.addEventListener('axisRefresh', function (event) {\n            // Don't know why I have to do this, I expected the parameter data to be in the context....\n            const paramData = matsCollections.CurveParams.findOne({name: this.name}, {dependentNames: 1, peerName: 1});\n            matsSelectUtils.refreshPeer(event,paramData);\n        });\n\n        // register refresh event for any superior to use to enforce a refresh of the options list\n        if (ref.search('axis') === 1) {\n            // this is a \"brother\" (hidden) scatterplot param. There is no need to refresh it or add event listeners etc.\n            return;\n        }\n        elem.options = [];\n        elem && elem.addEventListener('refresh', function (event) {\n            matsSelectUtils.refresh(event,this.name);\n        });\n    } catch (e) {\n        e.message = \"Error in select.js rendered: \" + e.message;\n        setError(e);\n    }\n    try {\n        matsSelectUtils.checkHideOther(this.data,true); // calls checkDisable\n        matsSelectUtils.refresh(null,this.data.name);\n    } catch (e) {\n        e.message = \"Error in select.js rendered function checking to hide or disable other elements: \" + e.message;\n        setError(e);\n    }\n});\n\nTemplate.select.helpers({\n    optionMaxLength: function() {\n        var sOptions = [];\n        if (!this.options) {\n            return 10;\n        }\n        const longest = (this.options).reduce(function (a, b) {\n            if (a === null && b === null) {\n                return  null;\n            }\n            if (a === null) {\n                return b;\n            }\n            if (b === null) {\n                return a;\n            }\n            return a.length > b.length ? a : b;\n        });\n        if (!longest) {\n            return 10;\n        }\n        const ret = longest.length <= 10 ? 10 : Math.round(longest.length * 0.8);\n\n        return ret;\n    },\n\n    isSelectedByDefault: function (p) {\n        if (p.default == this) {\n            return \"selected\";   // the selected option\n        } else {\n            return \"\"; // not the selected option\n        }\n    },\n    options: function () {\n        var sOptions = [];\n        //process options as an option list\n        if (this.options === matsTypes.InputTypes.unused) {\n            return [];\n        } else if (this.optionsGroups) {\n            // options have optionGroups\n            this.optionsGroups.foreach(function(value) {\n                Soptions.concat(value);\n            });\n        } else {\n            sOptions = matsParamUtils.typeSort(this.options);\n        }\n        return sOptions;\n    },\n    multiple: function () {\n        if (this.multiple === true) {\n            return \"multiple\";\n        }\n    },\n    isMultiple: function () {\n        return this.multiple === true;\n    },\n    selectionIsOptional: function () {\n        return this.selectionOptional === true;\n    }\n});\n\nconst setValue = function(pName) {\n    const elem = matsParamUtils.getInputElementForParamName(pName);\n    const selectedOptions = elem.selectedOptions;\n    const options = elem.options;\n\n    if (selectedOptions === undefined || selectedOptions.length === 0 || elem.selectedIndex === -1) {\n        // set to the default - the 0th one\n        matsParamUtils.setValueTextForParamName(pName, matsTypes.InputTypes.unused);\n    } else {\n        if (selectedOptions.length === 1) {\n            matsParamUtils.setValueTextForParamName(pName, selectedOptions[0].text);\n        } else {\n            // selected options is greater than 1 - must be a multiple\n            const firstOption = selectedOptions[0];\n            const lastOption = selectedOptions[selectedOptions.length -1];\n            const text = firstOption.text + \" .. \" + lastOption.text;\n            matsParamUtils.setValueTextForParamName(pName, text);\n        }\n    }\n}\n\n\nTemplate.select.events({\n    'change .data-input': function (event) {\n        Session.set(\"elementChanged\", Date.now());\n        const paramName =  event.target.name;\n        if (paramName === undefined) {\n            return false;\n        }\n        // These need to be done in the right order!\n        // always check to see if an \"other\" needs to be hidden or disabled before refreshing\n        matsSelectUtils.checkHideOther(this, false);\n        matsSelectUtils.refreshPeer(event, this);\n        document.getElementById(\"element-\" + this.name).style.display = \"none\"; // be sure to hide the element div\n        const curveItem = document.getElementById(\"curveItem-\" + Session.get(\"editMode\"));\n        curveItem && curveItem.scrollIntoView(false);\n        setValue(paramName);\n        if (this.multiple) {\n            return true; // prevents the select 2 from closing on multiple selectors\n        }\n        $('#' + this.name + \"-\" + this.type).select2('close');\n        matsSelectUtils.refreshDependents(event, this);\n        Session.set('lastUpdate', Date.now());\n        return false;\n    },\n    'click .doneSelecting': function (event) {\n        Session.set(\"elementChanged\", Date.now());\n        const controlElem = matsParamUtils.getControlElementForParamName(this.name);\n        $('#' + this.name + \"-\" + this.type).select2(\"close\").trigger('change'); // apply the selection choices to the select2\n        const editMode = Session.get(\"editMode\");\n        const curveItem = (editMode === undefined && editMode === \"\") ? undefined : document.getElementById(\"curveItem-\" + editMode);\n        if (curveItem) {\n            $('#save').trigger('click');\n        }\n        if (editMode) {\n            $('#' + this.name + \"-\" + this.type).select2(\"close\"); // use the close on the selector when editing\n        } else {\n            $(controlElem).trigger('click');  // clicking the control element hides the selector when not editing\n            $('#' + this.name + \"-\" + this.type).select2(\"close\");\n        }\n        return false;\n    },\n    'click .selectAll': function (event) {\n        const elem = matsParamUtils.getInputElementForParamName(this.name);\n        var values = [];\n        for (var i=0; i<elem.options.length; i++) {\n             values.push(elem.options[i].text);\n         }\n        $('#' + this.name + \"-\" + this.type).select2().val(values).trigger('change');\n        return false;\n    },\n    'click .clearSelections': function (event) {\n        const elem = matsParamUtils.getInputElementForParamName(this.name);\n        $('#' + this.name + \"-\" + this.type).select2().val(null).trigger('change');\n        return false;\n    },\n    'click .doNotUse': function (event) {\n        const elem = matsParamUtils.getInputElementForParamName(this.name);\n        $('#' + this.name + \"-\" + this.type).select2().val(null).trigger('change');\n        return false;\n    },\n    'change, blur .item' : function (event) {\n        try {\n            var text = \"\";\n            if (this.type == matsTypes.InputTypes.selectOrderEnforced) {\n                /* check the validity of the order enforcement.\n                   The requirement for order enforced selectors is that\n                   some curve must have previously selected the earlier (lower ordered)\n                   options in the options array, not counting the default option to make this a valid selection.\n                   For example if my options are... ['auto by variable','y1','y2',y3'] and 'auto by variable'\n                   is the selectors default then choosing 'y2' or 'y3' prior to choosing 'y1' is not valid and\n                   choosing 'y3' prior to choosing 'y1' and 'y2' is not valid.\n                 */\n                // what is the default?\n                var defaultOption = this.default;\n                var selection = $(event.target).val();\n                var curves = Session.get('Curves');\n                var options = this.options;\n                var priorSelected = [defaultOption];\n                for (var ci = 0; ci < curves.length; ci++) {\n                    var curve = curves[ci];\n                    var curveOption = curve[this.name];\n                    priorSelected.push(curveOption);\n                }\n                var unusedOption = \"\";\n                if (!priorSelected.includes(selection)) {\n                    // this option has not been selected prior\n                    // check to see if all the prior options to this one are selected\n                    for (var oi = 0; oi < options.length; oi++) {\n                        var option = options[oi];\n                        // We reached the selected option\n                        if (option == selection) {\n                            break;\n                        }\n                        if (!priorSelected.includes(option)) {\n                            unusedOption = option;\n                            break;\n                        }\n                    }\n                    if (unusedOption === \"\") {\n                        // is valid all prior options were selected\n                        event.target.setCustomValidity(this.name,\"\");\n                    } else {\n                        // HACK ALERT! the customValidity stuff seems to have been overridden in the invalid event event handler of item.js\n                        Session.set('errorMessage',\"The prior option: \" + unusedOption + \" was not selected for this selector, you must use that first.\")\n                        event.target.setCustomValidity(this.name,\"The prior option: \" + unusedOption + \" was not selected for this selector, you must use that first.\");\n                        event.target.checkValidity();\n//                        matsParamUtils.setInputForParamName(this.name,this.default);\n                    }\n                }\n            }\n            if (event.target.multiple) {\n                const values = $(event.target).val();\n                if (values === null) { // happens if unused or empty\n                    text = matsTypes.InputTypes.unused;\n                } else {\n                    const firstOption = values[0];\n                    const lastOption = values[values.length - 1];\n                    text = firstOption + \" .. \" + lastOption;\n                }\n            } else {\n                text = $(event.target).val();\n            }\n            if (this.type === matsTypes.InputTypes.select && (text === \"\" || text === undefined || text === null) &&\n                (this.default === -1 || this.default === undefined || this.default === null || event.currentTarget.selectedIndex == -1)) {\n                text = matsTypes.InputTypes.unused;\n                //$('#' + this.name + \"-\" + this.type).select2().val(null).trigger('change');\n            }\n            matsParamUtils.setValueTextForParamName(event.target.name, text);\n        } catch (error){\n            matsParamUtils.setValueTextForParamName(event.target.name, \"\");\n        }\n        const editMode = Session.get(\"editMode\");\n        const curveItem = (editMode === undefined && editMode === \"\") ? undefined : document.getElementById(\"curveItem-\" + editMode);\n        if (curveItem) {\n            $('#save').trigger('click');\n        }\n        if (event.target.multiple) {\n            Session.set('editMode', editMode); // restore the editing of the curve item for muli selects\n            const controlElem = matsParamUtils.getControlElementForParamName(this.name);\n            $(controlElem).trigger('click');  // reopen the select2 - the regular open is not located properly so do it by clicking the control element button\n        }\n        return false;\n    }\n});\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsParamUtils} from 'meteor/randyp:mats-common';\n\nTemplate.map.onRendered(function () {\n\n    var defaultAttrs = this;    // save for when we need to reset to defaults\n\n    $.getScript(\"https://cdn.plot.ly/plotly-latest.min.js\", function () {\n        var targetId = '';\n        var peerName = '';\n        var markers = [];\n        var thisMarkers = [];\n        var peerOptions = [];\n        var selectedValues = [];\n        var divElement = '';\n        var divId = '';\n        var layout = {};\n        var dataset = {};\n\n        // method to initialize the map selector\n        var initializeSelectorMap = function (item) {\n            var defaultPoint = item.data.defaultMapView.point;\n            var defaultZoomLevel = item.data.defaultMapView.zoomLevel;\n            peerName = item.data.peerName;\n\n            var targetElement = document.getElementsByName(peerName)[0];\n            if (!targetElement) {\n                return;\n            }\n            targetId = '#' + targetElement.id;\n\n            markers = item.data.optionsMap;   // from app startup\n            thisMarkers = [];       // markers valid for this data source\n\n            // find out what peer options are available for this data source\n            peerOptions = [];\n            if (targetElement.options) {\n                for (var i = 0; i < targetElement.options.length; i++) {\n                    peerOptions.push(targetElement.options[i].text);\n                }\n            }\n            selectedValues = $(targetId).val() ? $(targetId).val() : [];\n\n            divElement = item.data.name + '-' + item.data.type;\n            divId = '#' + divElement;\n\n            layout = {\n                autosize: true,\n                // height: 500,\n                // width: 840,\n                hovermode: 'closest',\n                mapbox: {\n                    bearing: 0,\n                    center: {\n                        lat: defaultPoint[0],\n                        lon: defaultPoint[1]\n                    },\n                    pitch: 0,\n                    zoom: defaultZoomLevel,\n                    accesstoken: 'pk.eyJ1IjoibWF0cy1nc2QiLCJhIjoiY2pvN2l1N2MyMG9xdTN3bWR3ODV5a2E2ZiJ9.PtgcGhxaoD43N0OwJSNVMg',\n                    style: 'light'\n                },\n                margin: {\n                    l: 10,\n                    r: 10,\n                    b: 10,\n                    t: 10,\n                    pad: 4\n                },\n                showlegend: false,\n            };\n\n            dataset = {\n                label: 'sitesMap',\n                siteName: [],\n                lat: [],\n                lon: [],\n                text: [],\n                type: 'scattermapbox',\n                mode: 'markers',\n                marker: {\n                    color: [],\n                    opacity: 1\n                }\n            };\n\n            // set the initial site marker locations and colors\n            var marker;\n            for (var sidx = 0; sidx < peerOptions.length; sidx++) {\n                marker = markers.find(obj => {\n                    return obj.name === peerOptions[sidx];\n                });\n                thisMarkers[sidx] = marker;\n                dataset.siteName[sidx] = marker.name;\n                dataset.text[sidx] = marker.name;\n                dataset.lat[sidx] = marker.point[0];\n                dataset.lon[sidx] = marker.point[1];\n                if (selectedValues.indexOf(marker.name) === -1) {\n                    dataset.marker.color[sidx] = marker.options.color;\n                } else {\n                    dataset.marker.color[sidx] = marker.options.highLightColor;\n                }\n            }\n        };\n\n        // call the above initialization for the first time\n        initializeSelectorMap(defaultAttrs);\n\n        // draw the map for the first time\n        Plotly.newPlot($(divId)[0], [dataset], layout);\n\n        /*\n\n        The following lines of code are event handlers for if a user clicks on a single station, or uses the area select\n        tools to highlight a group of stations. For now, the logic is such that individual stations can toggle between\n        chosen and unchosen by clicking them, but the area select tools will just choose everything that is outlined.\n        This is so that if a user has been manually choosing stations and then gives up and uses the area select, all of\n        their intended stations will be chosen (the ones they had already manually selected won't be unchosen). There will\n        be some sort of 'deselect all' button on this modal to unchoose everything.\n\n        NOTE: We are using plotly's event handlers here, but we are not using its native chosen/unchosen capabilities.\n        Instead, we are getting the chosen values back from the area select and adding them into out own arrays. We then\n        finish by telling plotly to deselect everything in its own internal accounting. There are two reasons for this:\n            1) plotly's ways of handling chosen/unchosen values are way more complicated than is needed here\n            2) under plotly's system, if we use the area select once, we then can't go back and add other areas or\n            individual stations without losing the original selection.\n\n        However, we may want to explore plotly's native chosen/unchosen capabilities in the future for our process-oriented\n        verification.\n\n        --MBS, 11/13/18\n\n         */\n\n        // event handler for clicking individual stations\n        $(divId)[0].on('plotly_click', function (eventdata) {\n            //get index of current station\n            const currPoint = eventdata.points[0].pointNumber;\n            if (dataset.marker.color[currPoint] === thisMarkers[currPoint].options.color) {\n                // switch to selected color and add this station to our selected values array\n                dataset.marker.color[currPoint] = thisMarkers[currPoint].options.highLightColor;\n                selectedValues.push(eventdata.points[0].text);\n            } else {\n                // switch to deselected color and remove this station from our selected values array\n                dataset.marker.color[currPoint] = thisMarkers[currPoint].options.color;\n                var tidx = selectedValues.indexOf(eventdata.points[0].text);\n                if (tidx > -1) {\n                    selectedValues.splice(tidx, 1);\n                }\n            }\n            // update the marker color on the plot and the values in the site selector\n            var update = {'marker': {color: dataset.marker.color, opacity: 1}};\n            Plotly.restyle($(divId)[0], update, eventdata.points[0].curveNumber);\n            $(targetId).val(selectedValues).trigger(\"change\");\n            matsParamUtils.collapseParam(peerName);\n            $(targetId).select2(\"close\");\n        });\n\n        // event handler for outlining multiple stations\n        $(divId)[0].on('plotly_selected', function (eventdata) {\n            if (eventdata === undefined || (eventdata.points.length < 1)) {\n                // the user has clicked outside of the select area, so make sure plotly's area select is disabled.\n                // otherwise the user won't be able to choose individual stations after choosing an area select\n                $(divId + \" .select-outline\").remove();\n                Plotly.restyle($(divId)[0], {selectedpoints: [null]});\n            } else {\n                // the user has selected all the points in an area. Iterate through them and select any that are not already selected.\n                var currPoint;\n                eventdata.points.forEach(function (pt) {\n                    currPoint = pt.pointNumber;\n                    if (dataset.marker.color[currPoint] === thisMarkers[currPoint].options.color) {\n                        // switch to selected color and add this station to our selected values array\n                        dataset.marker.color[currPoint] = thisMarkers[currPoint].options.highLightColor;\n                        selectedValues.push(pt.text);\n                    }\n                });\n                // update the marker color on the plot and the values in the site selector\n                var update = {'marker': {color: dataset.marker.color, opacity: 1}};\n                Plotly.restyle($(divId)[0], update, eventdata.points[0].curveNumber);\n                $(targetId).val(selectedValues).trigger(\"change\");\n                matsParamUtils.collapseParam(peerName);\n                $(targetId).select2(\"close\");\n\n                // As per the comment block above, we're done here, so make sure plotly's area select is disabled.\n                // otherwise the user won't be able to choose individual stations after choosing an area select.\n                $(divId + \" .select-outline\").remove();\n                Plotly.restyle($(divId)[0], {selectedpoints: [null]});\n            }\n        });\n\n        // event handler for selecting all stations\n        $('.selectSites').on('click', function () {\n            event.preventDefault();\n            // fill the selected values array with all available options and change the marker to its highlight color\n            $(targetId).val(peerOptions).trigger(\"change\");\n            matsParamUtils.collapseParam(peerName);\n            $(targetId).select2(\"close\");\n            for (var sidx = 0; sidx < thisMarkers.length; sidx++) {\n                dataset.marker.color[sidx] = thisMarkers[sidx].options.highLightColor;\n            }\n            var update = {'marker': {color: dataset.marker.color, opacity: 1}};\n            Plotly.restyle($(divId)[0], update, [0]);\n        });\n\n        // event handler for deselecting all stations\n        $('.deselectSites').on('click', function () {\n            event.preventDefault();\n            // empty the selected values array and return the marker to its original color\n            $(targetId).val([]).trigger(\"change\");\n            matsParamUtils.collapseParam(peerName);\n            $(targetId).select2(\"close\");\n            for (var sidx = 0; sidx < thisMarkers.length; sidx++) {\n                dataset.marker.color[sidx] = thisMarkers[sidx].options.color;\n            }\n            var update = {'marker': {color: dataset.marker.color, opacity: 1}};\n            Plotly.restyle($(divId)[0], update, [0]);\n        });\n\n        // method to see if the available sites have changed for this data source\n        var refreshOptionsForPeer = function (peerElement) {\n            // find out what peer options are available\n            peerOptions = [];\n            if (peerElement.options) {\n                for (var i = 0; i < peerElement.options.length; i++) {\n                    peerOptions.push(peerElement.options[i].text);\n                }\n            }\n        };\n\n        // method to sync the map up with the sites selector\n        var refresh = function (peerElement) {\n            if (!peerElement) {\n                return;\n            }\n            var peerId = peerElement.id;\n            refreshOptionsForPeer(peerElement);\n            selectedValues = $('#' + peerId).val() ? $('#' + peerId).val() : [];\n\n            // need to redo these in case the available sites have changed for this data source\n            thisMarkers = [];\n            dataset.siteName = [];\n            dataset.text = [];\n            dataset.lat = [];\n            dataset.lon = [];\n            dataset.marker.color = [];\n            var marker;\n            for (var sidx = 0; sidx < peerOptions.length; sidx++) {\n                marker = markers.find(obj => {\n                    return obj.name === peerOptions[sidx];\n                });\n                thisMarkers[sidx] = marker;\n                dataset.siteName[sidx] = marker.name;\n                dataset.text[sidx] = marker.name;\n                dataset.lat[sidx] = marker.point[0];\n                dataset.lon[sidx] = marker.point[1];\n                if (selectedValues.indexOf(marker.name) === -1) {\n                    dataset.marker.color[sidx] = marker.options.color;\n                } else {\n                    dataset.marker.color[sidx] = marker.options.highLightColor;\n                }\n            }\n            $(divId)[0].data[0] = dataset;\n            Plotly.redraw($(divId)[0]);\n        };\n\n        // method to reset the map to defaults\n        var resetMap = function (item) {\n            initializeSelectorMap(item);\n            $(divId)[0].data[0] = dataset;\n            $(divId)[0].layout = layout;\n            Plotly.redraw($(divId)[0]);\n        };\n\n        // register an event listener so that the select.js can ask the map div to refresh after a selection\n        var elem = document.getElementById(divElement);\n        elem.addEventListener('refresh', function (e) {\n            refresh(e.detail.refElement);\n        });\n\n        // register an event listener so that the param_util.js can ask the map div to reset when someone clicks 'reset to defaults'\n        elem = document.getElementById(divElement);\n        elem.addEventListener('reset', function (e) {\n            resetMap(defaultAttrs);\n        });\n\n    });\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsCollections, matsCurveUtils, matsParamUtils, matsTypes} from 'meteor/randyp:mats-common';\n\nTemplate.dateRange.onRendered(function () {\n    //NOTE: Date fields are special in that they are qualified by plotType.\n    //TimeSeries and Scatter plots have a common date range\n    // but profile plots have a date range for each curve.\n    // The decision to hide or show a dataRange is made here in the dateRange template\n\n    // it seems that when the page is first rendered the checkbox might be yet defined (especially in safari).\n    // in that event we test for undefined and block the curve-dates-item anyway\n    if ((document.getElementById('plot-type-' + matsTypes.PlotTypes.timeSeries) == undefined || document.getElementById('plot-type-' + matsTypes.PlotTypes.timeSeries).checked === true) ||\n        (document.getElementById('plot-type-' + matsTypes.PlotTypes.dailyModelCycle) == undefined || document.getElementById('plot-type-' + matsTypes.PlotTypes.dailyModelCycle).checked === true) ||\n        (document.getElementById('plot-type-' + matsTypes.PlotTypes.scatter2d) == undefined || document.getElementById('plot-type-' + matsTypes.PlotTypes.scatter2d).checked === true)) {\n        if (document.getElementById('curve-dates-item')) {\n            document.getElementById('curve-dates-item').style.display = \"none\";\n        }\n        if (document.getElementById('dates-item')) {\n            document.getElementById('dates-item').style.display = \"block\";\n        }\n    } else {\n        if (document.getElementById('curve-dates-item')) {\n            document.getElementById('curve-dates-item').style.display = \"block\";\n        }\n        if (document.getElementById('dates-item')) {\n            document.getElementById('dates-item').style.display = \"none\";\n        }\n    }\n\n    const name = this.data.name;\n    const idref = name + \"-item\";\n    const elem = document.getElementById('element-' + name);\n    const superiorNames = this.data.superiorNames;\n    const defaultDateRange = matsParamUtils.getDefaultDateRange(name);\n    const startInit = defaultDateRange.startDate;\n    const stopInit = defaultDateRange.stopDate;\n    const dstr = defaultDateRange.dstr;\n\n        $(function () {\n        $('#' + idref).daterangepicker({\n            \"autoApply\": true,\n            \"parentEL\": $('#' + idref),\n            \"timePicker\": true,\n            \"timePicker24Hour\": true,\n            \"timePickerIncrement\": 1,\n            \"startDate\": startInit,\n            \"endDate\": stopInit,\n            \"showDropdowns\": true,\n            \"drops\": \"up\",\n\n            locale: {\n                format: 'MM/DD/YYYY HH:mm'\n            },\n            ranges: {\n                'Today': [moment().startOf('day'), moment().endOf('day')],\n                'Yesterday': [moment().subtract(1, 'days').startOf('day'), moment().subtract(1, 'days').endOf('day')],\n                'Last 7 Full Days': [moment().subtract(7, 'days').startOf('day'), moment().startOf('day')],\n                'Last 30 Full Days': [moment().subtract(30, 'days').startOf('day'), moment().startOf('day')],\n                'Last 60 Full Days': [moment().subtract(60, 'days').startOf('day'), moment().startOf('day')],\n                'Last 90 Full Days': [moment().subtract(90, 'days').startOf('day'), moment().startOf('day')],\n                'Last 180 Full Days': [moment().subtract(180, 'days').startOf('day'), moment().startOf('day')],\n            }, \"alwaysShowCalendars\": true,\n        });\n        matsParamUtils.setValueTextForParamName(name, dstr);\n    });\n\n    $('#' + idref).on('apply.daterangepicker', function (ev, picker) {\n        if (picker.startDate.toString() == picker.endDate.toString()) {\n            setError(new Error(\"date_range error:  Your start and end dates coincide, you must select a range! This is \" +\n                \"because METARs and other obs can come in at slightly different times, so selecting only one time might \" +\n                \"leave you with very few (or no) valid obs. Instead, try using a small range. For example, if you're \" +\n                \"targeting the top-of-the-hour METARs at 2:00 am, set your time range from 1:45 am to 2:00 am, because \" +\n                \"METARs often come in early.\"));\n            return false;\n        }\n        const valStr = picker.startDate.format('MM/DD/YYYY H:mm') + ' - ' + picker.endDate.format('MM/DD/YYYY H:mm');\n        matsParamUtils.setValueTextForParamName(name, valStr);\n        elem.style.display = \"none\";\n        const curveItem = (Session.get(\"editMode\") === undefined && Session.get(\"editMode\") === \"\") ? undefined : document.getElementById(\"curveItem-\" + Session.get(\"editMode\"));\n        if (curveItem) {\n            $('#save').trigger('click');\n        }\n    });\n    $('#' + idref).on('cancel.daterangepicker', function () {\n        elem.style.display = \"none\";\n    });\n\n    const refresh = function () {\n        try {\n            // get the current values from the element and check for invalid\n            const curVals = matsParamUtils.getValueForParamName(name).split(\" - \"); // it is a date object values are \"someFromDate - someToDate\"\n            var startDsr = moment(curVals[0], \"MM/DD/YYYY HH:mm\");\n            var endDsr = moment(curVals[1], \"MM/DD/YYYY HH:mm\");\n            if (!startDsr.isValid()) {\n                // error\n                setError(\"date_range refresh error: Your date range selector has an invalid start date-time: \" + curVals[0]);\n                return false;\n            }\n            if (!endDsr.isValid()) {\n                // error\n                setError(\"date_range refresh error: Your date range selector has an invalid end date-time:\" + curVals[1]);\n                return false;\n            }\n            if (startDsr.isAfter(endDsr)) {\n                // error\n                setError(\"date_range refresh error: Your date range selector has a start date/time that is later than the end date-time \" + startDsr.toString() + \" is not prior to \" + endDsr.toString());\n                return false;\n            }\n            // get superior values and check for errors\n            var superiorVals = [];\n            if (superiorNames !== undefined) {\n                const superiorDimensionality = superiorNames !== null && superiorNames.length > 0 && Array.isArray(superiorNames[0]) ? superiorNames.length : 1;\n                for (var si = 0; si < superiorDimensionality; si++) {\n                    var superiors = [];\n                    if (superiorDimensionality === 1) {\n                        superiors = superiorNames;\n                    } else {\n                        superiors = superiorNames[si];\n                    }\n                    var datesMap = undefined;\n                    for (var si2 = 0; si2 < superiors.length; si2++) {\n                        const thisSuperior = superiors[si2];\n                        datesMap = datesMap === undefined ? matsCollections.CurveParams.findOne({name: thisSuperior}).dates : datesMap;\n                        const sval = matsParamUtils.getInputElementForParamName(thisSuperior).options[matsParamUtils.getInputElementForParamName(thisSuperior).selectedIndex].text;\n                        if (sval === matsTypes.InputTypes.unused ||\n                            sval === null ||\n                            datesMap === undefined ||\n                            matsParamUtils.getInputElementForParamName(thisSuperior) === undefined ||\n                            isNaN(matsParamUtils.getInputElementForParamName(thisSuperior).selectedIndex) ||\n                            matsParamUtils.getInputElementForParamName(thisSuperior).selectedIndex === -1) {\n                            // skip this superior - it isn't being used right now\n                            continue;\n                        }\n                        datesMap = datesMap[sval];\n                    }\n                    const superiorMinimumDateStr = datesMap.minDate;\n                    const superiorMinimumMoment = moment(superiorMinimumDateStr, \"MM/DD/YYYY HH:mm\");\n                    if (superiorMinimumMoment.isValid()) {\n                        superiorVals[si] = superiorVals[si] === undefined ? {} : superiorVals[si];\n                        superiorVals[si].min = superiorMinimumMoment;\n                    } else {\n                        setError(\"date_range refresh error: The end date for the superiors: \" + superiors + \" is invalid: \" + superiorMinimumDateStr);\n                        return false;\n                    }\n                    const superiorMaximumDateStr = datesMap.maxDate;\n                    const superiorMaximumMoment = moment(superiorMaximumDateStr, \"MM/DD/YYYY HH:mm\");\n                    if (superiorMaximumMoment.isValid()) {\n                        superiorVals[si] = superiorVals[si] === undefined ? {} : superiorVals[si];\n                        superiorVals[si].max = superiorMaximumMoment;\n                    } else {\n                        setError(\"date_range refresh error: The end date for the superiors: \" + superiors + \" is invalid: \" + superiorMaximumDateStr);\n                        return false;\n                    }\n                    if ((superiorVals[si].min).isAfter(superiorVals[si].max)) {\n                        // error\n                        setError(\"date_range refresh error: The date range for the superiors: \" + superiors + \" is invalid. It has a start date/time that is later than the end date/time - \" + superiorVals[si].min.toString() + \" is after \" + superiorVals[si].max.toString());\n                        return false;\n                    }\n                }\n            }\n            // get data range from superiors\n            if (superiorVals.length === 0) {\n                // no superiors involved - just leave the DSR alone\n                return false;\n            }\n\n            // these need to be the values for the superiors as they will be not as they are\n            var dataStart = superiorVals[0].min;\n            var dataEnd = superiorVals[0].max;\n\n            if (superiorVals.length > 1) {\n                for (si = 1; si < superiorVals.length; si++) {\n                    const tStart = superiorVals[si].min;\n                    const tEnd = superiorVals[si].max;\n                    if (dataEnd.isBefore(tStart)) {\n                        // NCD not coincindebtal data?\n                        setInfo(\"You do not have any coincidental data with these two selections: The valid date ranges do not overlap - \" +\n                            dataStart.toString() + \" to \" + dataEnd.toString() + \" and \" + tStart.toString() + \" to \" + tEnd.toString());\n                        return false;\n                    } else if (tEnd.isBefore(dataStart)) {\n                        // NCD not coincindebtal data?\n                        setInfo(\"You do not have any coincidental data with these two selections: The valid date ranges do not overlap - \" +\n                            dataStart.toString() + \" to \" + dataEnd.toString() + \" and \" + tStart.toString() + \" to \" + tEnd.toString());\n                        return false;\n                    } else {\n                        // overlapping data\n                        if (tStart.isAfter(dataStart)) {\n                            dataStart = tStart;\n                        }\n                        if (tEnd.isBefore(dataEnd)) {\n                            dataEnd = tEnd;\n                        }\n                    }\n                }\n            }\n            // now we have a normalized date range for the selected superiors.\n            // evaluate DRS\n            if ((dataEnd.isBefore(startDsr) || (dataStart.isAfter(endDsr)))) {\n                // the current user setting and the valid range do not overlap so just set the DSR to the most recent 30 days of the valid range\n                endDsr = dataEnd;\n                // set startDsr to the endDsr less 30 days or less the startDsr whichever is later\n                var endDsrLess30 = moment(endDsr).subtract(30, \"days\");\n                if (endDsrLess30.isAfter(dataStart)) {\n                    startDsr = endDsrLess30;\n                } else {\n                    startDsr = dataStart;\n                }\n            } else {\n                // the current user setting and the valid range overlap\n                if (startDsr.isBefore(dataStart)) {\n                    startDsr = dataStart;\n                }\n                if (endDsr.isAfter(dataEnd)) {\n                    endDsr = dataEnd;\n                }\n            }\n            // now reset the DSR with the evaluated date range\n            const jqIdRef = \"#\" + idref;\n            $(jqIdRef).data('daterangepicker').setStartDate(startDsr);\n            $(jqIdRef).data('daterangepicker').setStartDate(endDsr);\n            const newDateStr = startDsr.format('MM/DD/YYYY HH:mm') + ' - ' + endDsr.format('MM/DD/YYYY HH:mm');\n            matsParamUtils.setValueTextForParamName(name, newDateStr);\n        } catch (error) {\n            console.log(\"Error in date_range.js.refresh : \" + error.message);\n        }\n    };\n\n// register refresh event for superior to use to enforce a refresh of the options list\n    elem.addEventListener('refresh', function (e) {\n        refresh();\n    });\n    refresh();   // initial value based on what is in the superior\n});\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsTypes } from 'meteor/randyp:mats-common';â€¨\nTemplate.checkboxGroup.helpers({\n    checkedByDefault: function (def) {\n        if (def == this) {\n            return \"checked\";\n        } else {\n           return \"\";\n        }\n    },\n    labelValue: function (optionsMap) {\n        return optionsMap[this];\n    }\n});\n\n// Currently have no checkboxGroup params - this is undoubtedly broken - FIX ME\nTemplate.checkboxGroup.events({\n    'change, blur': function (event) {\n        try {\n            var text = event.currentTarget.value;\n            matsParamUtils.setValueTextForParamName(event.target.name, text);\n        } catch (error) {\n            matsParamUtils.setValueTextForParamName(event.target.name, \"\");\n        }\n    }\n});\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsParamUtils } from 'meteor/randyp:mats-common';\nimport { matsCollections } from 'meteor/randyp:mats-common';\nvar refresh = function(name) {\n    const paramData = matsCollections.CurveParams.findOne({name: name}, {dependentNames: 1, peerName: 1});\n    const optionsMap = paramData.optionsMap;\n    var superiorNames = paramData.superiorNames;\n    var ref = paramData.name + '-' + paramData.type;\n    var refValueDisplay = \"controlButton-\" + paramData.name + \"-value\";\n    var dispElem = document.getElementById(refValueDisplay);\n    var elem = document.getElementById(ref);\n    var dispDefault = paramData.default;\n    var min = paramData.min;\n    var step = paramData.step === undefined ? \"any\" : paramData.step;\n    var max = paramData.max;\n    for (var si =0; si < superiorNames.length; si++) {\n        var superiorElement = matsParamUtils.getInputElementForParamName(superiorNames[si]);\n        var selectedSuperiorValue = superiorElement.options[superiorElement.selectedIndex] && superiorElement.options[superiorElement.selectedIndex].text;\n        const options = optionsMap[selectedSuperiorValue];\n        if (options === undefined) {\n            continue;\n        }\n        min = Number(options.min) < Number(min) ? options.min : min;\n        max = Number(options.max) > Number(max) ? options.max : max;\n        if (step !== \"any\" && options.step !== \"any\") {\n            step = Number(options.step) < Number(step) ? options.step : step;\n        }\n        dispDefault = options.default !== undefined ? options.default : dispDefault;\n    }\n    elem.setAttribute(\"min\", min);\n    elem.setAttribute(\"max\",max);\n    elem.setAttribute(\"step\",step);\n    elem.value = dispDefault;\n};\n\nTemplate.numberSpinner.helpers({\n    defaultValue: function() {\n        return this.default;\n    },\n    min: function() {\n        //default\n        return this.min;\n    },\n    max: function() {\n        //default\n        return this.max;\n    },\n    step: function() {\n        //default\n        return this.step;\n    }\n});\n\nTemplate.numberSpinner.onRendered(function () {\n// register an event listener so that the select.js can ask the map div to refresh after a selection\n    const ref = this.data.name + '-' + this.data.type;\n    const elem = document.getElementById(ref);\n    if (ref.search('axis') === 1) {\n        // this is a \"brother\" (hidden) scatterplot param. There is no need to refresh it or add event listeners etc.\n        return;\n    }\n    elem.addEventListener('refresh', function (e) {\n        refresh(this.name);\n    });\n});\n\n\nTemplate.numberSpinner.events({\n    'change, blur': function (event) {\n        try {\n            event.target.checkValidity();\n            var text = event.currentTarget.value;\n            matsParamUtils.setValueTextForParamName(event.target.name,text);\n        } catch (error){\n            matsParamUtils.setValueTextForParamName(event.target.name, \"\");\n        }\n    }\n});\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsTypes } from 'meteor/randyp:mats-common';â€¨\nTemplate.radioGroup.helpers({\n    checkedByDefault: function (def) {\n        if (def == this) {\n            return \"checked\";\n        } else {\n            return \"\";\n        }\n    },\n    labelValue: function (optionsMap) {\n        return optionsMap[this];\n    }\n});\n\n\n// Currently have no radioGroup params - this is undoubtedly broken - FIX ME\nTemplate.radioGroup.events({\n    'change, blur': function (event) {\n        try {\n            var text = event.currentTarget.value;\n            matsParamUtils.setValueTextForParamName(event.target.name,text);\n        } catch (error){\n            matsParamUtils.setValueTextForParamName(event.target.name, \"\");\n        }\n    }\n});\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsTypes } from 'meteor/randyp:mats-common';\nimport { matsCurveUtils } from  'meteor/randyp:mats-common';\nimport {matsParamUtils } from 'meteor/randyp:mats-common';\nimport {matsCollections } from 'meteor/randyp:mats-common';\n\nTemplate.item.helpers({\n    cbname: function() {\n        if (this.controlButtonText !== undefined) {\n            return this.controlButtonText.toUpperCase();\n        }\n        return this.name.toUpperCase();\n    },\n    textValue: function() {\n        Session.get('lastUpdate');\n        if (this.name === \"label\") {  // label is handled specially\n            return;\n        }\n        if (matsParamUtils.getInputElementForParamName(this.name)) {\n            return this.default;\n        }\n        if (this.value) {\n            return this.value;\n        } else {\n            if (this.type === matsTypes.InputTypes.select && (this.default === -1 || this.default === undefined || this.default === matsTypes.InputTypes.unused)) {\n                return matsTypes.InputTypes.unused;\n            } else {\n                return this.default;\n            }\n        }\n    },\n    hasHelp: function() {\n      return this.help !== undefined;\n    },\n    isSelect: function () {\n        /* A selectOrderEnforced differs from a select\n            only in that the options - other than the default first option -\n            must be chosen in order. In other words if the user attempts to select\n            the second option prior to selecting the first option a validation error occurs.\n         */\n        return ((typeof this.type !== 'undefined') &&\n            ((this.type == matsTypes.InputTypes.select) ||(this.type == matsTypes.InputTypes.selectOrderEnforced)));\n    },\n    isSelectMap: function () {\n        return ((typeof this.type !== 'undefined') && (this.type == matsTypes.InputTypes.selectMap));\n    },\n    isInput: function () {\n        return ((typeof this.type !== 'undefined')  && (this.type == matsTypes.InputTypes.textInput));\n    },\n    isSpinner: function () {\n        return ((typeof this.type !== 'undefined') && (this.type == matsTypes.InputTypes.numberSpinner));\n    },\n    isDateRange: function () {\n        return ((typeof this.type !== 'undefined') && (this.type == matsTypes.InputTypes.dateRange));\n    },\n    isCheckBoxGroup: function () {\n        return ((typeof this.type !== 'undefined') && (this.type == matsTypes.InputTypes.checkBoxGroup));\n    },\n    isRadioGroup: function () {\n        return ((typeof this.type !== 'undefined') && (this.type == matsTypes.InputTypes.radioGroup));\n    },\n    controlButton: function() {\n        return matsTypes.InputTypes.controlButton + \"-\" + this.name;\n    },\n    resetButton: function() {\n        return matsTypes.InputTypes.resetButton + \"-\" + this.type;\n    },\n    element: function() {\n        return matsTypes.InputTypes.element + \"-\" + this.name;\n    },\n    display: function() {\n        if (this.hidden) {\n            return \"none;margin-top: 1.5em;\";\n        }\n        if (this.displayPriority !== undefined && this.displayPriority > Session.get('displayPriority')){\n            return \"none;margin-top: 1.5em;\";\n        }\n        else {\n            return \"block;margin-top: 1.5em;\";\n        }\n    },\n    controlButtonVisibility: function() {\n        if (this.controlButtonCovered) {\n            return \"block;\";\n        } else {\n            return \"none\";\n        }\n    },\n    elementHidden: function() {\n        if (this.controlButtonCovered) {\n            return \"none\";\n        } else {\n            return \"block\";\n        }\n    }\n});\n\nTemplate.item.events({\n    'click .control-button': function (event) {\n        Session.set(\"elementChanged\", Date.now());\n        var elem = document.getElementById(matsTypes.InputTypes.element + \"-\" + this.name);\n        if (elem === undefined) {\n            return false;\n        }\n        if (elem !== null && elem.style.display === \"block\") {\n            elem.style.display = \"none\";\n        } else {\n            matsParamUtils.collapseParams();\n            if (elem !== null) {\n                elem.style.display = \"block\";\n                if (this.type == matsTypes.InputTypes.select) {\n                    var s = document.getElementById(this.name + '-' + this.type);\n                    const ref = \"#\" + this.name + \"-\" + this.type;\n                    $(ref).select2(\"open\");   // need to foricibly open the selector for the select2\n                }\n                if (this.type == matsTypes.InputTypes.selectMap) {\n                    $(\"#mapModal\").modal('show');\n                    window.dispatchEvent(new Event('resize'));\n                }\n            }\n        }\n    },\n    'click .data-input': function (event) {\n        Session.set(\"elementChanged\", Date.now());\n        if (this.displayPriority !== undefined) {\n            Session.set('displayPriority', this.displayPriority + 1);\n        }\n        var formats = Object.keys(matsTypes.PlotFormats);\n        if ($.inArray(this,formats) !== -1){\n            Session.set('diffStatus',this);\n        }\n        if (this.multiple !== true && this.type !== matsTypes.InputTypes.numberSpinner && this.type !== matsTypes.InputTypes.textInput) {\n            // not too cool to collapse when trying to do a multi-select, a textInput, or a numberspinner\n                matsParamUtils.collapseParam(this.name);\n        }\n    },\n    'change .data-input': function (event) {\n        Session.set(\"elementChanged\", Date.now());\n        event.target.checkValidity();\n        if (this.type !== matsTypes.InputTypes.numberSpinner) {\n            event.target.checkValidity();\n            var elem = document.getElementById(matsTypes.InputTypes.element + \"-\" + this.name);\n            if (elem === undefined) {\n                return false;\n            }\n            if (elem !== null && elem.style.display === \"block\" && this.multiple !== true) {\n                elem.style.display = \"none\";\n            } else {\n                if (elem !== null) {\n                    elem.style.display = \"block\";\n                }\n            }\n         }\n        const curveItem = (Session.get(\"editMode\") === undefined && Session.get(\"editMode\") === \"\") ? undefined : document.getElementById(\"curveItem-\" + Session.get(\"editMode\"));\n        if (curveItem) {\n            $('#save').trigger('click');\n        }\n\n    },\n\n    'click .help' : function() {\n        var helpref = Session.get(\"app\").helpref;\n        $(\"#matshelp\").load(helpref + \"/\" + this.help + \" #matshelp\");\n        $(\"#helpModal\").modal('show');\n    },\n    'invalid' : function(event) {\n        if (this.type === matsTypes.InputTypes.numberSpinner) {\n            const param = matsCollections.CurveParams.findOne( {name: event.currentTarget.name} );\n            if (param === undefined) {\n                return;\n            }\n            setError(new Error('invalid value (' + event.currentTarget.value + ') for ' + event.currentTarget.name + \" it must be between \" + event.currentTarget.min + \" and \" + event.currentTarget.max + \" -- resetting to default value: \" + default_value));\n        } else {\n            var errMsg = Session.get('errorMessage');\n            if (errMsg === \"\") {\n                errMsg = 'invalid value (' + event.currentTarget.value + ') for ' + event.currentTarget.name;\n            }\n            setError(new Error(errMsg));\n        }\n        const default_value = matsCollections.CurveParams.findOne( {name: event.currentTarget.name} ).default;\n        event.currentTarget.value = default_value;\n    }\n});\n\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsTypes } from \"meteor/randyp:mats-common\";\nimport { matsCollections } from 'meteor/randyp:mats-common';\nimport { matsCurveUtils } from 'meteor/randyp:mats-common';\nimport { matsPlotUtils } from 'meteor/randyp:mats-common';\nimport { matsParamUtils } from 'meteor/randyp:mats-common';\nlabel;\nTemplate.curveItem.onRendered(function() {\n    // the value used for the colorpicker (l) MUST match the returned value in the colorpick helper\n    label = this.data.label;\n    $(function () {\n        var l = '.' + label + '-colorpick';\n        $(l).colorpicker({format: \"rgb\", align:\"left\"});\n    });\n});\n\nTemplate.curveItem.helpers({\n    removeCurve: function() {\n      var confirmRemoveCurve = Session.get(\"confirmRemoveCurve\");\n      return confirmRemoveCurve ? confirmRemoveCurve.label : null;\n    },\n    displayEditXaxis: function() {\n        if (Session.get('plotType') === matsTypes.PlotTypes.scatter2d) {\n            return \"block\";\n        }\n        return \"none\";\n    },\n    displayEditYaxis: function() {\n        if (Session.get('plotType') === matsTypes.PlotTypes.scatter2d) {\n            return \"block\";\n        }\n        return \"none\";\n    },\n    displayEdit: function() {\n        if (Session.get('plotType') === matsTypes.PlotTypes.scatter2d) {\n            return \"none\";\n        }\n        return \"block\";\n    },\n    colorpick: function() {\n        var l = this.label + '-colorpick';\n        return l;\n    },\n    text: function () {\n        if (this.diffFrom === undefined) {\n            var plotType = Session.get('plotType');\n            if (plotType === undefined) {\n                var pfuncs = matsCollections.PlotGraphFunctions.find({}).fetch();\n                for (var i = 0; i < pfuncs.length; i++) {\n                    if (pfuncs[i].checked === true) {\n                        Session.set('plotType', pfuncs[i].plotType);\n                    }\n                }\n                plotType = Session.get('plotType');\n            }\n            if (this.region) {\n                this.regionName = this.region.split(' ')[0];\n            }\n            return matsPlotUtils.getCurveText(plotType, this);\n        } else {\n            return this.label + \":  Difference\";\n        }\n    },\n    color: function() {\n      return this.color;\n    },\n    label: function() {\n        return this.label;\n    },\n    defaultColor: function() {\n        var curves = Session.get('Curves');\n        var label = this.label;\n        for (var i = 0; i < curves.length; i++) {\n            if (curves[i].label === label) {\n                return curves[i].color;\n            }\n        }\n    },\n    curveNumber: function() {\n        const label = this.label;\n        const curves = Session.get(\"Curves\");\n        const index = curves.findIndex(\n            function(obj){\n                return obj.label === label;\n            }\n        );\n        return index;\n    },\n    log: function() {\n        console.log(this);\n    },\n    DBcurve: function() {\n        return (this.diffFrom === undefined);\n    },\n    editingThis: function() {\n        return (Session.get('editMode') === this.label);\n    },\n    editCurve: function() {\n        return Session.get('editMode');\n    },\n    editTarget: function() {\n        return Session.get(\"eventTargetCurve\");\n    }\n});\n\nconst setParamsToAxis = function(newAxis, currentParams) {\n    // reset scatter plot apply stuff\n    matsCurveUtils.resetScatterApply();\n    // set param values to this curve\n    // reset the form parameters for the superiors first\n    var currentParamName;\n    var params = matsCollections.CurveParams.find({\"dependentNames\" : { \"$exists\" : true }}).fetch();\n    for (var p  = 0; p < params.length; p++) {\n        var plotParam = params[p];\n        // do any date parameters - there are no axis date params in a scatter plot\n        if (plotParam.type === matsTypes.InputTypes.dateRange) {\n            if (currentParams[plotParam.name] === undefined) {\n                continue;   // just like continue\n            }\n            const dateArr = currentParams[plotParam.name].split(' - ');\n            const from = dateArr[0];\n            const to = dateArr[1];\n            const idref = \"#\" + plotParam.name + \"-item\";\n            $(idref).data('daterangepicker').setStartDate(moment (from, 'MM-DD-YYYY HH:mm'));\n            $(idref).data('daterangepicker').setEndDate(moment (to, 'MM-DD-YYYY HH:mm'));\n            matsParamUtils.setValueTextForParamName(plotParam.name,currentParams[plotParam.name]);\n        } else {\n            currentParamName = currentParams[newAxis + \"-\" + plotParam.name] === undefined ?  plotParam.name : newAxis + \"-\" + plotParam.name;\n            const val =  currentParams[currentParamName] === null ||\n            currentParams[currentParamName] === undefined ? matsTypes.InputTypes.unused : currentParams[currentParamName];\n            matsParamUtils.setInputForParamName(plotParam.name, val);\n        }\n    }\n    // now reset the form parameters for the dependents\n    params = matsCollections.CurveParams.find({\"dependentNames\" : { \"$exists\" : false }}).fetch();\n    for (var p  = 0; p < params.length; p++) {\n        var plotParam = params[p];\n        // do any plot date parameters\n        currentParamName = currentParams[newAxis + \"-\" + plotParam.name] === undefined ?  plotParam.name : newAxis + \"-\" + plotParam.name;\n        if (plotParam.type === matsTypes.InputTypes.dateRange) {\n            if (currentParams[currentParamName] === undefined) {\n                continue;   // just like continue\n            }\n            const dateArr = currentParams[currentParamName].split(' - ');\n            const from = dateArr[0];\n            const to = dateArr[1];\n            const idref = \"#\" + plotParam.name + \"-item\";\n            $(idref).data('daterangepicker').setStartDate(moment (from, 'MM-DD-YYYY HH:mm'));\n            $(idref).data('daterangepicker').setEndDate(moment (to, 'MM-DD-YYYY HH:mm'));\n            matsParamUtils.setValueTextForParamName(plotParam.name,currentParams[currentParamName]);\n        } else {\n            const val =  currentParams[currentParamName] === null ||\n            currentParams[currentParamName] === undefined ? matsTypes.InputTypes.unused : currentParams[currentParamName];\n            matsParamUtils.setInputForParamName(plotParam.name, val);\n        }\n    }\n    // reset the scatter parameters\n    params = matsCollections.Scatter2dParams.find({}).fetch();\n    for (var p  = 0; p < params.length; p++) {\n        var plotParam = params[p];\n        currentParamName = currentParams[newAxis + \"-\" + plotParam.name] === undefined ?  plotParam.name : newAxis + \"-\" + plotParam.name;\n        const val =  currentParams[currentParamName] === null ||\n        currentParams[currentParamName] === undefined ? matsTypes.InputTypes.unused : currentParams[currentParamName];\n        matsParamUtils.setInputForParamName(plotParam.name, val);\n    }\n    matsParamUtils.collapseParams();\n    return false;\n\n\n};\n\nvar curveListEditNode;  // used to pass the edit button to the modal continue\nTemplate.curveItem.events({\n    'click .save-changes' : function() {\n        $(\".displayBtn\").css({border:\"\"}); // clear any borders from any display buttons\n        document.getElementById('save').click();\n        Session.set(\"paramWellColor\",\"#f5f5f5\");\n    },\n    'click .cancel' : function() {\n        $(\".displayBtn\").css({border: \"\"}); // clear any borders from any display buttons\n        document.getElementById('cancel').click();\n        Session.set(\"paramWellColor\",\"#f5f5f5\");\n    },\n    'click .remove-curve': function (event) {\n        var removeCurve = Session.get(\"confirmRemoveCurve\");\n        if (removeCurve && removeCurve.confirm) {\n            var label = removeCurve.label;\n            var color = removeCurve.color;\n            var Curves = _.reject(Session.get('Curves'), function (item) {\n                return item.label === label\n            });\n            Session.set('Curves', Curves);\n            matsCurveUtils.clearUsedLabel(label);\n            matsCurveUtils.clearUsedColor(color);\n            matsCurveUtils.checkDiffs();\n            Session.set(\"confirmRemoveCurve\",\"\");\n            Session.set(\"lastUpdate\", Date.now());\n            if (Curves.length === 0) {\n                location.reload(true);\n            }\n            return false;\n        } else{\n            Session.set(\"confirmRemoveCurve\",{label:this.label,color:this.color});\n            $(\"#modal-confirm-remove-curve\").modal();\n        }\n    },\n    'click .confirm-remove-curve': function () {\n        var confirmCurve = Session.get(\"confirmRemoveCurve\");\n        Session.set(\"confirmRemoveCurve\", {label:confirmCurve.label,color:confirmCurve.color,confirm:true});\n        $(\"#curve-list-remove\").trigger('click');\n    },\n    'click .edit-curve-xaxis': function(event) {\n        Session.set('axis','xaxis');\n        Session.set('editMode', this.label);\n        var currentParams = jQuery.extend({}, this);\n        setParamsToAxis('xaxis', currentParams);\n    },\n    'click .edit-curve-yaxis': function(event) {\n        Session.set('axis','yaxis');\n        Session.set('editMode', this.label);\n        var currentParams = jQuery.extend({}, this);\n        setParamsToAxis('yaxis',currentParams);\n    },\n    'click .edit-curve': function (event) {\n        const srcEditButton = event.currentTarget;\n        const name = srcEditButton.name;\n        const editingCurve = Session.get('editMode');\n        curveListEditNode = $(event.currentTarget.parentNode.parentNode.parentNode.parentNode).find(\"#curve-list-edit\");\n        const eventTargetCurve = $(event.currentTarget.parentNode.parentNode.parentNode).find(\".displayItemLabelSpan\").text().trim();\n        Session.set(\"eventTargetCurve\",eventTargetCurve);\n        Session.set(\"intendedActiveDisplayButton\",name);\n        Session.set(\"activeDisplayButton\",name);\n        if(editingCurve !== undefined && editingCurve !== \"\" && editingCurve !== eventTargetCurve) {\n            // editing a different curve // have to do the modal for confirmation\n            $(\"#confirm-lost-edits\").modal();\n            return;\n        }\n        Session.set('editMode', this.label);\n        // reset scatter plot apply stuff\n        matsCurveUtils.resetScatterApply();\n        // capture the current parameters from the curveItem\n        var currentParams = jQuery.extend({}, this);\n        // set param values to this curve\n        // reset the form parameters for the superiors first\n        var params = matsCollections.CurveParams.find({\"dependentNames\" : { \"$exists\" : true }}).fetch();\n        for (var p  = 0; p < params.length; p++) {\n            var plotParam = params[p];\n            // do any curve date parameters\n            if (plotParam.type === matsTypes.InputTypes.dateRange) {\n                if (currentParams[plotParam.name] === undefined) {\n                    continue;   // just like continue\n                }\n                const dateArr = currentParams[plotParam.name].split(' - ');\n                const from = dateArr[0];\n                const to = dateArr[1];\n                const idref = \"#\" + plotParam.name + \"-item\";\n                $(idref).data('daterangepicker').setStartDate(moment (from, 'MM-DD-YYYY HH:mm'));\n                $(idref).data('daterangepicker').setEndDate(moment (to, 'MM-DD-YYYY HH:mm'));\n                matsParamUtils.setValueTextForParamName(plotParam.name,currentParams[plotParam.name]);\n            } else {\n                var val =  currentParams[plotParam.name] === null ||\n                currentParams[plotParam.name] === undefined ? matsTypes.InputTypes.unused : currentParams[plotParam.name];\n                matsParamUtils.setInputForParamName(plotParam.name, val);\n                // refresh its dependents\n                matsSelectUtils.refreshDependents(null,plotParam);\n            }\n        }\n        // now reset the form parameters for anything with hide/disable controls\n        params = matsCollections.CurveParams.find({\"$and\" : [{ \"dependentNames\" : { \"$exists\" : false }}, {\"$or\" : [{ \"hideOtherFor\" : { \"$exists\" : true }}, { \"disableOtherFor\" : { \"$exists\" : true }}]}]}).fetch();\n        for (var p  = 0; p < params.length; p++) {\n            var plotParam = params[p];\n            // do any plot date parameters\n            if (plotParam.type === matsTypes.InputTypes.dateRange) {\n                if (currentParams[plotParam.name] === undefined) {\n                    continue;   // just like continue\n                }\n                const dateArr = currentParams[plotParam.name].split(' - ');\n                const from = dateArr[0];\n                const to = dateArr[1];\n                const idref = \"#\" + plotParam.name + \"-item\";\n                $(idref).data('daterangepicker').setStartDate(moment (from, 'MM-DD-YYYY HH:mm'));\n                $(idref).data('daterangepicker').setEndDate(moment (to, 'MM-DD-YYYY HH:mm'));\n                matsParamUtils.setValueTextForParamName(plotParam.name,currentParams[plotParam.name]);\n            } else {\n                var val =  currentParams[plotParam.name] === null ||\n                currentParams[plotParam.name] === undefined ? matsTypes.InputTypes.unused : currentParams[plotParam.name];\n                matsParamUtils.setInputForParamName(plotParam.name, val);\n            }\n        }\n        // now reset the form parameters for everything else\n        params = matsCollections.CurveParams.find({\"$and\" : [{ \"dependentNames\" : { \"$exists\" : false }}, {\"$and\" : [{ \"hideOtherFor\" : { \"$exists\" : false }}, { \"disableOtherFor\" : { \"$exists\" : false }}]}]}).fetch();\n        for (var p  = 0; p < params.length; p++) {\n            var plotParam = params[p];\n            // do any plot date parameters\n            if (plotParam.type === matsTypes.InputTypes.dateRange) {\n                if (currentParams[plotParam.name] === undefined) {\n                    continue;   // just like continue\n                }\n                const dateArr = currentParams[plotParam.name].split(' - ');\n                const from = dateArr[0];\n                const to = dateArr[1];\n                const idref = \"#\" + plotParam.name + \"-item\";\n                $(idref).data('daterangepicker').setStartDate(moment (from, 'MM-DD-YYYY HH:mm'));\n                $(idref).data('daterangepicker').setEndDate(moment (to, 'MM-DD-YYYY HH:mm'));\n                matsParamUtils.setValueTextForParamName(plotParam.name,currentParams[plotParam.name]);\n            } else {\n                var val =  currentParams[plotParam.name] === null ||\n                currentParams[plotParam.name] === undefined ? matsTypes.InputTypes.unused : currentParams[plotParam.name];\n                matsParamUtils.setInputForParamName(plotParam.name, val);\n            }\n        }\n        // reset the scatter parameters\n        params = matsCollections.Scatter2dParams.find({}).fetch();\n        for (var p  = 0; p < params.length; p++) {\n            var plotParam = params[p];\n            const val =  currentParams[plotParam.name] === null ||\n            currentParams[plotParam.name] === undefined ? matsTypes.InputTypes.unused : currentParams[plotParam.name];\n            matsParamUtils.setInputForParamName(plotParam.name, val);\n        }\n        matsParamUtils.collapseParams();\n        return false;\n    },\n    'hidePicker': function() {\n        var Curves = Session.get('Curves');\n        var label = this.label;\n        for (var i = 0; i < Curves.length; i++) {\n            if (label === Curves[i].label) {\n                Curves[i].color = document.getElementById(label + \"-color-value\").value;\n            }\n        }\n        Session.set('Curves',Curves);\n        return false;\n    },\n    'click .displayBtn': function (event) {\n        const srcDisplayButton = event.currentTarget;\n        const name = srcDisplayButton.name;\n        const inputElem = matsParamUtils.getInputElementForParamName(name);\n        const controlElem = matsParamUtils.getControlElementForParamName(name);\n        const editingCurve = Session.get('editMode');\n        if (name.startsWith('xaxis')) {\n            curveListEditNode = $(event.currentTarget.parentNode.parentNode.parentNode.parentNode).find(\"#curve-list-edit-xaxis\");\n        } else if (name.startsWith('yaxis')) {\n            curveListEditNode = $(event.currentTarget.parentNode.parentNode.parentNode.parentNode).find(\"#curve-list-edit-yaxis\");\n        } else {\n            if (matsPlotUtils.getPlotType() === matsTypes.PlotTypes.scatter2d) {\n                // for a scatter param that is not axis specific we still have to choos an axis - just choose x\n                curveListEditNode = $(event.currentTarget.parentNode.parentNode.parentNode.parentNode).find(\"#curve-list-edit-xaxis\");\n            } else {\n                curveListEditNode = $(event.currentTarget.parentNode.parentNode.parentNode.parentNode).find(\"#curve-list-edit\");\n            }\n        }\n        const eventTargetCurve = $(event.currentTarget.parentNode.parentNode.parentNode).find(\".displayItemLabelSpan\").text().trim();\n        Session.set(\"eventTargetCurve\",eventTargetCurve);\n        Session.set(\"intendedActiveDisplayButton\",name);\n        Session.set(\"activeDisplayButton\",name);\n        if(editingCurve !== undefined && editingCurve !== \"\" && editingCurve !== eventTargetCurve) {\n            // editing a different curve // have to do the modal for confirmation\n            $(\"#confirm-lost-edits\").modal();\n            return;\n        }\n        inputElem && inputElem.focus();\n        curveListEditNode.click();\n        controlElem && controlElem.click();\n        Session.set(\"elementChanged\", Date.now());\n    },\n    'click .continue-lose-edits': function() {\n        const intendedName = Session.get(\"intendedActiveDisplayButton\");\n        var activeDisplayButton = Session.set(\"activeDisplayButton\", intendedName);\n        document.getElementById('cancel').click();\n        Session.set(\"paramWellColor\", \"#f5f5f5\");\n        const controlElem = matsParamUtils.getControlElementForParamName(intendedName);\n        const inputElem = matsParamUtils.getInputElementForParamName(intendedName);\n        inputElem && inputElem.focus();\n        curveListEditNode.click();\n        controlElem && controlElem.click();\n        Session.set(\"elementChanged\", Date.now());\n    },\n    'click .cancle-lose-edits': function() {\n        // don't change the active button\n        const name = Session.get(\"activeDisplayButton\");\n        const controlElem = matsParamUtils.getControlElementForParamName(name);\n        const inputElem = matsParamUtils.getInputElementForParamName(name);\n        inputElem && inputElem.focus();\n        controlElem && controlElem.click();\n        Session.set(\"elementChanged\", Date.now());\n    },\n    'click .fa-paint-brush': function() {\n        $(\"#\" + this.label + \"-color-value\").trigger('click');\n    }\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsTypes } from 'meteor/randyp:mats-common';\nâ€¨import { matsCollections } from 'meteor/randyp:mats-common';\nimport { matsPlotUtils } from 'meteor/randyp:mats-common';\nimport { matsParamUtils } from 'meteor/randyp:mats-common';\nvar allGroups = {};\nTemplate.curveParamItemGroup.helpers({\n    curveParamGroups: function (c) {\n        const label = c.label;\n        const curves = Session.get(\"Curves\");\n        const index = curves.findIndex(\n           function(obj){\n               return obj.label === label;\n           }\n        );\n\n        // create a set of groups each with an array of 6 params for display\n        const lastUpdate = Session.get('lastUpdate');\n        const plotType = matsPlotUtils.getPlotType();\n        var elmementValues = matsParamUtils.getElementValues().curveParams;\n        // derive the sorted pValues, xpValues, and ypValues from the sorted params and the elementValues\n        var pValues = [];\n        var pattern;\n        switch (plotType) {\n            case matsTypes.PlotTypes.profile:\n                pattern = matsCollections.CurveTextPatterns.findOne({plotType: matsTypes.PlotTypes.profile});\n                break;\n            case matsTypes.PlotTypes.dieoff:\n                pattern = matsCollections.CurveTextPatterns.findOne({plotType: matsTypes.PlotTypes.dieoff});\n                break;\n            case matsTypes.PlotTypes.threshold:\n                pattern = matsCollections.CurveTextPatterns.findOne({plotType: matsTypes.PlotTypes.threshold});\n                break;\n            case matsTypes.PlotTypes.validtime:\n                pattern = matsCollections.CurveTextPatterns.findOne({plotType: matsTypes.PlotTypes.validtime});\n                break;\n            case matsTypes.PlotTypes.dailyModelCycle:\n                pattern = matsCollections.CurveTextPatterns.findOne({plotType: matsTypes.PlotTypes.dailyModelCycle});\n                break;\n            case matsTypes.PlotTypes.reliability:\n                pattern = matsCollections.CurveTextPatterns.findOne({plotType: matsTypes.PlotTypes.reliability});\n                break;\n            case matsTypes.PlotTypes.map:\n                pattern = matsCollections.CurveTextPatterns.findOne({plotType: matsTypes.PlotTypes.map});\n                break;\n            case matsTypes.PlotTypes.histogram:\n                pattern = matsCollections.CurveTextPatterns.findOne({plotType: matsTypes.PlotTypes.histogram});\n                break;\n            case matsTypes.PlotTypes.contour:\n                pattern = matsCollections.CurveTextPatterns.findOne({plotType: matsTypes.PlotTypes.contour});\n                break;\n            case matsTypes.PlotTypes.contourDiff:\n                pattern = matsCollections.CurveTextPatterns.findOne({plotType: matsTypes.PlotTypes.contourDiff});\n                break;\n            case matsTypes.PlotTypes.scatter2d:\n                pattern = matsCollections.CurveTextPatterns.findOne({plotType: matsTypes.PlotTypes.scatter2d});\n                break;\n            case matsTypes.PlotTypes.timeSeries:\n            default:\n                pattern = matsCollections.CurveTextPatterns.findOne({plotType: matsTypes.PlotTypes.timeSeries});\n                break;\n        }\n        const groupSize = pattern.groupSize;\n        const displayParams = pattern.displayParams;\n        for (var di=0; di < displayParams.length;di++) {\n            pValues.push({name: displayParams[di], value: c[displayParams[di]], color:c.color, curve:c.label, index:index});\n        }\n\n        // create array of parameter value display groups each of groupSize\n        var pGroups = [];\n        var groupParams = [];\n        var pvi = 0;\n        while (pvi < pValues.length) {\n            if (pValues[pvi] && (pValues[pvi].name == 'xaxis' || pValues[pvi].name == 'yaxis')) {\n                if (groupParams.length > 0) {\n                    // finish the old group and make a new group for 'xaxis' or 'yaxis'\n                    pGroups.push(groupParams);\n                }\n                groupParams = [];\n            }\n            pValues[pvi] && groupParams.push(pValues[pvi]);\n            if (groupParams.length >= groupSize) {\n                pGroups.push(groupParams);\n                groupParams = [];\n            }\n            pvi++;\n        }\n        // check for a partial last group\n        if (groupParams.length > 0) {\n            pGroups.push(groupParams);\n        }\n        allGroups[c.label] = pGroups;\n        return pGroups;\n    },\n    curveNumber: function(elem) {\n        return elem.index;\n    },\n    curveParams: function(paramGroup) {\n      return paramGroup;\n    },\n    label: function(elem) {\n        if (matsPlotUtils.getPlotType() === matsTypes.PlotTypes.scatter2d) {\n            const pNameArr = elem.name.match(/([xy]axis-)(.*)/);\n            if (pNameArr === null) {\n                return elem.name.toUpperCase();\n            }\n            const prefix = pNameArr[1];\n            const pName = pNameArr[2];\n            const p = matsCollections.CurveParams.findOne({name:pName});\n            if (p.controlButtonText) {\n                return (prefix + p.controlButtonText).toUpperCase();\n            } else {\n                return elem.name.toUpperCase();\n            }\n        } else {\n            const p = matsCollections.CurveParams.findOne({name:elem.name});\n            if (p.controlButtonText) {\n                return p.controlButtonText.toUpperCase();\n            } else {\n                return elem.name.toUpperCase();\n            }\n        }\n        // should never get here\n        return elem.name.toUpperCase();\n    },\n    name: function(elem){\n        return elem.name;\n    },\n    id: function(elem){\n        return elem.name;\n    },\n    buttonId: function(elem) {\n        const name = new String(elem.name);\n        const upperName = name.toUpperCase();\n        const curveNumber = elem.index;\n        const spanId = upperName + \"-curve-\" + curveNumber + \"-Button\";\n        return spanId;\n    },\n    spanId: function(elem) {\n        const name = new String(elem.name);\n        const upperName = name.toUpperCase();\n        const curveNumber = elem.index;\n        const spanId = upperName + \"-curve-\" + curveNumber + \"-Item\";\n        return spanId;\n    },\n    value: function(elem){\n        // have to get this from the session\n        const curve = Session.get(\"Curves\")[elem.index];\n        if (curve === undefined) {\n            return \"\";\n        }\n        var value = curve[elem.name];\n        var text = \"\";\n        if ( Object.prototype.toString.call( value ) === '[object Array]' ) {\n            if (value.length === 1) {\n                text = value[0];\n            } else if (value.length > 1){\n                text = value[0] + \" .. \" + value[value.length -1];\n            }\n        } else {\n            text = value;\n        }\n        return text;\n    },\n    defaultColor: function(elem){\n        return elem.color;\n    },\n    border: function(elem) {\n        var elementChanged = Session.get(\"elementChanged\");\n        const name = elem.name; // for xaxis params\n        const curve = elem.curve;\n        const adb = (name === Session.get(\"activeDisplayButton\"));\n        const isEditMode = (curve === Session.get(\"editMode\"));\n        const inputElemIsVisible = matsParamUtils.isInputElementVisible(name);\n        if (adb && isEditMode &&  inputElemIsVisible) {\n            return \"solid\";\n        }\n        return \"\";\n    },\n    editCurve: function() {\n        return Session.get('editMode');\n    },\n    editTarget: function() {\n        return Session.get(\"eventTargetCurve\");\n    },\n    displayParam: function(elem) {\n        if (elem.name === \"label\") {\n            return \"none\";\n        }\n        // it isn't good enough to just check the item control button. Need to evaluate the hideOtherFor functionality with\n        // respect to this particular curve item\n        // First - determine if my visibility is controlled by another\n        const visibilityControllingParam = matsParamUtils.visibilityControllerForParam(elem.name);\n        // Second - Check the hide/show state based on the parameter hideOtherFor map in the parameter nad the state of this particular curve\n        if (visibilityControllingParam !== undefined) {\n            const curve = Session.get(\"Curves\")[elem.index];\n            const hideOtherFor = visibilityControllingParam.hideOtherFor[elem.name][0];\n            if (curve!== undefined && visibilityControllingParam !== undefined && curve[visibilityControllingParam.name] !== undefined && curve[visibilityControllingParam.name] === hideOtherFor) {\n                return \"none\";\n            }\n        }\n        return \"block\";\n    }\n});\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsTypes} from \"meteor/randyp:mats-common\";\nimport {matsCollections} from \"meteor/randyp:mats-common\";\nimport {matsMethods} from \"meteor/randyp:mats-common\";\nimport {matsCurveUtils} from 'meteor/randyp:mats-common';\nimport {matsPlotUtils} from 'meteor/randyp:mats-common';\nimport {matsParamUtils} from 'meteor/randyp:mats-common';\n\nTemplate.curveList.helpers({\n    displayPlotUnMatched: function() {\n        // scatter plots can't match\n        if (Session.get('plotType') === matsTypes.PlotTypes.scatter2d) {\n            return \"none\";\n        }\n        // don't allow plotting when editing\n        const mode = Session.get(\"editMode\");\n        if (mode === undefined || mode === \"\") {\n            return \"block\";\n        } else {\n            return \"none\";\n        }\n    },\n    displayPlotMatched: function() {\n        // don't allow plotting when editing\n        const mode = Session.get(\"editMode\");\n        if (mode === undefined || mode === \"\") {\n            return \"block\";\n        } else {\n            return \"none\";\n        }\n    },\n    displaySaveSettings: function() {\n        // don't allow saving settings when editing\n        const mode = Session.get(\"editMode\");\n        if (mode === undefined || mode === \"\") {\n            return \"block\";\n        } else {\n            return \"none\";\n        }\n    },\n    curves: function () {\n        return Session.get('Curves');\n    },\n    displayCurves: function () {\n        if (Session.get('Curves') === undefined || Session.get('Curves').length === 0) {\n            return \"none\";\n        } else {\n            return \"block\";\n        }\n    },\n    log: function () {\n        console.log(this);\n    },\n    averagesDisabled: function () {\n        var curves = Session.get('Curves');\n        if (curves === undefined || curves.length == 0 || (Session.get('plotType') !== matsTypes.PlotTypes.timeSeries)) {\n            return \"\";\n        }\n        var average = curves[0].average;\n        for (var i = 0; i < curves.length; i++) {\n            if (average != curves[i].average) {\n                return \"disabled\";\n            }\n        }\n    },\n    disabledPlotsHidden: function () {\n        var curves = Session.get('Curves');\n        if (curves === undefined || curves.length == 0 || (Session.get('plotType') !== matsTypes.PlotTypes.timeSeries)) {\n            return \"none\";\n        }\n        var average = curves[0].average;\n        for (var i = 0; i < curves.length; i++) {\n            if (average != curves[i].average) {\n                return \"block\";\n            }\n        }\n        return \"none\"\n    },\n    identicalContourDisabled: function () {\n        var curves = Session.get('Curves');\n        if (curves === undefined || curves.length == 0 || (Session.get('plotType') !== matsTypes.PlotTypes.contour)) {\n            return \"\";\n        }\n        var xAxis = curves[0]['x-axis-parameter'];\n        var yAxis = curves[0]['y-axis-parameter'];\n        if (xAxis === yAxis) {\n            return \"disabled\";\n        }\n        return \"\";\n    },\n    identicalContourHidden: function () {\n        var curves = Session.get('Curves');\n        if (curves === undefined || curves.length == 0 || (Session.get('plotType') !== matsTypes.PlotTypes.contour)) {\n            return \"none\";\n        }\n        var xAxis = curves[0]['x-axis-parameter'];\n        var yAxis = curves[0]['y-axis-parameter'];\n        if (xAxis === yAxis) {\n            return \"block\";\n        }\n        return \"none\"\n    },\n    mismatchContourDiffDisabled: function () {\n        var curves = Session.get('Curves');\n        if (curves === undefined || curves.length < 2 || (Session.get('plotType') !== matsTypes.PlotTypes.contourDiff)) {\n            return \"\";\n        }\n        var xAxis0 = curves[0]['x-axis-parameter'];\n        var yAxis0 = curves[0]['y-axis-parameter'];\n        var xAxis1 = curves[1]['x-axis-parameter'];\n        var yAxis1 = curves[1]['y-axis-parameter'];\n        if (xAxis0 !== xAxis1 || yAxis0 !== yAxis1) {\n            return \"disabled\";\n        }\n        return \"\";\n    },\n    mismatchContourDiffHidden: function () {\n        var curves = Session.get('Curves');\n        if (curves === undefined || curves.length < 2 || (Session.get('plotType') !== matsTypes.PlotTypes.contourDiff)) {\n            return \"none\";\n        }\n        var xAxis0 = curves[0]['x-axis-parameter'];\n        var yAxis0 = curves[0]['y-axis-parameter'];\n        var xAxis1 = curves[1]['x-axis-parameter'];\n        var yAxis1 = curves[1]['y-axis-parameter'];\n        if (xAxis0 !== xAxis1 || yAxis0 !== yAxis1) {\n            return \"block\";\n        }\n        return \"none\"\n    },\n    editMode: function() {\n        if (Session.get('editMode') === '') {\n            return '';\n        } else {\n            return \"Changing \" + Session.get('editMode');\n        }\n    },\n    matchedLabel: function() {\n        if (Session.get('matchName'  === undefined)) {\n            if (setMatchName) {\n                setMatchName();\n            } else {\n                Session.set('matchName','plot matched');\n            }\n        } else {\n            Session.set('matchName','plot matched');\n        }\n        return Session.get('matchName');\n    }\n});\n\nTemplate.curveList.events({\n    'click .remove-all': function () {\n        if (Session.get(\"confirmRemoveAll\")) {\n            matsCurveUtils.clearAllUsed();\n            matsParamUtils.setAllParamsToDefault();\n            Session.set(\"editMode\", \"\");\n            Session.set(\"paramWellColor\", \"#f5f5f5\");  // default grey\n            Session.set(\"lastUpdate\", Date.now());\n            Session.set(\"confirmRemoveAll\",\"\");\n            return false;\n        } else {\n            if (Session.get(\"Curves\").length > 0 ) {\n                $(\"#modal-confirm-remove-all\").modal();\n            }\n        }\n    },\n    'click .confirm-remove-all': function () {\n        Session.set(\"confirmRemoveAll\", Date.now());\n        $(\"#remove-all\").trigger('click');\n    },\n    'click .plot-curves-unmatched': function (event) {\n        document.getElementById(\"spinner\").style.display = \"block\";\n        matsPlotUtils.disableActionButtons();\n        event.preventDefault();\n        // trigger the submit on the plot_list plot_list.js - click .submit-params\n        Session.set('plotParameter', matsTypes.PlotActions.unmatched);\n        document.getElementById(\"plot-curves\").click();\n        return false;\n    },\n    'click .plot-curves-matched': function (event) {\n        document.getElementById(\"spinner\").style.display = \"block\";\n        matsPlotUtils.disableActionButtons();\n        event.preventDefault();\n        // trigger the submit on the plot_list plot_list.js - click .submit-params\n        Session.set('plotParameter', matsTypes.PlotActions.matched);\n        document.getElementById(\"plot-curves\").click();\n        return false;\n    },\n    'click .save-settings': function (event) {\n        event.preventDefault();\n        document.getElementById(\"save-settings\").click();\n        return false;\n    }\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsTypes} from 'meteor/randyp:mats-common';\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport {matsCurveUtils} from 'meteor/randyp:mats-common';\nimport {matsPlotUtils} from 'meteor/randyp:mats-common';\nimport {matsParamUtils} from 'meteor/randyp:mats-common';\nimport {matsMethods} from 'meteor/randyp:mats-common';\n\nfunction shadeRGBColor(color, percent) {\n    var f = color.split(\",\"), t = percent < 0 ? 0 : 255, p = percent < 0 ? percent * -1 : percent,\n        R = parseInt(f[0].slice(4)), G = parseInt(f[1]), B = parseInt(f[2]);\n    return \"rgb(\" + (Math.round((t - R) * p) + R) + \",\" + (Math.round((t - G) * p) + G) + \",\" + (Math.round((t - B) * p) + B) + \")\";\n}\n\nTemplate.paramList.helpers({\n    CurveParamGroups: function () {\n        var lastUpdate = Session.get('lastUpdate');\n        var groupNums = [];\n        var params = matsCollections.CurveParams.find({}).fetch();\n        for (var i = 0; i < params.length; i++) {\n            groupNums.push(params[i].displayGroup);\n        }\n        var res = _.uniq(groupNums).sort();\n        return res;\n    },\n    isEdit: function () {\n        return Session.get('editMode') != '';\n    },\n    log: function () {\n        console.log(this);\n    },\n    paramWellColor: function () {\n        if (Session.get(\"paramWellColor\") === undefined) {\n            Session.set(\"paramWellColor\", \"rgb(245,245,245)\");\n        }\n        if (Session.get(\"editMode\") !== \"\") {\n            const curveBeingEdited = $.grep(Session.get(\"Curves\"), function (c) {\n                return c.label == Session.get(\"editMode\");\n            });\n            if (curveBeingEdited === undefined || curveBeingEdited[0] === undefined) {\n                Session.set(\"paramWellColor\", \"rgb(245,245,245)\");\n                return \"rgb(245,245,245)\";\n            }\n            const color = curveBeingEdited[0].color;\n            const lighterShadeOfColor = shadeRGBColor(color, 0.2);\n            Session.set(\"paramWellColor\", lighterShadeOfColor);\n        }\n\n        return Session.get(\"paramWellColor\");\n    }\n});\n\nTemplate.paramList.events({\n    'click .edit-cancel': function () {\n        Session.set('editMode', '');\n        Session.set(\"paramWellColor\", \"rgb(245,245,245)\");\n        var labelId = 'label-' + matsTypes.InputTypes.textInput;\n        var label = document.getElementById(labelId);\n        label.disabled = false;\n        // reset parameters to match edited curve.....\n        matsParamUtils.setInputForParamName('label', matsCurveUtils.getNextCurveLabel());\n        matsParamUtils.collapseParams();\n    },\n    'click .reset': function (event, template) {\n        const plotType = $('input[name=plot-type]:checked').val();\n        event.preventDefault();\n        Session.set(\"paramWellColor\", \"rgb(245,245,245)\");\n        var paramView = document.getElementById('paramList');\n        var plotView = document.getElementById('plotList');\n        document.getElementById('plot-type-' + plotType).checked = true;\n        matsMethods.refreshMetaData.call({}, function (error, result) {\n            if (error !== undefined) {\n                setError(new Error(error.message));\n            }\n            matsParamUtils.setAllParamsToDefault();\n        });\n    },\n    'click .expand': function () {\n        matsParamUtils.expandParams();\n    },\n    'click .collapse': function () {\n        matsParamUtils.collapseParams();\n    },\n    // restore settings\n    'click .restore-settings': function (event) {\n        Session.set(\"paramWellColor\", \"rgb(245,245,245)\");\n        event.preventDefault();\n        document.getElementById(\"restore-settings\").click();\n        return false;\n    },\n    // add curve\n    // save changes\n    /*\n        Note: when adding a curve or saving changes after editing a curve there is a special\n        case for scatter plots. Each hidden axis parameter must get set with the value from the regular parameter.\n     */\n    'submit form': function (event, template) {\n        event.preventDefault();\n        if (!matsParamUtils.getValueForParamName('label')) {\n            setError('Label cannot be blank');\n            return;\n        }\n        var isScatter = matsPlotUtils.getPlotType() === matsTypes.PlotTypes.scatter2d;\n        var isMap = matsPlotUtils.getPlotType() === matsTypes.PlotTypes.map;\n        var isReliability = matsPlotUtils.getPlotType() === matsTypes.PlotTypes.reliability;\n        var isContour = matsPlotUtils.getPlotType() === matsTypes.PlotTypes.contour;\n        var isContourDiff = matsPlotUtils.getPlotType() === matsTypes.PlotTypes.contourDiff;\n        var curves = Session.get('Curves');\n        var p = {};\n        var elems = event.target.valueOf().elements;\n        var curveParams = matsCollections.CurveParams.find({}, {fields: {name: 1}}).fetch();\n        var curveNames = _.pluck(curveParams, \"name\");\n        // remove any hidden params or unused ones\n        // iterate backwards so that we can splice to remove\n        for (var cindex = curveNames.length - 1; cindex >= 0; cindex--) {\n            var cname = curveNames[cindex];\n            var ctlElem = document.getElementById(cname + \"-item\");\n            var isHidden = (matsParamUtils.getInputElementForParamName(cname) &&\n                matsParamUtils.getInputElementForParamName(cname).style &&\n                matsParamUtils.getInputElementForParamName(cname).style.display === 'none') ||\n                (ctlElem && ctlElem.style && ctlElem.style.display === 'none');\n            var isUnused = matsParamUtils.getInputElementForParamName(cname) !== undefined &&\n                matsParamUtils.getValueForParamName(cname) == matsTypes.InputTypes.unused;\n            if (isHidden || isUnused) {\n                //if (isHidden) {\n                curveNames.splice(cindex, 1);\n            }\n        }\n\n        var dateParams = matsCollections.CurveParams.find({type: matsTypes.InputTypes.dateRange}, {fields: {name: 1}}).fetch();\n        var dateParamNames = _.pluck(dateParams, \"name\");\n        // remove any hidden date params or unused ones\n        // iterate backwards so that we can splice to remove\n        // dates are a little different - there is no element named paramName-paramtype because of the way daterange widgets are attached\n        // Instead we have to look for a document element with an id element-paramName\n        for (var dindex = dateParamNames.length - 1; dindex >= 0; dindex--) {\n            var dElem = document.getElementById(dateParamNames[dindex] + \"-item\");\n            if (dElem && dElem.style && dElem.style.display === 'none') {\n                dateParamNames.splice(dindex, 1);\n            }\n        }\n        if (isScatter) {\n            var scatterCurveNames = [];\n            for (var i = 0; i < curveNames.length; i++) {\n                scatterCurveNames.push(curveNames[i]);\n                scatterCurveNames.push(\"xaxis-\" + curveNames[i]);\n                scatterCurveNames.push(\"yaxis-\" + curveNames[i]);\n            }\n            curveNames = scatterCurveNames;\n        }\n        var paramElems = _.filter(elems, function (elem) {\n            return _.contains(curveNames, elem.name);\n        });\n        // add in any date params (they aren't technically elements)\n        paramElems.push.apply(paramElems, dateParamNames);\n        // add in the scatter2d parameters if it is a scatter plot.\n        if (isScatter) {\n            $(\":input[id^='Fit-Type']:input[name*='Fit-Type']\").each(function () {\n                paramElems.push(this);\n            });\n        }\n        var l = paramElems.length;\n        if (Session.get('editMode')) {\n            var changingCurveLabel = Session.get('editMode');\n            Session.set('editMode', '');\n            Session.set(\"paramWellColor\", \"rgb(245,245,245)\");\n            var labelId = 'label-' + matsTypes.InputTypes.textInput;\n            var label = document.getElementById(labelId);\n            label.disabled = false;\n\n            for (var i = 0; i < l; i++) {\n                if (paramElems[i].name == \"label\") {\n                    p[paramElems[i].name] = changingCurveLabel;  // don't change the label when editing a curve\n                    continue;\n                }\n                if ((paramElems[i] instanceof Element) === false) { // isn't really an element - must be a date field - these are only strings\n                    p[paramElems[i]] = matsParamUtils.getValueForParamName(paramElems[i]);\n                } else if (paramElems[i].type === \"select-multiple\") {\n                    // define a p value if it doesn't exist (necessary for adding truth values)\n                    p[paramElems[i].name] = (p[paramElems[i].name] === undefined) ? \"\" : p[paramElems[i].name];\n                    p[paramElems[i].name] = $(paramElems[i].selectedOptions).map(function () {\n                        return (this.value)\n                    }).get();\n                } else {\n                    if (paramElems[i].type === \"radio\") {\n                        if (paramElems[i].checked) {\n                            p[paramElems[i].name] = paramElems[i].value;\n                        }\n                    } else if (paramElems[i].type === \"checkbox\") {\n                        if (paramElems[i].checked) {\n                            p[paramElems[i].name].push(paramElems[i].value);\n                        }\n                    } else if (paramElems[i].type === \"button\") {\n                        p[paramElems[i].id] = paramElems[i].value;\n                    } else {\n                        p[paramElems[i].name] = (paramElems[i]).value;\n                    }\n                }\n            }\n            var index = -1;\n            for (var i = 0; i < curves.length; i++) {\n                if (curves[i].label === p.label) {\n                    index = i;\n                    p.color = curves[i].color;\n                }\n            }\n            if (index != -1) {\n                if (isScatter) {\n                    // copy the params to the current axis paremeters\n                    var axis = Session.get('axis');\n                    var axisParams = (Object.keys(p)).filter(function (key) {\n                        return key.startsWith(axis)\n                    });\n                    for (var api = 0; api < axisParams.length; api++) {\n                        var ap = axisParams[api];\n                        var pp = ap.replace(axis + '-', '');\n                        p[ap] = p[pp];\n                        curves[index][ap] = p[pp];\n                    }\n                    curves[index]['Fit-Type'] = p['Fit-Type'];\n                } else {\n                    curves[index] = p;\n                }\n            }\n        } else {\n            if (isMap && curves.length >= 1) {\n                setError(new Error('ERROR: Map plot-type can only have one curve!'));\n                return false;\n            } else if (isContour && curves.length >= 1) {\n                setError(new Error('ERROR: Contour plot-type can only have one curve!'));\n                return false;\n            } else if (isContourDiff && curves.length >= 2) {\n                setError(new Error('ERROR: Contour Diff plot-type can only have two curves!'));\n                return false;\n            } else if (isReliability && curves.length >= 1) {\n                setError(new Error('ERROR: Reliability plot-type can only have one curve right now!'));\n                return false;\n            } else {\n                for (var i = 0; i < l; i++) {\n                    if ((paramElems[i] instanceof Element) === false) { // isn't really an element - must be a date field - these are only strings\n                        p[paramElems[i]] = matsParamUtils.getValueForParamName(paramElems[i]);\n                    } else if (paramElems[i].type === \"select-multiple\") {\n                        p[paramElems[i].name] = $(paramElems[i].selectedOptions).map(function () {\n                            return (this.value)\n                        }).get();\n                    } else {\n                        if (paramElems[i].type === \"radio\") {\n                            if (paramElems[i].checked) {\n                                p[paramElems[i].name] = paramElems[i].value;\n                            }\n                        } else if (paramElems[i].type === \"checkbox\") {\n                            if (paramElems[i].checked) {\n                                if (p[paramElems[i].name] === undefined) {\n                                    p[paramElems[i].name] = [];\n                                }\n                                p[paramElems[i].name].push(paramElems[i].value);\n                            }\n                        } else if (paramElems[i].type === \"button\") {\n                            p[paramElems[i].id] = paramElems[i].value;\n                        } else {\n                            if (isScatter) {\n                                p[paramElems[i].name] = (paramElems[i]).value;\n                            } else {\n                                p[paramElems[i].name] = matsParamUtils.getValueForParamName(paramElems[i].name)\n                            }\n                        }\n                    }\n                    if (paramElems[i].name && paramElems[i].name === 'label') {\n                        if (_.indexOf(matsCurveUtils.getUsedLabels(), (paramElems[i]).value) != -1) {\n                            setError(new Error('labels need to be unique - change ' + (paramElems[i]).value + \" to something else\"));\n                            return false;\n                        }\n                    }\n                }\n            }\n            p.color = matsCurveUtils.getNextCurveColor();\n            curves.push(p);\n            var elem = document.getElementById(\"curveList\");\n            elem.style.display = \"block\";\n        }\n\n        Session.set('Curves', curves);\n        matsCurveUtils.setUsedColorsAndLabels(); // we have used a color and label so we have to set the next one\n        matsCurveUtils.checkDiffs();\n        matsParamUtils.collapseParams();\n        matsParamUtils.setInputForParamName('label', matsCurveUtils.getNextCurveLabel());\n        return false;\n    }\n});\n\nTemplate.paramList.onRendered(function () {\n    Session.set('displayPriority', 1);\n    Session.set('editMode', '');\n\n    //hide sites and sitesMap selectors for anything that isn't a map plot or wfip2\n    var elem;\n    var ptype = matsPlotUtils.getPlotType();\n    elem = document.getElementById('sites-item');\n    var sitesParamHidden;\n    if (elem && elem.style) {\n        sitesParamHidden = matsCollections.CurveParams.findOne({name: 'sites'}).hiddenForPlotTypes;\n        if (sitesParamHidden) {\n            if (sitesParamHidden.indexOf(ptype) === -1) {\n                elem.style.display = \"block\";\n            } else {\n                elem.style.display = \"none\";\n            }\n        }\n    }\n    elem = document.getElementById('sitesMap-item');\n    if (elem && elem.style) {\n        sitesParamHidden = matsCollections.CurveParams.findOne({name: 'sitesMap'}).hiddenForPlotTypes;\n        if (sitesParamHidden) {\n            if (sitesParamHidden.indexOf(ptype) === -1) {\n                elem.style.display = \"block\";\n            } else {\n                elem.style.display = \"none\";\n            }\n        }\n    }\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsTypes } from 'meteor/randyp:mats-common';\nâ€¨import { matsCollections } from 'meteor/randyp:mats-common';\nimport { matsPlotUtils } from 'meteor/randyp:mats-common';\n\nvar duplicate = function(param) {\n    var obj = {};\n    var keys = Object.keys(param);\n    for (var i=0; i<keys.length;i++){\n        if (keys[i] !== \"_id\") {\n            obj[keys[i]] = param[keys[i]];\n        }\n    }\n    return obj;\n};\n\nfilterParams = function(params) {\n/*\nIf the plottype is a 2d scatter plot we need to basically create a new set of parameters (except for the label)\nfor each axis. The double set of parameters will get sent back to the backend.\n */\n    if (matsPlotUtils.getPlotType() === matsTypes.PlotTypes.scatter2d) {\n        var xparams = [];\n        var yparams = [];\n        var newParams = [];\n        for (var i = 0; i < params.length;i++) {\n            var xp = duplicate(params[i]);\n            xp.name = \"xaxis-\" + params[i].name;\n            xp.hidden = true;\n            xparams.push(xp);\n            var yp = duplicate(params[i]);\n            yp.name = \"yaxis-\" + params[i].name;\n            yp.hidden = true;\n            yparams.push(yp);\n        }\n        newParams = newParams.concat(params);\n        newParams = newParams.concat(xparams);\n        newParams = newParams.concat(yparams);\n        return newParams;\n    } else {\n        return params;\n    }\n};\n\nTemplate.curveParamGroup.helpers({\n    CurveParams: function (num) {\n        var restoreSettingsTime = Session.get(\"restoreSettingsTime\"); // used to force re-render\n        var lastUpdate = Session.get('lastUpdate');\n        var params = matsCollections.CurveParams.find({displayGroup:num},{sort:[\"displayOrder\", \"asc\"]}).fetch();\n        params = filterParams(params);\n        return params;\n    },\n    displayGroup: function() {\n        return \"block\";\n    },\n    log: function() {\n        console.log(this);\n    }\n});","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsTypes } from 'meteor/randyp:mats-common';â€¨\nimport { matsCollections } from 'meteor/randyp:mats-common';\nimport { matsPlotUtils } from 'meteor/randyp:mats-common';\n\nconst isEditing = function() {\n    const mode = Session.get('editMode');\n    return !( mode === \"\" || mode === undefined || mode === null);\n};\nconst setAxisText = function(axis) {\n    Session.set(axis + 'CurveText', axis + \" \" + matsPlotUtils.getAxisText(matsPlotUtils.getPlotType()));\n    Session.set(axis + 'CurveColor', 'green');\n    Session.set('axisCurveIcon', \"fa-check\");\n};\n\nTemplate.scatter2d.helpers({\n    modeText: function() {\n        return isEditing() ? \"Editing the curve \" + Session.get('editMode') + \" (\" + Session.get('axis') + \")\": \"Creating a new curve\";\n    },\n    creating: function() {\n        if (isEditing()) {\n            return \"none\";\n        } else {\n            return \"block\";\n        }\n    },\n    editing: function() {\n        if (isEditing()) {\n            return \"block\";\n        } else {\n            return \"none\";\n        }\n    },\n    xaxisCurveText: function() {\n        if (isEditing()) {\n            setAxisText(\"xaxis\");\n        }\n        const t = Session.get('xaxisCurveText');\n        if (t){\n            return t;\n        } else {\n            Session.set('xaxisCurveText', 'XAXIS NOT YET APPLIED');\n            return 'XAXIS NOT YET APPLIED';\n        }\n    },\n    yaxisCurveText: function() {\n        if (isEditing()) {\n            setAxisText(\"yaxis\");\n        }\n        const t = Session.get('yaxisCurveText');\n        if (t || isEditing()){\n            return t;\n        } else {\n            Session.set('yaxisCurveText', 'YAXIS NOT YET APPLIED');\n            return 'YAXIS NOT YET APPLIED';\n        }\n    },\n    yApplyEnabled: function() {\n        const c = Session.get('xaxisCurveColor');\n        if (c === 'red' && !isEditing()){\n            return \"disabled\";\n        } else {\n            return\"\";\n        }\n    },\n\n    xaxisCurveColor: function() {\n        const t = Session.get('xaxisCurveColor');\n        if (t){\n            return t;\n        } else {\n            Session.set('xaxisCurveColor', 'red');\n            return 'red';\n        }\n    },\n    yaxisCurveColor: function() {\n        const t = Session.get('yaxisCurveColor');\n        if (t){\n            return t;\n        } else {\n            Session.set('yaxisCurveColor', 'red');\n            return 'red';\n        }\n    },\n    curveIcon: function() {\n        const t = Session.get('axisCurveIcon');\n        if (t){\n            return t;\n        } else {\n            Session.set('axisCurveIcon', 'fa-asterisk');\n            return 'fa-asterisk';\n        }\n    },\n    title: function() {\n        return \"Scatter Plot parameters\"\n    },\n    scatter2dParams: function () {\n        const params = matsCollections.Scatter2dParams.find({}).fetch();\n        return params;\n    },\n    scatter2dOptions: function() {\n        const options = this.options;\n        return options;\n    },\n    name: function(param) {\n        //console.log(\"name: \" + param.name);\n        const name = param.name.replace(/ /g,'-');\n        return name;\n    },\n    className: function(param) {\n        //console.log(\"name: \" + param.name);\n        const cname = param.name.replace(/ /g,'-') + \"-\" + param.type;\n        return cname;\n    },\n    \n    type: function(param) {\n        switch (param.type) {\n            case matsTypes.InputTypes.checkBoxGroup:\n                return \"checkbox\";\n                break;\n            case matsTypes.InputTypes.radioGroup:\n                return \"radio\";\n                break;\n            case matsTypes.InputTypes.select:\n                return \"select\";\n                break;\n            case matsTypes.InputTypes.numberSpinner:\n                return \"number\";\n                break;\n            default:\n                return \"text\";\n        }\n    },\n    default: function() {\n        return this.default;\n    },\n    idOption: function(param) {\n        var id = param.name + \"-\" + param.type + \"-\" + this;\n        id = id.replace(/ /g,'-');\n        return id;\n    },\n    idParam: function() {\n        var id = this.name + \"-\" + this.type;\n        id = id.replace(/ /g,'-');\n        return id;\n    },\n    plotType : function() {\n      return matsTypes.PlotTypes.scatter2d;  \n    },\n    isDefault: function (param) {\n        const def = param.default;\n        if (def == this) {\n            return \"checked\";\n        } else {\n            return \"\";\n        }\n    },\n    displayScatter2d: function() {\n        if (matsPlotUtils.getPlotType() == matsTypes.PlotTypes.scatter2d) {\n            return \"block\";\n        } else {\n            return \"none\";\n        }\n    },\n    label: function(param, parent) {\n        if (parent.name === \"Fit Type\") {\n            return parent.optionsMap[this];\n        } else {\n            return this;\n        }\n    },\n    labelParam: function() {\n            return this.name;\n    },\n    log: function() {\n        console.log(this);\n    },\n    axis: function(param) {\n        var axis = Session.get('axis');\n        if (axis === undefined) {\n            if (param) {\n                return param.default;\n            } else {\n                return 'xaxis';\n            }\n        }\n        return axis;\n    },\n    isNumberSpinner: function(param) {\n        return param.type === matsTypes.InputTypes.numberSpinner;\n    },\n    hasHelp: function() {\n        return this.help !== undefined;\n    }\n});\n\nconst apply = function(axis) {\n    const elems = document.getElementsByClassName(\"data-input\");\n    const curveParams = matsCollections.CurveParams.find({}, {fields: {name: 1}}).fetch();\n    const curveNames = _.pluck(curveParams, \"name\");\n    const param_elems = _.filter(elems, function (elem) {\n        return _.contains(curveNames, elem.name);\n    });\n    var l = param_elems.length;\n    for (var i = 0; i < l; i++) {\n        var pelem = param_elems[i];\n        //console.log(\"pelem.type is \" + pelem.type);\n        var elem_id = pelem.id;\n        var target_id = axis + \"-\" + elem_id;\n        var telem = document.getElementById(target_id);\n        // Notice that these types are not matsTypes these are javascript types\n        if (pelem.type === \"select-multiple\") {\n            var $options = $(\"#\" + elem_id + \" > option\").clone();\n            $(\"#\" + target_id).empty().append($options);\n            var selectedOptions = $(pelem.selectedOptions).map(function(){return(this.value)}).get();\n            for (var x =0; x < telem.options.length; x++) {\n                if ($.inArray(telem.options[x].value, selectedOptions) !== -1) {\n                    telem.options[x].selected = true;\n                } else {\n                    telem.options[x].selected = false;\n                }\n            }\n        } else if (pelem.type === \"select-one\") {\n            var $options = $(\"#\" + elem_id + \" > option\").clone();\n            $(\"#\" + target_id).empty().append($options);\n            telem.selectedIndex = pelem.selectedIndex;\n        } else if (pelem.type === \"radio\") {\n            // NOT SURE THIS IS RIGHT\n            //console.log(pelem.name + \" is \" + $('input[name=\"' + pelem.name + '\"]:checked').val());\n            $('input[name=\"' + telem.name + '\"]:checked');\n        } else if (pelem.type === \"button\") {\n            telem.value = pelem.value;\n        } else {\n            telem.value = pelem.value;\n        }\n    }\n    setAxisText(axis);\n};\n\nTemplate.scatter2d.events({\n    'click .apply-params-to-xaxis': function(event) {\n        apply('xaxis');\n    },\n    'click .apply-params-to-yaxis': function(event) {\n        apply('yaxis');\n    },\n    'change .axis-selector-radioGroup' : function(event) {\n        var newAxis = event.currentTarget.value;\n        Session.set('axis',newAxis);\n        var elems = document.getElementsByClassName(\"data-input\");\n        var axis_elems = _.filter(elems, function (elem) {\n            return elem.name.indexOf(newAxis) > -1;\n        });\n        var l = axis_elems.length;\n        for (var i = 0; i < l; i++) {\n            var aelem = axis_elems[i];\n            var aelem_id = aelem.id;\n            // remove the axis part at the front\n            var target_id = aelem_id.substring(newAxis.length+1,aelem_id.length);\n            var telem = document.getElementById(target_id);\n            if (aelem.type === \"select-multiple\") {\n                $(telem).val($(aelem.selectedOptions).map(function(){return(this.value)}).get());\n            } else if (aelem.type === \"radio\") {\n                // NOT SURE THIS IS RIGHT\n                //console.log(pelem.name + \" is \" + $('input[name=\"' + pelem.name + '\"]:checked').val());\n                $('input[name=\"' + telem.name + '\"]:checked');\n            } else if (aelem.type === \"button\") {\n                telem.value = aelem.value;\n            } else {\n                telem.value = aelem.value;\n            }\n            telem.dispatchEvent(new CustomEvent(\"axisRefresh\"));\n        }\n    },\n    'click .axishelp' : function() {\n        $(\"#matshelp\").load(\"/help/scatter-help.html #matshelp\");\n        $(\"#helpModal\").modal('show');\n    },\n    'click .help' : function() {\n        $(\"#matshelp\").load(\"/help/\" + this.help + \" #matshelp\");\n        $(\"#helpModal\").modal('show');\n    }\n});\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsTypes} from 'meteor/randyp:mats-common';\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport {matsCurveUtils} from 'meteor/randyp:mats-common';\nimport {matsParamUtils} from 'meteor/randyp:mats-common';\n\n\nTemplate.plotType.helpers({\n    plotTypes: function () {\n        return matsCollections.PlotGraphFunctions.find({}).fetch();\n    },\n    title: function () {\n        if (matsCollections.Settings === undefined || matsCollections.Settings.findOne({}, {fields: {Title: 1}}) === undefined) {\n            return \"\";\n        } else {\n            return matsCollections.Settings.findOne({}, {fields: {Title: 1}}).Title;\n        }\n    },\n    display: function () {    // don't display the choice if there is only one choice\n        if (matsCollections.PlotGraphFunctions.find({}).fetch().length === 1) {\n            return \"hidden\";\n        } else {\n            return \"\";\n        }\n    }\n});\n\n\nTemplate.plotType.events({\n    'click .plot-type-TimeSeries': function (event) {\n        if (Session.get(\"confirmPlotChange\")) {\n            // change has been confirmed\n            // see if the previous plot type also used the 'dates' parameter\n            const oldDatesExist = matsParamUtils.isParamVisible('dates');\n            matsCurveUtils.showTimeseriesFace();\n            var curves = Session.get('Curves');\n            // if a 'dates' parameter was already in use, we want to keep that value.\n            // otherwise, set the 'dates' parameter to whatever 'curve-dates' was set to.\n            if (!oldDatesExist) {\n                const curveDate = $('#controlButton-curve-dates-value').text();\n                matsParamUtils.setValueTextForParamName('dates', curveDate)\n            }\n            if (curves.length > 0) {\n                // initialize parameters that may not have been used yet\n                for (var ci = 0; ci < curves.length; ci++) {\n                    // the average may not have been carried over from other curve types so let it default\n                    if (!curves[ci]['average'] && matsCollections.CurveParams.findOne({name: 'average'}) && matsCollections.CurveParams.findOne({name: 'average'}).default) {\n                        curves[ci]['average'] = matsCollections.CurveParams.findOne({name: 'average'}).default;\n                    }\n                    if (!curves[ci]['valid-time'] && matsCollections.CurveParams.findOne({name: 'valid-time'}) && matsCollections.CurveParams.findOne({name: 'valid-time'}).default) {\n                        curves[ci]['valid-time'] = matsCollections.CurveParams.findOne({name: 'valid-time'}).default;\n                    }\n                    if (!curves[ci]['threshold'] && matsCollections.CurveParams.findOne({name: 'threshold'}) && matsCollections.CurveParams.findOne({name: 'threshold'}).default) {\n                        curves[ci]['threshold'] = matsCollections.CurveParams.findOne({name: 'threshold'}).default;\n                    }\n                    if (!curves[ci]['forecast-length'] && matsCollections.CurveParams.findOne({name: 'forecast-length'}) && matsCollections.CurveParams.findOne({name: 'forecast-length'}).default) {\n                        curves[ci]['forecast-length'] = matsCollections.CurveParams.findOne({name: 'forecast-length'}).default;\n                    }\n                    if (!curves[ci]['region'] && matsCollections.CurveParams.findOne({name: 'region'}) && matsCollections.CurveParams.findOne({name: 'region'}).default) {\n                        curves[ci]['region'] = matsCollections.CurveParams.findOne({name: 'region'}).default;\n                    }\n                    if (!curves[ci]['statistic'] && matsCollections.CurveParams.findOne({name: 'statistic'}) && matsCollections.CurveParams.findOne({name: 'statistic'}).default) {\n                        curves[ci]['statistic'] = matsCollections.CurveParams.findOne({name: 'statistic'}).default;\n                    }\n                    if (!curves[ci]['truth'] && matsCollections.CurveParams.findOne({name: 'truth'}) && matsCollections.CurveParams.findOne({name: 'truth'}).default) {\n                        curves[ci]['truth'] = matsCollections.CurveParams.findOne({name: 'truth'}).default;\n                    }\n                }\n                Session.set('Curves', curves);\n            }\n            Session.set(\"confirmPlotChange\", \"\");\n            Session.set('plotChangeType', \"\");\n        } else {\n            // no confirmation yet so check to see if we have any curves and if so then show the confirm dialog\n            if (Session.get(\"Curves\").length > 0) {\n                Session.set('plotChangeType', matsTypes.PlotTypes.timeSeries);\n                $(\"#modal-change-plot-type\").modal();\n            } else {\n                // no curves - just set the timeseries face\n                // see if the previous plot type also used the 'dates' parameter\n                const oldDatesExist = matsParamUtils.isParamVisible('dates');\n                matsCurveUtils.showTimeseriesFace();\n                // if a 'dates' parameter was already in use, we want to keep that value.\n                // otherwise, set the 'dates' parameter to whatever 'curve-dates' was set to.\n                if (!oldDatesExist) {\n                    const curveDate = $('#controlButton-curve-dates-value').text();\n                    matsParamUtils.setValueTextForParamName('dates', curveDate)\n                }\n            }\n        }\n    },\n    'click .plot-type-Profile': function (event) {\n        if (Session.get(\"confirmPlotChange\")) {\n            // change has been confirmed\n            // see if the previous plot type also used the 'curve-dates' parameter\n            const oldCurveDatesExist = matsParamUtils.isParamVisible('curve-dates');\n            matsCurveUtils.showProfileFace();\n            var curves = Session.get('Curves');\n            // if a 'curve-dates' parameter was already in use, we want to keep that value.\n            // otherwise, set the 'curve-dates' parameter to whatever 'dates' was set to.\n            const tsDate = $('#controlButton-dates-value').text();\n            if (!oldCurveDatesExist) {\n                matsParamUtils.setValueTextForParamName('curve-dates', tsDate)\n            }\n            if (curves.length > 0) {\n                // initialize parameters that may not have been used yet\n                for (var ci = 0; ci < curves.length; ci++) {\n                    if (tsDate !== undefined && tsDate !== \"\" && !oldCurveDatesExist) {\n                        curves[ci]['curve-dates'] = tsDate;\n                    }\n                    if (!curves[ci]['valid-time'] && matsCollections.CurveParams.findOne({name: 'valid-time'}) && matsCollections.CurveParams.findOne({name: 'valid-time'}).default) {\n                        curves[ci]['valid-time'] = matsCollections.CurveParams.findOne({name: 'valid-time'}).default;\n                    }\n                    if (!curves[ci]['threshold'] && matsCollections.CurveParams.findOne({name: 'threshold'}) && matsCollections.CurveParams.findOne({name: 'threshold'}).default) {\n                        curves[ci]['threshold'] = matsCollections.CurveParams.findOne({name: 'threshold'}).default;\n                    }\n                    if (!curves[ci]['forecast-length'] && matsCollections.CurveParams.findOne({name: 'forecast-length'}) && matsCollections.CurveParams.findOne({name: 'forecast-length'}).default) {\n                        curves[ci]['forecast-length'] = matsCollections.CurveParams.findOne({name: 'forecast-length'}).default;\n                    }\n                    if (!curves[ci]['region'] && matsCollections.CurveParams.findOne({name: 'region'}) && matsCollections.CurveParams.findOne({name: 'region'}).default) {\n                        curves[ci]['region'] = matsCollections.CurveParams.findOne({name: 'region'}).default;\n                    }\n                    if (!curves[ci]['statistic'] && matsCollections.CurveParams.findOne({name: 'statistic'}) && matsCollections.CurveParams.findOne({name: 'statistic'}).default) {\n                        curves[ci]['statistic'] = matsCollections.CurveParams.findOne({name: 'statistic'}).default;\n                    }\n                    if (!curves[ci]['truth'] && matsCollections.CurveParams.findOne({name: 'truth'}) && matsCollections.CurveParams.findOne({name: 'truth'}).default) {\n                        curves[ci]['truth'] = matsCollections.CurveParams.findOne({name: 'truth'}).default;\n                    }\n                }\n                Session.set('Curves', curves);\n            }\n            Session.set(\"confirmPlotChange\", \"\");\n            Session.set('plotChangeType', \"\");\n        } else {\n            // no confirmation yet so check to see if we have any curves and if so then show the confirm dialog\n            if (Session.get(\"Curves\").length > 0) {\n                Session.set('plotChangeType', matsTypes.PlotTypes.profile);\n                $(\"#modal-change-plot-type\").modal();\n            } else {\n                // no curves - just set the profile face\n                // see if the previous plot type also used the 'curve-dates' parameter\n                const oldCurveDatesExist = matsParamUtils.isParamVisible('curve-dates');\n                matsCurveUtils.showProfileFace();\n                // if a 'curve-dates' parameter was already in use, we want to keep that value.\n                // otherwise, set the 'curve-dates' parameter to whatever 'dates' was set to.\n                if (!oldCurveDatesExist) {\n                    const tsDate = $('#controlButton-dates-value').text();\n                    matsParamUtils.setValueTextForParamName('curve-dates', tsDate)\n                }\n            }\n        }\n    },\n    'click .plot-type-DieOff': function (event) {\n        if (Session.get(\"confirmPlotChange\")) {\n            // change has been confirmed\n            // see if the previous plot type also used the 'curve-dates' parameter\n            const oldCurveDatesExist = matsParamUtils.isParamVisible('curve-dates');\n            matsCurveUtils.showDieOffFace();\n            var curves = Session.get('Curves');\n            // if a 'curve-dates' parameter was already in use, we want to keep that value.\n            // otherwise, set the 'curve-dates' parameter to whatever 'dates' was set to.\n            const tsDate = $('#controlButton-dates-value').text();\n            if (!oldCurveDatesExist) {\n                matsParamUtils.setValueTextForParamName('curve-dates', tsDate)\n            }\n            if (curves.length > 0) {\n                // initialize parameters that may not have been used yet\n                for (var ci = 0; ci < curves.length; ci++) {\n                    if (tsDate !== undefined && tsDate !== \"\" && !oldCurveDatesExist) {\n                        curves[ci]['curve-dates'] = tsDate;\n                    }\n                    if (!curves[ci]['valid-time'] && matsCollections.CurveParams.findOne({name: 'valid-time'}) && matsCollections.CurveParams.findOne({name: 'valid-time'}).default) {\n                        curves[ci]['valid-time'] = matsCollections.CurveParams.findOne({name: 'valid-time'}).default;\n                    }\n                    if (!curves[ci]['threshold'] && matsCollections.CurveParams.findOne({name: 'threshold'}) && matsCollections.CurveParams.findOne({name: 'threshold'}).default) {\n                        curves[ci]['threshold'] = matsCollections.CurveParams.findOne({name: 'threshold'}).default;\n                    }\n                    if (!curves[ci]['dieoff-type'] && matsCollections.CurveParams.findOne({name: 'dieoff-type'}) && matsCollections.CurveParams.findOne({name: 'dieoff-type'}).default) {\n                        curves[ci]['dieoff-type'] = matsCollections.CurveParams.findOne({name: 'dieoff-type'}).default;\n                    }\n                    if (!curves[ci]['region'] && matsCollections.CurveParams.findOne({name: 'region'}) && matsCollections.CurveParams.findOne({name: 'region'}).default) {\n                        curves[ci]['region'] = matsCollections.CurveParams.findOne({name: 'region'}).default;\n                    }\n                    if (!curves[ci]['statistic'] && matsCollections.CurveParams.findOne({name: 'statistic'}) && matsCollections.CurveParams.findOne({name: 'statistic'}).default) {\n                        curves[ci]['statistic'] = matsCollections.CurveParams.findOne({name: 'statistic'}).default;\n                    }\n                    if (!curves[ci]['truth'] && matsCollections.CurveParams.findOne({name: 'truth'}) && matsCollections.CurveParams.findOne({name: 'truth'}).default) {\n                        curves[ci]['truth'] = matsCollections.CurveParams.findOne({name: 'truth'}).default;\n                    }\n                }\n                Session.set('Curves', curves);\n            }\n            Session.set(\"confirmPlotChange\", \"\");\n            Session.set('plotChangeType', \"\");\n        } else {\n            // no confirmation yet so check to see if we have any curves and if so then show the confirm dialog\n            if (Session.get(\"Curves\").length > 0) {\n                Session.set('plotChangeType', matsTypes.PlotTypes.dieoff);\n                $(\"#modal-change-plot-type\").modal();\n            } else {\n                // no curves - just set the dieoff face\n                // see if the previous plot type also used the 'curve-dates' parameter\n                const oldCurveDatesExist = matsParamUtils.isParamVisible('curve-dates');\n                matsCurveUtils.showDieOffFace();\n                // if a 'curve-dates' parameter was already in use, we want to keep that value.\n                // otherwise, set the 'curve-dates' parameter to whatever 'dates' was set to.\n                if (!oldCurveDatesExist) {\n                    const tsDate = $('#controlButton-dates-value').text();\n                    matsParamUtils.setValueTextForParamName('curve-dates', tsDate)\n                }\n            }\n        }\n    },\n    'click .plot-type-Threshold': function (event) {\n        if (Session.get(\"confirmPlotChange\")) {\n            // change has been confirmed\n            // see if the previous plot type also used the 'curve-dates' parameter\n            const oldCurveDatesExist = matsParamUtils.isParamVisible('curve-dates');\n            matsCurveUtils.showThresholdFace();\n            var curves = Session.get('Curves');\n            // if a 'curve-dates' parameter was already in use, we want to keep that value.\n            // otherwise, set the 'curve-dates' parameter to whatever 'dates' was set to.\n            const tsDate = $('#controlButton-dates-value').text();\n            if (!oldCurveDatesExist) {\n                matsParamUtils.setValueTextForParamName('curve-dates', tsDate)\n            }\n            if (curves.length > 0) {\n                // initialize parameters that may not have been used yet\n                for (var ci = 0; ci < curves.length; ci++) {\n                    if (tsDate !== undefined && tsDate !== \"\" && !oldCurveDatesExist) {\n                        curves[ci]['curve-dates'] = tsDate;\n                    }\n                    if (!curves[ci]['valid-time'] && matsCollections.CurveParams.findOne({name: 'valid-time'}) && matsCollections.CurveParams.findOne({name: 'valid-time'}).default) {\n                        curves[ci]['valid-time'] = matsCollections.CurveParams.findOne({name: 'valid-time'}).default;\n                    }\n                    if (!curves[ci]['forecast-length'] && matsCollections.CurveParams.findOne({name: 'forecast-length'}) && matsCollections.CurveParams.findOne({name: 'forecast-length'}).default) {\n                        curves[ci]['forecast-length'] = matsCollections.CurveParams.findOne({name: 'forecast-length'}).default;\n                    }\n                    if (!curves[ci]['region'] && matsCollections.CurveParams.findOne({name: 'region'}) && matsCollections.CurveParams.findOne({name: 'region'}).default) {\n                        curves[ci]['region'] = matsCollections.CurveParams.findOne({name: 'region'}).default;\n                    }\n                    if (!curves[ci]['statistic'] && matsCollections.CurveParams.findOne({name: 'statistic'}) && matsCollections.CurveParams.findOne({name: 'statistic'}).default) {\n                        curves[ci]['statistic'] = matsCollections.CurveParams.findOne({name: 'statistic'}).default;\n                    }\n                    if (!curves[ci]['truth'] && matsCollections.CurveParams.findOne({name: 'truth'}) && matsCollections.CurveParams.findOne({name: 'truth'}).default) {\n                        curves[ci]['truth'] = matsCollections.CurveParams.findOne({name: 'truth'}).default;\n                    }\n                }\n                Session.set('Curves', curves);\n            }\n            Session.set(\"confirmPlotChange\", \"\");\n            Session.set('plotChangeType', \"\");\n        } else {\n            // no confirmation yet so check to see if we have any curves and if so then show the confirm dialog\n            if (Session.get(\"Curves\").length > 0) {\n                Session.set('plotChangeType', matsTypes.PlotTypes.threshold);\n                $(\"#modal-change-plot-type\").modal();\n            } else {\n                // no curves - just set the threshold face\n                // see if the previous plot type also used the 'curve-dates' parameter\n                const oldCurveDatesExist = matsParamUtils.isParamVisible('curve-dates');\n                matsCurveUtils.showThresholdFace();\n                // if a 'curve-dates' parameter was already in use, we want to keep that value.\n                // otherwise, set the 'curve-dates' parameter to whatever 'dates' was set to.\n                if (!oldCurveDatesExist) {\n                    const tsDate = $('#controlButton-dates-value').text();\n                    matsParamUtils.setValueTextForParamName('curve-dates', tsDate)\n                }\n            }\n        }\n    },\n    'click .plot-type-ValidTime': function (event) {\n        if (Session.get(\"confirmPlotChange\")) {\n            // change has been confirmed\n            // see if the previous plot type also used the 'curve-dates' parameter\n            const oldCurveDatesExist = matsParamUtils.isParamVisible('curve-dates');\n            matsCurveUtils.showValidTimeFace();\n            var curves = Session.get('Curves');\n            // if a 'curve-dates' parameter was already in use, we want to keep that value.\n            // otherwise, set the 'curve-dates' parameter to whatever 'dates' was set to.\n            const tsDate = $('#controlButton-dates-value').text();\n            if (!oldCurveDatesExist) {\n                matsParamUtils.setValueTextForParamName('curve-dates', tsDate)\n            }\n            if (curves.length > 0) {\n                // initialize parameters that may not have been used yet\n                for (var ci = 0; ci < curves.length; ci++) {\n                    if (tsDate !== undefined && tsDate !== \"\" && !oldCurveDatesExist) {\n                        curves[ci]['curve-dates'] = tsDate;\n                    }\n                    if (!curves[ci]['threshold'] && matsCollections.CurveParams.findOne({name: 'threshold'}) && matsCollections.CurveParams.findOne({name: 'threshold'}).default) {\n                        curves[ci]['threshold'] = matsCollections.CurveParams.findOne({name: 'threshold'}).default;\n                    }\n                    if (!curves[ci]['forecast-length'] && matsCollections.CurveParams.findOne({name: 'forecast-length'}) && matsCollections.CurveParams.findOne({name: 'forecast-length'}).default) {\n                        curves[ci]['forecast-length'] = matsCollections.CurveParams.findOne({name: 'forecast-length'}).default;\n                    }\n                    if (!curves[ci]['region'] && matsCollections.CurveParams.findOne({name: 'region'}) && matsCollections.CurveParams.findOne({name: 'region'}).default) {\n                        curves[ci]['region'] = matsCollections.CurveParams.findOne({name: 'region'}).default;\n                    }\n                    if (!curves[ci]['statistic'] && matsCollections.CurveParams.findOne({name: 'statistic'}) && matsCollections.CurveParams.findOne({name: 'statistic'}).default) {\n                        curves[ci]['statistic'] = matsCollections.CurveParams.findOne({name: 'statistic'}).default;\n                    }\n                    if (!curves[ci]['truth'] && matsCollections.CurveParams.findOne({name: 'truth'}) && matsCollections.CurveParams.findOne({name: 'truth'}).default) {\n                        curves[ci]['truth'] = matsCollections.CurveParams.findOne({name: 'truth'}).default;\n                    }\n                }\n                Session.set('Curves', curves);\n            }\n            Session.set(\"confirmPlotChange\", \"\");\n            Session.set('plotChangeType', \"\");\n        } else {\n            // no confirmation yet so check to see if we have any curves and if so then show the confirm dialog\n            if (Session.get(\"Curves\").length > 0) {\n                Session.set('plotChangeType', matsTypes.PlotTypes.validtime);\n                $(\"#modal-change-plot-type\").modal();\n            } else {\n                // no curves - just set the valid time face\n                // see if the previous plot type also used the 'curve-dates' parameter\n                const oldCurveDatesExist = matsParamUtils.isParamVisible('curve-dates');\n                matsCurveUtils.showValidTimeFace();\n                // if a 'curve-dates' parameter was already in use, we want to keep that value.\n                // otherwise, set the 'curve-dates' parameter to whatever 'dates' was set to.\n                if (!oldCurveDatesExist) {\n                    const tsDate = $('#controlButton-dates-value').text();\n                    matsParamUtils.setValueTextForParamName('curve-dates', tsDate)\n                }\n            }\n        }\n    },\n    'click .plot-type-DailyModelCycle': function (event) {\n        if (Session.get(\"confirmPlotChange\")) {\n            // change has been confirmed\n            // see if the previous plot type also used the 'dates' parameter\n            const oldDatesExist = matsParamUtils.isParamVisible('dates');\n            matsCurveUtils.showDailyModelCycleFace();\n            var curves = Session.get('Curves');\n            // if a 'dates' parameter was already in use, we want to keep that value.\n            // otherwise, set the 'dates' parameter to whatever 'curve-dates' was set to.\n            if (!oldDatesExist) {\n                const curveDate = $('#controlButton-curve-dates-value').text();\n                matsParamUtils.setValueTextForParamName('dates', curveDate)\n            }\n            if (curves.length > 0) {\n                // initialize parameters that may not have been used yet\n                for (var ci = 0; ci < curves.length; ci++) {\n                    if (!curves[ci]['threshold'] && matsCollections.CurveParams.findOne({name: 'threshold'}) && matsCollections.CurveParams.findOne({name: 'threshold'}).default) {\n                        curves[ci]['threshold'] = matsCollections.CurveParams.findOne({name: 'threshold'}).default;\n                    }\n                    if (!curves[ci]['utc-cycle-start'] && matsCollections.CurveParams.findOne({name: 'utc-cycle-start'}) && matsCollections.CurveParams.findOne({name: 'utc-cycle-start'}).default) {\n                        curves[ci]['utc-cycle-start'] = matsCollections.CurveParams.findOne({name: 'utc-cycle-start'}).default;\n                    }\n                    if (!curves[ci]['region'] && matsCollections.CurveParams.findOne({name: 'region'}) && matsCollections.CurveParams.findOne({name: 'region'}).default) {\n                        curves[ci]['region'] = matsCollections.CurveParams.findOne({name: 'region'}).default;\n                    }\n                    if (!curves[ci]['statistic'] && matsCollections.CurveParams.findOne({name: 'statistic'}) && matsCollections.CurveParams.findOne({name: 'statistic'}).default) {\n                        curves[ci]['statistic'] = matsCollections.CurveParams.findOne({name: 'statistic'}).default;\n                    }\n                    if (!curves[ci]['truth'] && matsCollections.CurveParams.findOne({name: 'truth'}) && matsCollections.CurveParams.findOne({name: 'truth'}).default) {\n                        curves[ci]['truth'] = matsCollections.CurveParams.findOne({name: 'truth'}).default;\n                    }\n                }\n                Session.set('Curves', curves);\n            }\n            Session.set(\"confirmPlotChange\", \"\");\n            Session.set('plotChangeType', \"\");\n        } else {\n            // no confirmation yet so check to see if we have any curves and if so then show the confirm dialog\n            if (Session.get(\"Curves\").length > 0) {\n                Session.set('plotChangeType', matsTypes.PlotTypes.dailyModelCycle);\n                $(\"#modal-change-plot-type\").modal();\n            } else {\n                // no curves - just set the daily model cycle face\n                // see if the previous plot type also used the 'dates' parameter\n                const oldDatesExist = matsParamUtils.isParamVisible('dates');\n                matsCurveUtils.showDailyModelCycleFace();\n                // if a 'dates' parameter was already in use, we want to keep that value.\n                // otherwise, set the 'dates' parameter to whatever 'curve-dates' was set to.\n                if (!oldDatesExist) {\n                    const curveDate = $('#controlButton-curve-dates-value').text();\n                    matsParamUtils.setValueTextForParamName('dates', curveDate)\n                }\n            }\n        }\n    },\n    'click .plot-type-Reliability': function (event) {\n        if (Session.get(\"confirmPlotChange\")) {\n            // change has been confirmed\n            // see if the previous plot type also used the 'dates' parameter\n            const oldDatesExist = matsParamUtils.isParamVisible('dates');\n            matsCurveUtils.showReliabilityFace();\n            var curves = Session.get('Curves');\n            // if a 'dates' parameter was already in use, we want to keep that value.\n            // otherwise, set the 'dates' parameter to whatever 'curve-dates' was set to.\n            if (!oldDatesExist) {\n                const curveDate = $('#controlButton-curve-dates-value').text();\n                matsParamUtils.setValueTextForParamName('dates', curveDate)\n            }\n            if (curves.length > 0) {\n                // initialize parameters that may not have been used yet\n                for (var ci = 0; ci < curves.length; ci++) {\n                    // the average may not have been carried over from other curve types so let it default\n                    if (!curves[ci]['average'] && matsCollections.CurveParams.findOne({name: 'average'}) && matsCollections.CurveParams.findOne({name: 'average'}).default) {\n                        curves[ci]['average'] = matsCollections.CurveParams.findOne({name: 'average'}).default;\n                    }\n                    if (!curves[ci]['valid-time'] && matsCollections.CurveParams.findOne({name: 'valid-time'}) && matsCollections.CurveParams.findOne({name: 'valid-time'}).default) {\n                        curves[ci]['valid-time'] = matsCollections.CurveParams.findOne({name: 'valid-time'}).default;\n                    }\n                    if (!curves[ci]['threshold'] && matsCollections.CurveParams.findOne({name: 'threshold'}) && matsCollections.CurveParams.findOne({name: 'threshold'}).default) {\n                        curves[ci]['threshold'] = matsCollections.CurveParams.findOne({name: 'threshold'}).default;\n                    }\n                    if (!curves[ci]['forecast-length'] && matsCollections.CurveParams.findOne({name: 'forecast-length'}) && matsCollections.CurveParams.findOne({name: 'forecast-length'}).default) {\n                        curves[ci]['forecast-length'] = matsCollections.CurveParams.findOne({name: 'forecast-length'}).default;\n                    }\n                    if (!curves[ci]['region'] && matsCollections.CurveParams.findOne({name: 'region'}) && matsCollections.CurveParams.findOne({name: 'region'}).default) {\n                        curves[ci]['region'] = matsCollections.CurveParams.findOne({name: 'region'}).default;\n                    }\n                    if (!curves[ci]['statistic'] && matsCollections.CurveParams.findOne({name: 'statistic'}) && matsCollections.CurveParams.findOne({name: 'statistic'}).default) {\n                        curves[ci]['statistic'] = matsCollections.CurveParams.findOne({name: 'statistic'}).default;\n                    }\n                    if (!curves[ci]['truth'] && matsCollections.CurveParams.findOne({name: 'truth'}) && matsCollections.CurveParams.findOne({name: 'truth'}).default) {\n                        curves[ci]['truth'] = matsCollections.CurveParams.findOne({name: 'truth'}).default;\n                    }\n                }\n                Session.set('Curves', curves);\n            }\n            Session.set(\"confirmPlotChange\", \"\");\n            Session.set('plotChangeType', \"\");\n        } else {\n            // no confirmation yet so check to see if we have any curves and if so then show the confirm dialog\n            if (Session.get(\"Curves\").length > 0) {\n                Session.set('plotChangeType', matsTypes.PlotTypes.reliability);\n                $(\"#modal-change-plot-type\").modal();\n            } else {\n                // no curves - just set the reliability face\n                // see if the previous plot type also used the 'dates' parameter\n                const oldDatesExist = matsParamUtils.isParamVisible('dates');\n                matsCurveUtils.showReliabilityFace();\n                // if a 'dates' parameter was already in use, we want to keep that value.\n                // otherwise, set the 'dates' parameter to whatever 'curve-dates' was set to.\n                if (!oldDatesExist) {\n                    const curveDate = $('#controlButton-curve-dates-value').text();\n                    matsParamUtils.setValueTextForParamName('dates', curveDate)\n                }\n            }\n        }\n    },\n    'click .plot-type-Map': function (event) {\n        if (Session.get(\"confirmPlotChange\")) {\n            // change has been confirmed\n            // see if the previous plot type also used the 'dates' parameter\n            const oldDatesExist = matsParamUtils.isParamVisible('dates');\n            matsCurveUtils.showMapFace();\n            var curves = Session.get('Curves');\n            // if a 'dates' parameter was already in use, we want to keep that value.\n            // otherwise, set the 'dates' parameter to whatever 'curve-dates' was set to.\n            if (!oldDatesExist) {\n                const curveDate = $('#controlButton-curve-dates-value').text();\n                matsParamUtils.setValueTextForParamName('dates', curveDate)\n            }\n            if (curves.length > 0) {\n                // initialize parameters that may not have been used yet\n                for (var ci = 0; ci < curves.length; ci++) {\n                    if (!curves[ci]['valid-time'] && matsCollections.CurveParams.findOne({name: 'valid-time'}) && matsCollections.CurveParams.findOne({name: 'valid-time'}).default) {\n                        curves[ci]['valid-time'] = matsCollections.CurveParams.findOne({name: 'valid-time'}).default;\n                    }\n                    if (!curves[ci]['forecast-length'] && matsCollections.CurveParams.findOne({name: 'forecast-length'}) && matsCollections.CurveParams.findOne({name: 'forecast-length'}).default) {\n                        curves[ci]['forecast-length'] = matsCollections.CurveParams.findOne({name: 'forecast-length'}).default;\n                    }\n                }\n                Session.set('Curves', curves);\n            }\n            Session.set(\"confirmPlotChange\", \"\");\n            Session.set('plotChangeType', \"\");\n        } else {\n            // no confirmation yet so check to see if we have any curves and if so then show the confirm dialog\n            if (Session.get(\"Curves\").length > 0) {\n                Session.set('plotChangeType', matsTypes.PlotTypes.map);\n                $(\"#modal-change-plot-type\").modal();\n            } else {\n                // no curves - just set the map face\n                // see if the previous plot type also used the 'dates' parameter\n                const oldDatesExist = matsParamUtils.isParamVisible('dates');\n                matsCurveUtils.showMapFace();\n                // if a 'dates' parameter was already in use, we want to keep that value.\n                // otherwise, set the 'dates' parameter to whatever 'curve-dates' was set to.\n                if (!oldDatesExist) {\n                    const curveDate = $('#controlButton-curve-dates-value').text();\n                    matsParamUtils.setValueTextForParamName('dates', curveDate)\n                }\n            }\n        }\n    },\n    'click .plot-type-Histogram': function (event) {\n        if (Session.get(\"confirmPlotChange\")) {\n            // change has been confirmed\n            // see if the previous plot type also used the 'curve-dates' parameter\n            const oldCurveDatesExist = matsParamUtils.isParamVisible('curve-dates');\n            matsCurveUtils.showHistogramFace();\n            var curves = Session.get('Curves');\n            // if a 'curve-dates' parameter was already in use, we want to keep that value.\n            // otherwise, set the 'curve-dates' parameter to whatever 'dates' was set to.\n            const tsDate = $('#controlButton-dates-value').text();\n            if (!oldCurveDatesExist) {\n                matsParamUtils.setValueTextForParamName('curve-dates', tsDate)\n            }\n            if (curves.length > 0) {\n                // initialize parameters that may not have been used yet\n                for (var ci = 0; ci < curves.length; ci++) {\n                    if (tsDate !== undefined && tsDate !== \"\" && !oldCurveDatesExist) {\n                        curves[ci]['curve-dates'] = tsDate;\n                    }\n                    if (!curves[ci]['valid-time'] && matsCollections.CurveParams.findOne({name: 'valid-time'}) && matsCollections.CurveParams.findOne({name: 'valid-time'}).default) {\n                        curves[ci]['valid-time'] = matsCollections.CurveParams.findOne({name: 'valid-time'}).default;\n                    }\n                    if (!curves[ci]['threshold'] && matsCollections.CurveParams.findOne({name: 'threshold'}) && matsCollections.CurveParams.findOne({name: 'threshold'}).default) {\n                        curves[ci]['threshold'] = matsCollections.CurveParams.findOne({name: 'threshold'}).default;\n                    }\n                    if (!curves[ci]['forecast-length'] && matsCollections.CurveParams.findOne({name: 'forecast-length'}) && matsCollections.CurveParams.findOne({name: 'forecast-length'}).default) {\n                        curves[ci]['forecast-length'] = matsCollections.CurveParams.findOne({name: 'forecast-length'}).default;\n                    }\n                    if (!curves[ci]['region'] && matsCollections.CurveParams.findOne({name: 'region'}) && matsCollections.CurveParams.findOne({name: 'region'}).default) {\n                        curves[ci]['region'] = matsCollections.CurveParams.findOne({name: 'region'}).default;\n                    }\n                    if (!curves[ci]['statistic'] && matsCollections.CurveParams.findOne({name: 'statistic'}) && matsCollections.CurveParams.findOne({name: 'statistic'}).default) {\n                        curves[ci]['statistic'] = matsCollections.CurveParams.findOne({name: 'statistic'}).default;\n                    }\n                    if (!curves[ci]['truth'] && matsCollections.CurveParams.findOne({name: 'truth'}) && matsCollections.CurveParams.findOne({name: 'truth'}).default) {\n                        curves[ci]['truth'] = matsCollections.CurveParams.findOne({name: 'truth'}).default;\n                    }\n                    if (!curves[ci]['histogram-bin-controls'] && matsCollections.CurveParams.findOne({name: 'histogram-bin-controls'}) && matsCollections.CurveParams.findOne({name: 'histogram-bin-controls'}).default) {\n                        curves[ci]['histogram-bin-controls'] = matsCollections.CurveParams.findOne({name: 'histogram-bin-controls'}).default;\n                    }\n                    if (!curves[ci]['histogram-yaxis-controls'] && matsCollections.CurveParams.findOne({name: 'histogram-yaxis-controls'}) && matsCollections.CurveParams.findOne({name: 'histogram-yaxis-controls'}).default) {\n                        curves[ci]['histogram-yaxis-controls'] = matsCollections.CurveParams.findOne({name: 'histogram-yaxis-controls'}).default;\n                    }\n                }\n                Session.set('Curves', curves);\n            }\n            Session.set(\"confirmPlotChange\", \"\");\n            Session.set('plotChangeType', \"\");\n        } else {\n            // no confirmation yet so check to see if we have any curves and if so then show the confirm dialog\n            if (Session.get(\"Curves\").length > 0) {\n                Session.set('plotChangeType', matsTypes.PlotTypes.histogram);\n                $(\"#modal-change-plot-type\").modal();\n            } else {\n                // no curves - just set the histogram face\n                // see if the previous plot type also used the 'curve-dates' parameter\n                const oldCurveDatesExist = matsParamUtils.isParamVisible('curve-dates');\n                matsCurveUtils.showHistogramFace();\n                // if a 'curve-dates' parameter was already in use, we want to keep that value.\n                // otherwise, set the 'curve-dates' parameter to whatever 'dates' was set to.\n                if (!oldCurveDatesExist) {\n                    const tsDate = $('#controlButton-dates-value').text();\n                    matsParamUtils.setValueTextForParamName('curve-dates', tsDate)\n                }\n            }\n        }\n    },\n    'click .plot-type-Contour': function (event) {\n        if (Session.get(\"confirmPlotChange\")) {\n            // change has been confirmed\n            // see if the previous plot type also used the 'dates' parameter\n            const oldDatesExist = matsParamUtils.isParamVisible('dates');\n            matsCurveUtils.showContourFace();\n            var curves = Session.get('Curves');\n            // if a 'dates' parameter was already in use, we want to keep that value.\n            // otherwise, set the 'dates' parameter to whatever 'curve-dates' was set to.\n            if (!oldDatesExist) {\n                const curveDate = $('#controlButton-curve-dates-value').text();\n                matsParamUtils.setValueTextForParamName('dates', curveDate)\n            }\n            if (curves.length > 0) {\n                // initialize parameters that may not have been used yet\n                for (var ci = 0; ci < curves.length; ci++) {\n                    // the average may not have been carried over from other curve types so let it default\n                    if (!curves[ci]['valid-time'] && matsCollections.CurveParams.findOne({name: 'valid-time'}) && matsCollections.CurveParams.findOne({name: 'valid-time'}).default) {\n                        curves[ci]['valid-time'] = matsCollections.CurveParams.findOne({name: 'valid-time'}).default;\n                    }\n                    if (!curves[ci]['utc-cycle-start'] && matsCollections.CurveParams.findOne({name: 'utc-cycle-start'}) && matsCollections.CurveParams.findOne({name: 'utc-cycle-start'}).default) {\n                        curves[ci]['utc-cycle-start'] = matsCollections.CurveParams.findOne({name: 'utc-cycle-start'}).default;\n                    }\n                    if (!curves[ci]['threshold'] && matsCollections.CurveParams.findOne({name: 'threshold'}) && matsCollections.CurveParams.findOne({name: 'threshold'}).default) {\n                        curves[ci]['threshold'] = matsCollections.CurveParams.findOne({name: 'threshold'}).default;\n                    }\n                    if (!curves[ci]['forecast-length'] && matsCollections.CurveParams.findOne({name: 'forecast-length'}) && matsCollections.CurveParams.findOne({name: 'forecast-length'}).default) {\n                        curves[ci]['forecast-length'] = matsCollections.CurveParams.findOne({name: 'forecast-length'}).default;\n                    }\n                    if (!curves[ci]['region'] && matsCollections.CurveParams.findOne({name: 'region'}) && matsCollections.CurveParams.findOne({name: 'region'}).default) {\n                        curves[ci]['region'] = matsCollections.CurveParams.findOne({name: 'region'}).default;\n                    }\n                    if (!curves[ci]['statistic'] && matsCollections.CurveParams.findOne({name: 'statistic'}) && matsCollections.CurveParams.findOne({name: 'statistic'}).default) {\n                        curves[ci]['statistic'] = matsCollections.CurveParams.findOne({name: 'statistic'}).default;\n                    }\n                    if (!curves[ci]['truth'] && matsCollections.CurveParams.findOne({name: 'truth'}) && matsCollections.CurveParams.findOne({name: 'truth'}).default) {\n                        curves[ci]['truth'] = matsCollections.CurveParams.findOne({name: 'truth'}).default;\n                    }\n                    if (!curves[ci]['x-axis-parameter'] && matsCollections.CurveParams.findOne({name: 'x-axis-parameter'}) && matsCollections.CurveParams.findOne({name: 'x-axis-parameter'}).default) {\n                        curves[ci]['x-axis-parameter'] = matsCollections.CurveParams.findOne({name: 'x-axis-parameter'}).default;\n                    }\n                    if (!curves[ci]['y-axis-parameter'] && matsCollections.CurveParams.findOne({name: 'y-axis-parameter'}) && matsCollections.CurveParams.findOne({name: 'y-axis-parameter'}).default) {\n                        curves[ci]['y-axis-parameter'] = matsCollections.CurveParams.findOne({name: 'y-axis-parameter'}).default;\n                    }\n                }\n                Session.set('Curves', curves);\n            }\n            Session.set(\"confirmPlotChange\", \"\");\n            Session.set('plotChangeType', \"\");\n        } else {\n            // no confirmation yet so check to see if we have any curves and if so then show the confirm dialog\n            if (Session.get(\"Curves\").length > 0) {\n                Session.set('plotChangeType', matsTypes.PlotTypes.contour);\n                $(\"#modal-change-plot-type\").modal();\n            } else {\n                // no curves - just set the contour face\n                // see if the previous plot type also used the 'dates' parameter\n                const oldDatesExist = matsParamUtils.isParamVisible('dates');\n                matsCurveUtils.showContourFace();\n                // if a 'dates' parameter was already in use, we want to keep that value.\n                // otherwise, set the 'dates' parameter to whatever 'curve-dates' was set to.\n                if (!oldDatesExist) {\n                    const curveDate = $('#controlButton-curve-dates-value').text();\n                    matsParamUtils.setValueTextForParamName('dates', curveDate)\n                }\n            }\n        }\n    },\n    'click .plot-type-ContourDiff': function (event) {\n        if (Session.get(\"confirmPlotChange\")) {\n            // change has been confirmed\n            // see if the previous plot type also used the 'dates' parameter\n            const oldDatesExist = matsParamUtils.isParamVisible('dates');\n            matsCurveUtils.showContourFace();\n            var curves = Session.get('Curves');\n            // if a 'dates' parameter was already in use, we want to keep that value.\n            // otherwise, set the 'dates' parameter to whatever 'curve-dates' was set to.\n            if (!oldDatesExist) {\n                const curveDate = $('#controlButton-curve-dates-value').text();\n                matsParamUtils.setValueTextForParamName('dates', curveDate)\n            }\n            if (curves.length > 0) {\n                // initialize parameters that may not have been used yet\n                for (var ci = 0; ci < curves.length; ci++) {\n                    // the average may not have been carried over from other curve types so let it default\n                    if (!curves[ci]['valid-time'] && matsCollections.CurveParams.findOne({name: 'valid-time'}) && matsCollections.CurveParams.findOne({name: 'valid-time'}).default) {\n                        curves[ci]['valid-time'] = matsCollections.CurveParams.findOne({name: 'valid-time'}).default;\n                    }\n                    if (!curves[ci]['utc-cycle-start'] && matsCollections.CurveParams.findOne({name: 'utc-cycle-start'}) && matsCollections.CurveParams.findOne({name: 'utc-cycle-start'}).default) {\n                        curves[ci]['utc-cycle-start'] = matsCollections.CurveParams.findOne({name: 'utc-cycle-start'}).default;\n                    }\n                    if (!curves[ci]['threshold'] && matsCollections.CurveParams.findOne({name: 'threshold'}) && matsCollections.CurveParams.findOne({name: 'threshold'}).default) {\n                        curves[ci]['threshold'] = matsCollections.CurveParams.findOne({name: 'threshold'}).default;\n                    }\n                    if (!curves[ci]['forecast-length'] && matsCollections.CurveParams.findOne({name: 'forecast-length'}) && matsCollections.CurveParams.findOne({name: 'forecast-length'}).default) {\n                        curves[ci]['forecast-length'] = matsCollections.CurveParams.findOne({name: 'forecast-length'}).default;\n                    }\n                    if (!curves[ci]['region'] && matsCollections.CurveParams.findOne({name: 'region'}) && matsCollections.CurveParams.findOne({name: 'region'}).default) {\n                        curves[ci]['region'] = matsCollections.CurveParams.findOne({name: 'region'}).default;\n                    }\n                    if (!curves[ci]['statistic'] && matsCollections.CurveParams.findOne({name: 'statistic'}) && matsCollections.CurveParams.findOne({name: 'statistic'}).default) {\n                        curves[ci]['statistic'] = matsCollections.CurveParams.findOne({name: 'statistic'}).default;\n                    }\n                    if (!curves[ci]['truth'] && matsCollections.CurveParams.findOne({name: 'truth'}) && matsCollections.CurveParams.findOne({name: 'truth'}).default) {\n                        curves[ci]['truth'] = matsCollections.CurveParams.findOne({name: 'truth'}).default;\n                    }\n                    if (!curves[ci]['x-axis-parameter'] && matsCollections.CurveParams.findOne({name: 'x-axis-parameter'}) && matsCollections.CurveParams.findOne({name: 'x-axis-parameter'}).default) {\n                        curves[ci]['x-axis-parameter'] = matsCollections.CurveParams.findOne({name: 'x-axis-parameter'}).default;\n                    }\n                    if (!curves[ci]['y-axis-parameter'] && matsCollections.CurveParams.findOne({name: 'y-axis-parameter'}) && matsCollections.CurveParams.findOne({name: 'y-axis-parameter'}).default) {\n                        curves[ci]['y-axis-parameter'] = matsCollections.CurveParams.findOne({name: 'y-axis-parameter'}).default;\n                    }\n                }\n                Session.set('Curves', curves);\n            }\n            Session.set(\"confirmPlotChange\", \"\");\n            Session.set('plotChangeType', \"\");\n        } else {\n            // no confirmation yet so check to see if we have any curves and if so then show the confirm dialog\n            if (Session.get(\"Curves\").length > 0) {\n                Session.set('plotChangeType', matsTypes.PlotTypes.contourDiff);\n                $(\"#modal-change-plot-type\").modal();\n            } else {\n                // no curves - just set the contour face\n                // see if the previous plot type also used the 'dates' parameter\n                const oldDatesExist = matsParamUtils.isParamVisible('dates');\n                matsCurveUtils.showContourFace();\n                // if a 'dates' parameter was already in use, we want to keep that value.\n                // otherwise, set the 'dates' parameter to whatever 'curve-dates' was set to.\n                if (!oldDatesExist) {\n                    const curveDate = $('#controlButton-curve-dates-value').text();\n                    matsParamUtils.setValueTextForParamName('dates', curveDate)\n                }\n            }\n        }\n    },\n    'click .plot-type-Scatter2d': function (event) {\n        if (Session.get(\"confirmPlotChange\")) {\n            // change has been confirmed\n            // see if the previous plot type also used the 'dates' parameter\n            const oldDatesExist = matsParamUtils.isParamVisible('dates');\n            matsCurveUtils.showScatterFace();\n            // if a 'dates' parameter was already in use, we want to keep that value.\n            // otherwise, set the 'dates' parameter to whatever 'curve-dates' was set to.\n            if (!oldDatesExist) {\n                const curveDate = $('#controlButton-curve-dates-value').text();\n                matsParamUtils.setValueTextForParamName('dates', curveDate)\n            }\n            Session.set(\"confirmPlotChange\", \"\");\n            Session.set('plotChangeType', \"\");\n        } else {\n            // no confirmation yet so check to see if we have any curves and if so then show the confirm dialog\n            if (Session.get(\"Curves\").length > 0) {\n                Session.set('plotChangeType', matsTypes.PlotTypes.scatter2d);\n                $(\"#modal-change-plot-type\").modal();\n            } else {\n                // no curves - just set the scatter face\n                // see if the previous plot type also used the 'dates' parameter\n                const oldDatesExist = matsParamUtils.isParamVisible('dates');\n                matsCurveUtils.showScatterFace();\n                // if a 'dates' parameter was already in use, we want to keep that value.\n                // otherwise, set the 'dates' parameter to whatever 'curve-dates' was set to.\n                if (!oldDatesExist) {\n                    const curveDate = $('#controlButton-curve-dates-value').text();\n                    matsParamUtils.setValueTextForParamName('dates', curveDate)\n                }\n            }\n        }\n    }\n});\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { matsMethods } from 'meteor/randyp:mats-common';\n\nTemplate.reset.events({\n    'click .apply_reset': function () {\n        const settings = matsCollections.Settings.findOne({});\n        if (settings === undefined) {\n            setError(new Error(\"reset failed - cannot readsettings\"));\n            return;\n        }\n        const appName = settings.Title;\n        const appVersion = settings.version;\n        matsMethods.reset.call({appName:appName, appVersion:appVersion},function(error){\n            if (error) {\n                setError(new Error(\"matsMethods.reset from reset.js \" +error.message));\n            }\n        });\n        $(\"#resetModal\").modal('hide');\n        return false;\n    }\n});\n\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport {matsMethods} from 'meteor/randyp:mats-common';\n\n\nTemplate.export.onRendered( function() {\n       matsMethods.getDataFunctionFileList.call( function (error, result) {\n           //    //console.log ('result is : ' + JSON.stringify(result, null, '\\t'));\n           if (error !== undefined) {\n               setError(new Error(\"matsMethods.getDataFunctionFileList from template export error: \" + error.toLocaleString()));\n               return false;\n           }\n           Session.set('dataFunctionFileList',result);\n       });\n       matsMethods.getGraphFunctionFileList.call(function (error, result) {\n           //    //console.log ('result is : ' + JSON.stringify(result, null, '\\t'));\n           if (error !== undefined) {\n               setError(new Error)(\"matsMethods.graphFunctionFileList from export.js error: \" + error.toLocaleString());\n               return false;\n           }\n           Session.set('graphFunctionFileList',result);\n       });\n\n    });\n\n    Template.export.helpers({\n        dataFiles: function() {\n            return Session.get('dataFunctionFileList');\n        },\n        graphFiles: function() {\n            return Session.get('graphFunctionFileList');\n        }\n    });\n\n    Template.export.events({\n    'click .apply_export': function (event) {\n        event.preventDefault();\n        var parameterOut = document.getElementById('parameterFile').checked;\n        var dataFiles = [];\n        var graphFiles = [];\n        $(\"input:checkbox[name=dataFiles]:checked\").each(function(){\n            dataFiles.push($(this).val());\n        });\n        $(\"input:checkbox[name=graphFiles]:checked\").each(function(){\n            graphFiles.push($(this).val());\n        });\n        if(parameterOut) {\n            var data = {};\n            data.CurveParams = matsCollections.CurveParams.find({}).fetch();\n            data.PlotParams = matsCollections.PlotParams.find({}).fetch();\n            data.PlotGraphFunctions = matsCollections.PlotGraphFunctions.find({}).fetch();\n            data.Settings = matsCollections.Settings.find({}).fetch();\n            data.ColorScheme = matsCollections.ColorScheme.find({}).fetch();\n            data.Authorization = matsCollections.Authorization.find({}).fetch();\n            data.Roles = matsCollections.Roles.find({}).fetch();\n            data.Databases = matsCollections.Databases.find({}).fetch();\n            data.Credentials = matsCollections.Credentials.find({}).fetch();\n            var json = JSON.stringify(data, null, 2);\n            var blob = new Blob([json], {type: \"application/json\"});\n            var url = URL.createObjectURL(blob);\n            var a = document.createElement('a');\n            a.download = \"export.json\";\n            a.href = url;\n            a.target = '_blank';\n            a.textContent = \"export.json\";\n            document.body.appendChild(a);\n            a.click();\n        }\n\n        if (dataFiles.length > 0) {\n            dataFiles.forEach(function(file){\n                matsMethods.readFunctionFile('data',file, function (error, result) {\n                    if (error !== undefined) {\n                        setError(new Error(error.toLocaleString()));\n                        return false;\n                    }\n                    data = result;\n                    var blob = new Blob([result], {type: \"application/javascript\"});\n                    var url = URL.createObjectURL(blob);\n                    var a = document.createElement('a');\n                    a.download = file;\n                    a.href = url;\n                    a.target = '_blank';\n                    a.textContent = file;\n                    document.body.appendChild(a);\n                    a.click();\n                });\n            });\n        }\n\n        if (graphFiles.length > 0) {\n            graphFiles.forEach(function(file){\n                matsMethods.readFunctionFile('graph', file, function (error, result) {\n                    if (error !== undefined) {\n                        setError(new Error(error.toLocaleString()));\n                        return false;\n                    }\n                    data = result;\n                    var blob = new Blob([result], {type: \"application/javascript\"});\n                    var url = URL.createObjectURL(blob);\n                    var a = document.createElement('a');\n                    a.download = file;\n                    a.href = url;\n                    a.target = '_blank';\n                    a.textContent = file;\n                    document.body.appendChild(a);\n                    a.click();\n                });\n            });\n        }\n\n        $(\"#exportModal\").modal('hide');\n        return false;\n    }\n});\n\n","\n/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsMethods} from 'meteor/randyp:mats-common';\n\n\nTemplate.import.events({\n    'change .data_file_import': function (event, template) {\n        event.preventDefault();\n        if (window.File && window.FileReader && window.FileList && window.Blob) {\n            // Great success! All the File APIs are supported.\n        } else {\n            alert('The File APIs are not fully supported in this browser.');\n        }\n        var files = event.target.files;\n        for (var i = 0, f; f = files[i]; i++) {\n            var reader = new FileReader();\n            reader.fileName = f.name;\n            reader.onload = (function(f) {\n                return function(e) {\n                    var name = e.target.fileName;\n                    try {\n                        matsMethods.restoreFromFile({type:\"graph\", name:name, data:e.target.result}, function (error) {\n                            if (error) {\n                                setError(new Error(error.message));\n                            }\n                        });\n                    } catch(exc) {\n                        setError(new Error(\"Error reading file: \" + name + \" - \"+ exc.toLocaleString()));\n                    }\n                };\n            })(f);\n            reader.readAsText(f);\n        }\n        document.getElementById(\"dataFileImport\").value = \"\";\n        $(\"#importModal\").modal('hide');\n        return false;\n    },\n    'change .graph_file_import': function (event, template) {\n        event.preventDefault();\n        if (window.File && window.FileReader && window.FileList && window.Blob) {\n            // Great success! All the File APIs are supported.\n        } else {\n            alert('The File APIs are not fully supported in this browser.');\n        }\n        var files = event.target.files;\n        for (var i = 0, f; f = files[i]; i++) {\n            var reader = new FileReader();\n            reader.fileName = f.name;\n            reader.onload = (function(f) {\n                return function(e) {\n                    var name = e.target.fileName;\n                    try {\n                        matsMethods.restoreFromFile({type:\"graph\", name:name, data:e.target.result}, function (error) {\n                            if (error) {\n                                setError(new Error(error.message));\n                            }\n                        });\n                    } catch(exc) {\n                        setError(new Error(\"Error reading file: \" + name + \" - \"+ exc.toLocaleString()));\n                    }\n                };\n            })(f);\n            reader.readAsText(f);\n        }\n        document.getElementById(\"graphFileImport\").value = \"\";\n        $(\"#importModal\").modal('hide');\n        return false;\n    },\n    'change .parameter_file_import': function (event, template) {\n        event.preventDefault();\n        if (window.File && window.FileReader && window.FileList && window.Blob) {\n            // Great success! All the File APIs are supported.\n        } else {\n            alert('The File APIs are not fully supported in this browser.');\n        }\n        var files = event.target.files;\n        for (var i = 0, f; f = files[i]; i++) {\n            var reader = new FileReader();\n            reader.fileName = f.name;\n            reader.onload = (function (f) {\n                return function (e) {\n                    var name = e.target.fileName;\n                    try {\n                        var data = JSON.parse(e.target.result);\n                       matsMethods.restoreFromParameterFile( {name:name, data:data}, function (error) {\n                            if (error) {\n                                setError(new Error(error.message));\n                            }\n                        });\n                    } catch (exc) {\n                        setError(new Error(\"Error reading file: \" + name + \" - \" + exc.toLocaleString()));\n                    }\n                };\n            })(f);\n            reader.readAsText(f);\n        }\n        document.getElementById(\"parameterFileImport\").value = \"\";\n        $(\"#importModal\").modal('hide');\n        return false;\n    }\n});\n\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { Meteor } from 'meteor/meteor';\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport {matsMethods} from 'meteor/randyp:mats-common';\nTemplate.settings.helpers({\n    LabelPrefix: function(){\n        var settings = matsCollections.Settings.findOne({});\n        return settings === undefined ? \"\" : settings.LabelPrefix;\n    },\n    Title: function(){\n        var settings = matsCollections.Settings.findOne({});\n        return settings === undefined ? \"\" : settings.Title;\n    },\n    LineWidth: function(){\n        var settings = matsCollections.Settings.findOne({});\n        return settings === undefined ? \"\" : settings.LineWidth;\n    },\n    NullFillString: function(){\n        var settings = matsCollections.Settings.findOne({});\n        return settings === undefined ? \"\" : settings.NullFillString;\n    },\n    ResetFromCodeChecked: function(){\n        var settings = matsCollections.Settings.findOne({});\n        if (settings && settings.resetFromCode == true) {\n            return \"checked\";\n        } else {\n            return \"\";\n        }\n    }\n});\nTemplate.settings.events({\n    'click .apply_settings': function () {\n        // var labelPrefix = document.getElementById(\"LabelPrefix\").value;\n        // var title = document.getElementById(\"Title\").value;\n        // var lineWidth = document.getElementById(\"LineWidth\").value;\n        // var nullFillString = document.getElementById(\"NullFillString\").value;\n        // var resetFromCode = document.getElementById(\"ResetFromCode\").checked;\n\n        // var settings = {};\n        // settings.labelPrefix = labelPrefix;\n        // settings.title = title;\n        // settings.lineWidth = lineWidth;\n        // settings.nullFillString = nullFillString;\n        // settings.resetFromCode = resetFromCode;\n        // matsMethods.setSettings.call({'settings':settings}, function (error) {\n        //     if (error) {\n        //         setError(new Error(error.message));\n        //     }\n        // });\n        //// reset modal\n        //document.getElementById(\"LabelPrefix\").value = \"\";\n        //document.getElementById(\"Title\").value = \"\";\n        //document.getElementById(\"LineWidth\").value = \"\";\n        //document.getElementById(\"NullFillString\").value = \"\";\n        //document.getElementById(\"ResetFromCode\").checked = false;\n        $(\"#settingsModal\").modal('hide');\n        Session.set(\"adminChanged\", new Date());\n        return false;\n    },\n    'click .cancel-settings': function() {\n        // reset the form\n        document.getElementById(\"LabelPrefix\").value = \"\";\n        document.getElementById(\"Title\").value = \"\";\n        document.getElementById(\"LineWidth\").value = \"\";\n        document.getElementById(\"NullFillString\").value = \"\";\n        document.getElementById(\"ResetFromCode\").checked = false;\n    }\n});\n\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport { matsMethods } from 'meteor/randyp:mats-common';\n\nTemplate.databases.onRendered(function () {\n    reset();\n});\nTemplate.databases.helpers({\n    databases : function() {\n        dbs = matsCollections.Databases.find({}).fetch();\n        dbs.unshift({name:\"New Database\"});\n        return dbs;\n    },\n    errorMessage: function() {\n        return Session.get(\"databaseErrorMessage\");\n    },\n    errorTypeIs: function(type) {\n        return Session.get(\"databaseErrorType\") === type;\n    }\n\n\n});\nvar reset = function(){\n    document.getElementById(\"database-selection\").value = \"\";\n    document.getElementById(\"database-name\").value = \"\";\n    document.getElementById(\"database-role-model\").checked = false;\n    document.getElementById(\"database-role-ua\").checked = false;\n    document.getElementById(\"database-status-standby\").checked = false;\n    document.getElementById(\"database-status-active\").checked = false;\n    document.getElementById(\"database-host\").value = \"\";\n    document.getElementById(\"database-database\").value = \"\";\n    document.getElementById(\"database-user\").value = \"\";\n    document.getElementById(\"database-password\").value = \"\";\n    document.getElementById(\"database-verify\").value = \"\";\n    resetError();\n};\nvar resetError = function() {\n    errorMessage = \"\";\n    Session.set(\"databaseErrorMessage\",\"\");\n    Session.set(\"databaseErrorType\",\"\");\n    if (document.getElementById(\"errorMessage\")) {\n        document.getElementById(\"errorMessage\").style.display = \"none\";\n    }\n};\nvar setError = function(type,message) {\n    Session.set(\"databaseErrorMessage\", message);\n    Session.set(\"databaseErrorType\", type);\n\n    document.getElementById(\"errorMessage\").style.display = \"block\";\n};\n\nTemplate.databases.events({\n    'click .database': function() {\n        resetError();\n        var dbName = document.getElementById(\"database-selection\").value;\n        if (dbName == \"New Database\") {\n            reset();\n            return false;\n        }\n        var db = matsCollections.Databases.findOne({name:dbName});\n        document.getElementById(\"database-selection\").value = \"\";\n        document.getElementById(\"database-name\").value = db.name;\n        document.getElementById(\"database-role-model\").checked = db.role == \"model\";\n        document.getElementById(\"database-role-ua\").checked = db.role == \"ua\";\n        document.getElementById(\"database-status-standby\").checked = db.status == \"standby\";\n        document.getElementById(\"database-status-active\").checked = db.status == \"active\";\n        document.getElementById(\"database-host\").value = db.host;\n        document.getElementById(\"database-database\").value = db.database;\n        document.getElementById(\"database-user\").value = db.user;\n        document.getElementById(\"database-password\").value = db.password;\n        document.getElementById(\"database-verify\").value = db.password;\n    },\n    'click .apply-database': function () {\n        var settings = {};\n        resetError();\n        settings.name = document.getElementById(\"database-name\").value;\n        if (document.getElementById(\"database-role-model\").checked === true) {\n            settings.role = \"model\";\n        } else if (document.getElementById(\"database-role-ua\").checked === true) {\n            settings.role = \"ua\";\n        }\n        if (document.getElementById(\"database-status-standby\").checked === true) {\n            settings.status = \"standby\";\n        } else if (document.getElementById(\"database-status-active\").checked === true) {\n            // set any other database with this role to standby\n            matsCollections.Databases.upsert({});\n            settings.status = \"active\";\n        }\n        settings.host = document.getElementById(\"database-host\").value;\n        settings.database = document.getElementById(\"database-database\").value;\n        settings.user = document.getElementById(\"database-user\").value;\n        settings.password = document.getElementById(\"database-password\").value;\n        var verify = document.getElementById(\"database-verify\").value;\n        if (settings.password != verify) {\n            setError('password',\"Password and Verify do not match!\");\n            return false;\n        }\n        if (settings.name === \"\") {\n            setError(\"name\",\"you have to set a name\");\n            return false;\n        }\n        // ONLY ONE CAN BE ACTIVE FOR A GIVEN ROLE\n        //if (settings.role === \"\") {\n        //    setError(role,\"you have to set a role\");\n        //    return false;\n        //}\n        if (settings.host === \"\"){\n            setError('host',\"you have to set a host\");\n            return false;\n        }\n        if (settings.database === \"\"){\n            setError('database',\"you have to set a database\");\n            return false;\n        }\n        if (settings.user === \"\"){\n            setError('user',\"you have to set a user\");\n            return false;\n        }\n\n        matsMethods.applyDatabaseSettings.call( settings, function (error) {\n            if (error) {\n                setError(new error('matsMethods.applyDatabaseSettings from Template.databases.events: 121 error:' + error.message));\n                return false;\n            }\n        });\n        reset();\n        $(\"#databasesModal\").modal('hide');\n        return false;\n    },\n    'click .remove-database': function() {\n        var dbName = document.getElementById(\"database-name\").value;\n        matsMethods.removeDatabase.call( dbName, function (error) {\n            if (error) {\n                setError(new Error('matsMethods.removeDatabase from Template.databases.events: 121 error:' + error.message));\n            }\n        });\n        reset();\n        $(\"#databasesModal\").modal('hide');\n        return false;\n    },\n    'click .cancel-database': function() {\n        reset();\n    }\n});\n\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\n/**\n * Created by pierce on 8/13/15.\n */\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { Meteor } from 'meteor/meteor';\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport {matsMethods} from 'meteor/randyp:mats-common';\n\nTemplate.colorScheme.helpers({\n    colorOptions : function() {\n        var colorScheme = matsCollections.ColorScheme.findOne({});\n        if (colorScheme === undefined) {return false;}\n        var colors = colorScheme.colors;\n        var colorOptions = [];\n        for (var i = 0; i < colors.length; i++) {\n            colorOptions.push({color:colors[i]});\n        }\n        return colorOptions;\n    }\n});\n\nTemplate.colorScheme.events({\n    'click .apply-color-scheme': function () {\n        var removeColor = document.getElementById(\"removeColor\").value;\n        var insertAfterColor = document.getElementById(\"insertAfterColor\").value;\n        var newColor = document.getElementById(\"colorSchemePicker\").value;\n        var colors = matsCollections.ColorScheme.findOne({}).colors;\n        if (newColor) {\n            var insertAfterIndex = 0;\n            if (insertAfterColor) {\n                insertAfterIndex = colors.indexOf(insertAfterColor);\n            }\n            matsMethods.insertColor({newColor:newColor,insertAfterIndex:insertAfterIndex}, function (error) {\n                if (error) {\n                    setError(new Error(error.message));\n                }\n            });\n        }\n        if (removeColor) {\n            Meteor.call('removeColor', removeColor, function (error) {\n                if (error) {\n                    setError(new Error(error.message));\n                }\n            });\n        }\n        // reset modal\n        document.getElementById(\"removeColor\").value = \"\";\n        document.getElementById(\"insertAfterColor\").value = \"\";\n        document.getElementById(\"colorSchemePicker\").color=\"rgb(255,255,255)\";\n        document.getElementById(\"colorSchemePicker\").value=\"rgb(255,255,255)\";\n        document.getElementById(\"colorSchemePickerIndicator\").style.backgroundColor=\"rgb(255,255,255)\";\n        $(\"#colorSchemeModal\").modal('hide');\n        return false;\n    },\n    'click .cancel-color-scheme': function() {\n        // reset the form\n        document.getElementById(\"removeColor\").value = null;\n        document.getElementById(\"removeColor\").value = \"\";\n        document.getElementById(\"insertAfterColor\").value = \"\";\n        document.getElementById(\"colorSchemePicker\").color=\"rgb(255,255,255)\";\n        document.getElementById(\"colorSchemePicker\").value=\"rgb(255,255,255)\";\n        document.getElementById(\"colorSchemePickerIndicator\").style.backgroundColor=\"rgb(255,255,255)\";\n    }\n});\n\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { Meteor } from 'meteor/meteor';\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport {matsTypes} from 'meteor/randyp:mats-common';\n/**\n * Created by pierce on 8/13/15.\n */\nTemplate.curveParams.onRendered(function () {\n    reset();\n});\n\nTemplate.curveParams.helpers({\n    curveParams : function() {\n        if (Session.get('params') === undefined) {\n            var params = matsCollections.CurveParams.find({}, {sort: {displayOrder:1}}).fetch();\n            Session.set('params',params);\n        }\n        return Session.get('params');\n    },\n    optionRows: function() {\n        var rows = \"\";\n        // find the object in the session that is associated with the currently selected name\n        var params = Session.get('params');\n        if (params == undefined) {\n            return \"\";\n        }\n        if (!document.getElementById('curveParams-selection') || document.getElementById('curveParams-selection') == \"\") {\n            return \"\";\n        }\n        var paramSelectedName = document.getElementById('curveParams-selection').value;\n        var param = params.filter(function ( obj ) {\n            return obj.name === paramSelectedName;\n        })[0];\n        if (param == undefined) {\n            return;\n        }\n        var optionsMap = param.optionsMap;\n        if (optionsMap == undefined) {\n            return \"\";\n        }\n\n        // create the options table rows\n        var optionKeys = Object.keys(optionsMap);\n        param.options = optionKeys;\n        for (var i=0; i< optionKeys.length;i++){\n            var optionList = optionsMap[optionKeys[i]];\n            rows += '<tr><td contentEditable width=\"10%\" style=\"min-width:3em;\"><input data-field=\"optionsMap.' + optionKeys[i] + \"_\" + i + '\" id=\"curveParams-option-' + i + '\" class=\"form-control data-input textInput\" type=\"text\" value=\"' + optionKeys[i] + '\"/></td>';\n            for (var oli=0; oli<optionList.length;oli++) {\n                rows += '<td contentEditable><textarea data-field=\"optionsMap.' + optionKeys[i]  + '_' + i + '['+ oli +']' + '\" id=\"curveParams-optionList-' + i + '-' + oli + '\" class=\"form-control data-input optionsTable\"' + '<span style=\"font-size:x-small\">' + optionList[oli] + '</textarea></td>';\n            }\n            rows += '<td><span><button id=\"curveParams-option-field-add-' + optionKeys[i] + '\" class=\"option-field-add btn btn-xs btn-success fa fa-plus\"/>';\n            rows += '<button id=\"curveParams-option-field-del-' + optionKeys[i] + '\" class=\"option-field-del btn btn-xs btn-danger fa fa-minus\"/></span></td>';\n            rows += \"</tr>\";\n        }\n        Session.set('params',params);\n        return rows;\n    },\n    default: function() {\n        try {\n            var cname = document.getElementById(\"curveParams-selection\").value;\n\n            var c = Session.get('params').filter(function (obj) {\n                return obj.name == cname;\n            });\n            if (c) {\n                return c.default;\n            }\n            else {\n                return \"\";\n            }\n        } catch(Exception) {\n            return \"\";\n        }\n    },\n    displayOrder: function() {\n        try {\n            var cname = document.getElementById(\"curveParams-selection\").value;\n            var c = Session.get('params').filter(function (obj) {\n                return obj.name == cname;\n            });\n\n            if (c) {\n                return c.displayOrder;\n            }\n            else {\n                return 1;\n            }\n        } catch (Exception) {\n            return 1;\n        }\n    },\n    displayPriority:function() {\n        try {\n            var cname = document.getElementById(\"curveParams-selection\").value;\n            var c = Session.get('params').filter(function( obj ) {\n                return obj.name == cname;\n            });\n\n            if (c) { return c.displayPriority; }\n            else { return 1;}\n        } catch (Exception) {\n            return 1;\n        }\n\n    },\n    displayGroup:function() {\n    try {\n        var cname = document.getElementById(\"curveParams-selection\").value;\n\n        var c = Session.get('params').filter(function( obj ) {\n            return obj.name == cname;\n        });\n\n        if (c) { return c.displayGroup; }\n        else { return 1;}\n    } catch (Exception) {\n        return 1;\n    }\n\n    },\n    types: function() {\n        return Object.keys(matsTypes.InputTypes);\n    },\n    errorMessage: function() {\n        return Session.get(\"curveParamsErrorMessage\");\n    },\n    errorTypeIs: function(errType) {\n        return Session.get(\"curveParamsErrorType\") === errType;\n    },\n    restoreDates: function() {\n        try {\n            var scp = matsCollections.SavedCurveParams.findOne({'clName': 'changeList'});\n            var cl = scp.changeList;\n            var dates = [];\n            for (var i = 0; i < cl.length; i++) {\n                var utcSeconds = cl[i].savedAt;\n                var comment = \"<textarea id='ta-\" + utcSeconds + \"' style='display:none'>\" + cl[i].comment + \"</textarea>\";\n                var userName = cl[i].user.split('@')[0].replace('.',' ');\n                var user = \"<button id='btnUser-\" + utcSeconds + \"' class='btnUser btn  btn-info'>\"+ userName + \"</button>\";\n                var d = new Date(0);\n                d.setUTCSeconds(utcSeconds);\n                var mo = d.getMonth();\n                var day = d.getDate();\n                var yr = d.getFullYear();\n                var hr = d.getHours();\n                var mn = d.getMinutes();\n                var sec = d.getSeconds();\n                var dStr = mo + \"-\" + day + \"-\" + yr + \"-\" + hr + \":\" + mn + \":\" + sec;\n                dates.push({second:utcSeconds, date:dStr, user:user, userName:userName, commentStr:cl[i].comment, comment:comment});\n            }\n            return dates;\n        } catch (e) {\n            return [];\n        }\n    },\n    restoreDate: function() {\n        try {\n            var scp = matsCollections.SavedCurveParams.findOne({'clName': 'changeList'});\n            var cl = scp.changeList;\n            var utcSeconds = cl[cl.length - 1].savedAt;\n            var user = cl[cl.length - 1].user.split('@')[0].replace('.', ' ');\n            var comment = cl[cl.length - 1].comment;\n            var d = new Date(0);\n            d.setUTCSeconds(utcSeconds);\n            var mo = d.getMonth();\n            var day = d.getDate();\n            var yr = d.getFullYear();\n            var hr = d.getHours();\n            var mn = d.getMinutes();\n            var sec = d.getSeconds();\n            return mo + \"-\" + day + \"-\" + yr + \"-\" + hr + \":\" + mn + \":\" + sec + \" \" + user + \" ... \" + comment;\n        } catch (e){\n            return \"\";\n        }\n    }\n});\n\nvar reset = function(){\n    document.getElementById(\"curveParams-name\").value = \"\";\n    document.getElementById(\"curveParams-type\").value = \"\";\n    document.getElementById(\"curveParams-controlButtonCovered-true\").checked=true;\n    document.getElementById(\"curveParams-controlButtonCovered-false\").checked=false;\n    document.getElementById(\"curveParams-controlButtonVisibility-block\").checked=true;\n    document.getElementById(\"curveParams-controlButtonVisibility-none\").checked=false;\n    document.getElementById(\"curveParams-unique-true\").checked=false;\n    document.getElementById(\"curveParams-unique-false\").checked=true;\n    document.getElementById(\"curveParams-default\").value = \"\";\n    document.getElementById(\"curveParams-displayOrder\").value = 1;\n    document.getElementById(\"curveParams-displayPriority\").value = 1;\n    document.getElementById(\"curveParams-displayGroup\").value = 1;\n    resetError();\n};\nvar resetError = function() {\n    errorMessage = \"\";\n    Session.set(\"curveParamsErrorMessage\",\"\");\n    Session.set(\"curveParamsErrorType\",\"\");\n    if (document.getElementById(\"errorMessage\")) {\n        document.getElementById(\"errorMessage\").style.display = \"none\";\n    }\n};\nvar setError = function(type,message) {\n    Session.set(\"curveParamsErrorMessage\", message);\n    Session.set(\"curveParamsErrorType\", type);\n    document.getElementById(\"errorMessage\").style.display = \"block\";\n};\n\nTemplate.curveParams.events({\n    'click .curveParams-selection': function () {\n        event.preventDefault();\n        try {\n            resetError();\n            var cname = document.getElementById(\"curveParams-selection\").value;\n            reset();\n            var params = Session.get('params');\n            var c = params.filter(function (obj) {\n                return obj.name == cname;\n            })[0];  // want the first one - like collection.findOne({name:cname})\n            if (!c) {\n                return false;\n            }\n            document.getElementById(\"curveParams-name\").value = c.name;\n            document.getElementById(\"curveParams-type\").value = c.type;\n            if (c.controlButtonCovered) {\n                document.getElementById(\"curveParams-controlButtonCovered-true\").checked = true;\n                document.getElementById(\"curveParams-controlButtonCovered-false\").checked = false;\n            } else {\n                document.getElementById(\"curveParams-controlButtonCovered-true\").checked = false;\n                document.getElementById(\"curveParams-controlButtonCovered-false\").checked = true;\n            }\n            if (c.controlButtonVisibility == \"block\") {\n                document.getElementById(\"curveParams-controlButtonVisibility-block\").checked = true;\n                document.getElementById(\"curveParams-controlButtonVisibility-none\").checked = false;\n            } else {\n                document.getElementById(\"curveParams-controlButtonVisibility-block\").checked = false;\n                document.getElementById(\"curveParams-controlButtonVisibility-none\").checked = true;\n            }\n            document.getElementById(\"curveParams-default\").value = c.default;\n            document.getElementById(\"curveParams-displayOrder\").value = c.displayOrder;\n            document.getElementById(\"curveParams-displayPriority\").value = c.displayPriority;\n            document.getElementById(\"curveParams-displayGroup\").value = c.displayGroup;\n            Session.set('lastUpdate', Date.now());// force re-render to get the optionMap\n        } catch (Exception) {console.log(Exception);}\n        return false;\n    },\n    'click .curveParams-selection-add': function () {\n        event.preventDefault();\n        var dispOrder = 1;\n        var dispPri = 1;\n        var dispGroup = 1;\n        var seconds = new Date() / 1000 | 0;\n        var params = Session.get('params');\n        var optionsMap = {};\n        params.push({\n            name: 'New-' + seconds,\n            type: matsTypes.InputTypes.textInput,\n            optionsMap: optionsMap,\n            options: Object.keys(optionsMap),   // convenience\n            controlButtonCovered: true,\n            default: '',\n            unique: false,\n            controlButtonVisibility: 'block',\n            displayOrder: dispOrder,\n            displayPriority: dispPri,\n            displayGroup: dispGroup\n        });\n        Session.set('params', params);\n        return false;\n    },\n    'click .curveParams-selection-remove': function () {\n        event.preventDefault();\n        var removeName = document.getElementById(\"curveParams-selection\").value;\n        var params = Session.get('params');\n        var newParams = params.filter(function (value) {\n            return value.name != removeName\n        });\n        Session.set('params', newParams);\n        reset();\n        return false;\n    },\n    'click .curveParams-option-add': function (event) {\n        event.preventDefault();\n        try {\n            var params = Session.get('params');\n            // find the object in the session that is associated with the currently selected name\n            var paramSelectedName = document.getElementById('curveParams-selection').value;\n            var param = params.filter(function ( obj ) {\n                return obj.name === paramSelectedName;\n            })[0];\n            var optionsMap = param.optionsMap;\n            var seconds = new Date() / 1000 | 0;\n            optionsMap['new-' + seconds] = [];\n            param.optionsMap = optionsMap;\n            param.options = Object.keys(optionsMap);\n            params[paramSelectedName] = param;\n            Session.set('params',params);\n        } catch (Exception){console.log(Exception);}\n        return false;\n    },\n    'click .curveParams-option-remove': function (event) {\n        event.preventDefault();\n        try {\n            var params = Session.get('params');\n            // find the object in the session that is associated with the currently selected name\n            var paramSelectedName = document.getElementById('curveParams-selection').value;\n            var param = params.filter(function ( obj ) {\n                return obj.name === paramSelectedName;\n            })[0];\n            var optionsMap = param.optionsMap;\n            var optionSelected = Session.get('optionSelected');\n            var selectedKey = \"\";\n            if (optionSelected) {\n                selectedKey = optionSelected.key;\n            } else {\n                var keys = Object.keys(optionsMap);\n                selectedKey = keys[keys.length -1];\n            }\n            param.optionsMap = _.omit(optionsMap, selectedKey);\n            param.options = Object.keys(optionsMap);\n            params[paramSelectedName] = param;\n            Session.set('params',params);\n            Session.set('optionSelected',\"\");\n        } catch (Exception){console.log(Exception);}\n        return false;\n    },\n    'click .option-field-add': function (event) {\n        event.preventDefault();\n        try {\n            var params = Session.get('params');\n            // find the object in the session that is associated with the currently selected name\n            var paramSelectedName = document.getElementById('curveParams-selection').value;\n            var param = params.filter(function ( obj ) {\n                return obj.name === paramSelectedName;\n            })[0];\n            var options = param.optionsMap;\n            var optionSelected = Session.get('optionSelected');\n            var selectedKey = undefined;\n            if (optionSelected) {\n                selectedKey = Session.get('optionSelected').key;\n            }\n\n            if (selectedKey === undefined || selectedKey === \"\") {\n                selectedKey = event.target.id.replace('curveParams-option-field-add-','');\n            }\n            options[selectedKey].push('');\n            param.optionsMap = options;\n            params[paramSelectedName] = param;\n            Session.set('params',params);\n        } catch (Exception){console.log(Exception);}\n        return false;\n    },\n    'click .option-field-del': function () {\n        event.preventDefault();\n        var params = Session.get('params');\n        // find the object in the session that is associated with the currently selected name\n        var paramSelectedName = document.getElementById('curveParams-selection').value;\n        var param = params.filter(function ( obj ) {\n            return obj.name === paramSelectedName;\n        })[0];\n        var options = param.optionsMap;\n        var optionSelected = Session.get('optionSelected');\n        var selectedKey = \"\";\n        var listIndex = -1;\n        if (optionSelected) {\n            selectedKey = optionSelected.key;\n            listIndex = optionSelected.listIndex;\n        } else {\n            var targetId = event.target.id;\n            selectedKey = targetId.replace('curveParams-option-field-del-','');\n        }\n        if (options[selectedKey] && options[selectedKey].length > 0) {\n            if (listIndex == -1) {\n                options[selectedKey] = [];\n            } else {\n                options[selectedKey].splice(listIndex, 1);\n            }\n        }\n        param.optionsMap = options;\n        params[paramSelectedName] = param;\n        Session.set('params',params);\n        Session.set('optionSelected',\"\");\n        return false;\n    },\n    'click .optionsTable' : function(event) {\n      event.preventDefault();\n      var targetId = event.target.id;\n      if (targetId.indexOf('curveParams-option-') === 0) {\n          var key = document.getElementById(event.target.id).value;\n          var rowIndex = targetId.replace('curveParams-option-','');\n          Session.set('optionSelected',{key:key,rowIndex:rowIndex,listIndex:-1});\n      } else if (targetId.indexOf('curveParams-optionList-') === 0) {\n          var indexStr = targetId.replace('curveParams-optionList-','');\n          var indexes = indexStr.split('-');\n          var rowIndex = indexes[0];\n          var listIndex = indexes[1];\n          var key = document.getElementById('curveParams-option-' + rowIndex).value;\n          Session.set('optionSelected',{key:key,rowIndex:rowIndex,listIndex:listIndex});\n        }\n        return false;\n    },\n    'click .applyCurveParamsWithComment': function () {\n        // actually do the apply\n        event.preventDefault();\n        // first backup the existing parameters\n        Meteor.call('getUserAddress', function (error, result) {\n            if (error !== undefined) {\n                setError(new Error(error.message));\n                return false;\n            }\n\n            var emailAddress = result;\n            // save the current settings and mark comment as prior to\n            var saveSecond = new Date() / 1000 | 0;\n            var comment = document.getElementById('applyCurveParamsComment').value;\n            var paramsCursor = matsCollections.CurveParams.find({});\n            var cl = matsCollections.SavedCurveParams.findOne({'clName':'changeList'},{_id:1});\n            if (cl === undefined) {\n                matsCollections.SavedCurveParams.insert({clName: 'changeList', changeList:[]});\n                cl = matsCollections.SavedCurveParams.findOne({'clName':'changeList'},{_id:1});\n            }\n            var id = cl._id;\n            matsCollections.SavedCurveParams.update({_id:id},{$push:{changeList:{user: emailAddress, comment: \"prior to ...\" + comment, savedAt: saveSecond}} });\n            paramsCursor.forEach(function(doc) {\n                delete doc._id;\n                doc.savedSecond = saveSecond;\n                matsCollections.SavedCurveParams.insert(doc);\n            });\n\n            // now reconcile the session values and the CurveParams collection\n            resetError();\n            var params = Session.get('params');\n            var curveParams = matsCollections.CurveParams.find({}).fetch();\n            var paramNames = _.pluck(params,'name');\n            var curveParamNames =  _.pluck(curveParams,'name');\n\n            // find any superfluous params in CurveParams (this is a remove) and remove them from collection\n            var namesToRemoveFromCollection =  paramNames.filter( function( el ) {\n                return curveParamNames.indexOf( el ) < 0;\n            });\n            for (var i=0; i < namesToRemoveFromCollection.length; i++) {\n                var rName = namesToRemoveFromCollection[i];\n                var cParam = matsCollections.CurveParams.findOne({name:rName});\n                var cid = cParam._id;\n                matsCollections.CurveParams.remove({_id:cid});\n            }\n\n            // iterate all the params in the session and overwrite/insert them\n            for (var pi=0; pi < paramNames.length; pi++) {\n                var paramName = paramNames[pi];\n                var param = params.filter(function ( obj ) {\n                    return obj.name === paramName;\n                })[0];\n\n                var curveParam = matsCollections.CurveParams.findOne({name:paramName});\n                if (curveParam) {\n                    // update\n                    var cid = curveParam._id;\n                    delete param._id;\n                    matsCollections.CurveParams.update({_id:cid},{$set:param});\n                } else {\n                    //insert\n                    matsCollections.CurveParams.insert(param);\n                }\n            }\n\n            // now save the settings after modification\n            saveSecond = saveSecond + 1;\n            paramsCursor = matsCollections.CurveParams.find({});\n            cl = matsCollections.SavedCurveParams.findOne({'clName':'changeList'},{_id:1});\n            id = cl._id;\n            matsCollections.SavedCurveParams.update({_id:id},{$push:{changeList:{user: emailAddress, comment: \"post ...\" + comment, savedAt: saveSecond}} });\n            paramsCursor.forEach(function(doc) {\n                delete doc._id;\n                doc.savedSecond = saveSecond;\n                matsCollections.SavedCurveParams.insert(doc);\n            });\n\n            reset();\n            // read the params back out from the DB and set them into the Session (resets the form)\n            params = matsCollections.CurveParams.find({}, {sort: {displayOrder:1}}).fetch();\n            Session.set('params',params);\n            Session.set('lastUpdate', Date.now());// force re-render to get the optionMap\n            $(\"#applyCurveParamsModal\").modal('hide');\n        });\n        return false;\n    },\n    'click .cancel-curveParams': function() {\n        event.preventDefault();\n        reset();\n        var params = matsCollections.CurveParams.find({}, {sort: {displayOrder:1}}).fetch();\n        Session.set('params',params);\n        document.getElementById(\"curveParams-selection\").value = \"\";\n        Session.set('lastUpdate', Date.now());// force re-render to get the optionMap\n        return false;\n    },\n    'click .applyCurveParams': function() {\n        // show the apply modal dialogue\n        event.preventDefault();\n\n        $(\"#applyCurveParamsModal\").modal('show');\n        return false;\n    },\n    'click .restoreCurveParams': function() {\n        event.preventDefault();\n        $(\"#restoreCurveParamsModal\").modal('show');\n        return false;\n    },\n    'click .btnUser': function(event) {\n        event.preventDefault();\n        var targetId = event.target.id;\n        var taId = targetId.replace('btnUser-','ta-');\n        if (document.getElementById(taId).style.display=='block'){\n            document.getElementById(taId).style.display='none'\n        }else{\n            document.getElementById(taId).style.display='block'\n        }\n        return false;\n    },\n    'click .restoreCurveParamsDate': function(event) {\n        //populate input restoreFromSeconds input box with selected value and data attributes\n        event.preventDefault();\n        var targetId = event.target.id;\n        var elem = document.getElementById(targetId);\n        var second = elem.getAttribute('data-second');\n        var date = elem.getAttribute('data-date');\n        var user = elem.getAttribute('data-user');\n        var comment = elem.getAttribute('data-comment');\n\n        var rfd = document.getElementById('restoreFromSeconds');\n        rfd.setAttribute('data-second',second);\n        rfd.setAttribute('data-date',date);\n        rfd.setAttribute('data-user',user);\n        rfd.setAttribute('data-comment',comment);\n        rfd.value = date + \" \" + user + \" ... \" + comment;\n        document.getElementById(\"restore-choose-date-toggle\").click();\n        return false;\n    },\n    'click .restoreCurveParamsFromDate': function(event) {\n        // copy all dated elements with the selected savedSecond back to curveParams\n        event.preventDefault();\n        var restoreFromSeconds = document.getElementById(\"restoreFromSeconds\");\n        var savedSecond = restoreFromSeconds.getAttribute('data-second');\n        var savedParams = matsCollections.SavedCurveParams.find({'savedSecond':Number(savedSecond)});\n        savedParams.forEach(function(doc) {\n            delete doc._id;\n            delete doc.savedSecond;\n            var name = doc.name;\n            var curveParam = matsCollections.CurveParams.findOne({name:name});\n            var id = curveParam._id;\n            matsCollections.CurveParams.update({_id:id},{$set:doc});\n        });\n        Session.set('lastUpdate', Date.now());// force re-render\n        $(\"#restoreCurveParamsModal\").modal('hide');\n        return false;\n    },\n    'click .cancel-restoreCurveParamsFromDate': function(event) {\n        // copy all dated elements with the selected savedSecond back to curveParams\n        event.preventDefault();\n        $(\"#restoreCurveParamsModal\").modal('hide');\n        return false;\n    },\n    'change': function(event) {\n        // should catch all the widgets whenever a change happens.\n        // This is where we capture changes and move them to the session.\n        // When the apply is hit a different event listener will migrate the modified\n        // session settings to the collection.\n        event.preventDefault();\n        var params = Session.get('params');\n        var targetId = event.target.id;\n        if (targetId == \"curveParams-selection\") {\n            // ignore changes to the main selector\n            return false;\n        }\n\n        var elem = document.getElementById(targetId);\n        var value = elem.value;\n\n        // find the object in the session that is associated with the currently selected name\n        var paramSelectedName = document.getElementById('curveParams-selection').value;\n        var param = params.filter(function ( obj ) {\n            return obj.name === paramSelectedName;\n        })[0];\n\n        // each curveParameter is made up of several fields...\n        // the name, type, optionsMap, options (is derived from optionsMap), controlButtonCovered, unique, default, controlButtonVisibility, displayOrder, displayPriority, and displayGroup\n        // Which of these is captured by an element is set in the data-field attribute.\n        var dataField = elem.getAttribute('data-field');\n        if (!dataField) { return false;}\n        if (dataField.indexOf('optionsMap') == 0) {\n            // For an optionsMap the dataField is a cell in the optionsMap table.\n            // If it is the first column it is something like optionsMap.RH_n   i.e. RH is the value of the leftmost cell\n            // and RH is also a key of the params.optionsMap object. n is the row that the key is in.\n            // If it is the second column it is something like optionsMap.RH_n[0].\n            // That is because the in memory representation (params.optionsMap object) uses the value of the first column to\n            // denote a hashmap key, and the rest of the columns are contained in a list starting\n            // with index 0 at the left of the table.\n            // like .. key:[col2,col3,....coln], so it might be...\n            // optionsMap.RH:[0,1..n] to denote the rest of a row.\n            //NOTE: we trim the keys but not the other cell values - they might contain necessary white space.\n            var keyParts = dataField.replace('optionsMap.','').split('_');\n            var key = keyParts[0];\n\n            var optionsMap = param.optionsMap;\n            if (keyParts[1].indexOf('[') !== -1) {\n                // this is a key and list index\n                var index = keyParts[1].split('[')[1].replace(']','');\n                optionsMap[key][index] = value;\n            } else {\n                //  we are essentially renaming the key to new value and deleting the old key\n                value = value.trim();   // trim the whitespace from both ends\n                if (key != value) { // don't do it if it is somehow the same.\n                    Object.defineProperty(optionsMap, value, Object.getOwnPropertyDescriptor(optionsMap, key));\n                    delete optionsMap[key];\n                }\n            }\n            // optionsMap has been changed...\n            param.optionsMap = optionsMap;\n            param.options = Object.keys(optionsMap);\n        } else {\n            // regular field - just set the value\n            param.field = value;\n        }\n        //console.log (\"change:  value:\" + value + \"\\n  field: \" + dataField + \"\\n  paramSelectedName \" + paramSelectedName + \"  \\n param: \\n\" + JSON.stringify(param));\n        Session.set('params',params);\n        Session.set('lastUpdate', Date.now());// force re-render to get the optionMap\n        return false;\n    }\n});\n\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { Meteor } from 'meteor/meteor';\nimport {matsCollections} from 'meteor/randyp:mats-common';\n\nTemplate.authorization.helpers({\n    roleOptions : function() {\n        return matsCollections.Roles.find({}).fetch();\n    },\n    emailOptions: function(){\n        return matsCollections.Authorization.find({}).fetch();\n    }\n});\n\nTemplate.authorization.events({\n    'click .apply_authorization': function () {\n        var userRoleName = document.getElementById(\"userRoleName\").value;\n        var userRoleDescription = document.getElementById(\"userRoleDescription\").value;\n        var authorizationRole = document.getElementById(\"authorizationRole\").value;\n        var newUserEmail = document.getElementById(\"newUserEmail\").value;\n        var existingUserEmail = document.getElementById(\"existingUserEmail\").value;\n        var settings = {};\n        settings.userRoleName=userRoleName;\n        settings.userRoleDescription=userRoleDescription;\n        settings.authorizationRole=authorizationRole;\n        settings.newUserEmail=newUserEmail;\n        settings.existingUserEmail=existingUserEmail;\n\n        Meteor.call('applyAuthorization', settings, function (error) {\n            if (error) {\n                setError(new Error(error.message));\n            }\n        });\n        // reset modal\n        document.getElementById(\"userRoleName\").value = \"\";\n        document.getElementById(\"userRoleDescription\").value = \"\";\n        document.getElementById(\"authorizationRole\").value = \"\";\n        document.getElementById(\"newUserEmail\").value = \"\";\n        document.getElementById(\"existingUserEmail\").value =\"\";\n\n        $(\"#authorizationModal\").modal('hide');\n        return false;\n    },\n    'click .remove_authorization': function () {\n        var userRoleName = document.getElementById(\"userRoleName\").value;\n        var userRoleDescription = document.getElementById(\"userRoleDescription\").value;\n        var authorizationRole = document.getElementById(\"authorizationRole\").value;\n        var newUserEmail = document.getElementById(\"newUserEmail\").value;\n        var existingUserEmail = document.getElementById(\"existingUserEmail\").value;\n        var settings = {};\n        settings.userRoleName=userRoleName;\n        settings.userRoleDescription=userRoleDescription;\n        settings.authorizationRole=authorizationRole;\n        settings.newUserEmail=newUserEmail;\n        settings.existingUserEmail=existingUserEmail;\n\n        Meteor.call('removeAuthorization', settings, function (error) {\n            if (error) {\n                setError(new Error(error.message));\n            }\n        });\n        // reset modal\n        document.getElementById(\"userRoleName\").value = \"\";\n        document.getElementById(\"userRoleDescription\").value = \"\";\n        document.getElementById(\"authorizationRole\").value = \"\";\n        document.getElementById(\"newUserEmail\").value = \"\";\n        document.getElementById(\"existingUserEmail\").value =\"\";\n\n        $(\"#authorizationModal\").modal('hide');\n        return false;\n    },\n    'click .cancel-authorization': function() {\n        // reset the form\n        document.getElementById(\"userRoleName\").value = \"\";\n        document.getElementById(\"userRoleDescription\").value = \"\";\n        document.getElementById(\"authorizationRole\").value = \"\";\n        document.getElementById(\"newUserEmail\").value = \"\";\n        document.getElementById(\"existingUserEmail\").value =\"\";\n    },\n    'click .user_role_description': function() {\n        document.getElementById('authorizationRole').value = '';\n    },\n    'click .user_role_name': function() {\n        document.getElementById('authorizationRole').value = '';\n    },\n    'change .role-select': function() {\n        document.getElementById('userRoleName').value = '';\n        document.getElementById('userRoleDescription').value = '';\n    },\n    'click .user-email': function() {\n        document.getElementById('existingUserEmail').value = '';\n    },\n    'change .user-select': function() {\n        document.getElementById('newUserEmail').value = '';\n    }\n});\n\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { Meteor } from 'meteor/meteor';\nimport {matsCollections} from 'meteor/randyp:mats-common';\nimport {methods} from 'meteor/randyp:mats-common';\n\nTemplate.mailCredentials.helpers({\n    name : function() {\n        var credentials = matsCollections.Credentials.findOne({});\n        return credentials === undefined ? \"\" : credentials.name;\n    },\n    client_id: function(){\n        var credentials = matsCollections.Credentials.findOne({});\n        return credentials === undefined ? \"\" : credentials.clientId;\n    },\n    client_secret: function(){\n        var credentials = matsCollections.Credentials.findOne({});\n        return credentials === undefined ? \"\" : credentials.clientSecret;\n    },\n    refresh_token: function(){\n        var credentials = matsCollections.Credentials.findOne({});\n        return credentials === undefined ? \"\" : credentials.refresh_token;\n    }\n\n});\n\nTemplate.mailCredentials.events({\n    'click .apply_credentials': function () {\n        var name = document.getElementById(\"credentials-name\").value;\n        var clientId = document.getElementById(\"credentials_client_id\").value;\n        var clientSecret = document.getElementById(\"credentials_client_secret\").value;\n        var clientRefreshToken = document.getElementById(\"credentials_client_refresh_token\").value;\n\n        var settings = {};\n        settings.name = name;\n        settings.clientId = clientId;\n        settings.clientSecret = clientSecret;\n        settings.clientRefreshToken = clientRefreshToken;\n        methods.setCredentials( settings, function (error) {\n            if (error) {\n                setError(new Error(error.message));\n            }\n        });\n        // reset modal\n        document.getElementById(\"credentials-name\").value = \"\";\n        document.getElementById(\"credentials_client_id\").value = \"\";\n        document.getElementById(\"credentials_client_secret\").value = \"\";\n        document.getElementById(\"credentials_client_refresh_token\").value = \"\";\n        $(\"#authorizationModal\").modal('hide');\n        return false;\n    },\n    'click .cancel-credentials': function() {\n        // reset the form\n        var credentials = matsCollections.Credentials.findOne({});\n        document.getElementById(\"credentials-name\").value = credentials.name;\n        document.getElementById(\"credentials_client_id\").value = credentials.clientId;\n        document.getElementById(\"credentials_client_secret\").value = credentials.clientSecret;\n        document.getElementById(\"credentials_client_refresh_token\").value = credentials.refresh_token;\n    }\n});\n\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport {matsCollections} from 'meteor/randyp:mats-common';\n\nTemplate.plotGraphFunctions.helpers({\n    plotGraphFunction : function() {\n        if (Session.get(\"PlotGraphFunctions\") === undefined || Session.get(\"PlotGraphFunctions\").length == 0){\n            Session.set(\"PlotGraphFunctions\",matsCollections.PlotGraphFunctions.find({}).fetch());\n        }\n        return Session.get(\"PlotGraphFunctions\");\n    },\n    errorMessage: function() {\n        return Session.get(\"errorMessage\");\n    },\n    errorTypeIs: function(type) {\n        return Session.get(\"errorType\") === type;\n    }\n\n\n});\n\nvar resetError = function() {\n    errorMessage = \"\";\n    Session.set(\"errorMessage\",\"\");\n    Session.set(\"errorType\",\"\");\n    if (document.getElementById(\"errorMessage\")) {\n        document.getElementById(\"errorMessage\").style.display = \"none\";\n    }\n};\nvar setError = function(type,message) {\n    Session.set(\"errorMessage\", message);\n    Session.set(\"errorType\", type);\n\n    document.getElementById(\"errorMessage\").style.display = \"block\";\n};\n\nTemplate.plotGraphFunctions.events({\n    'click .plotGraphFunction': function(event) {\n        event.preventDefault();\n        resetError();\n        var plotTypeStr = document.getElementById('plotGraphFunction-selection').value;\n        var plotGraphFunctions = Session.get(\"PlotGraphFunctions\");\n        var plotGraphFunction = plotGraphFunctions.filter(function ( obj ) {\n            return obj.plotType === plotTypeStr;\n        })[0];\n\n        document.getElementById(\"plotType\").value=plotGraphFunction.plotType;\n        document.getElementById(\"dataFunction\").value=plotGraphFunction.dataFunction;\n        document.getElementById(\"graphFunction\").value=plotGraphFunction.graphFunction;\n        return false;\n    },\n    'click .plotGraphFunction-selection-add': function(event) {\n        event.preventDefault();\n        resetError();\n        var d = (Date.now() / 1000 | 0).toString();\n        var plotGraphFunctions = Session.get(\"PlotGraphFunctions\");\n        plotGraphFunctions.push({plotType:  d,\n                                graphFunction: \"graph...\",\n                                dataFunction: \"data...\"\n                               });\n        Session.set(\"PlotGraphFunctions\",plotGraphFunctions);\n        return false;\n    },\n    'click .plotGraphFunction-selection-remove': function(event) {\n        event.preventDefault();\n        resetError();\n        var plotTypeStr = document.getElementById('plotGraphFunction-selection').value;\n        var plotGraphFunctions = Session.get(\"PlotGraphFunctions\");\n        for( i=plotGraphFunctions.length-1; i>=0; i--) {\n            if( plotGraphFunctions[i].plotType == plotTypeStr) plotGraphFunctions.splice(i,1);\n        }\n        Session.set(\"PlotGraphFunctions\",plotGraphFunctions);\n        return false;\n    },\n    'click .apply-plotGraphFunction': function() {\n        event.preventDefault();\n        //\n        var sPlotGraphFunctions = Session.get(\"PlotGraphFunctions\");\n        var plotGraphFunctions = matsCollections.PlotGraphFunctions.find({}).fetch();\n        var sPlotTypes = _.pluck(sPlotGraphFunctions,'plotType');\n        var plotTypes =  _.pluck(plotGraphFunctions,'plotType');\n\n        // find any superfluous ones in plotTypes (this is a remove) and remove them from collection\n        var toRemoveFromCollection =  plotTypes.filter( function( el ) {\n            return sPlotTypes.indexOf( el ) < 0;\n        });\n        for (var ip=0; ip < toRemoveFromCollection.length; ip++) {\n            var p = toRemoveFromCollection[ip];\n            var plotType = matsCollections.PlotGraphFunctions.findOne({plotType:p});\n            var id = plotType._id;\n            matsCollections.PlotGraphFunctions.remove({_id:id});\n        }\n        // iterate all the ones in the session and overwrite/add them\n        for (var i=0; i < sPlotTypes.length; i++) {\n            var s = sPlotTypes[i];\n            var spgf = sPlotGraphFunctions.filter(function ( obj ) {\n                return obj.plotType === s;\n            })[0];\n\n            var pt = matsCollections.PlotGraphFunctions.findOne({plotType:s});\n            if (pt) {\n                // update\n                var ptid = pt._id;\n                delete spgf._id;\n                matsCollections.PlotGraphFunctions.update({_id:ptid},{$set:spgf});\n            } else {\n                //insert\n                matsCollections.PlotGraphFunctions.insert(spgf);\n            }\n        }\n        Session.set(\"PlotGraphFunctions\",matsCollections.PlotGraphFunctions.find({}).fetch());\n        $(\"#plotGraphFunctionsModal\").modal('hide');\n        return false;\n    },\n    'click .cancel-plotGraphFunction': function() {\n        event.preventDefault();\n\n        $(\"#plotGraphFunctionsModal\").modal('hide');\n        return false;\n    },\n    'change .plotType, change .dataFunction, change .graphFunction' :function() {\n        var plotTypeStr = document.getElementById('plotGraphFunction-selection').value;\n        var sPlotGraphFunctions = Session.get(\"PlotGraphFunctions\");\n        var spgf = sPlotGraphFunctions.filter(function ( obj ) {\n            return obj.plotType === plotTypeStr;\n        })[0];\n        var plotType = document.getElementById('plotType').value;\n        var dataFunction = document.getElementById('dataFunction').value;\n        var graphFunction = document.getElementById('graphFunction').value;\n        spgf.plotType = plotType;\n        spgf.dataFunction = dataFunction;\n        spgf.graphFunction = graphFunction;\n        Session.set(\"PlotGraphFunctions\",sPlotGraphFunctions);\n    }\n});\n\n\n","/*\n * Copyright (c) 2019 Colorado State University and Regents of the University of Colorado. All rights reserved.\n */\n\nimport { Meteor } from 'meteor/meteor';\nimport { Hooks } from 'meteor/differential:event-hooks';\nimport {matsTypes } from 'meteor/randyp:mats-common';\nimport {matsCollections } from 'meteor/randyp:mats-common';\nimport {matsMethods } from 'meteor/randyp:mats-common';\n\nAccounts.onLogin(function() {\n        matsMethods.getAuthorizations.call(function(error, result) {\n            if (error !== undefined) {\n                Session.set('roles', []);\n                setError(new Error(error.toLocaleString()));\n                return false;\n            }\n            authList = result;\n            for (var ai = 0; ai < authList.length; ai++){\n                var roles = authList[ai];\n                Session.set('roles', roles);\n                Session.set('signedIn', new Date().getTime());// force re-render after sign in success\n            }\n        });\n});\n\nHooks.onLoggedOut = function (userid){\n    Session.set('roles',[]);\n    var adminContainerDiv = document.getElementById('adminContainer');\n    var adminDiv = document.getElementById(\"administration\");\n    var userDiv = document.getElementById(\"administration\");\n    adminContainerDiv.style.display = \"none\";\n    adminDiv.style.display = \"none\";\n    userDiv.style.display = \"none\";\n};\n\nTemplate.administration.helpers({\n    adminChanged: function() {\n      return Session.get('adminChanged');\n    },\n    signedIn: function(){\n        var d = new Date(Session.get('signedIn'));\n        return (d.toDateString() + \" \" +d.toTimeString()).split(\"+\")[0];\n    },\n    showAdministratorDiv: function(){\n        var roles = Session.get('roles');\n        if ( roles !== undefined && roles.indexOf('administrator') > -1) {\n            return  \"block\";\n        } else {\n            return \"none\"\n        }\n    },\n    showAuthenticatedDiv: function(){\n        var roles = Session.get('roles');\n        if ( roles !== undefined && (roles.indexOf('user') > -1) || roles !== undefined && (roles.indexOf('administrator') > -1)) {\n            return  \"block\";\n        } else {\n            return \"none\"\n        }\n    },\n    showResetNow: function() {\n        var adminChanged = Session.get('adminChanged');\n        var settings = matsCollections.Settings.findOne({});\n        if (document.getElementById(\"ResetFromCode\") == null) {\n            return \"none\";\n        }\n        var resetEnabled =  settings === undefined ? false : document.getElementById(\"ResetFromCode\").checked;\n        var roles = Session.get('roles');\n        if (roles !== undefined && (roles.indexOf('administrator') > -1) && resetEnabled) {\n            return  \"block\";\n        } else {\n            return \"none\"\n        }\n    }\n\n});\n\nTemplate.administration.events({\n    'click .authorization': function () {\n        $(\"#authorizationModal\").modal('show');\n    },\n    'click .credentials': function () {\n        $(\"#mailCredentialsModal\").modal('show');\n    },\n    'click .database': function () {\n        $(\"#databasesModal\").modal('show');\n    },\n    'click .colors': function () {\n        $(\"#colorSchemeModal\").modal('show');\n    },\n    'click .settings': function () {\n        $(\"#settingsModal\").modal('show');\n    },\n    'click .curveParams': function () {\n        var params = matsCollections.CurveParams.find({}, {sort: {displayOrder:1}}).fetch();\n        Session.set('params',params);\n        $(\"#curveParamsModal\").modal('show');\n    },\n    'click .plotGraphFunctions': function () {\n        $(\"#plotGraphFunctionsModal\").modal('show');\n    },\n    'click .export': function () {\n        $(\"#exportModal\").modal('show');\n    },\n    'click .import': function () {\n        $(\"#importModal\").modal('show');\n    },\n    'click .adminControl': function() {\n        var adminContainerDiv = document.getElementById('adminContainer');\n        var adminDiv = document.getElementById(\"administration\");\n        var userDiv = document.getElementById(\"administration\");\n\n        if (adminContainerDiv.style.display == \"none\") {\n            adminContainerDiv.style.display = \"block\";\n            var roles = Session.get('roles');\n            if (roles !== undefined && Session.get('roles').indexOf('administrator') > -1) {\n                adminDiv.style.display = \"block\";\n                userDiv.style.display = \"block\";\n            } else if(roles !== undefined && Session.get('roles').indexOf('user') > -1) {\n                userDiv.style.display = \"block\";\n            } else {\n                adminContainerDiv.style.display = \"none\";\n                adminDiv.style.display = \"none\";\n                userDiv.style.display = \"none\";\n            }\n        } else {\n            adminContainerDiv.style.display = \"none\";\n            adminDiv.style.display = \"none\";\n            userDiv.style.display = \"none\";\n        }\n    },\n    'click .resetNow': function() {\n        $(\"#resetModal\").modal('show');\n        document.getElementById(\"ResetFromCode\").checked = false;\n\n        var settings = matsCollections.Settings.findOne({});\n        settings.resetFromCode = false;\n    }\n});"]}