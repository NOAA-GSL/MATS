<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <style>
        input {
            max-width: 100%;
        }
    </style>
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script type='text/javascript' src="js/jquery.min.js"></script>
    <script type='text/javascript' src="js/bootstrap.min.js"></script>
    <script type='text/javascript' src='js/angular.min.js'></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="js/html5shiv.min.js"></script>
        <script src="js/respond.min.js"></script>
        <![endif]-->
    <!-- Include all compiled plugins (below), or include individual files as needed -->

    <script type='text/javascript'> //<![CDATA[
    function TCtrl($scope, $http) {
    	$scope.domain = ".localhost";
    	$scope.proxy_prefix="";
        $scope.items = {};
        $scope.groups = [];  // used to maintain the order from the applist.json
        $http({method: "GET", url: "environment.json"}).
        // success callback
        success(function (env) {
            $scope.env=env.environment;
            $scope.proxy_prefix=env.proxy_prefix;
        }).
        // error callback
        error(function (data, status, headers, config) {
            $scope.env="unknown";
        });

        $http({method: "GET", url: "applist.json"}).
        // success callback
        success(function (data) {
            for (var di=0; di < data.length;di++) {
                if ($scope.items[data[di].group] == null) {
                    $scope.items[data[di].group] = [data[di]];
                    $scope.groups.push(data[di].group);
                } else {
                    ($scope.items[data[di].group]).push(data[di]);
                }
            }
	    }).
        // error callback
        error(function (data, status, headers, config) {
            alert("Could not read application list: /applist.json \n(should be automatically generated)");
        });
    }

    function changeApp(app){
        refParts = window.location.href.split("://");
        protocol = refParts[0];
	parts = refParts[1].split('/');
	parts[parts.length - 1] = app;
	newhome = protocol + "://" + parts.join('/');
        console.log ('new location: ' + newhome);
	window.location = newhome;
    }

    function changePort(port){
        refParts = window.location.href.split(":");
        if (refParts.length > 2){
            refParts[refParts.length -1] = port;
        } else {
            refParts[length] = ":" + port;
        }
        newHome = refParts.join(":");
        console.log ("changePort - newHome is: " + newHome);
        window.location = newHome;
    }
    </script>

</head>
<body style="background-image: url('img/bg.png')">
<div ng-app ng-controller="TCtrl">
    <div id='main' class="main container-fluid">
        <div id="navbar" style="display:block;height:100%;margin-bottom:0;margin-top:0;padding-top:0;padding-bottom:0;">
            <nav id="topnav" class="navbar navbar-default"
                 style="color:white; background: #006699;height:100%;margin-bottom:0;margin-top:0;padding-top:0;padding-bottom:0;">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                                data-target="#navbar-collapse-1" aria-expanded="false">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a style="color:white" class="navbar-brand" href="#">MATS</a>
                        <a style="color:white" class="navbar-brand" href="#"><i style="color:cyan" class="fa fa-home fa-lg" aria-hidden="true"></i></a>

                    </div>
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="navbar-collapse-1">
                        <ul class="nav navbar-nav">
                            <li><a href="http://www.doc.gov/"><span
                                    style="color:white">U.S. Department of Commerce</span></a></li>
                            <li><a href="http://www.noaa.gov/"><span style="color:white">National Oceanic and Atmospheric Administration</span></a>
                            </li>
                            <li><a href="http://www.research.noaa.gov/"><span
                                    style="color:white">NOAA Research</span></a>
                            </li>
                        </ul>
                    </div>
                    <!-- /.navbar-collapse -->
                </div>
                <!-- /.container-fluid -->
            </nav>
            <nav id="topnav1" class="navbar navbar-default"
                 style="color:white; background: #000066;height:100%;margin-bottom:0;margin-top:0;padding-top:0;padding-bottom:1.5%;">
                <div class="container-fluid">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                                data-target="#navbar-collapse-2" aria-expanded="false">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a style="margin-bottom:0;margin-top:0;padding: 0;" class="navbar-brand" href="#"><img
                                style="height:100%;margin-bottom:0;margin-top:0;padding-left:1em;padding-right:1em;padding-bottom:0;padding-top:0;"
                                src="img/noaa_transparent.gif" alt="NOAA"></a>
                    </div>
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="navbar-collapse-2">
                        <ul class="nav navbar-nav">
                            <li>
                                <div>
                                    <a href="http://esrl.noaa.gov/"><span style="color:white;font-size: large;">Earth System Research Laboratory</span></a><br>
                                    <a href="/"><span
                                            style="color:white;font-size: small;">Model Analysis Tool Suite (MATS)</span></a><br>
                                </div>
                            </li>
                        </ul>
                        <ul class="nav navbar-nav navbar-right">
                            <li><a style="font-size: small" href="/"><span style="color:white">Home</span></a></li>
                            <li><a style="font-size: small" href="mailto:mats.gsd@noaa.gov?Subject=Feedback from mats"><span
                                    style="color:white">Contact</span></a></li>
                        </ul>
                    </div>
                    <!-- /.navbar-collapse -->
                </div>
                <!-- /.container-fluid -->
            </nav>
            <div style="background-color: #dddddd;height:100%;margin-bottom:0;margin-top:0;padding-left:1em;padding-right: 0"
                 class="container-fluid">
                <ul class="nav navbar-nav navbar-left" style="min-height:10px;">
                    <div>
                        <li ng-repeat="group in groups">
                                <ul class="nav navbar-nav navbar-left">
                                    <h3>{{group}}:</h3>
                                    <li ng-repeat="item in items[group]">
                                        <a class="btn-sm btn-primary" style="font-size:medium;font-weight: bold; border-radius:10px;"href="{{proxy_prefix}}/{{item.app}}">{{item.title}}</a>
                                    </li>
                                </ul>
                        </li>
                    </div>
                </ul>
            </div>
        </div>
    </div>
    <!-- main -->
    <div id="footer" class="container-fluid">
        <nav id="footnav" class="navbar navbar-default" style="display: block;">
            <div class="container-fluid"
                 style="background-color: #dddddd;height:100%;margin-bottom:0;margin-top:0;padding-bottom:1em;padding-top:0;">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                            data-target="#navbar-collapse-3" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="navbar-collapse-3"
                     style="background-color: #dddddd;height:100%;margin-bottom:0;margin-top:0;padding-bottom:1em;padding-top:0;">
                    <ul class="nav navbar-nav"
                        style="background-color: #dddddd;height:100%;margin-bottom:0;margin-top:0;padding-bottom:0;padding-top:0;">
                        <li style="height:1em"><a href="http://www.noaa.gov/privacy.html" class="navbar-link">NOAA
                            Privacy Statement</a></li>
                        <li style="height:1em"><a href="http://esrl.noaa.gov/gsd/accessibility.html"
                                                  class="navbar-link">Web Accessibility Statement</a></li>
                        <li style="height:1em"><a href="http://www.noaa.gov/disclaimer.html" class="navbar-link">Disclaimer
                            for External Links</a></li>
                        <li style="height:1em"><a href="http://www.noaa.gov/" class="navbar-link">NOAA</a></li>
                        <li style="height:1em"><a href="http://www.commerce.gov/" class="navbar-link">U.S. Department of
                            Commerce</a></li>
                        <li style="height:1em"><a href="http://research.noaa.gov/" class="navbar-link">NOAA Research</a>
                        </li>
                        <li style="height:1em"><a href="http://esrl.noaa.gov/" class="navbar-link">Earth System Research
                            Laboratory</a></li>
                        <li style="height:1em"><a href="http://esrl.noaa.gov/gsd/" class="navbar-link">Global Systems
                            Division</a></li>
                        <li style="height:1em"><a href="mailto:webmaster.hiwpp@noaa.gov" class="navbar-link">Contact the
                            Webmaster</a></li>
                        <li style="height:1em"><a href="/" class="navbar-link"> env: {{env}} </a></li>
                    </ul>
                </div>
                <!-- /.navbar-collapse -->
            </div>
            <!-- /.container-fluid -->
        </nav>
    </div>
    <!-- footer -->
</div>
<!-- ng-app -->
</body>
</html>


